(window.webpackJsonp=window.webpackJsonp||[]).push([[1],[function(e,t,n){"use strict";e.exports=n(10)},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}n.d(t,"a",function(){return r})},function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}n.d(t,"a",function(){return i})},function(e,t,n){"use strict";function r(e){return(r=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}n.d(t,"a",function(){return r})},function(e,t,n){var r;window,r=function(){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=7)}([function(e,t,n){(function(e){var n,r,i,a,o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};window,a=function(){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==(void 0===e?"undefined":o(e))&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=1)}([function(e){e.exports={name:"datamodel",description:"Relational algebra compliant in-memory tabular data store",homepage:"https://github.com/chartshq/datamodel",version:"2.0.2",license:"MIT",main:"dist/datamodel.js",author:"Charts.com <support@charts.com>",keywords:["datamodel","data","relational","algebra","model","muze","fusioncharts","table","tabular","operation"],repository:{type:"git",url:"https://github.com/chartshq/datamodel.git"},contributors:[{name:"Akash Goswami",email:"akash@charts.com"},{name:"Subhash Haldar",email:"subhash@charts.com"},{name:"Rousan Ali",email:"rousan@charts.com",url:"https://rousan.io"},{name:"Ujjal Kumar Dutta",email:"ujjal@charts.com"}],dependencies:{"d3-dsv":"^1.0.8"},devDependencies:{"babel-cli":"6.26.0","babel-core":"^6.26.3","babel-eslint":"6.1.2","babel-loader":"^7.1.4","babel-plugin-transform-runtime":"^6.23.0","babel-preset-env":"^1.7.0","babel-preset-es2015":"^6.24.1","babel-preset-flow":"^6.23.0",chai:"3.5.0","cross-env":"^5.0.5",eslint:"3.19.0","eslint-config-airbnb":"15.1.0","eslint-plugin-import":"2.7.0","eslint-plugin-jsx-a11y":"5.1.1","eslint-plugin-react":"7.3.0","istanbul-instrumenter-loader":"^3.0.0",jsdoc:"3.5.5",json2yaml:"^1.1.0",karma:"1.7.1","karma-chai":"0.1.0","karma-chrome-launcher":"2.1.1","karma-coverage-istanbul-reporter":"^1.3.0","karma-mocha":"1.3.0","karma-spec-reporter":"0.0.31","karma-webpack":"2.0.3",marked:"^0.5.0",mocha:"3.4.2","mocha-webpack":"0.7.0","transform-runtime":"0.0.0",webpack:"^4.12.0","webpack-cli":"^3.0.7","webpack-dev-server":"^3.1.4"},scripts:{test:"npm run lint && npm run ut",ut:"karma start karma.conf.js",utd:"karma start --single-run false --browsers Chrome karma.conf.js ",build:"webpack --mode production",start:"webpack-dev-server --config webpack.config.dev.js --mode development --open",lint:"eslint ./src","lint-errors":"eslint --quiet ./src",docs:"rm -rf yaml && mkdir yaml && jsdoc -c jsdoc.conf.json"}}},function(e,t,n){var r=n(2);e.exports=r.default?r.default:r},function(e,t,n){"use strict";n.r(t);var r={};n.r(r),n.d(r,"DataFormat",function(){return u}),n.d(r,"DimensionSubtype",function(){return c}),n.d(r,"MeasureSubtype",function(){return l}),n.d(r,"FieldType",function(){return s}),n.d(r,"FilteringMode",function(){return f});var i={};n.r(i),n.d(i,"DSVArr",function(){return we}),n.d(i,"DSVStr",function(){return Ne}),n.d(i,"FlatJSON",function(){return je}),n.d(i,"Auto",function(){return Fe});var a={};n.r(a),n.d(a,"sum",function(){return Je}),n.d(a,"avg",function(){return Ze}),n.d(a,"min",function(){return et}),n.d(a,"max",function(){return tt}),n.d(a,"first",function(){return nt}),n.d(a,"last",function(){return rt}),n.d(a,"count",function(){return it}),n.d(a,"sd",function(){return at});var u={FLAT_JSON:"FlatJSON",DSV_STR:"DSVStr",DSV_ARR:"DSVArr",AUTO:"Auto"},c={CATEGORICAL:"categorical",TEMPORAL:"temporal",GEO:"geo"},l={DISCRETE:"discrete"},s={MEASURE:"measure",DIMENSION:"dimension"},f={NORMAL:"normal",INVERSE:"inverse",ALL:"all"};function h(e,t){e.length>0&&e.split(",").forEach(function(e){var n=e.split("-"),r=+n[0],i=+(n[1]||n[0]);if(i>=r)for(var a=r;a<=i;a+=1)t(a)})}var d=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),p=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._ref=t,this._rowDiff=n}return d(e,[{key:"sanitize",value:function(){return this._ref.sanitize()}},{key:"parsed",value:function(e){return this._ref.parsed(e)}},{key:"domain",value:function(){var e;return e=this.getData(),"dimension"===this._ref.fieldType&&this._ref.subType()!==c.TEMPORAL?[].concat(function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(new Set(e))):[Math.min.apply(null,e),Math.max.apply(null,e)]}},{key:"parse",value:function(e){return this._ref.parse(e)}},{key:"clone",value:function(e){return this._ref.clone(e)}},{key:"fieldName",value:function(){return this._ref.fieldName()}},{key:"type",value:function(){return this._ref.type()}},{key:"description",value:function(){return this._ref.description()}},{key:"subType",value:function(){return this._ref.subType()}},{key:"getMinDiff",value:function(){return this._ref.getMinDiff()}},{key:"unit",value:function(){return this._ref.unit()}},{key:"scale",value:function(){return this._ref.scale()}},{key:"defAggFn",value:function(){return this._ref.defAggFn()}},{key:"getData",value:function(){var e=this,t=[];return h(this._rowDiff,function(n){t.push(e._ref.data[n])}),t}},{key:"bins",value:function(){return this._ref.bins()}},{key:"name",get:function(){return this._ref.name}},{key:"schema",get:function(){return this._ref.schema}},{key:"data",get:function(){return this._ref.data}}]),e}();function y(e){return e instanceof Date?e:new Date(e)}function g(e){return e<10?"0"+e:e}function v(e){this.format=e,this.dtParams=void 0,this.nativeDate=void 0}RegExp.escape=function(e){return e.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")},v.TOKEN_PREFIX="%",v.DATETIME_PARAM_SEQUENCE={YEAR:0,MONTH:1,DAY:2,HOUR:3,MINUTE:4,SECOND:5,MILLISECOND:6},v.defaultNumberParser=function(e){return function(t){var n;return isFinite(n=parseInt(t,10))?n:e}},v.defaultRangeParser=function(e,t){return function(n){var r,i=void 0;if(!n)return t;var a=n.toLowerCase();for(i=0,r=e.length;i<r;i++)if(e[i].toLowerCase()===a)return i;return void 0===i?t:null}},v.getTokenDefinitions=function(){var e={short:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],long:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},t={short:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],long:["January","February","March","April","May","June","July","August","September","October","November","December"]};return{H:{name:"H",index:3,extract:function(){return"(\\d+)"},parser:v.defaultNumberParser(),formatter:function(e){return y(e).getHours().toString()}},l:{name:"l",index:3,extract:function(){return"(\\d+)"},parser:v.defaultNumberParser(),formatter:function(e){var t=y(e).getHours()%12;return(0===t?12:t).toString()}},p:{name:"p",index:3,extract:function(){return"(AM|PM)"},parser:function(e){return e?e.toLowerCase():null},formatter:function(e){return y(e).getHours()<12?"AM":"PM"}},P:{name:"P",index:3,extract:function(){return"(am|pm)"},parser:function(e){return e?e.toLowerCase():null},formatter:function(e){return y(e).getHours()<12?"am":"pm"}},M:{name:"M",index:4,extract:function(){return"(\\d+)"},parser:v.defaultNumberParser(),formatter:function(e){return g(y(e).getMinutes())}},S:{name:"S",index:5,extract:function(){return"(\\d+)"},parser:v.defaultNumberParser(),formatter:function(e){return g(y(e).getSeconds())}},K:{name:"K",index:6,extract:function(){return"(\\d+)"},parser:v.defaultNumberParser(),formatter:function(e){return y(e).getMilliseconds().toString()}},a:{name:"a",index:2,extract:function(){return"("+e.short.join("|")+")"},parser:v.defaultRangeParser(e.short),formatter:function(t){var n=y(t).getDay();return e.short[n].toString()}},A:{name:"A",index:2,extract:function(){return"("+e.long.join("|")+")"},parser:v.defaultRangeParser(e.long),formatter:function(t){var n=y(t).getDay();return e.long[n].toString()}},e:{name:"e",index:2,extract:function(){return"(\\d+)"},parser:v.defaultNumberParser(),formatter:function(e){return y(e).getDate().toString()}},d:{name:"d",index:2,extract:function(){return"(\\d+)"},parser:v.defaultNumberParser(),formatter:function(e){return g(y(e).getDate())}},b:{name:"b",index:1,extract:function(){return"("+t.short.join("|")+")"},parser:v.defaultRangeParser(t.short),formatter:function(e){var n=y(e).getMonth();return t.short[n].toString()}},B:{name:"B",index:1,extract:function(){return"("+t.long.join("|")+")"},parser:v.defaultNumberParser(t.long),formatter:function(e){var n=y(e).getMonth();return t.long[n].toString()}},m:{name:"m",index:1,extract:function(){return"(\\d+)"},parser:function(e){return v.defaultNumberParser()(e)-1},formatter:function(e){return g(y(e).getMonth()+1)}},y:{name:"y",index:0,extract:function(){return"(\\d{4})"},parser:function(e){if(e){var t=e.length;e=e.substring(t-2,t)}return v.defaultNumberParser()(e)},formatter:function(e){var t=y(e).getFullYear().toString(),n=void 0;return t&&(n=t.length,t=t.substring(n-2,n)),t}},Y:{name:"Y",index:0,extract:function(){return"(\\d{4})"},parser:v.defaultNumberParser(),formatter:function(e){return y(e).getFullYear().toString()}}}},v.getTokenFormalNames=function(){var e=v.getTokenDefinitions();return{HOUR:e.H,HOUR_12:e.l,AMPM_UPPERCASE:e.p,AMPM_LOWERCASE:e.P,MINUTE:e.M,SECOND:e.S,SHORT_DAY:e.a,LONG_DAY:e.A,DAY_OF_MONTH:e.e,DAY_OF_MONTH_CONSTANT_WIDTH:e.d,SHORT_MONTH:e.b,LONG_MONTH:e.B,MONTH_OF_YEAR:e.m,SHORT_YEAR:e.y,LONG_YEAR:e.Y}},v.tokenResolver=function(){var e=v.getTokenDefinitions(),t=function(){for(var e=0,t=void 0,n=void 0,r=arguments.length;e<r;e++)t=arguments.length<=e?void 0:arguments[e],(arguments.length<=e?void 0:arguments[e])&&(n=t);return n?n[0].parser(n[1]):null};return{YEAR:[e.y,e.Y,t],MONTH:[e.b,e.B,e.m,t],DAY:[e.a,e.A,e.e,e.d,t],HOUR:[e.H,e.l,e.p,e.P,function(e,t,n,r){var i=void 0,a=void 0,o=void 0,u=void 0;return t&&(a=n||r)?("pm"===a[0].parser(a[1])&&(o=!0),i=t):i=t||e,i?(u=i[0].parser(i[1]),o&&(u+=12),u):null}],MINUTE:[e.M,t],SECOND:[e.S,t]}},v.findTokens=function(e){for(var t=v.TOKEN_PREFIX,n=v.getTokenDefinitions(),r=Object.keys(n),i=[],a=void 0,o=void 0;(a=e.indexOf(t,a+1))>=0;)o=e[a+1],-1!==r.indexOf(o)&&i.push({index:a,token:o});return i},v.formatAs=function(e,t){var n,r=y(e),i=v.findTokens(t),a=v.getTokenDefinitions(),o=String(t),u=v.TOKEN_PREFIX,c=void 0,l=void 0,s=void 0;for(s=0,n=i.length;s<n;s++)l=a[c=i[s].token].formatter(r),o=o.replace(new RegExp(u+c,"g"),l);return o},v.prototype.parse=function(e,t){var n=v.tokenResolver(),r=this.extractTokenValue(e),i=v.DATETIME_PARAM_SEQUENCE,a=t&&t.noBreak,o=[],u=[],c=void 0,l=void 0,s=void 0,f=void 0,h=void 0,d=void 0,p=void 0,y=void 0;for(c in n)if({}.hasOwnProperty.call(n,c)){for(u.length=0,s=(l=n[c]).splice(l.length-1,1)[0],h=0,y=l.length;h<y;h++)void 0===(f=r[(d=l[h]).name])?u.push(null):u.push([d,f]);if((void 0===(p=s.apply(this,u))||null===p)&&!a)break;o[i[c]]=p}return o},v.prototype.extractTokenValue=function(e){var t,n=this.format,r=v.getTokenDefinitions(),i=v.TOKEN_PREFIX,a=v.findTokens(n),o={},u=void 0,c=void 0,l=void 0,s=void 0,f=void 0,h=void 0;f=String(n);var d=a.map(function(e){return e.token}),p=a.length;for(h=p-1;h>=0;h--)(l=a[h].index)+1!==f.length-1?(void 0===u&&(u=f.length),s=f.substring(l+2,u),f=f.substring(0,l+2)+RegExp.escape(s)+f.substring(u,f.length),u=l):u=l;for(h=0;h<p;h++)c=a[h],f=f.replace(i+c.token,r[c.token].extract());var y=e.match(new RegExp(f))||[];for(y.shift(),h=0,t=d.length;h<t;h++)o[d[h]]=y[h];return o},v.prototype.getNativeDate=function(e){if(e instanceof Date)return e;if(isFinite(e)&&this.format)return new Date(e);var t=this.dtParams=this.parse(e);return t.unshift(null),this.nativeDate=new(Function.prototype.bind.apply(Date,t)),this.nativeDate},v.prototype.formatAs=function(e,t){var n=void 0;return t?n=this.nativeDate=this.getNativeDate(t):(n=this.nativeDate)||(n=this.getNativeDate(t)),v.formatAs(n,e)};var m=function(e){var t=0;return function(){for(var n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];r.forEach(function(n,r){e[r]instanceof Array||(e[r]=Array.from({length:t})),e[r].push(n)}),t++}},b="function"==typeof Symbol&&"symbol"==o(Symbol.iterator)?function(e){return void 0===e?"undefined":o(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":void 0===e?"undefined":o(e)},_="object",x=Object.prototype.toString,w="[object Object]",k="[object Array]";function E(e,t){for(var n=t.length;n;){if(e===t[n])return n;n-=1}return-1}function S(e,t,n){return(void 0===e?"undefined":b(e))!==_&&(void 0===t?"undefined":b(t))!==_?null:(void 0===t?"undefined":b(t))!==_||null===t?e:((void 0===e?"undefined":b(e))!==_&&(e=t instanceof Array?[]:{}),function e(t,n,r,i,a){var o,u,c,l,s;if(a?(i.push(t),a.push(n)):(i=[t],a=[n]),n instanceof Array)for(o=0;o<n.length;o+=1){try{u=t[o],c=n[o]}catch(e){continue}(void 0===c?"undefined":b(c))!==_?r&&void 0===c||(t[o]=c):(null!==u&&(void 0===u?"undefined":b(u))===_||(u=t[o]=c instanceof Array?[]:{}),-1!==(s=E(c,a))?u=t[o]=i[s]:e(u,c,r,i,a))}else for(o in n){try{u=t[o],c=n[o]}catch(e){continue}if(null!==c&&(void 0===c?"undefined":b(c))===_)(l=x.call(c))===w?(null!==u&&(void 0===u?"undefined":b(u))===_||(u=t[o]={}),-1!==(s=E(c,a))?u=t[o]=i[s]:e(u,c,r,i,a)):l===k?(null!==u&&u instanceof Array||(u=t[o]=[]),-1!==(s=E(c,a))?u=t[o]=i[s]:e(u,c,r,i,a)):t[o]=c;else{if(r&&void 0===c)continue;t[o]=c}}return t}(e,t,n),e)}function O(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function M(e){return Array.isArray(e)}function C(e){return"function"==typeof e}var T=function(){return"id-"+(new Date).getTime()+Math.round(1e4*Math.random())},P=function(e,t){var n,r=void 0;if((n=function(e){return[].concat(O(new Set(e)))}(void 0!==t?e.map(function(e){return e[t]}):e)).length>1){r=Math.abs(n[1]-n[0]);for(var i=2,a=n.length;i<a;i++)r=Math.min(r,Math.abs(n[i]-n[i-1]))}else r=n[0];return r};function A(e,t){if(!M(e)||!M(t))return e===t;if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function N(e){return e}var j={data:{},createNamespace:function(e,t){var n=t||T();return this.data[n]={name:n,fields:e,fieldsObj:function(){var e={};return this.fields.forEach(function(t){e[t.name]=t}),e},getMeasure:function(){var e={};return this.fields.forEach(function(t){t.schema.type===s.MEASURE&&(e[t.name]=t)}),e},getDimension:function(){var e={};return this.fields.forEach(function(t){t.schema.type===s.DIMENSION&&(e[t.name]=t)}),e}},this.data[n]}},F=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),I=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Object.defineProperty(this,"_value",{enumerable:!1,configurable:!1,writable:!1,value:t}),this.field=n}return F(e,[{key:"toString",value:function(){return String(this.value)}},{key:"valueOf",value:function(){return this.value}},{key:"value",get:function(){return this._value}}]),e}();function D(e,t){var n=[],r=[];return e.fields.forEach(function(e){r.push(e.schema.name)}),t.fields.forEach(function(e){-1!==r.indexOf(e.schema.name)&&n.push(e.schema.name)}),n}var R="project",L="compose",z={CROSS:"cross",LEFTOUTER:"leftOuter",RIGHTOUTER:"rightOuter",NATURAL:"natural",FULLOUTER:"fullOuter"};function B(){return!0}function U(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:z.CROSS,a=[],o=[],u=n||B,c=e.getFieldspace(),l=t.getFieldspace(),s=c.name,f=l.name,d=c.name+"."+l.name,p=D(c,l);if(s===f)throw new Error("DataModels must have different alias names");return c.fields.forEach(function(e){var t=S({},e.schema);-1===p.indexOf(t.name)||r||(t.name=c.name+"."+t.name),a.push(t)}),l.fields.forEach(function(e){var t=S({},e.schema);-1!==p.indexOf(t.name)?r||(t.name=l.name+"."+t.name,a.push(t)):a.push(t)}),h(e._rowDiffset,function(e){var n=!1,d=void 0;h(t._rowDiffset,function(t){var h=[],y={};y[s]={},y[f]={},c.fields.forEach(function(t){h.push(t.data[e]),y[s][t.name]=t.data[e]}),l.fields.forEach(function(e){-1!==p.indexOf(e.schema.name)&&r||h.push(e.data[t]),y[f][e.name]=e.data[t]});var g=Le(y[s]),v=Le(y[f]);if(u(g,v)){var m={};h.forEach(function(e,t){m[a[t].name]=e}),n&&z.CROSS!==i?o[d]=m:(o.push(m),n=!0,d=e)}else if((i===z.LEFTOUTER||i===z.RIGHTOUTER)&&!n){var b={},_=c.fields.length-1;h.forEach(function(e,t){b[a[t].name]=t<=_?e:null}),n=!0,d=e,o.push(b)}})}),new Qe(o,a,{name:d})}function H(e,t){var n=""+e,r=""+t;return n<r?-1:n>r?1:0}function V(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:H;return e.length>1&&function e(t,n,r,i){if(r===n)return t;var a=n+Math.floor((r-n)/2);return e(t,n,a,i),e(t,a+1,r,i),function(e,t,n,r,i){for(var a=e,o=[],u=t;u<=r;u+=1)o[u]=a[u];for(var c=t,l=n+1,s=t;s<=r;s+=1)c>n?(a[s]=o[l],l+=1):l>r?(a[s]=o[c],c+=1):i(o[c],o[l])<=0?(a[s]=o[c],c+=1):(a[s]=o[l],l+=1)}(t,n,a,r,i),t}(e,0,e.length-1,t),e}function W(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function q(e,t,n){var r=void 0;switch(e){case s.MEASURE:case c.TEMPORAL:r="desc"===t?function(e,t){return t[n]-e[n]}:function(e,t){return e[n]-t[n]};break;default:r=function(e,r){var i=""+e[n],a=""+r[n];return i<a?"desc"===t?1:-1:i>a?"desc"===t?-1:1:0}}return r}function G(e,t){var n=new Map,r=[];return e.forEach(function(e){var i=e[t];n.has(i)?r[n.get(i)][1].push(e):(r.push([i,[e]]),n.set(i,r.length-1))}),r}function Y(e,t,n){var r={label:e[0]};return t.reduce(function(t,r,i){return t[r]=e[1].map(function(e){return e[n[i].index]}),t},r),r}function $(e,t){var n={},r=[],i=[],a=[],o=e.getFieldspace(),u=t.getFieldspace(),c=o.fieldsObj(),l=u.fieldsObj(),s=o.name+" union "+u.name;if(!A(e._colIdentifier.split(",").sort(),t._colIdentifier.split(",").sort()))return null;function f(e,t,r){h(e._rowDiffset,function(e){var o={},u="";i.forEach(function(n){var r=t[n].data[e];u+="-"+r,o[n]=r}),n[u]||(r&&a.push(o),n[u]=!0)})}return e._colIdentifier.split(",").forEach(function(e){var t=c[e];r.push(S({},t.schema)),i.push(t.schema.name)}),f(t,l,!1),f(e,c,!0),new Qe(a,r,{name:s})}function X(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function K(e){var t=!0,n=e[0]instanceof Array,r=e.reduce(function(e,r){return n?e.map(function(e,t){return e+r[t]}):(t=t&&null===r,e+r)},n?Array.apply(void 0,X(Array(e[0].length))).map(function(){return 0}):0);return t?null:r}function Q(e){var t=e[0]instanceof Array,n=e.length||1,r=K(e);return t?r.map(function(e){return e/n}):null===r?null:r/n}var J={sum:K,avg:Q,min:function(e){return e[0]instanceof Array?e.reduce(function(e,t){return e.map(function(e,n){return Math.min(e,t[n])})},Array.apply(void 0,X(Array(e[0].length))).map(function(){return 1/0})):e.every(function(e){return null===e})?null:Math.min.apply(Math,X(e))},max:function(e){return e[0]instanceof Array?e.reduce(function(e,t){return e.map(function(e,n){return Math.max(e,t[n])})},Array.apply(void 0,X(Array(e[0].length))).map(function(){return-1/0})):e.every(function(e){return null===e})?null:Math.max.apply(Math,X(e))},first:function(e){return e[0]},last:function(e){return e[e.length-1]},count:function(e){var t=e[0]instanceof Array,n=e.length;return t?Array.apply(void 0,X(Array(e[0].length))).map(function(){return n}):n},std:function(e){return Math.sqrt(function(e){var t=Q(e);return Q(e.map(function(e){return Math.pow(e-t,2)}))}(e))}},Z="sum",ee=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),te=function(){function e(){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.store=new Map,this.store.set("defReducer",K),Object.entries(J).forEach(function(e){t.store.set(e[0],e[1])})}return ee(e,[{key:"defaultReducer",value:function(){if(arguments.length){var e=arguments.length<=0?void 0:arguments[0];return"function"==typeof e?this.store.set("defReducer",e):"string"==typeof e&&-1!==Object.keys(J).indexOf(e)&&this.store.set("defReducer",J[e]),this}return this.store.get("defReducer")}},{key:"register",value:function(e,t){var n=this;return"string"==typeof e&&"function"==typeof t&&this.store.set(e,t),function(){n.__unregister(e)}}},{key:"__unregister",value:function(e){this.store.has(e)&&this.store.delete(e)}},{key:"resolve",value:function(e){return e instanceof Function?e:this.store.get(e)}}]),e}(),ne=function(){var e=null;return null===e&&(e=new te),e}(),re=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,i=!1,a=void 0;try{for(var o,u=e[Symbol.iterator]();!(r=(o=u.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){i=!0,a=e}finally{try{!r&&u.return&&u.return()}finally{if(i)throw a}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")};function ie(e,t){var n=D(e.getFieldspace(),t.getFieldspace());return function(e,t){var r=!0;return n.forEach(function(n){r=!(e[n].value!==t[n].value||!r)}),r}}function ae(e,t){var n={},r=[],i=[],a=[],o=e.getFieldspace(),u=t.getFieldspace(),c=o.fieldsObj(),l=u.fieldsObj(),s=o.name+" union "+u.name;if(!A(e._colIdentifier.split(",").sort(),t._colIdentifier.split(",").sort()))return null;function f(e,t){h(e._rowDiffset,function(e){var r={},o="";i.forEach(function(n){var i=t[n].data[e];o+="-"+i,r[n]=i}),n[o]||(a.push(r),n[o]=!0)})}return e._colIdentifier.split(",").forEach(function(e){var t=c[e];r.push(S({},t.schema)),i.push(t.schema.name)}),f(e,c),f(t,l),new ut(a,r,{name:s})}function oe(e,t,n){return U(e,t,n,!1,z.LEFTOUTER)}function ue(e,t,n){return U(t,e,n,!1,z.RIGHTOUTER)}var ce=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),le=function(){function e(t,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.name=t,this.data=n||[],this.schema=r,this.fieldDescription=r.description,this.fieldType=r.type,this.sanitize()}return ce(e,[{key:"sanitize",value:function(){var e=this;return this.data=this.data.map(function(t){return e.parsed(e.parse(t))}),this}},{key:"parsed",value:function(e){return e}},{key:"domain",value:function(){throw new Error("Not yet implemented!")}},{key:"subType",value:function(){return null}},{key:"parse",value:function(){throw new Error("Not yet implemented!")}},{key:"clone",value:function(e){e=e||S([],this.data);var t=S({},this.schema);return new this.constructor(this.name,e,t)}},{key:"fieldName",value:function(){return this.name}},{key:"type",value:function(){return this.fieldType}},{key:"description",value:function(){return this.fieldDescription}}]),e}(),se=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),fe=function(e){function t(e,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var i=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=(void 0===t?"undefined":o(t))&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n,r));return i.fieldUnit=r.unit,i.fieldScale=r.scale,i.fieldDefAggFn=r.defAggFn||Z,i.fieldNumberformat=r.numberFormat instanceof Function?r.numberFormat:N,i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":o(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,le),se(t,[{key:"domain",value:function(){return function(e){var t=Number.POSITIVE_INFINITY,n=Number.NEGATIVE_INFINITY;return e.forEach(function(e){e<t&&(t=e),e>n&&(n=e)}),[t,n]}(this.data)}},{key:"parse",value:function(e){return e=parseFloat(e,10),Number.isNaN(e)?null:e}},{key:"unit",value:function(){return this.fieldUnit}},{key:"scale",value:function(){return this.fieldScale}},{key:"numberFormat",value:function(){var e=this.fieldNumberformat;return function(t){return e(t)}}},{key:"defAggFn",value:function(){return this.fieldDefAggFn}}]),t}(),he=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),de=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=(void 0===t?"undefined":o(t))&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":o(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,le),he(t,[{key:"domain",value:function(){return e=this.data,[].concat(O(new Set(e)));var e}},{key:"parse",value:function(e){return(e=void 0===e||null===e?"":e.toString()).trim()}},{key:"parsed",value:function(e){this._unique=this._unique||{};var t=this._unique;return e in t?t[e]++:t[e]=1,e}}]),t}(),pe=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),ye=function(e){function t(e,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var i=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=(void 0===t?"undefined":o(t))&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n,r));return i.subtype=c.CATEGORICAL,i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":o(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,de),pe(t,[{key:"subType",value:function(){return this.subtype}}]),t}(),ge=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),ve=function(e){function t(e,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var i=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=(void 0===t?"undefined":o(t))&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n,r));return i.subtype=c.TEMPORAL,i.minDiff=P(i.data),i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":o(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,de),ge(t,[{key:"subType",value:function(){return this.subtype}},{key:"getMinDiff",value:function(){return this.minDiff}},{key:"parse",value:function(e){return this.schema.format?(this._dtf=this._dtf||new v(this.schema.format),this._dtf.getNativeDate(e).getTime()):+new Date(e)}}]),t}(),me=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),be=function(e){function t(e,n,r,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=(void 0===t?"undefined":o(t))&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n,r));return a.bin=i,a.subtype="discrete",a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":o(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,fe),me(t,[{key:"parse",value:function(e){return(e=void 0===e||null===e?"":e.toString()).trim()}},{key:"bins",value:function(){return this.bin}},{key:"subType",value:function(){return this.subtype}}]),t}(),_e=function(e,t,n){var r={};return n&&n.length||(n=t.map(function(e){return e.name})),n.forEach(function(e,t){r[e]=t}),t.map(function(t){return function(e,t){switch(t.type){case s.MEASURE:switch(t.subtype){case"discrete":return new be(t.name,e,t,t.bins);default:return new fe(t.name,e,t)}case s.DIMENSION:default:switch(t.subtype){case c.CATEGORICAL:return new ye(t.name,e,t);case c.TEMPORAL:return new ve(t.name,e,t);case c.GEO:default:return new ye(t.name,e,t)}}}(e[r[t.name]],t)})},xe={dataFormat:u.AUTO},we=function(e,t){t=Object.assign({},{firstRowHeader:!0},t);var n,r=[],i=m(r);return n=t.firstRowHeader?e.splice(0,1)[0]:[],e.forEach(function(e){return i.apply(void 0,function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(e))}),[n,r]},ke={},Ee={},Se=34,Oe=10,Me=13;function Ce(e){return new Function("d","return {"+e.map(function(e,t){return JSON.stringify(e)+": d["+t+"]"}).join(",")+"}")}var Te=function(e){var t=new RegExp('["'+e+"\n\r]"),n=e.charCodeAt(0);function r(e,t){var r,i=[],a=e.length,o=0,u=0,c=a<=0,l=!1;function s(){if(c)return Ee;if(l)return l=!1,ke;var t,r,i=o;if(e.charCodeAt(i)===Se){for(;o++<a&&e.charCodeAt(o)!==Se||e.charCodeAt(++o)===Se;);return(t=o)>=a?c=!0:(r=e.charCodeAt(o++))===Oe?l=!0:r===Me&&(l=!0,e.charCodeAt(o)===Oe&&++o),e.slice(i+1,t-1).replace(/""/g,'"')}for(;o<a;){if((r=e.charCodeAt(t=o++))===Oe)l=!0;else if(r===Me)l=!0,e.charCodeAt(o)===Oe&&++o;else if(r!==n)continue;return e.slice(i,t)}return c=!0,e.slice(i,a)}for(e.charCodeAt(a-1)===Oe&&--a,e.charCodeAt(a-1)===Me&&--a;(r=s())!==Ee;){for(var f=[];r!==ke&&r!==Ee;)f.push(r),r=s();t&&null==(f=t(f,u++))||i.push(f)}return i}function i(t){return t.map(a).join(e)}function a(e){return null==e?"":t.test(e+="")?'"'+e.replace(/"/g,'""')+'"':e}return{parse:function(e,t){var n,i,a=r(e,function(e,r){if(n)return n(e,r-1);i=e,n=t?function(e,t){var n=Ce(e);return function(r,i){return t(n(r),i,e)}}(e,t):Ce(e)});return a.columns=i||[],a},parseRows:r,format:function(t,n){return null==n&&(n=function(e){var t=Object.create(null),n=[];return e.forEach(function(e){for(var r in e)r in t||n.push(t[r]=r)}),n}(t)),[n.map(a).join(e)].concat(t.map(function(t){return n.map(function(e){return a(t[e])}).join(e)})).join("\n")},formatRows:function(e){return e.map(i).join("\n")}}},Pe=Te(","),Ae=(Pe.parse,Pe.parseRows,Pe.format,Pe.formatRows,Te("\t"));Ae.parse,Ae.parseRows,Ae.format,Ae.formatRows;var Ne=function(e,t){t=Object.assign({},{firstRowHeader:!0,fieldSeparator:","},t);var n=Te(t.fieldSeparator);return we(n.parseRows(e),t)},je=function(e){var t={},n=0,r=void 0,i=[],a=m(i);return e.forEach(function(e){var i=[];for(var o in e)o in t?r=t[o]:(t[o]=n++,r=n-1),i[r]=e[o];a.apply(void 0,i)}),[Object.keys(t),i]},Fe=function(e,t){var n=void 0;if(function(e){return"string"==typeof e}(e))n=Ne;else if(M(e)&&M(e[0]))n=we;else{if(!M(e)||0!==e.length&&!function(e){return e===Object(e)}(e[0]))throw new Error("Couldn't detect the data format");n=je}return n(e,t)},Ie=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,i=!1,a=void 0;try{for(var o,u=e[Symbol.iterator]();!(r=(o=u.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){i=!0,a=e}finally{try{!r&&u.return&&u.return()}finally{if(i)throw a}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")};function De(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function Re(e,t){var n={},r=!0,i=!1,a=void 0;try{for(var o,u=e[Symbol.iterator]();!(r=(o=u.next()).done);r=!0){var c=o.value;n[c.name]=new I(c.data[t],c)}}catch(e){i=!0,a=e}finally{try{!r&&u.return&&u.return()}finally{if(i)throw a}}return n}function Le(e){var t={};return Object.keys(e).forEach(function(n){t[n]=new I(e[n],n)}),t}var ze=function(e,t){var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=arguments[3],a=void 0;t!==L?(a={op:t,meta:r,criteria:i},e._derivation.push(a)):(a=[].concat(De(i)),e._derivation.length=0,(n=e._derivation).push.apply(n,De(a)))},Be=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.operation||"and",i=n.filterByMeasure||!1,a=[];return a=t.length?t.map(function(e){return function(e){var t=e.getData(),n=t.schema,r=e.getFieldsConfig(),a=e.getFieldspace().fieldsObj(),o=t.data,u=Object.values(r).reduce(function(e,t){return e[t.def.name]=a[t.def.name].domain(),e},{});return function(e){return!!o.length&&o.some(function(t){return n.every(function(n){if(!(n.name in e))return!0;var a=e[n.name].valueOf();if(i&&n.type===s.MEASURE)return a>=u[n.name][0]&&a<=u[n.name][1];if(n.type!==s.DIMENSION)return!0;var o=r[n.name].index;return t[o]===e[n.name].valueOf()})})}}(e)}):[function(){return!1}],"and"===r?e.clone(!1,!1).select(function(e){return a.every(function(t){return t(e)})},{saveChild:!1,mode:f.ALL}):e.clone(!1,!1).select(function(e){return a.some(function(t){return t(e)})},{mode:f.ALL,saveChild:!1})},Ue=function(e,t,n,r){var i=e.clone(r.saveChild),a=function(e,t,n,r){var i=[],a=-1,o=void 0,u=function(e){return n(Re(t,e),e)};return r.mode===f.INVERSE&&(u=function(e){return!n(Re(t,e))}),h(e,function(e){u(e)&&(-1!==a&&e===a+1?(o=i.length-1,i[o]=i[o].split("-")[0]+"-"+e):i.push(""+e),a=e)}),i.join(",")}(i._rowDiffset,i.getPartialFieldspace().fields,t,n);return i._rowDiffset=a,i.__calculateFieldspace().calculateFieldsConfig(),r.saveChild&&ze(i,"select",{config:n},t),i},He=function(e,t,n,r){var i=e.clone(n.saveChild),a=t;return n.mode===f.INVERSE&&(a=r.filter(function(e){return-1===t.indexOf(e)})),i._colIdentifier=a.join(","),i.__calculateFieldspace().calculateFieldsConfig(),n.saveChild&&ze(i,R,{projField:t,config:n,actualProjField:a},null),i},Ve=function(e,t,n,r){r=Object.assign(Object.assign({},xe),r);var a=i[r.dataFormat];if(!a||"function"!=typeof a)throw new Error("No converter function found for "+r.dataFormat+" format");var o=a(t,r),u=Ie(o,2),c=u[0],l=u[1],s=_e(l,n,c),f=j.createNamespace(s,r.name);return e._partialFieldspace=f,e._rowDiffset=l.length&&l[0].length?"0-"+(l[0].length-1):"",e._colIdentifier=n.map(function(e){return e.name}).join(),e},We=function(e,t){for(var n=0;n<e.length;++n)if(t===e[n].name)return{type:e[n].subtype||e[n].type,index:n};return null},qe=function(e,t){var n,r,i=function(e){var t=e._derivation,n=[],r=void 0;if(t&&1===t.length)switch(r=t[0].op){case"select":n=[t[0].criteria];break;case R:n=[t[0].meta.actualProjField];break;case"group":r="groupBy",n=[t[0].meta.groupByString.split(","),t[0].criteria]}return{operation:r,params:n}}(t),a=i.operation,o=i.params,u=e[0],c=e[1];return a&&o.length&&(u=(n=e[0])[a].apply(n,De(o).concat([{saveChild:!1}])),c=(r=e[1])[a].apply(r,De(o).concat([{saveChild:!1}]))),[u,c]},Ge=function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=i.nonTraversingModel,o=i.excludeModels||[];t!==a&&((!o.length||-1===o.indexOf(t))&&t.handlePropagation(n,r),t._children.forEach(function(t){var a=qe(n,t),o=Ie(a,2),u=o[0],c=o[1];e(t,[u,c],r,i)}))},Ye=function(e,t,n,r){var i=void 0,a=void 0,o=n.propagationNameSpace,u=n.propagateToSource,c=n.sourceId,l=r.propagateInterpolatedValues,s=[];if(null===e&&!0!==r.persistent)s=[{criteria:[]}];else{var f,h=Object.values(o.mutableActions);!1!==u&&(h=h.filter(function(e){return e.config.sourceId!==c}));var d=h.filter(function(e){return(r.filterFn||function(){return!0})(e,r)}).map(function(e){return e.config.criteria}),p=[];if(!1!==u){var y=Object.values(o.mutableActions);y.forEach(function(e){var t=e.config;!1===t.applyOnSource&&t.action===r.action&&t.sourceId!==c&&(p.push(e.model),(i=y.filter(function(t){return t!==e}).map(function(e){return e.config.criteria})).length&&s.push({criteria:i,models:e.model,path:function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return null!==t._parent&&(n.push(t),e(t._parent,n)),n}(e.model)}))})}i=(f=[]).concat.apply(f,[].concat(De(d),[e])).filter(function(e){return null!==e}),s.push({criteria:i,excludeModels:[].concat(p,De(r.excludeModels||[]))})}var g=t.model,v=Object.assign({sourceIdentifiers:e,propagationSourceId:c},r),m=t.groupByModel;l&&m&&(a=Be(m,i,{filterByMeasure:l}),Ge(m,a,v)),s.forEach(function(e){var t=Be(g,e.criteria),n=e.path;if(n){var r=function(e,t){for(var n=0,r=t.length;n<r;n++){var i=t[n];e=qe(e,i)}return e}(t,n.reverse());e.models.handlePropagation(r,v)}else Ge(g,t,v,{excludeModels:e.excludeModels,nonTraversingModel:l&&m})})},$e=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),Xe=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var t=void 0;this._parent=null,this._derivation=[],this._children=[];for(var n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];1===r.length&&(t=r[0])instanceof e?(this._colIdentifier=t._colIdentifier,this._rowDiffset=t._rowDiffset,this._parent=t,this._partialFieldspace=this._parent._partialFieldspace,this._fieldStoreName=T(),this.__calculateFieldspace().calculateFieldsConfig()):(Ve.apply(void 0,[this].concat(r)),this._fieldStoreName=this._partialFieldspace.name,this.__calculateFieldspace().calculateFieldsConfig(),this._propagationNameSpace={mutableActions:{},immutableActions:{}})}return $e(e,[{key:"getSchema",value:function(){return this.getFieldspace().fields.map(function(e){return e.schema})}},{key:"getName",value:function(){return this._fieldStoreName}},{key:"getFieldspace",value:function(){return this._fieldspace}},{key:"__calculateFieldspace",value:function(){return this._fieldspace=function(e,t,n){var r=Ie(e,2),i=r[0],a=r[1],o=a.length?a.split(","):[],u=t.fieldsObj(),c=o.map(function(e){return new p(u[e],i)});return j.createNamespace(c,n)}([this._rowDiffset,this._colIdentifier],this.getPartialFieldspace(),this._fieldStoreName),this}},{key:"getPartialFieldspace",value:function(){return this._partialFieldspace}},{key:"join",value:function(e,t){return U(this,e,t)}},{key:"naturalJoin",value:function(e){return U(this,e,ie(this,e),!0)}},{key:"union",value:function(e){return ae(this,e)}},{key:"difference",value:function(e){return $(this,e)}},{key:"select",value:function(e,t){var n={mode:f.NORMAL,saveChild:!0},r={saveChild:(t=Object.assign({},n,t)).saveChild};return t.mode===f.ALL?[Ue(this,e,{mode:f.NORMAL},r),Ue(this,e,{mode:f.INVERSE},r)]:Ue(this,e,t,r)}},{key:"isEmpty",value:function(){return!this._rowDiffset.length||!this._colIdentifier.length}},{key:"clone",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=void 0;if(!1===(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])){var n=this.getData({getAllFields:!0}),r=n.data,i=n.schema,a=r.map(function(e){var t={};return i.forEach(function(n,r){t[n.name]=e[r]}),t});t=new this.constructor(a,i)}else t=new this.constructor(this);return e&&this._children.push(t),t}},{key:"project",value:function(e,t){var n={mode:f.NORMAL,saveChild:!0};t=Object.assign({},n,t);var r=this.getFieldsConfig(),i=Object.keys(r),a=t.mode,o=e.reduce(function(e,t){return"RegExp"===t.constructor.name?e.push.apply(e,function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(i.filter(function(e){return-1!==e.search(t)}))):t in r&&e.push(t),e},[]);return o=Array.from(new Set(o)).map(function(e){return e.trim()}),a===f.ALL?[He(this,o,{mode:f.NORMAL,saveChild:t.saveChild},i),He(this,o,{mode:f.INVERSE,saveChild:t.saveChild},i)]:He(this,o,t,i)}},{key:"getFieldsConfig",value:function(){return this._fieldConfig}},{key:"calculateFieldsConfig",value:function(){return this._fieldConfig=this._fieldspace.fields.reduce(function(e,t,n){return e[t.name]={index:n,def:{name:t._ref.name,type:t._ref.fieldType,subtype:t._ref.subType()}},e},{}),this}},{key:"dispose",value:function(){this._parent.removeChild(this),this._parent=null}},{key:"removeChild",value:function(e){var t=this._children.findIndex(function(t){return t===e});-1===t||this._children.splice(t,1)}},{key:"addParent",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];ze(this,L,null,t),this._parent=e,e._children.push(this)}}]),e}(),Ke=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),Qe=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=(void 0===t?"undefined":o(t))&&"function"!=typeof t?e:t}(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(r)));return a._onPropagation=[],a._sortingDetails=[],a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":o(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,Xe),Ke(t,[{key:"getData",value:function(e){e=Object.assign({},{order:"row",formatter:null,withUid:!1,getAllFields:!1,sort:[]},e);var t=this.getPartialFieldspace().fields,n=function(e,t,n,r,i){var a={schema:[],data:[],uids:[]},o=(i=Object.assign({},{addUid:!1,columnWise:!1},i)).addUid,u=r&&r.length>0,c=[];if(n.split(",").forEach(function(t){for(var n=0;n<e.length;n+=1)if(e[n].name===t){c.push(e[n]);break}}),c.forEach(function(e){a.schema.push(e.schema)}),o&&a.schema.push({name:"uid",type:"identifier"}),h(t,function(e){a.data.push([]);var t=a.data.length-1;c.forEach(function(n,r){a.data[t][r+0]=n.data[e]}),o&&(a.data[t][c.length]=e),a.uids.push(e),u&&a.data[t].push(e)}),u&&function(e,t){for(var n=e.data,r=e.schema,i=void 0,a=void 0,o=void 0,u=t.length-1;u>=0;u--)i=t[u][0],a=t[u][1],(o=We(r,i))&&(C(a)?V(n,function(e,t){return a(e[o.index],t[o.index])}):M(a)?function(){var e=G(n,o.index),t=a[a.length-1],i=a.slice(0,a.length-1),u=i.map(function(e){return We(r,e)});e.forEach(function(e){e.push(Y(e,i,u))}),V(e,function(e,n){var r=e[2],i=n[2];return t(r,i)}),n.length=0,e.forEach(function(e){n.push.apply(n,W(e[1]))})}():(a="desc"===String(a).toLowerCase()?"desc":"asc",V(n,q(o.type,a,o.index))));e.uids=[],n.forEach(function(t){e.uids.push(t.pop())})}(a,r),i.columnWise){var l=Array.apply(void 0,W(Array(a.schema.length))).map(function(){return[]});a.data.forEach(function(e){e.forEach(function(e,t){l[t].push(e)})}),a.data=l}return a}.call(this,this.getPartialFieldspace().fields,this._rowDiffset,e.getAllFields?t.map(function(e){return e.name}).join():this._colIdentifier,e.sort,{columnWise:"column"===e.order,addUid:!!e.withUid});if(!e.formatter)return n;var r=e.formatter,i=n.data,a=n.schema,o=n.uids,u=a.map(function(e){return e.name}),c=Object.keys(r).reduce(function(e,t){var n=u.indexOf(t);return-1!==n&&e.push([n,r[t]]),e},[]);return"column"===e.order?c.forEach(function(e){var t=e[0],n=e[1];i[t].forEach(function(e,r){i[t][r]=n.call(void 0,e,o[r],a[t])})}):i.forEach(function(e,t){c.forEach(function(n){var r=n[0],i=n[1];e[r]=i.call(void 0,e[r],o[t],a[r])})}),n}},{key:"groupBy",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{saveChild:!0},r=""+e.join(),i=function(e,t,n,r){var i=function(e,t){var n=[],r=e.getPartialFieldspace(),i=r.getDimension(),a=r.getMeasure();return Object.entries(i).forEach(function(e){var r=re(e,1)[0];t&&t.length?-1!==t.indexOf(r)&&n.push(r):n.push(r)}),Object.entries(a).forEach(function(e){var r=re(e,1)[0];"discrete"===a[r].subType()&&(t&&t.length?-1!==t.indexOf(r)&&n.push(r):n.push(r))}),n}(e,t),a=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n={},r=t,i=e.getPartialFieldspace().getMeasure(),a=ne.defaultReducer();return"function"==typeof t&&(a=t),Object.entries(i).forEach(function(e){var o=re(e,1)[0];"string"==typeof t[o]&&(r[o]=ne.resolve(r[o])?ne.resolve(r[o]):a),"function"!=typeof t[o]&&(r[o]=void 0),n[o]=r[o]||ne.resolve(i[o].defAggFn())||a}),n}(e,n),o=e.getPartialFieldspace(),u=o.fieldsObj(),c=o.name,l=[],s=[],f=[],d={},p=[],y=void 0;Object.entries(u).forEach(function(e){var t=re(e,2),n=t[0],r=t[1];(-1!==i.indexOf(n)||a[n])&&(f.push(S({},r.schema)),"measure"===r.schema.type&&"discrete"!==r.schema.subtype?s.push(n):"dimension"!==r.schema.type&&"discrete"!==r.schema.subtype||l.push(n))});var g=0;return h(e._rowDiffset,function(e){var t="";l.forEach(function(n){t=t+"-"+u[n].data[e]}),void 0===d[t]?(d[t]=g,p.push({}),l.forEach(function(t){p[g][t]=u[t].data[e]}),s.forEach(function(t){p[g][t]=[u[t].data[e]]}),g+=1):s.forEach(function(n){p[d[t]][n].push(u[n].data[e])})}),p.forEach(function(e){var t=e;s.forEach(function(n){t[n]=a[n](e[n])})}),r?(r.__calculateFieldspace(),y=r):y=new ut(p,f,{name:c}),y}.apply(void 0,[this,e,t]);return n.saveChild&&(this._children.push(i),ze(i,"group",{fieldsArr:e,groupByString:r,defaultReducer:ne.defaultReducer()},t)),i._parent=this,i}},{key:"sort",value:function(e){var t=this.getData({order:"row",sort:e}),n=[t.schema.map(function(e){return e.name})].concat(t.data),r=new this.constructor(n,t.schema,{dataFormat:"DSVArr"});return r._sortingDetails=e,r}},{key:"addField",value:function(e){var t=e.fieldName();this._colIdentifier+=","+t;var n=this._partialFieldspace;if(n.fieldsObj()[e.fieldName()]){var r=n.fields.findIndex(function(e){return e.name===t});r>=0&&(n.fields[r]=e)}else n.fields.push(e);return this.__calculateFieldspace().calculateFieldsConfig(),this}},{key:"calculateVariable",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{saveChild:!0,replaceVar:!1},r=this.getFieldsConfig(),i=t.slice(0,t.length-1),a=t[t.length-1];if(r[e.name]&&!n.replaceVar)throw new Error(e.name+" field already exists in model.");var o=i.map(function(e){var t=r[e];if(!t)throw new Error(e+" is not a valid column name.");return t.index}),u=this.clone(),c=u.getFieldspace().fields,l=o.map(function(e){return c[e]}),s=[];h(u._rowDiffset,function(e){var t=l.map(function(t){return t.data[e]});s[e]=a.apply(void 0,function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(t).concat([e,c]))});var f=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,i=!1,a=void 0;try{for(var o,u=e[Symbol.iterator]();!(r=(o=u.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){i=!0,a=e}finally{try{!r&&u.return&&u.return()}finally{if(i)throw a}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}(_e([s],[e],[e.name]),1)[0];return u.addField(f),n.saveChild&&ze(u,"calculatedVariable",{config:e,fields:i},a),u}},{key:"propagate",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments[2],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=t.isMutableAction,a=t.sourceId,o=t.payload,u=function e(t){return t._parent?e(t._parent):t}(this),c=u._propagationNameSpace,l={groupByModel:function e(t){return t._parent&&t._derivation.find(function(e){return"group"!==e.op})?e(t._parent):t}(this),model:u};return n&&function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments[2],r=void 0,i=t.isMutableAction,a=t.criteria,o=t.action+"-"+t.sourceId;r=i?e.mutableActions:e.immutableActions,null===a?delete r[o]:r[o]={model:n,config:t}}(c,t,this),Ye(e,l,{propagationNameSpace:c,sourceId:a},Object.assign({payload:o},t)),i&&function(e,t,n){var r=e.immutableActions;for(var i in r){var a=r[i].config,o=n.config.sourceId,u=!n.propConfig.filterImmutableAction||n.propConfig.filterImmutableAction(a,n.config);if(a.sourceId!==o&&u){var c=a.criteria;Ye(c,t,{propagationNameSpace:e,propagateToSource:!1,sourceId:o},a)}}}(c,l,{config:t,propConfig:r}),this}},{key:"on",value:function(e,t){switch(e){case"propagation":this._onPropagation.push(t)}return this}},{key:"unsubscribe",value:function(e){switch(e){case"propagation":this._onPropagation=[]}return this}},{key:"handlePropagation",value:function(e,t){var n=this;this._onPropagation.forEach(function(r){return r.call(n,e,t)})}},{key:"bin",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.clone(),r=t.name||e+"_binned";if(this.getFieldsConfig()[r]||!this.getFieldsConfig()[e])throw new Error("Field "+e+" already exists.");var i=function(e,t,n){var r=n.buckets,i=n.binCount,a=n.binSize,o=n.start,u=[],c=[],l=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,i=!1,a=void 0;try{for(var o,u=e[Symbol.iterator]();!(r=(o=u.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){i=!0,a=e}finally{try{!r&&u.return&&u.return()}finally{if(i)throw a}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}(e.domain(),2),s=l[0],f=l[1],d=f,p=[],y=void 0,g=void 0,v=void 0,m=void 0;if(h(t,function(t){u.push({data:e.data[t],index:t})}),!r){var b=((f+=1)-s)%(a=a||(f-s)/i);for(i||0===b||(f=f+a-b),y=s+a;y<=f;)p.push(y),y+=a;r={start:o=o||s,stops:p}}g=0===r.start?0:r.start||s,r.stops.forEach(function(e){u.filter(function(t){return t.data>=g&&t.data<e}).forEach(function(t){c[t.index]=g+"-"+e}),g=e}),u.filter(function(e){return e.data<r.start}).forEach(function(e){c[e.index]=s+"-"+r.start}),u.filter(function(e){return e.data>=r.stops[r.stops.length-1]}).forEach(function(e){c[e.index]=r.stops[r.stops.length-1]+"-"+d}),r.stops.unshift(r.start),m=new Set(r.stops),s<r.start&&m.add(s),d>r.stops[r.stops.length-1]&&m.add(d),m=[].concat(function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(m)).sort(function(e,t){return e-t}),v=[];for(var _=1;_<m.length;_++)v.push((m[_-1]+m[_])/2);return{data:c,mid:v,range:m}}(this._partialFieldspace.fields.find(function(t){return t.name===e}),this._rowDiffset,t),a=_e([i.data],[{name:r,type:s.MEASURE,subtype:"discrete",bins:{range:i.range,mid:i.mid}}],[r])[0];return n.addField(a),ze(n,"bin",{measureName:e,config:t,binFieldName:r},null),n}}],[{key:"Reducers",get:function(){return ne}}]),t}(),Je=J.sum,Ze=J.avg,et=J.min,tt=J.max,nt=J.first,rt=J.last,it=J.count,at=J.std,ot=n(0);Qe.Operators={compose:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){var n=e,r=void 0,i=[],a=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{saveChild:!0}).saveChild;return t.forEach(function(e){n=e(n),i.push.apply(i,function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(n._derivation)),r||(r=n)}),a&&n.addParent(e,i),i.length>1&&r.dispose(),n}},bin:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){return e.bin.apply(e,t)}},select:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){return e.select.apply(e,t)}},project:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){return e.project.apply(e,t)}},groupBy:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){return e.groupBy.apply(e,t)}},calculateVariable:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){return e.calculateVariable.apply(e,t)}},sort:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){return e.sort.apply(e,t)}},crossProduct:U,difference:$,naturalJoin:function(e,t){return U(e,t,ie(e,t),!0)},leftOuterJoin:oe,rightOuterJoin:ue,fullOuterJoin:function(e,t,n){return ae(oe(e,t,n),ue(e,t,n))},union:ae},Qe.Stats=a,Object.assign(Qe,r),Qe.DateTimeFormatter=v,Qe.DataFormat=u,Qe.FilteringMode=f,Qe.version=ot.version;var ut=t.default=Qe}])},"object"==o(t)&&"object"==o(e)?e.exports=a():(r=[],void 0===(i="function"==typeof(n=a)?n.apply(t,r):n)||(e.exports=i))}).call(this,n(3)(e))},function(e,t,n){},function(e,t,n){(function(e){var n,r,i,a,o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};window,a=function(){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==(void 0===e?"undefined":o(e))&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){"use strict";n.r(t);var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function(e,t){e.forEach(function(e){void 0!==e&&null!==e&&(t[e]=1)})},a=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._set={},i(t,this._set)}return r(e,[{key:"append",value:function(e){return i(e,this._set),this}},{key:"toArray",value:function(){return Object.keys(this._set)}}],[{key:"difference",value:function(t,n){var r=void 0,i=[],a=t._set,o=n._set;for(r in a)({}).hasOwnProperty.call(a,r)&&(r in o||i.push(r));return new e(i)}}]),e}(),u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c="function"==typeof Symbol&&"symbol"==o(Symbol.iterator)?function(e){return void 0===e?"undefined":o(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":void 0===e?"undefined":o(e)};function l(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}var s=function(e){if("object"===(void 0===e?"undefined":c(e))){if(null===e)return!1;if("[object Object]"===Object.prototype.toString.call(e))return"Object"===(e.constructor.toString().match(/^function (.*)\(\)/m)||[])[1]}return!1},f="undefined"==typeof window?{}:window,h=f.requestAnimationFrame||f.webkitRequestAnimationFrame||f.mozRequestAnimationFrame||f.oRequestAnimationFrame||f.msRequestAnimationFrame||function(e){setTimeout(e,16)},d=function e(){return e.__lastTime===(new Date).getTime()?e.__lastTime.toString()+(e.__id++).toString():(e.__id=0,(e.__lastTime=(new Date).getTime()).toString()+(e.__id++).toString())},p=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=[];return t.forEach(function(e){return r.push.apply(r,l(e))}),r},y=function(e){var t=[],n=null;return e=e&&"function"==typeof e&&e||function(){},function(r){[].push.apply(t,r),null===n&&(n=h(function(){t.reduce(function(e,t){return t.__id in e.map?e:(e.map[t.__id]=1,e.unique.push(t),e)},{map:{},unique:[]}).unique.forEach(function(e){return e()}),e(),n=null,t.length=0}))}},g=function(e){return function(){for(var t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];return n.map(function(t){var n=e[t];return{name:n.name,qualifiedName:n.qualifiedName,value:n.seed}})}},v=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return{dependencies:t.slice(0,t.length-1),fn:t[t.length-1]}},m=function(e){var t=[],n={};return e.forEach(function(e){return n[e.qualifiedName]=-1}),function e(r){r.forEach(function(r){var i,a=void 0,o=void 0,u=void 0;(i=r.qualifiedName)in n?-1!==(a=n[i])&&a!==t.length-1&&(o=t.slice(0,a),u=t.slice(a+1),t=o.concat(u),u.forEach(function(e,t){return n[e.qualifiedName]=t+o.length}),n[i]=t.push(r)-1):n[i]=t.push(r)-1,e(r.outgoingEdges)})}(e),t},b={accumulate:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];var r={};return t.forEach(function(e){Object.assign(r,function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}({},e.name,e.value))}),r},identity:function(e){return e.value}},_=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.fn=t,this.dep=[]}return u(e,[{key:"addDependencies",value:function(){var e;return(e=this.dep).push.apply(e,arguments),this}},{key:"getDependencies",value:function(){return this.dep}},{key:"get",value:function(){return this.fn}}]),e}(),x=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function w(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}var k=function(){function e(t,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),r=r||{},this.name=t,this.qualifiedName=n,this.edges=[],this.outgoingEdges=[],this._seed=null,this.requireResolve=!0,this.retriever=r.retriever,this.history=[],this.resolver=null,this.electricEdges=[]}return x(e,[{key:"addDependencies",value:function(){for(var e,t=this,n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=this.edges).push.apply(e,r),r.forEach(function(e){return e.outgoingEdges.push(t)}),this}},{key:"addElectricNode",value:function(e){return this.electricEdges.push(e),this}},{key:"resolve",value:function(){return this.seed=this.resolver.apply(this,w(this.retrieveDetails())),this.history.push(this.seed),this.requireResolve=!1,this}},{key:"retrieveDetails",value:function(){return 0===this.edges.length?[{name:this.name,qualifiedName:this.qualifiedName,value:this.seed}]:this.retriever.apply(this,w(this.edges.map(function(e){return e.qualifiedName})))}},{key:"repeatHead",value:function(){var e=this.history,t=e[e.length-1];return 0===e.length?this:(e.push(t),this)}},{key:"flush",value:function(){var e=this.history,t=e[e.length-1];return e.length=0,e.push(t),this}},{key:"isRoot",value:function(){return null===this.name}},{key:"seed",get:function(){return this._seed},set:function(e){return this._seed=e,this.requireResolve=!0,this}}]),e}(),E=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),S=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.edges=[],this.listeners={nextFrame:[],currentFrame:[]}}return E(e,[{key:"addEdges",value:function(){var e;return(e=this.edges).push.apply(e,arguments),this}},{key:"regListenerForCurrFrame",value:function(e){var t=this,n=this.listeners.currentFrame,r=n.push(function(e,t){var n=function(){t.apply(void 0,l(e.map(function(e){var t=e.history,n=t.length-1;return[t[n-1<0?0:n-1],t[n]]})))};return n.__id=d(),n}(this.edges,e))-1;return function(){t.listeners.currentFrame=n.filter(function(e,t){return t!==r})}}},{key:"regListenerForNextFrame",value:function(e){var t=this,n=this.listeners.nextFrame,r=n.push(function(e,t){var n=function(){t.apply(void 0,l(e.map(function(e){var t=e.history;return[t[0],t[t.length-1]]})))};return n.__id=d(),n}(this.edges,e))-1;return function(){t.listeners.nextFrame=n.filter(function(e,t){return t!==r})}}},{key:"hasNextFrameListener",value:function(){return!!this.listeners.nextFrame.length}}]),e}(),O=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function M(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}var C=function(){function e(){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.qualifiedNodeMap={},this.retriever=g(this.qualifiedNodeMap),this.root=new k(null,null,{retriever:this.retriever}),this.root.resolver=b.accumulate,this._wholeSet=null,this._propagate=!0,this.propagationOverride={currentFrameListeners:!1,nextFrameListeners:!1},this._schedule=y(function(){var e=void 0;for(e in t.qualifiedNodeMap){if(!{}.hasOwnProperty.call(t.qualifiedNodeMap,e))return;t.qualifiedNodeMap[e].flush()}})}return O(e,[{key:"createNodesFrom",value:function(e,t){var n,r=void 0,i=this.qualifiedNodeMap,o=this.root,u=this.retriever;return function e(t,n,a){var c=void 0,l=void 0,f=void 0,h=void 0;for(c in t)if({}.hasOwnProperty.call(t,c))if(h=new k(c,l=""+n+c,{retriever:u}),i[l]=h,void 0!==(f=a.perv)?f.addDependencies(h):o.addDependencies(h),s(r=t[c]))e(r,""+n+c+".",{perv:h}),h.resolver=b.accumulate;else if(r instanceof _){var d;h.resolver=r.get(),(d=h).addDependencies.apply(d,M(r.getDependencies().map(function(e){return i[e]})))}else h.resolver=b.identity,h.seed=r}(e,null===t?"":t+".",{perv:i[t]}),this._wholeSet=new a(Object.keys(this.qualifiedNodeMap)),(n=this.constructor.getResolvedList(o).concat(o).filter(function(e){return e.requireResolve})).forEach(function(e){return e.resolve()}),m(n).forEach(function(e){return e.resolve()}),this}},{key:"getNodeValue",value:function(e){if(e in this.qualifiedNodeMap)return this.qualifiedNodeMap[e].seed}},{key:"createElectricNodeOf",value:function(e,t){var n,r=this,i=e.map(function(e){return r.qualifiedNodeMap[e]}),a=(n=new S).addEdges.apply(n,M(i));return i.forEach(function(e){return e.addElectricNode(a)}),a["regListenerFor"+t.type](t.fn)}},{key:"update",value:function(){for(var e=void 0,t=void 0,n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];var o=[],u=r.map(function(e){return e[0].seed=e[1],e[0]});return u.forEach(function(e){return e.resolve()}),o.push.apply(o,M(p.apply(void 0,M(u.map(function(e){return e.electricEdges}))))),e=new a(u.map(function(e){return e.qualifiedName})),this._propagate?((t=m(u)).forEach(function(e){return e.resolve()}),e.append(t.map(function(e){return e.qualifiedName})),o.push.apply(o,M(p.apply(void 0,M(t.map(function(e){return e.electricEdges}))))),this.__execUniqueElectricEdges(Array.from(new Set(o)),e),this):(this.__execUniqueElectricEdges(o),this._propagate=!0,this)}},{key:"__execUniqueElectricEdges",value:function(e,t){var n=this,r=[],i=[];return t&&a.difference(this._wholeSet,t).toArray().forEach(function(e){return n.qualifiedNodeMap[e].repeatHead()}),e.forEach(function(e){r.push.apply(r,M(e.listeners.currentFrame))}),e.forEach(function(e){i.push.apply(i,M(e.listeners.nextFrame))}),!this.propagationOverride.currentFrameListeners&&r.forEach(function(e){return e()}),!this.propagationOverride.nextFrameListeners&&this._schedule(i),this.resetPropagationOverride(),this}},{key:"resetNodeValue",value:function(){for(var e=this,t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=n.map(function(t){return e.qualifiedNodeMap[t]}).map(function(e){return[e,e.seed]});return this.update.apply(this,M(i)),this}},{key:"stopPropagation",value:function(){return this._propagate=!1,this}},{key:"resetPropagationOverride",value:function(){return this.propagationOverride.currentFrameListeners=!1,this.propagationOverride.nextFrameListeners=!1,this}},{key:"setPropagationOverride",value:function(e){return this.propagationOverride[e+"Listeners"]=!0,this}},{key:"getNodeFromQualifiedName",value:function(e){return this.qualifiedNodeMap[e]}}],[{key:"getResolvedList",value:function(e){var t=[];return function e(t,n,r){var i=void 0;t.edges.forEach(function(t){e(t,n,r)}),t.isRoot()||(i=t.qualifiedName)in r||(n.push(t),r[i]=1)}(e,t,{}),t}}]),e}(),T=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function P(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}var A=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._graph=new C,this._lockFlag=!1,this._reqQ=[]}return T(e,[{key:"append",value:function(){var e=void 0,t=void 0;return 1===arguments.length?(e=null,t=arguments.length<=0?void 0:arguments[0]):(e=arguments.length<=0?void 0:arguments[0],t=arguments.length<=1?void 0:arguments[1]),this._addPropInModel(e,t),this}},{key:"calculatedProp",value:function(){var e,t,n,r=void 0,i=void 0,a=void 0;return arguments.length>2?(i=arguments.length<=0?void 0:arguments[0],r=arguments.length<=1?void 0:arguments[1],a=arguments.length<=2?void 0:arguments[2]):(i=null,r=arguments.length<=0?void 0:arguments[0],a=arguments.length<=1?void 0:arguments[1]),t=a(v),(e=n=new _(t.fn)).addDependencies.apply(e,P(t.dependencies)),this._addPropInModel(i,function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}({},r,n)),this}},{key:"_addPropInModel",value:function(e,t){return this._graph.createNodesFrom(t,e),this}},{key:"on",value:function(e,t,n){var r,i=e instanceof Array?e:[e],a=this._graph.createElectricNodeOf(i,{type:"CurrFrame",fn:t});return n&&(r=this._graph.stopPropagation().setPropagationOverride("nextFrame")).resetNodeValue.apply(r,P(e)),a}},{key:"next",value:function(e,t,n){var r,i=e instanceof Array?e:[e],a=this._graph.createElectricNodeOf(i,{type:"NextFrame",fn:t});return n&&(r=this._graph.stopPropagation().setPropagationOverride("currentFrame")).resetNodeValue.apply(r,P(e)),a}},{key:"lock",value:function(){return this._lockFlag=!0,this._reqQ.length=0,this}},{key:"unlock",value:function(){return this._lockFlag=!1,this.setProp.apply(this,P(this._reqQ)),this._reqQ.length=0,this}},{key:"prop",value:function(){var e,t=void 0,n=void 0;switch(e=arguments.length){case 1:t=arguments.length<=0?void 0:arguments[0];break;case 2:t=arguments.length<=0?void 0:arguments[0],n=arguments.length<=1?void 0:arguments[1];break;default:return this}return 2===e?(this._lockFlag?this._reqQ.push([t,n]):this.setProp([t,n]),this):this._graph.getNodeValue(t)}},{key:"setProp",value:function(){for(var e,t=this,n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];return 0===r.length?this:((e=this._graph).update.apply(e,P(r.map(function(e){return[t._graph.getNodeFromQualifiedName(e[0]),e[1]]}))),this)}},{key:"graph",value:function(){return this._graph}},{key:"serialize",value:function(){return this._graph.root.seed}}],[{key:"create",value:function(t){return(new e)._addPropInModel(null,t)}}]),e}();t.default=A}])},"object"==o(t)&&"object"==o(e)?e.exports=a():(r=[],void 0===(i="function"==typeof(n=a)?n.apply(t,r):n)||(e.exports=i))}).call(this,n(3)(e))},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t,n){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=i(n(5)),o=i(n(8)),u=a.default.init("undefined"!=typeof window?window:void 0),c=u.win.document,l=u.win.Math,s=l.max,f=l.round,h={" ":"&nbsp;"},d=u.getDocumentSupport(),p=d.isWebKit?0:4.5;function y(e,t,n,i){var a,l,s,f,h=!1,p=y.store;if(void 0!==e&&"object"!==(void 0===e?"undefined":r(e))){for(l in(f=p[e])&&f.dispose(),p[e]=this,(i=i||{}).maxCacheLimit=isFinite(s=i.maxCacheLimit)?s:u.maxDefaultCacheLimit,"string"==typeof t&&(t=c.getElementById(t)),(a=u.createContainer(t)).innerHTML=u.testStrAvg,!d.isHeadLess&&(d.isIE||a.offsetHeight||a.offsetWidth)||(h=!0),a.innerHTML="",u.parentContainerStyle)a.style[l]=u.parentContainerStyle[l];this.id=e,this.parentContainer=a,this._containerManager=new o.default(a,h,10),this._showNoEllipses=!n,this._init=!0,this.style={},this.options=i,this.setStyle()}}y.textToLines=function(e){return(e=e||{}).text?"string"!=typeof e.text&&(e.text=e.text.toString()):e.text="",e.lines=e.text.split(/\n|<br\s*?\/?>/gi),e},y.store={},y.prototype._calCharDimWithCache=function(e,t,n){if(!this._init)return!1;var r,i,a,o,u,c,l=this.options.maxCacheLimit,s=this._container,f=this.style||{},d=this._advancedCache||(this._advancedCache={}),p=this._advancedCacheKey||(this._advancedCacheKey=[]),y=e+(f.fontSize||"")+(f.fontFamily||"")+(f.fontWeight||"")+(f.fontStyle||""),g=e+"init"+(f.fontSize||"")+(f.fontFamily||"")+(f.fontWeight||"")+(f.fontStyle||"");return h[e]&&(e=h[e]),t?void 0===(c=d[g])&&(s.innerHTML=e.repeat?e.repeat(n):Array(n+1).join(e),a=s.offsetWidth,s.innerHTML=e,o=s.offsetWidth,c=d[g]=(a-n*o)/(n+1),p.push(g),p.length>l&&delete d[p.shift()]):c=0,(u=d[y])?(i=u.split(","),{width:parseFloat(i[0],10),height:parseFloat(i[1],10)}):(s.innerHTML=e,r={height:s.offsetHeight,width:s.offsetWidth+c},d[y]=r.width+","+r.height,p.push(y),p.length>l&&delete d[p.shift()],r)},y.prototype._getWidthFn=function(){var e=this._containerObj,t=this._container,n=e.svgText;return n?function(e){var t,r;return n.textContent=e,(r=(t=n.getBBox()).width-p)<1&&(r=t.width),r}:function(e){return t.innerHTML=e,t.offsetWidth}},y.prototype.setStyle=function(e){return this._init?e!==this.style||this._styleNotSet?(e||(e=this.style),u.setLineHeight(e),this.style=e,this._containerObj=t=this._containerManager.get(e),this._containerObj?(this._container=t.node,this._context=t.context,this._cache=t.charCache,this._lineHeight=t.lineHeight,this._styleNotSet=!1):this._styleNotSet=!0,this):void 0:this;var t},y.prototype.useEllipsesOnOverflow=function(e){return this._init?(this._showNoEllipses=!e,this):this},y.prototype.getSmartText=function(e,t,n,r){if(!this._init)return!1;void 0===e||null===e?e="":"string"!=typeof e&&(e=e.toString());var i,a,o,l,f,h,p,y,g,v,m,b,_,x,w,k,E,S,O,M,C,T,P,A,N,j,F=!1,I=0,D=-1,R=-1,L=-1,z=0,B=0,U=[],H=0,V=this._showNoEllipses?"":"...",W=this._lineHeight,q=this._context,G=this._container,Y=this._containerObj,$=Y.ellipsesWidth,X=Y.dotWidth,K=[],Q=-1,J=-1,Z=-1,ee=function(e){for(var t=/\s/,n=(e=e.replace(/^\s\s*/,"")).length;t.test(e.charAt(n-=1)););return e.slice(0,n+1)},te={text:e,maxWidth:t,maxHeight:n,width:null,height:null,oriTextWidth:null,oriTextHeight:null,oriText:e,isTruncated:!1};if(b=this._getWidthFn(),n===W&&(n*=1.2),G){if(!d.isBrowserLess){if((F=u.xmlTagRegEx.test(e))?(G.innerHTML=e,te.oriTextWidth=p=G.offsetWidth,te.oriTextHeight=y=G.offsetHeight):(l=e.replace(u.ltgtRegex,function(e){return"&lt;"===e?"<":">"}),w=this.getOriSize(l,!0),te.oriTextWidth=p=w.width,te.oriTextHeight=y=w.height),y<=n&&p<=t)return te.width=te.oriTextWidth=p,te.height=te.oriTextHeight=y,te;if(W>n)return te.text="",te.width=te.oriTextWidth=0,te.height=te.oriTextHeight=0,te}if(e=ee(e).replace(/(\s+)/g," "),f=this._showNoEllipses?t:t-$,!F){if(i=(U=e.split("")).length,a="",o=[],m=U[0],this._cache[m]?O=this._cache[m].width:(O=b(m),this._cache[m]={width:O}),f>O)H=(o=e.substr(0,u.getNearestBreakIndex(e,f,this)).split("")).length;else{if(O>t)return te.text="",te.width=te.oriTextWidth=te.height=te.oriTextHeight=0,te;V&&((f=t-2*X)>O?V="..":(f=t-X)>O?V=".":(f=0,V=""))}if(z=b(o.join("")),B=this._lineHeight,r){for(;H<i;H+=1)if(m=o[H]=U[H],this._cache[m]?O=this._cache[m].width:(w&&(O=w.detailObj[m])||(O=b(m)),this._cache[m]={width:O}),(z+=O)>f&&(a||(a=o.slice(0,-1).join("")),z>t))return te.text=ee(a)+V,te.tooltext=te.oriText,te.width=b(te.text),te.height=this._lineHeight,te;return te.text=o.join(""),te.width=z,te.height=this._lineHeight,te}for(;H<i;H+=1)if(" "!==(m=o[H]=U[H])||q||(m="&nbsp;"),this._cache[m]?O=this._cache[m].width:(w&&(O=w.detailObj[m])||(O=b(m)),this._cache[m]={width:O}),(z+=O)>f&&(a||(a=o.slice(0,-1).join("")),z>t)){if(R=e.substr(0,o.length).lastIndexOf(" "),D=e.substr(0,o.length).lastIndexOf("-"),R>L?(z=b(o.slice(L+1,R).join("")),o.splice(R,1,"<br/>"),L=R,g=R+1):D>L?(D===o.length-1?(z=b(o.slice(L+1,R).join("")),o.splice(D,1,"<br/>-")):(z=b(o.slice(L+1,R).join("")),o.splice(D,1,"-<br/>")),L=D,g=D+1):(o.splice(o.length-1,1,"<br/>"+U[H]),Z=o.length-2,z=b(o.slice(L+1,Z+1).join("")),L=Z,g=H),(B+=this._lineHeight)>n)return te.text=ee(a)+V,te.tooltext=te.oriText,te.width=t,te.height=B-this._lineHeight,te;I=s(I,z),a=null,v=u.getNearestBreakIndex(e.substr(g),f,this),z=b(e.substr(g,v||1)),o.length<g+v&&(H=(o=o.concat(e.substr(o.length,g+v-o.length).split(""))).length-1)}return I=s(I,z),te.text=o.join(""),te.width=I,te.height=B,te}for(h=e.replace(u.spanAdditionRegx,"$2"),e=(e=e.replace(u.spanAdditionRegx,u.spanAdditionReplacer)).replace(/(<br\s*\/*\>)/g,'<span class="'+[u.classNameWithTag," ",u.classNameWithTagBR].join("")+'">$1</span>'),G.innerHTML=e,E=0,S=(k=G[d.childRetriverFn](d.childRetriverString)).length;E<S;E+=1)M=k[E],(d.noClassTesting||u.classNameReg.test(M.className))&&""!==(C=M.innerHTML)&&(" "===C?J=K.length:"-"===C&&(Q=K.length),K.push({spaceIdx:J,dashIdx:Q,elem:M}),U.push(C));if(H=0,i=K.length,(O=K[0].elem.offsetWidth)>t)return te.text="",te.width=te.oriTextWidth=te.height=te.oriTextHeight=0,te;if(O>f&&!this._showNoEllipses&&((f=t-2*X)>O?V="..":(f=t-X)>O?V=".":(f=0,V="")),_=K[0].elem.offsetLeft,x=K[0].elem.offsetTop,r)for(;H<i;H+=1)(T=(M=K[H].elem).offsetLeft-_+M.offsetWidth)>f&&(j||(j=H),G.offsetWidth>t&&(N=H,H=i));else for(;H<i;H+=1)P=(M=K[H].elem).offsetHeight+(M.offsetTop-x),A=null,(T=M.offsetLeft-_+M.offsetWidth)>f?(j||(j=H),T>t&&(R=K[H].spaceIdx,D=K[H].dashIdx,R>L?(K[R].elem.innerHTML="<br/>",L=R):D>L?(K[D].elem.innerHTML=D===H?"<br/>-":"-<br/>",L=D):M.parentNode.insertBefore(A=c.createElement("br"),M),M.offsetHeight+M.offsetTop>n?(A?A.parentNode.removeChild(A):L===D?K[D].elem.innerHTML="-":K[R].elem.innerHTML=" ",N=H,H=i):j=null)):P>n&&(N=H,H=i);if(N<i){for(te.isTruncated=!0,j=j||N,H=i-1;H>=j;H-=1)(M=K[H].elem).parentNode.removeChild(M);for(;H>=0;H-=1)M=K[H].elem,u.classNameBrReg.test(M.className)?M.parentNode.removeChild(M):H=0}return te.text=G.innerHTML.replace(u.spanRemovalRegx,"$1").replace(/\&amp\;/g,"&"),te.isTruncated&&(te.text+=V,te.tooltext=h),te.height=G.offsetHeight,te.width=G.offsetWidth,te}return te.error=new Error("Body Tag Missing!"),te},y.prototype.getOriSize=function(e,t){if(!this._init)return!1;var n,r,i,a,o,u=0,c=0,l={};if(!t)return this._calCharDimWithCache(e);for(a=0,o=(n=e.split("")).length;a<o;a++)r=n[a],i=this._calCharDimWithCache(r,!0,n.length),c=s(c,i.height),u+=i.width,l[r]=i.width;return{width:f(u),height:c,detailObj:l}},y.prototype.dispose=function(){return this._init?(this._containerManager&&this._containerManager.dispose&&this._containerManager.dispose(),delete this._container,delete this._context,delete this._cache,delete this._containerManager,delete this._containerObj,delete this.id,delete this.style,delete this.parentContainer,delete this._showNoEllipses,this):this},t.default=y,e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r={init:function(e){var t=e.document,n=e.navigator.userAgent,i=Math.ceil,a=Math.floor,o="fusioncharts-smartlabel-",u=o+"container",c=o+"tag";return r={win:e,containerClass:u,classNameWithTag:c,classNameWithTagBR:"fusioncharts-smartlabel-br",maxDefaultCacheLimit:500,classNameReg:new RegExp("\b"+c+"\b"),classNameBrReg:new RegExp("\bfusioncharts-smartlabel-br\b"),spanAdditionRegx:/(<[^<\>]+?\>)|(&(?:[a-z]+|#[0-9]+);|.)/gi,spanAdditionReplacer:'$1<span class="'+c+'">$2</span>',spanRemovalRegx:new RegExp("\\<span[^\\>]+?"+c+"[^\\>]{0,}\\>(.*?)\\<\\/span\\>","ig"),xmlTagRegEx:new RegExp("<[^>][^<]*[^>]+>","i"),ltgtRegex:/&lt;|&gt;/g,brReplaceRegex:/<br\/>/gi,testStrAvg:"WgI",parentContainerStyle:{position:"absolute",top:"-9999em",whiteSpace:"nowrap",padding:"0px",width:"1px",height:"1px",overflow:"hidden"},supportedStyle:{font:"font",fontFamily:"font-family","font-family":"font-family",fontWeight:"font-weight","font-weight":"font-weight",fontSize:"font-size","font-size":"font-size",lineHeight:"line-height","line-height":"line-height",fontStyle:"font-style","font-style":"font-style"},getDocumentSupport:function(){var r,i,a;return t.getElementsByClassName?(r="getElementsByClassName",i=c,a=!0):(r="getElementsByTagName",i="span",a=!1),{isIE:/msie/i.test(n)&&!e.opera,hasSVG:Boolean(e.SVGAngle||t.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1")),isHeadLess:new RegExp(" HtmlUnit").test(n),isWebKit:new RegExp(" AppleWebKit/").test(n),childRetriverFn:r,childRetriverString:i,noClassTesting:a}},createContainer:function(e){var n,r;if(e&&(e.offsetWidth||e.offsetHeight)){if(e.appendChild)return e.appendChild(r=t.createElement("DIV")),r.className=u,r.setAttribute("aria-hidden","true"),r.setAttribute("role","presentation"),r}else if((n=t.getElementsByTagName("body")[0])&&n.appendChild)return(r=t.createElement("DIV")).className=u,r.setAttribute("aria-hidden","true"),r.setAttribute("role","presentation"),n.appendChild(r),r},getNearestBreakIndex:function(e,t,n){if(!e||!e.length)return 0;var r,o=n._getWidthFn(),u=0,c=0,l=o(e),s=l/e.length;if(r=t,u=i(t/s),l<t)return e.length-1;for(u>e.length&&(r=t-l,u=e.length);r>0;){if(r=t-o(e.substr(0,u)),!(c=a(r/s)))return u;u+=c}for(;r<0;){if(r=t-o(e.substr(0,u)),!(c=a(r/s)))return u;u+=c}return u},setLineHeight:function(e){var t=e.fontSize=e.fontSize||"12px";return e.lineHeight=e.lineHeight||e["line-height"]||1.2*parseInt(t,10)+"px",e}}}};t.default=r,e.exports=t.default},function(e){e.exports={name:"muze",private:!0,version:"1.0.3",description:"Composable visualisation library for web with a data-first approach",homepage:"https://www.charts.com/muze",license:"MIT",author:"Charts.com <support@charts.com>",contributors:[{name:"Akash Ghoswami",email:"akash@charts.com"},{name:"Ranajit Banerjee",email:"ranajit.banerjee@charts.com",url:"https://github.com/ranajitbanerjee"},{name:"Mridul Meharia",email:"mridul@charts.com",url:"https://github.com/mridulmeh"},{name:"Subhash Haldar",email:"subhash@charts.com"},{name:"Sandeep Acharya",email:"sandeep@charts.com"},{name:"Rousan Ali",email:"rousan@charts.com",url:"https://rousan.io"},{name:"Ujjal Kumar Dutta",email:"ujjal@charts.com"}],main:"src/index.js",keywords:["muze","svg","vector","graphics","data-visualization","visualization","renderer","fusioncharts","relational","algebra","relation"],repository:{type:"git",url:"https://github.com/chartshq/muze"},dependencies:{"@chartshq/layout":"^1.0.0","@chartshq/muze-firebolt":"^1.0.0","@chartshq/muze-legend":"^1.0.0","muze-utils":"^1.0.0","@chartshq/visual-cell":"^1.0.0","@chartshq/visual-group":"^1.0.0","@chartshq/visual-layer":"^1.0.0","@chartshq/visual-unit":"^1.0.0"}}},function(e,t,n){var r=n(44);e.exports=r.default?r.default:r},function(e,t,n){"use strict";var r=function(e){return e&&e.__esModule?e:{default:e}}(n(5)).default.init("undefined"!=typeof window?window:void 0),i=r.win.document,a=r.getDocumentSupport(),o=a.isWebKit?0:4.5;function u(e,t,n){var r;n=(n=n>5?n:5)<20?n:20,this.maxContainers=n,this.first=null,this.last=null,this.containers={},this.length=0,this.rootNode=e,t&&((r=i.createElementNS("http://www.w3.org/2000/svg","svg")).setAttributeNS("http://www.w3.org/2000/svg","xlink","http://www.w3.org/1999/xlink"),r.setAttributeNS("http://www.w3.org/2000/svg","height","0"),r.setAttributeNS("http://www.w3.org/2000/svg","width","0"),this.svgRoot=r,this.rootNode.appendChild(r))}u.prototype.get=function(e){var t,n,i,a=this.containers,o=this.length,u=this.maxContainers,c="";for(n in r.supportedStyle)void 0!==e[n]&&(c+=r.supportedStyle[n]+":"+e[n]+";");if(!c)return!1;if(i=a[c])this.first!==i&&(i.prev&&(i.prev.next=i.next),i.next&&(i.next.prev=i.prev),i.next=this.first,i.next.prev=i,this.last===i&&(this.last=i.prev),i.prev=null,this.first=i);else{if(o>=u)for(t=o-u+1;t--;)this.removeContainer(this.last);i=this.addContainer(c)}return i},u.prototype.addContainer=function(e){var t,n;return this.containers[e]=n={next:null,prev:null,node:null,ellipsesWidth:0,lineHeight:0,dotWidth:0,avgCharWidth:4,keyStr:e,charCache:{}},n.next=this.first,n.next&&(n.next.prev=n),this.first=n,this.last||(this.last=n),this.length+=1,t=n.node=i.createElement("div"),this.rootNode.appendChild(t),a.isIE&&!a.hasSVG?t.style.setAttribute("cssText",e):t.setAttribute("style",e),t.setAttribute("aria-hidden","true"),t.setAttribute("role","presentation"),t.style.display="inline-block",t.innerHTML=r.testStrAvg,n.lineHeight=t.offsetHeight,n.avgCharWidth=t.offsetWidth/3,a.isBrowserLess?((t=n.svgText=i.createElementNS("http://www.w3.org/2000/svg","text")).setAttribute("style",e),this.svgRoot.appendChild(t),t.textContent=r.testStrAvg,n.lineHeight=t.getBBox().height,n.avgCharWidth=(t.getBBox().width-o)/3,t.textContent="...",n.ellipsesWidth=t.getBBox().width-o,t.textContent=".",n.dotWidth=t.getBBox().width-o):(t.innerHTML="...",n.ellipsesWidth=t.offsetWidth,t.innerHTML=".",n.dotWidth=t.offsetWidth,t.innerHTML=""),n},u.prototype.removeContainer=function(e){var t=e.keyStr;t&&this.length&&e&&(this.length-=1,e.prev&&(e.prev.next=e.next),e.next&&(e.next.prev=e.prev),this.first===e&&(this.first=e.next),this.last===e&&(this.last=e.prev),e.node.parentNode.removeChild(e.node),delete this.containers[t])},u.prototype.dispose=function(){var e,t=this.containers;for(e in this.maxContainers=null,t)this.removeContainer(t[e]);this.rootNode.parentNode.removeChild(this.rootNode),this.rootNode=null,this.first=null,this.last=null},e.exports=u},function(e,t,n){},,function(e,t,n){},,function(e,t,n){},,function(e,t,n){},,function(e,t,n){},,function(e,t,n){},,function(e,t,n){},,function(e,t,n){},,function(e,t,n){},,function(e,t,n){},,function(e,t,n){},,function(e,t,n){},,function(e,t,n){},,function(e,t,n){},,,function(e,t,n){},,function(e,t,n){},,function(e,t,n){},,function(e,t,n){"use strict";n.r(t);var r={};n.r(r),n.d(r,"scaleLinear",function(){return $t}),n.d(r,"scaleThreshold",function(){return ln}),n.d(r,"scaleLog",function(){return rn}),n.d(r,"scalePow",function(){return on}),n.d(r,"scaleIdentity",function(){return Xt}),n.d(r,"scaleOrdinal",function(){return q}),n.d(r,"scaleSequential",function(){return Mi}),n.d(r,"scaleQuantize",function(){return cn}),n.d(r,"scaleQuantile",function(){return un}),n.d(r,"schemeCategory10",function(){return ki}),n.d(r,"schemeCategory20",function(){return Si}),n.d(r,"schemeCategory20b",function(){return Ei}),n.d(r,"scaleBand",function(){return G}),n.d(r,"scaleTime",function(){return xi});var i={};n.r(i),n.d(i,"schemeDark2",function(){return Pi}),n.d(i,"schemePaired",function(){return Ai}),n.d(i,"schemeAccent",function(){return Ti}),n.d(i,"schemePastel1",function(){return Ni}),n.d(i,"schemePastel2",function(){return ji}),n.d(i,"schemeSet1",function(){return Fi}),n.d(i,"schemeSet2",function(){return Ii}),n.d(i,"schemeSet3",function(){return Di}),n.d(i,"schemeBlues",function(){return ca}),n.d(i,"schemeBrBG",function(){return Li}),n.d(i,"schemePRGn",function(){return Bi}),n.d(i,"schemePiYG",function(){return Hi}),n.d(i,"interpolateBrBG",function(){return zi}),n.d(i,"interpolatePRGn",function(){return Ui}),n.d(i,"interpolatePiYG",function(){return Vi}),n.d(i,"interpolatePuOr",function(){return Wi}),n.d(i,"interpolateRdBu",function(){return qi}),n.d(i,"interpolateRdGy",function(){return Gi}),n.d(i,"interpolateRdYlBu",function(){return Yi}),n.d(i,"interpolateRdYlGn",function(){return $i}),n.d(i,"interpolateSpectral",function(){return Xi}),n.d(i,"interpolateBlues",function(){return la}),n.d(i,"interpolateGreens",function(){return sa}),n.d(i,"interpolateGreys",function(){return fa}),n.d(i,"interpolateOranges",function(){return pa}),n.d(i,"interpolatePurples",function(){return ha}),n.d(i,"interpolateReds",function(){return da}),n.d(i,"interpolateViridis",function(){return xa}),n.d(i,"interpolateInferno",function(){return ka}),n.d(i,"interpolateMagma",function(){return wa}),n.d(i,"interpolatePlasma",function(){return Ea}),n.d(i,"interpolateWarm",function(){return ga}),n.d(i,"interpolateCool",function(){return va}),n.d(i,"interpolateCubehelixDefault",function(){return ya}),n.d(i,"interpolateBuGn",function(){return Ki}),n.d(i,"interpolateBuPu",function(){return Qi}),n.d(i,"interpolateGnBu",function(){return Ji}),n.d(i,"interpolateOrRd",function(){return Zi}),n.d(i,"interpolatePuBuGn",function(){return ea}),n.d(i,"interpolatePuBu",function(){return ta}),n.d(i,"interpolatePuRd",function(){return na}),n.d(i,"interpolateRdPu",function(){return ra}),n.d(i,"interpolateYlGnBu",function(){return ia}),n.d(i,"interpolateYlGn",function(){return aa}),n.d(i,"interpolateYlOrBr",function(){return oa}),n.d(i,"interpolateYlOrRd",function(){return ua}),n.d(i,"interpolateRainbow",function(){return ba});var a={};n.r(a),n.d(a,"DRAG",function(){return Af}),n.d(a,"HOVER",function(){return Nf}),n.d(a,"SELECTIONDRAG",function(){return jf}),n.d(a,"CLICK",function(){return Ff}),n.d(a,"LONGTOUCH",function(){return If}),n.d(a,"TOUCHDRAG",function(){return Df}),n.d(a,"ALL_ACTIONS",function(){return Rf});var o={};n.r(o),n.d(o,"SELECTION_NEW_ENTRY",function(){return Lf}),n.d(o,"SELECTION_NEW_EXIT",function(){return zf}),n.d(o,"SELECTION_NULL",function(){return Bf}),n.d(o,"SELECTION_OLD_ENTRY",function(){return Uf}),n.d(o,"SELECTION_OLD_EXIT",function(){return Hf});var u={};n.r(u),n.d(u,"BRUSH",function(){return ah}),n.d(u,"HIGHLIGHT",function(){return oh}),n.d(u,"TOOLTIP",function(){return uh}),n.d(u,"FILTER",function(){return ch}),n.d(u,"SELECT",function(){return lh});var c={};n.r(c),n.d(c,"HighlightBeahviour",function(){return fh}),n.d(c,"BrushBehaviour",function(){return dh}),n.d(c,"FilterBehaviour",function(){return yh}),n.d(c,"SelectBehaviour",function(){return bh});var l={};n.r(l),n.d(l,"SelectionBox",function(){return Fh}),n.d(l,"Tooltip",function(){return Jh}),n.d(l,"Crossline",function(){return nd}),n.d(l,"PlotHighlighter",function(){return ad}),n.d(l,"FilterEffect",function(){return ud}),n.d(l,"PersistentAnchors",function(){return hd}),n.d(l,"BrushAnchors",function(){return pd}),n.d(l,"AnchorEffect",function(){return sd});var s={};n.r(s),n.d(s,"BOTTOM",function(){return Ad}),n.d(s,"TOP",function(){return Nd}),n.d(s,"LEFT",function(){return jd}),n.d(s,"RIGHT",function(){return Fd}),n.d(s,"axisOrientationMap",function(){return Id});var f={};n.r(f),n.d(f,"LINEAR",function(){return Dd}),n.d(f,"BAND",function(){return Rd}),n.d(f,"TIME",function(){return Ld}),n.d(f,"COLOR",function(){return zd}),n.d(f,"ORDINAL",function(){return Bd}),n.d(f,"QUANTIZE",function(){return Ud}),n.d(f,"QUANTILE",function(){return Hd}),n.d(f,"LOG",function(){return Vd}),n.d(f,"POW",function(){return Wd}),n.d(f,"IDENTITY",function(){return qd}),n.d(f,"SEQUENTIAL",function(){return Gd}),n.d(f,"THRESHOLD",function(){return Yd});var h={};n.r(h),n.d(h,"CONFIG",function(){return Xv}),n.d(h,"DATA",function(){return Kv}),n.d(h,"AXES",function(){return Qv}),n.d(h,"LAYERDEFS",function(){return Jv}),n.d(h,"WIDTH",function(){return Zv}),n.d(h,"HEIGHT",function(){return em}),n.d(h,"MOUNT",function(){return tm}),n.d(h,"primaryXAxisUpdated",function(){return nm}),n.d(h,"primaryYAxisUpdated",function(){return rm}),n.d(h,"secondaryXAxisUpdated",function(){return im}),n.d(h,"secondaryYAxisUpdated",function(){return am}),n.d(h,"TRANSFORM",function(){return om}),n.d(h,"DATADOMAIN",function(){return um}),n.d(h,"LAYERSCREATED",function(){return cm}),n.d(h,"FIELDS",function(){return lm}),n.d(h,"TIMEDIFFS",function(){return sm}),n.d(h,"LAYERAXISINDEX",function(){return fm});var d={};n.r(d),n.d(d,"SelectBehaviour",function(){return mb});var p={};n.r(p),n.d(p,"SelectionBox",function(){return Lb}),n.d(p,"LegendHighlighter",function(){return Ub});var y={};n.r(y),n.d(y,"share",function(){return N_}),n.d(y,"html",function(){return j_});var g=function(e,t){return e<t?-1:e>t?1:e>=t?0:NaN},v=function(e){return 1===e.length&&(e=function(e){return function(t,n){return g(e(t),n)}}(e)),{left:function(t,n,r,i){for(null==r&&(r=0),null==i&&(i=t.length);r<i;){var a=r+i>>>1;e(t[a],n)<0?r=a+1:i=a}return r},right:function(t,n,r,i){for(null==r&&(r=0),null==i&&(i=t.length);r<i;){var a=r+i>>>1;e(t[a],n)>0?i=a:r=a+1}return r}}},m=v(g),b=m.right,_=(m.left,b),x=function(e){return null===e?NaN:+e},w=Array.prototype,k=(w.slice,w.map,function(e,t,n){e=+e,t=+t,n=(i=arguments.length)<2?(t=e,e=0,1):i<3?1:+n;for(var r=-1,i=0|Math.max(0,Math.ceil((t-e)/n)),a=new Array(i);++r<i;)a[r]=e+r*n;return a}),E=Math.sqrt(50),S=Math.sqrt(10),O=Math.sqrt(2),M=function(e,t,n){var r,i,a,o,u=-1;if(n=+n,(e=+e)===(t=+t)&&n>0)return[e];if((r=t<e)&&(i=e,e=t,t=i),0===(o=C(e,t,n))||!isFinite(o))return[];if(o>0)for(e=Math.ceil(e/o),t=Math.floor(t/o),a=new Array(i=Math.ceil(t-e+1));++u<i;)a[u]=(e+u)*o;else for(e=Math.floor(e*o),t=Math.ceil(t*o),a=new Array(i=Math.ceil(e-t+1));++u<i;)a[u]=(e-u)/o;return r&&a.reverse(),a};function C(e,t,n){var r=(t-e)/Math.max(0,n),i=Math.floor(Math.log(r)/Math.LN10),a=r/Math.pow(10,i);return i>=0?(a>=E?10:a>=S?5:a>=O?2:1)*Math.pow(10,i):-Math.pow(10,-i)/(a>=E?10:a>=S?5:a>=O?2:1)}function T(e,t,n){var r=Math.abs(t-e)/Math.max(0,n),i=Math.pow(10,Math.floor(Math.log(r)/Math.LN10)),a=r/i;return a>=E?i*=10:a>=S?i*=5:a>=O&&(i*=2),t<e?-i:i}var P=function(e,t,n){if(null==n&&(n=x),r=e.length){if((t=+t)<=0||r<2)return+n(e[0],0,e);if(t>=1)return+n(e[r-1],r-1,e);var r,i=(r-1)*t,a=Math.floor(i),o=+n(e[a],a,e);return o+(+n(e[a+1],a+1,e)-o)*(i-a)}};function A(){}function N(e,t){var n=new A;if(e instanceof A)e.each(function(e,t){n.set(t,e)});else if(Array.isArray(e)){var r,i=-1,a=e.length;if(null==t)for(;++i<a;)n.set(i,e[i]);else for(;++i<a;)n.set(t(r=e[i],i,e),r)}else if(e)for(var o in e)n.set(o,e[o]);return n}A.prototype=N.prototype={constructor:A,has:function(e){return"$"+e in this},get:function(e){return this["$"+e]},set:function(e,t){return this["$"+e]=t,this},remove:function(e){var t="$"+e;return t in this&&delete this[t]},clear:function(){for(var e in this)"$"===e[0]&&delete this[e]},keys:function(){var e=[];for(var t in this)"$"===t[0]&&e.push(t.slice(1));return e},values:function(){var e=[];for(var t in this)"$"===t[0]&&e.push(this[t]);return e},entries:function(){var e=[];for(var t in this)"$"===t[0]&&e.push({key:t.slice(1),value:this[t]});return e},size:function(){var e=0;for(var t in this)"$"===t[0]&&++e;return e},empty:function(){for(var e in this)if("$"===e[0])return!1;return!0},each:function(e){for(var t in this)"$"===t[0]&&e(this[t],t.slice(1),this)}};var j=N,F=function(){var e,t,n,r=[],i=[];function a(n,i,o,u){if(i>=r.length)return null!=e&&n.sort(e),null!=t?t(n):n;for(var c,l,s,f=-1,h=n.length,d=r[i++],p=j(),y=o();++f<h;)(s=p.get(c=d(l=n[f])+""))?s.push(l):p.set(c,[l]);return p.each(function(e,t){u(y,t,a(e,i,o,u))}),y}return n={object:function(e){return a(e,0,I,D)},map:function(e){return a(e,0,R,L)},entries:function(e){return function e(n,a){if(++a>r.length)return n;var o,u=i[a-1];return null!=t&&a>=r.length?o=n.entries():(o=[],n.each(function(t,n){o.push({key:n,values:e(t,a)})})),null!=u?o.sort(function(e,t){return u(e.key,t.key)}):o}(a(e,0,R,L),0)},key:function(e){return r.push(e),n},sortKeys:function(e){return i[r.length-1]=e,n},sortValues:function(t){return e=t,n},rollup:function(e){return t=e,n}}};function I(){return{}}function D(e,t,n){e[t]=n}function R(){return j()}function L(e,t,n){e.set(t,n)}function z(){}var B=j.prototype;z.prototype=function(e,t){var n=new z;if(e instanceof z)e.each(function(e){n.add(e)});else if(e){var r=-1,i=e.length;if(null==t)for(;++r<i;)n.add(e[r]);else for(;++r<i;)n.add(t(e[r],r,e))}return n}.prototype={constructor:z,has:B.has,add:function(e){return this["$"+(e+="")]=e,this},remove:B.remove,clear:B.clear,values:B.keys,size:B.size,empty:B.empty,each:B.each};var U=Array.prototype,H=U.map,V=U.slice,W={name:"implicit"};function q(e){var t=j(),n=[],r=W;function i(i){var a=i+"",o=t.get(a);if(!o){if(r!==W)return r;t.set(a,o=n.push(i))}return e[(o-1)%e.length]}return e=null==e?[]:V.call(e),i.domain=function(e){if(!arguments.length)return n.slice();n=[],t=j();for(var r,a,o=-1,u=e.length;++o<u;)t.has(a=(r=e[o])+"")||t.set(a,n.push(r));return i},i.range=function(t){return arguments.length?(e=V.call(t),i):e.slice()},i.unknown=function(e){return arguments.length?(r=e,i):r},i.copy=function(){return q().domain(n).range(e).unknown(r)},i}function G(){var e,t,n=q().unknown(void 0),r=n.domain,i=n.range,a=[0,1],o=!1,u=0,c=0,l=.5;function s(){var n=r().length,s=a[1]<a[0],f=a[s-0],h=a[1-s];e=(h-f)/Math.max(1,n-u+2*c),o&&(e=Math.floor(e)),f+=(h-f-e*(n-u))*l,t=e*(1-u),o&&(f=Math.round(f),t=Math.round(t));var d=k(n).map(function(t){return f+e*t});return i(s?d.reverse():d)}return delete n.unknown,n.domain=function(e){return arguments.length?(r(e),s()):r()},n.range=function(e){return arguments.length?(a=[+e[0],+e[1]],s()):a.slice()},n.rangeRound=function(e){return a=[+e[0],+e[1]],o=!0,s()},n.bandwidth=function(){return t},n.step=function(){return e},n.round=function(e){return arguments.length?(o=!!e,s()):o},n.padding=function(e){return arguments.length?(u=c=Math.max(0,Math.min(1,e)),s()):u},n.paddingInner=function(e){return arguments.length?(u=Math.max(0,Math.min(1,e)),s()):u},n.paddingOuter=function(e){return arguments.length?(c=Math.max(0,Math.min(1,e)),s()):c},n.align=function(e){return arguments.length?(l=Math.max(0,Math.min(1,e)),s()):l},n.copy=function(){return G().domain(r()).range(a).round(o).paddingInner(u).paddingOuter(c).align(l)},n.invertExtent=function(e,t){var n,o,u,c,l=+e,s=arguments.length>1?+t:l,f=a[1]<a[0],h=f?i().reverse():i(),d=h.length-1;if(h.push(h[d]+this.step()),s<l&&(u=l,l=s,s=u),!(s<h[0]||l>a[1-f]))return n=Math.max(0,Y(h,l)),c=Y(h,s),o=l===s?n:Math.max(n,c-1),f&&(u=n,n=d-o,o=d-u),n>o?void 0:r().slice(n,o+1)},n.invert=function(e,t){var n,o,u=+e,c=arguments.length>1?+t:u,l=a[1]<a[0],s=l?i().reverse():i(),f=s.length-1;if(c<u&&(o=u,u=c,c=o),!(c<s[0]||u>a[1-l]))return n=Math.max(0,Y(s,u,"left")),r()[l?f-n:n]},s()}function Y(e,t,n){for(var r,i,a,o=0,u=e.length-1;o<u;)i=Math.floor((o+u)/2),a=Math.abs(e[i]-t),Math.abs(e[i+1]-t)<=a?o=i+1:u=i;return n?(r=e[u])===t?u:r>t?0===u?u:"left"===n?u-1:u:u===e.length-1?u:"left"===n?u:u+1:u}var $=function(e,t,n){e.prototype=t.prototype=n,n.constructor=e};function X(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function K(){}var Q="\\s*([+-]?\\d+)\\s*",J="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",Z="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",ee=/^#([0-9a-f]{3})$/,te=/^#([0-9a-f]{6})$/,ne=new RegExp("^rgb\\("+[Q,Q,Q]+"\\)$"),re=new RegExp("^rgb\\("+[Z,Z,Z]+"\\)$"),ie=new RegExp("^rgba\\("+[Q,Q,Q,J]+"\\)$"),ae=new RegExp("^rgba\\("+[Z,Z,Z,J]+"\\)$"),oe=new RegExp("^hsl\\("+[J,Z,Z]+"\\)$"),ue=new RegExp("^hsla\\("+[J,Z,Z,J]+"\\)$"),ce={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function le(e){var t;return e=(e+"").trim().toLowerCase(),(t=ee.exec(e))?new pe((t=parseInt(t[1],16))>>8&15|t>>4&240,t>>4&15|240&t,(15&t)<<4|15&t,1):(t=te.exec(e))?se(parseInt(t[1],16)):(t=ne.exec(e))?new pe(t[1],t[2],t[3],1):(t=re.exec(e))?new pe(255*t[1]/100,255*t[2]/100,255*t[3]/100,1):(t=ie.exec(e))?fe(t[1],t[2],t[3],t[4]):(t=ae.exec(e))?fe(255*t[1]/100,255*t[2]/100,255*t[3]/100,t[4]):(t=oe.exec(e))?ge(t[1],t[2]/100,t[3]/100,1):(t=ue.exec(e))?ge(t[1],t[2]/100,t[3]/100,t[4]):ce.hasOwnProperty(e)?se(ce[e]):"transparent"===e?new pe(NaN,NaN,NaN,0):null}function se(e){return new pe(e>>16&255,e>>8&255,255&e,1)}function fe(e,t,n,r){return r<=0&&(e=t=n=NaN),new pe(e,t,n,r)}function he(e){return e instanceof K||(e=le(e)),e?new pe((e=e.rgb()).r,e.g,e.b,e.opacity):new pe}function de(e,t,n,r){return 1===arguments.length?he(e):new pe(e,t,n,null==r?1:r)}function pe(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}function ye(e){return((e=Math.max(0,Math.min(255,Math.round(e)||0)))<16?"0":"")+e.toString(16)}function ge(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new me(e,t,n,r)}function ve(e,t,n,r){return 1===arguments.length?function(e){if(e instanceof me)return new me(e.h,e.s,e.l,e.opacity);if(e instanceof K||(e=le(e)),!e)return new me;if(e instanceof me)return e;var t=(e=e.rgb()).r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),a=Math.max(t,n,r),o=NaN,u=a-i,c=(a+i)/2;return u?(o=t===a?(n-r)/u+6*(n<r):n===a?(r-t)/u+2:(t-n)/u+4,u/=c<.5?a+i:2-a-i,o*=60):u=c>0&&c<1?0:o,new me(o,u,c,e.opacity)}(e):new me(e,t,n,null==r?1:r)}function me(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}function be(e,t,n){return 255*(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)}$(K,le,{displayable:function(){return this.rgb().displayable()},hex:function(){return this.rgb().hex()},toString:function(){return this.rgb()+""}}),$(pe,de,X(K,{brighter:function(e){return e=null==e?1/.7:Math.pow(1/.7,e),new pe(this.r*e,this.g*e,this.b*e,this.opacity)},darker:function(e){return e=null==e?.7:Math.pow(.7,e),new pe(this.r*e,this.g*e,this.b*e,this.opacity)},rgb:function(){return this},displayable:function(){return 0<=this.r&&this.r<=255&&0<=this.g&&this.g<=255&&0<=this.b&&this.b<=255&&0<=this.opacity&&this.opacity<=1},hex:function(){return"#"+ye(this.r)+ye(this.g)+ye(this.b)},toString:function(){var e=this.opacity;return(1===(e=isNaN(e)?1:Math.max(0,Math.min(1,e)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===e?")":", "+e+")")}})),$(me,ve,X(K,{brighter:function(e){return e=null==e?1/.7:Math.pow(1/.7,e),new me(this.h,this.s,this.l*e,this.opacity)},darker:function(e){return e=null==e?.7:Math.pow(.7,e),new me(this.h,this.s,this.l*e,this.opacity)},rgb:function(){var e=this.h%360+360*(this.h<0),t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new pe(be(e>=240?e-240:e+120,i,r),be(e,i,r),be(e<120?e+240:e-120,i,r),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1}}));var _e=Math.PI/180,xe=180/Math.PI,we=.96422,ke=1,Ee=.82521,Se=4/29,Oe=6/29,Me=3*Oe*Oe,Ce=Oe*Oe*Oe;function Te(e){if(e instanceof Pe)return new Pe(e.l,e.a,e.b,e.opacity);if(e instanceof De){if(isNaN(e.h))return new Pe(e.l,0,0,e.opacity);var t=e.h*_e;return new Pe(e.l,Math.cos(t)*e.c,Math.sin(t)*e.c,e.opacity)}e instanceof pe||(e=he(e));var n,r,i=Fe(e.r),a=Fe(e.g),o=Fe(e.b),u=Ae((.2225045*i+.7168786*a+.0606169*o)/ke);return i===a&&a===o?n=r=u:(n=Ae((.4360747*i+.3850649*a+.1430804*o)/we),r=Ae((.0139322*i+.0971045*a+.7141733*o)/Ee)),new Pe(116*u-16,500*(n-u),200*(u-r),e.opacity)}function Pe(e,t,n,r){this.l=+e,this.a=+t,this.b=+n,this.opacity=+r}function Ae(e){return e>Ce?Math.pow(e,1/3):e/Me+Se}function Ne(e){return e>Oe?e*e*e:Me*(e-Se)}function je(e){return 255*(e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055)}function Fe(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function Ie(e,t,n,r){return 1===arguments.length?function(e){if(e instanceof De)return new De(e.h,e.c,e.l,e.opacity);if(e instanceof Pe||(e=Te(e)),0===e.a&&0===e.b)return new De(NaN,0,e.l,e.opacity);var t=Math.atan2(e.b,e.a)*xe;return new De(t<0?t+360:t,Math.sqrt(e.a*e.a+e.b*e.b),e.l,e.opacity)}(e):new De(e,t,n,null==r?1:r)}function De(e,t,n,r){this.h=+e,this.c=+t,this.l=+n,this.opacity=+r}$(Pe,function(e,t,n,r){return 1===arguments.length?Te(e):new Pe(e,t,n,null==r?1:r)},X(K,{brighter:function(e){return new Pe(this.l+18*(null==e?1:e),this.a,this.b,this.opacity)},darker:function(e){return new Pe(this.l-18*(null==e?1:e),this.a,this.b,this.opacity)},rgb:function(){var e=(this.l+16)/116,t=isNaN(this.a)?e:e+this.a/500,n=isNaN(this.b)?e:e-this.b/200;return new pe(je(3.1338561*(t=we*Ne(t))-1.6168667*(e=ke*Ne(e))-.4906146*(n=Ee*Ne(n))),je(-.9787684*t+1.9161415*e+.033454*n),je(.0719453*t-.2289914*e+1.4052427*n),this.opacity)}})),$(De,Ie,X(K,{brighter:function(e){return new De(this.h,this.c,this.l+18*(null==e?1:e),this.opacity)},darker:function(e){return new De(this.h,this.c,this.l-18*(null==e?1:e),this.opacity)},rgb:function(){return Te(this).rgb()}}));var Re=1.78277,Le=-.29227,ze=-.90649,Be=1.97294,Ue=Be*ze,He=Be*Re,Ve=Re*Le- -.14861*ze;function We(e,t,n,r){return 1===arguments.length?function(e){if(e instanceof qe)return new qe(e.h,e.s,e.l,e.opacity);e instanceof pe||(e=he(e));var t=e.r/255,n=e.g/255,r=e.b/255,i=(Ve*r+Ue*t-He*n)/(Ve+Ue-He),a=r-i,o=(Be*(n-i)-Le*a)/ze,u=Math.sqrt(o*o+a*a)/(Be*i*(1-i)),c=u?Math.atan2(o,a)*xe-120:NaN;return new qe(c<0?c+360:c,u,i,e.opacity)}(e):new qe(e,t,n,null==r?1:r)}function qe(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}function Ge(e,t,n,r,i){var a=e*e,o=a*e;return((1-3*e+3*a-o)*t+(4-6*a+3*o)*n+(1+3*e+3*a-3*o)*r+o*i)/6}$(qe,We,X(K,{brighter:function(e){return e=null==e?1/.7:Math.pow(1/.7,e),new qe(this.h,this.s,this.l*e,this.opacity)},darker:function(e){return e=null==e?.7:Math.pow(.7,e),new qe(this.h,this.s,this.l*e,this.opacity)},rgb:function(){var e=isNaN(this.h)?0:(this.h+120)*_e,t=+this.l,n=isNaN(this.s)?0:this.s*t*(1-t),r=Math.cos(e),i=Math.sin(e);return new pe(255*(t+n*(-.14861*r+Re*i)),255*(t+n*(Le*r+ze*i)),255*(t+n*(Be*r)),this.opacity)}}));var Ye=function(e){return function(){return e}};function $e(e,t){return function(n){return e+n*t}}function Xe(e,t){var n=t-e;return n?$e(e,n>180||n<-180?n-360*Math.round(n/360):n):Ye(isNaN(e)?t:e)}function Ke(e,t){var n=t-e;return n?$e(e,n):Ye(isNaN(e)?t:e)}var Qe=function e(t){var n=function(e){return 1==(e=+e)?Ke:function(t,n){return n-t?function(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}(t,n,e):Ye(isNaN(t)?n:t)}}(t);function r(e,t){var r=n((e=de(e)).r,(t=de(t)).r),i=n(e.g,t.g),a=n(e.b,t.b),o=Ke(e.opacity,t.opacity);return function(t){return e.r=r(t),e.g=i(t),e.b=a(t),e.opacity=o(t),e+""}}return r.gamma=e,r}(1);function Je(e){return function(t){var n,r,i=t.length,a=new Array(i),o=new Array(i),u=new Array(i);for(n=0;n<i;++n)r=de(t[n]),a[n]=r.r||0,o[n]=r.g||0,u[n]=r.b||0;return a=e(a),o=e(o),u=e(u),r.opacity=1,function(e){return r.r=a(e),r.g=o(e),r.b=u(e),r+""}}}var Ze,et,tt,nt,rt=Je(function(e){var t=e.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,t-1):Math.floor(n*t),i=e[r],a=e[r+1],o=r>0?e[r-1]:2*i-a,u=r<t-1?e[r+2]:2*a-i;return Ge((n-r/t)*t,o,i,a,u)}}),it=(Je(function(e){var t=e.length;return function(n){var r=Math.floor(((n%=1)<0?++n:n)*t),i=e[(r+t-1)%t],a=e[r%t],o=e[(r+1)%t],u=e[(r+2)%t];return Ge((n-r/t)*t,i,a,o,u)}}),function(e,t){return t-=e=+e,function(n){return e+t*n}}),at="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ot=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,ut=new RegExp(ot.source,"g"),ct=function(e,t){var n,r,i,a=ot.lastIndex=ut.lastIndex=0,o=-1,u=[],c=[];for(e+="",t+="";(n=ot.exec(e))&&(r=ut.exec(t));)(i=r.index)>a&&(i=t.slice(a,i),u[o]?u[o]+=i:u[++o]=i),(n=n[0])===(r=r[0])?u[o]?u[o]+=r:u[++o]=r:(u[++o]=null,c.push({i:o,x:it(n,r)})),a=ut.lastIndex;return a<t.length&&(i=t.slice(a),u[o]?u[o]+=i:u[++o]=i),u.length<2?c[0]?function(e){return function(t){return e(t)+""}}(c[0].x):function(e){return function(){return e}}(t):(t=c.length,function(e){for(var n,r=0;r<t;++r)u[(n=c[r]).i]=n.x(e);return u.join("")})},lt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},st=function e(t,n){var r,i=void 0===n?"undefined":lt(n);return null==n||"boolean"===i?Ye(n):("number"===i?it:"string"===i?(r=le(n))?(n=r,Qe):ct:n instanceof le?Qe:n instanceof Date?function(e,t){var n=new Date;return t-=e=+e,function(r){return n.setTime(e+t*r),n}}:Array.isArray(n)?function(t,n){var r,i=n?n.length:0,a=t?Math.min(i,t.length):0,o=new Array(a),u=new Array(i);for(r=0;r<a;++r)o[r]=e(t[r],n[r]);for(;r<i;++r)u[r]=n[r];return function(e){for(r=0;r<a;++r)u[r]=o[r](e);return u}}:"function"!=typeof n.valueOf&&"function"!=typeof n.toString||isNaN(n)?function(t,n){var r,i={},a={};for(r in null!==t&&"object"===(void 0===t?"undefined":at(t))||(t={}),null!==n&&"object"===(void 0===n?"undefined":at(n))||(n={}),n)r in t?i[r]=e(t[r],n[r]):a[r]=n[r];return function(e){for(r in i)a[r]=i[r](e);return a}}:it)(t,n)},ft=function(e,t){return t-=e=+e,function(n){return Math.round(e+t*n)}},ht=180/Math.PI,dt={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1},pt=function(e,t,n,r,i,a){var o,u,c;return(o=Math.sqrt(e*e+t*t))&&(e/=o,t/=o),(c=e*n+t*r)&&(n-=e*c,r-=t*c),(u=Math.sqrt(n*n+r*r))&&(n/=u,r/=u,c/=u),e*r<t*n&&(e=-e,t=-t,c=-c,o=-o),{translateX:i,translateY:a,rotate:Math.atan2(t,e)*ht,skewX:Math.atan(c)*ht,scaleX:o,scaleY:u}};function yt(e,t,n,r){function i(e){return e.length?e.pop()+" ":""}return function(a,o){var u=[],c=[];return a=e(a),o=e(o),function(e,r,i,a,o,u){if(e!==i||r!==a){var c=o.push("translate(",null,t,null,n);u.push({i:c-4,x:it(e,i)},{i:c-2,x:it(r,a)})}else(i||a)&&o.push("translate("+i+t+a+n)}(a.translateX,a.translateY,o.translateX,o.translateY,u,c),function(e,t,n,a){e!==t?(e-t>180?t+=360:t-e>180&&(e+=360),a.push({i:n.push(i(n)+"rotate(",null,r)-2,x:it(e,t)})):t&&n.push(i(n)+"rotate("+t+r)}(a.rotate,o.rotate,u,c),function(e,t,n,a){e!==t?a.push({i:n.push(i(n)+"skewX(",null,r)-2,x:it(e,t)}):t&&n.push(i(n)+"skewX("+t+r)}(a.skewX,o.skewX,u,c),function(e,t,n,r,a,o){if(e!==n||t!==r){var u=a.push(i(a)+"scale(",null,",",null,")");o.push({i:u-4,x:it(e,n)},{i:u-2,x:it(t,r)})}else 1===n&&1===r||a.push(i(a)+"scale("+n+","+r+")")}(a.scaleX,a.scaleY,o.scaleX,o.scaleY,u,c),a=o=null,function(e){for(var t,n=-1,r=c.length;++n<r;)u[(t=c[n]).i]=t.x(e);return u.join("")}}}var gt=yt(function(e){return"none"===e?dt:(Ze||(Ze=document.createElement("DIV"),et=document.documentElement,tt=document.defaultView),Ze.style.transform=e,e=tt.getComputedStyle(et.appendChild(Ze),null).getPropertyValue("transform"),et.removeChild(Ze),e=e.slice(7,-1).split(","),pt(+e[0],+e[1],+e[2],+e[3],+e[4],+e[5]))},"px, ","px)","deg)"),vt=yt(function(e){return null==e?dt:(nt||(nt=document.createElementNS("http://www.w3.org/2000/svg","g")),nt.setAttribute("transform",e),(e=nt.transform.baseVal.consolidate())?(e=e.matrix,pt(e.a,e.b,e.c,e.d,e.e,e.f)):dt)},", ",")",")");function mt(e){return function(t,n){var r=e((t=ve(t)).h,(n=ve(n)).h),i=Ke(t.s,n.s),a=Ke(t.l,n.l),o=Ke(t.opacity,n.opacity);return function(e){return t.h=r(e),t.s=i(e),t.l=a(e),t.opacity=o(e),t+""}}}Math.SQRT2,mt(Xe);var bt=mt(Ke);function _t(e){return function(t,n){var r=e((t=Ie(t)).h,(n=Ie(n)).h),i=Ke(t.c,n.c),a=Ke(t.l,n.l),o=Ke(t.opacity,n.opacity);return function(e){return t.h=r(e),t.c=i(e),t.l=a(e),t.opacity=o(e),t+""}}}function xt(e){return function t(n){function r(t,r){var i=e((t=We(t)).h,(r=We(r)).h),a=Ke(t.s,r.s),o=Ke(t.l,r.l),u=Ke(t.opacity,r.opacity);return function(e){return t.h=i(e),t.s=a(e),t.l=o(Math.pow(e,n)),t.opacity=u(e),t+""}}return n=+n,r.gamma=t,r}(1)}_t(Xe),_t(Ke),xt(Xe);var wt=xt(Ke);function kt(e,t){for(var n=0,r=t.length-1,i=t[0],a=new Array(r<0?0:r);n<r;)a[n]=e(i,i=t[++n]);return function(e){var t=Math.max(0,Math.min(r-1,Math.floor(e*=r)));return a[t](e-t)}}var Et=function(e){return function(){return e}},St=function(e){return+e},Ot=[0,1];function Mt(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:Et(t)}function Ct(e,t,n,r){var i=e[0],a=e[1],o=t[0],u=t[1];return a<i?(i=n(a,i),o=r(u,o)):(i=n(i,a),o=r(o,u)),function(e){return o(i(e))}}function Tt(e,t,n,r){var i=Math.min(e.length,t.length)-1,a=new Array(i),o=new Array(i),u=-1;for(e[i]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++u<i;)a[u]=n(e[u],e[u+1]),o[u]=r(t[u],t[u+1]);return function(t){var n=_(e,t,1,i)-1;return o[n](a[n](t))}}function Pt(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp())}function At(e,t){var n,r,i,a=Ot,o=Ot,u=st,c=!1;function l(){return n=Math.min(a.length,o.length)>2?Tt:Ct,r=i=null,s}function s(t){return(r||(r=n(a,o,c?function(e){return function(t,n){var r=e(t=+t,n=+n);return function(e){return e<=t?0:e>=n?1:r(e)}}}(e):e,u)))(+t)}return s.invert=function(e){return(i||(i=n(o,a,Mt,c?function(e){return function(t,n){var r=e(t=+t,n=+n);return function(e){return e<=0?t:e>=1?n:r(e)}}}(t):t)))(+e)},s.domain=function(e){return arguments.length?(a=H.call(e,St),l()):a.slice()},s.range=function(e){return arguments.length?(o=V.call(e),l()):o.slice()},s.rangeRound=function(e){return o=V.call(e),u=ft,l()},s.clamp=function(e){return arguments.length?(c=!!e,l()):c},s.interpolate=function(e){return arguments.length?(u=e,l()):u},l()}var Nt=function(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]},jt=function(e){return(e=Nt(Math.abs(e)))?e[1]:NaN},Ft=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function It(e){return new Dt(e)}function Dt(e){if(!(t=Ft.exec(e)))throw new Error("invalid format: "+e);var t;this.fill=t[1]||" ",this.align=t[2]||">",this.sign=t[3]||"-",this.symbol=t[4]||"",this.zero=!!t[5],this.width=t[6]&&+t[6],this.comma=!!t[7],this.precision=t[8]&&+t[8].slice(1),this.trim=!!t[9],this.type=t[10]||""}It.prototype=Dt.prototype,Dt.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(null==this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(null==this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};var Rt,Lt,zt,Bt,Ut=function(e){e:for(var t,n=e.length,r=1,i=-1;r<n;++r)switch(e[r]){case".":i=t=r;break;case"0":0===i&&(i=r),t=r;break;default:if(i>0){if(!+e[r])break e;i=0}}return i>0?e.slice(0,i)+e.slice(t+1):e},Ht=function(e,t){var n=Nt(e,t);if(!n)return e+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")},Vt={"%":function(e,t){return(100*e).toFixed(t)},b:function(e){return Math.round(e).toString(2)},c:function(e){return e+""},d:function(e){return Math.round(e).toString(10)},e:function(e,t){return e.toExponential(t)},f:function(e,t){return e.toFixed(t)},g:function(e,t){return e.toPrecision(t)},o:function(e){return Math.round(e).toString(8)},p:function(e,t){return Ht(100*e,t)},r:Ht,s:function(e,t){var n=Nt(e,t);if(!n)return e+"";var r=n[0],i=n[1],a=i-(Rt=3*Math.max(-8,Math.min(8,Math.floor(i/3))))+1,o=r.length;return a===o?r:a>o?r+new Array(a-o+1).join("0"):a>0?r.slice(0,a)+"."+r.slice(a):"0."+new Array(1-a).join("0")+Nt(e,Math.max(0,t+a-1))[0]},X:function(e){return Math.round(e).toString(16).toUpperCase()},x:function(e){return Math.round(e).toString(16)}},Wt=function(e){return e},qt=["y","z","a","f","p","n","\xb5","m","","k","M","G","T","P","E","Z","Y"];!function(e){Lt=function(e){var t=e.grouping&&e.thousands?function(e,t){return function(n,r){for(var i=n.length,a=[],o=0,u=e[0],c=0;i>0&&u>0&&(c+u+1>r&&(u=Math.max(1,r-c)),a.push(n.substring(i-=u,i+u)),!((c+=u+1)>r));)u=e[o=(o+1)%e.length];return a.reverse().join(t)}}(e.grouping,e.thousands):Wt,n=e.currency,r=e.decimal,i=e.numerals?function(e){return function(t){return t.replace(/[0-9]/g,function(t){return e[+t]})}}(e.numerals):Wt,a=e.percent||"%";function o(e){var o=(e=It(e)).fill,u=e.align,c=e.sign,l=e.symbol,s=e.zero,f=e.width,h=e.comma,d=e.precision,p=e.trim,y=e.type;"n"===y?(h=!0,y="g"):Vt[y]||(null==d&&(d=12),p=!0,y="g"),(s||"0"===o&&"="===u)&&(s=!0,o="0",u="=");var g="$"===l?n[0]:"#"===l&&/[boxX]/.test(y)?"0"+y.toLowerCase():"",v="$"===l?n[1]:/[%p]/.test(y)?a:"",m=Vt[y],b=/[defgprs%]/.test(y);function _(e){var n,a,l,_=g,x=v;if("c"===y)x=m(e)+x,e="";else{var w=(e=+e)<0;if(e=m(Math.abs(e),d),p&&(e=Ut(e)),w&&0==+e&&(w=!1),_=(w?"("===c?c:"-":"-"===c||"("===c?"":c)+_,x=("s"===y?qt[8+Rt/3]:"")+x+(w&&"("===c?")":""),b)for(n=-1,a=e.length;++n<a;)if(48>(l=e.charCodeAt(n))||l>57){x=(46===l?r+e.slice(n+1):e.slice(n))+x,e=e.slice(0,n);break}}h&&!s&&(e=t(e,1/0));var k=_.length+e.length+x.length,E=k<f?new Array(f-k+1).join(o):"";switch(h&&s&&(e=t(E+e,E.length?f-x.length:1/0),E=""),u){case"<":e=_+e+x+E;break;case"=":e=_+E+e+x;break;case"^":e=E.slice(0,k=E.length>>1)+_+e+x+E.slice(k);break;default:e=E+_+e+x}return i(e)}return d=null==d?6:/[gprs]/.test(y)?Math.max(1,Math.min(21,d)):Math.max(0,Math.min(20,d)),_.toString=function(){return e+""},_}return{format:o,formatPrefix:function(e,t){var n=o(((e=It(e)).type="f",e)),r=3*Math.max(-8,Math.min(8,Math.floor(jt(t)/3))),i=Math.pow(10,-r),a=qt[8+r/3];return function(e){return n(i*e)+a}}}}(e),zt=Lt.format,Bt=Lt.formatPrefix}({decimal:".",thousands:",",grouping:[3],currency:["$",""]});var Gt=function(e,t,n){var r,i=e[0],a=e[e.length-1],o=T(i,a,null==t?10:t);switch((n=It(null==n?",f":n)).type){case"s":var u=Math.max(Math.abs(i),Math.abs(a));return null!=n.precision||isNaN(r=function(e,t){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(jt(t)/3)))-jt(Math.abs(e)))}(o,u))||(n.precision=r),Bt(n,u);case"":case"e":case"g":case"p":case"r":null!=n.precision||isNaN(r=function(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,jt(t)-jt(e))+1}(o,Math.max(Math.abs(i),Math.abs(a))))||(n.precision=r-("e"===n.type));break;case"f":case"%":null!=n.precision||isNaN(r=function(e){return Math.max(0,-jt(Math.abs(e)))}(o))||(n.precision=r-2*("%"===n.type))}return zt(n)};function Yt(e){var t=e.domain;return e.ticks=function(e){var n=t();return M(n[0],n[n.length-1],null==e?10:e)},e.tickFormat=function(e,n){return Gt(t(),e,n)},e.nice=function(n){null==n&&(n=10);var r,i=t(),a=0,o=i.length-1,u=i[a],c=i[o];return c<u&&(r=u,u=c,c=r,r=a,a=o,o=r),(r=C(u,c,n))>0?r=C(u=Math.floor(u/r)*r,c=Math.ceil(c/r)*r,n):r<0&&(r=C(u=Math.ceil(u*r)/r,c=Math.floor(c*r)/r,n)),r>0?(i[a]=Math.floor(u/r)*r,i[o]=Math.ceil(c/r)*r,t(i)):r<0&&(i[a]=Math.ceil(u*r)/r,i[o]=Math.floor(c*r)/r,t(i)),e},e}function $t(){var e=At(Mt,it);return e.copy=function(){return Pt(e,$t())},Yt(e)}function Xt(){var e=[0,1];function t(e){return+e}return t.invert=t,t.domain=t.range=function(n){return arguments.length?(e=H.call(n,St),t):e.slice()},t.copy=function(){return Xt().domain(e)},Yt(t)}var Kt=function(e,t){var n,r=0,i=(e=e.slice()).length-1,a=e[r],o=e[i];return o<a&&(n=r,r=i,i=n,n=a,a=o,o=n),e[r]=t.floor(a),e[i]=t.ceil(o),e};function Qt(e,t){return(t=Math.log(t/e))?function(n){return Math.log(n/e)/t}:Et(t)}function Jt(e,t){return e<0?function(n){return-Math.pow(-t,n)*Math.pow(-e,1-n)}:function(n){return Math.pow(t,n)*Math.pow(e,1-n)}}function Zt(e){return isFinite(e)?+("1e"+e):e<0?0:e}function en(e){return 10===e?Zt:e===Math.E?Math.exp:function(t){return Math.pow(e,t)}}function tn(e){return e===Math.E?Math.log:10===e&&Math.log10||2===e&&Math.log2||(e=Math.log(e),function(t){return Math.log(t)/e})}function nn(e){return function(t){return-e(-t)}}function rn(){var e=At(Qt,Jt).domain([1,10]),t=e.domain,n=10,r=tn(10),i=en(10);function a(){return r=tn(n),i=en(n),t()[0]<0&&(r=nn(r),i=nn(i)),e}return e.base=function(e){return arguments.length?(n=+e,a()):n},e.domain=function(e){return arguments.length?(t(e),a()):t()},e.ticks=function(e){var a,o=t(),u=o[0],c=o[o.length-1];(a=c<u)&&(h=u,u=c,c=h);var l,s,f,h=r(u),d=r(c),p=null==e?10:+e,y=[];if(!(n%1)&&d-h<p){if(h=Math.round(h)-1,d=Math.round(d)+1,u>0){for(;h<d;++h)for(s=1,l=i(h);s<n;++s)if(!((f=l*s)<u)){if(f>c)break;y.push(f)}}else for(;h<d;++h)for(s=n-1,l=i(h);s>=1;--s)if(!((f=l*s)<u)){if(f>c)break;y.push(f)}}else y=M(h,d,Math.min(d-h,p)).map(i);return a?y.reverse():y},e.tickFormat=function(t,a){if(null==a&&(a=10===n?".0e":","),"function"!=typeof a&&(a=zt(a)),t===1/0)return a;null==t&&(t=10);var o=Math.max(1,n*t/e.ticks().length);return function(e){var t=e/i(Math.round(r(e)));return t*n<n-.5&&(t*=n),t<=o?a(e):""}},e.nice=function(){return t(Kt(t(),{floor:function(e){return i(Math.floor(r(e)))},ceil:function(e){return i(Math.ceil(r(e)))}}))},e.copy=function(){return Pt(e,rn().base(n))},e}function an(e,t){return e<0?-Math.pow(-e,t):Math.pow(e,t)}function on(){var e=1,t=At(function(t,n){return(n=an(n,e)-(t=an(t,e)))?function(r){return(an(r,e)-t)/n}:Et(n)},function(t,n){return n=an(n,e)-(t=an(t,e)),function(r){return an(t+n*r,1/e)}}),n=t.domain;return t.exponent=function(t){return arguments.length?(e=+t,n(n())):e},t.copy=function(){return Pt(t,on().exponent(e))},Yt(t)}function un(){var e=[],t=[],n=[];function r(){var r=0,a=Math.max(1,t.length);for(n=new Array(a-1);++r<a;)n[r-1]=P(e,r/a);return i}function i(e){if(!isNaN(e=+e))return t[_(n,e)]}return i.invertExtent=function(r){var i=t.indexOf(r);return i<0?[NaN,NaN]:[i>0?n[i-1]:e[0],i<n.length?n[i]:e[e.length-1]]},i.domain=function(t){if(!arguments.length)return e.slice();e=[];for(var n,i=0,a=t.length;i<a;++i)null==(n=t[i])||isNaN(n=+n)||e.push(n);return e.sort(g),r()},i.range=function(e){return arguments.length?(t=V.call(e),r()):t.slice()},i.quantiles=function(){return n.slice()},i.copy=function(){return un().domain(e).range(t)},i}function cn(){var e=0,t=1,n=1,r=[.5],i=[0,1];function a(e){if(e<=e)return i[_(r,e,0,n)]}function o(){var i=-1;for(r=new Array(n);++i<n;)r[i]=((i+1)*t-(i-n)*e)/(n+1);return a}return a.domain=function(n){return arguments.length?(e=+n[0],t=+n[1],o()):[e,t]},a.range=function(e){return arguments.length?(n=(i=V.call(e)).length-1,o()):i.slice()},a.invertExtent=function(a){var o=i.indexOf(a);return o<0?[NaN,NaN]:o<1?[e,r[0]]:o>=n?[r[n-1],t]:[r[o-1],r[o]]},a.copy=function(){return cn().domain([e,t]).range(i)},Yt(a)}function ln(){var e=[.5],t=[0,1],n=1;function r(r){if(r<=r)return t[_(e,r,0,n)]}return r.domain=function(i){return arguments.length?(e=V.call(i),n=Math.min(e.length,t.length-1),r):e.slice()},r.range=function(i){return arguments.length?(t=V.call(i),n=Math.min(e.length,t.length-1),r):t.slice()},r.invertExtent=function(n){var r=t.indexOf(n);return[e[r-1],e[r]]},r.copy=function(){return ln().domain(e).range(t)},r}var sn=new Date,fn=new Date;function hn(e,t,n,r){function i(t){return e(t=new Date(+t)),t}return i.floor=i,i.ceil=function(n){return e(n=new Date(n-1)),t(n,1),e(n),n},i.round=function(e){var t=i(e),n=i.ceil(e);return e-t<n-e?t:n},i.offset=function(e,n){return t(e=new Date(+e),null==n?1:Math.floor(n)),e},i.range=function(n,r,a){var o,u=[];if(n=i.ceil(n),a=null==a?1:Math.floor(a),!(n<r&&a>0))return u;do{u.push(o=new Date(+n)),t(n,a),e(n)}while(o<n&&n<r);return u},i.filter=function(n){return hn(function(t){if(t>=t)for(;e(t),!n(t);)t.setTime(t-1)},function(e,r){if(e>=e)if(r<0)for(;++r<=0;)for(;t(e,-1),!n(e););else for(;--r>=0;)for(;t(e,1),!n(e););})},n&&(i.count=function(t,r){return sn.setTime(+t),fn.setTime(+r),e(sn),e(fn),Math.floor(n(sn,fn))},i.every=function(e){return e=Math.floor(e),isFinite(e)&&e>0?e>1?i.filter(r?function(t){return r(t)%e==0}:function(t){return i.count(0,t)%e==0}):i:null}),i}var dn=hn(function(){},function(e,t){e.setTime(+e+t)},function(e,t){return t-e});dn.every=function(e){return e=Math.floor(e),isFinite(e)&&e>0?e>1?hn(function(t){t.setTime(Math.floor(t/e)*e)},function(t,n){t.setTime(+t+n*e)},function(t,n){return(n-t)/e}):dn:null};var pn=dn,yn=(dn.range,6e4),gn=6048e5,vn=hn(function(e){e.setTime(1e3*Math.floor(e/1e3))},function(e,t){e.setTime(+e+1e3*t)},function(e,t){return(t-e)/1e3},function(e){return e.getUTCSeconds()}),mn=vn,bn=(vn.range,hn(function(e){e.setTime(Math.floor(e/yn)*yn)},function(e,t){e.setTime(+e+t*yn)},function(e,t){return(t-e)/yn},function(e){return e.getMinutes()})),_n=bn,xn=(bn.range,hn(function(e){var t=e.getTimezoneOffset()*yn%36e5;t<0&&(t+=36e5),e.setTime(36e5*Math.floor((+e-t)/36e5)+t)},function(e,t){e.setTime(+e+36e5*t)},function(e,t){return(t-e)/36e5},function(e){return e.getHours()})),wn=xn,kn=(xn.range,hn(function(e){e.setHours(0,0,0,0)},function(e,t){e.setDate(e.getDate()+t)},function(e,t){return(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*yn)/864e5},function(e){return e.getDate()-1})),En=kn;function Sn(e){return hn(function(t){t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},function(e,t){e.setDate(e.getDate()+7*t)},function(e,t){return(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*yn)/gn})}kn.range;var On=Sn(0),Mn=Sn(1),Cn=Sn(2),Tn=Sn(3),Pn=Sn(4),An=Sn(5),Nn=Sn(6),jn=(On.range,Mn.range,Cn.range,Tn.range,Pn.range,An.range,Nn.range,hn(function(e){e.setDate(1),e.setHours(0,0,0,0)},function(e,t){e.setMonth(e.getMonth()+t)},function(e,t){return t.getMonth()-e.getMonth()+12*(t.getFullYear()-e.getFullYear())},function(e){return e.getMonth()})),Fn=jn,In=(jn.range,hn(function(e){e.setMonth(0,1),e.setHours(0,0,0,0)},function(e,t){e.setFullYear(e.getFullYear()+t)},function(e,t){return t.getFullYear()-e.getFullYear()},function(e){return e.getFullYear()}));In.every=function(e){return isFinite(e=Math.floor(e))&&e>0?hn(function(t){t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},function(t,n){t.setFullYear(t.getFullYear()+n*e)}):null};var Dn=In,Rn=(((In.range,hn(function(e){e.setUTCSeconds(0,0)},function(e,t){e.setTime(+e+t*yn)},function(e,t){return(t-e)/yn},function(e){return e.getUTCMinutes()})).range,hn(function(e){e.setUTCMinutes(0,0,0)},function(e,t){e.setTime(+e+36e5*t)},function(e,t){return(t-e)/36e5},function(e){return e.getUTCHours()})).range,hn(function(e){e.setUTCHours(0,0,0,0)},function(e,t){e.setUTCDate(e.getUTCDate()+t)},function(e,t){return(t-e)/864e5},function(e){return e.getUTCDate()-1})),Ln=Rn;function zn(e){return hn(function(t){t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},function(e,t){e.setUTCDate(e.getUTCDate()+7*t)},function(e,t){return(t-e)/gn})}Rn.range;var Bn=zn(0),Un=zn(1),Hn=zn(2),Vn=zn(3),Wn=zn(4),qn=zn(5),Gn=zn(6),Yn=((Bn.range,Un.range,Hn.range,Vn.range,Wn.range,qn.range,Gn.range,hn(function(e){e.setUTCDate(1),e.setUTCHours(0,0,0,0)},function(e,t){e.setUTCMonth(e.getUTCMonth()+t)},function(e,t){return t.getUTCMonth()-e.getUTCMonth()+12*(t.getUTCFullYear()-e.getUTCFullYear())},function(e){return e.getUTCMonth()})).range,hn(function(e){e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},function(e,t){e.setUTCFullYear(e.getUTCFullYear()+t)},function(e,t){return t.getUTCFullYear()-e.getUTCFullYear()},function(e){return e.getUTCFullYear()}));Yn.every=function(e){return isFinite(e=Math.floor(e))&&e>0?hn(function(t){t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},function(t,n){t.setUTCFullYear(t.getUTCFullYear()+n*e)}):null};var $n=Yn;function Xn(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function Kn(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function Qn(e){return{y:e,m:0,d:1,H:0,M:0,S:0,L:0}}Yn.range;var Jn,Zn,er,tr,nr={"-":"",_:" ",0:"0"},rr=/^\s*\d+/,ir=/^%/,ar=/[\\^$*+?|[\]().{}]/g;function or(e,t,n){var r=e<0?"-":"",i=(r?-e:e)+"",a=i.length;return r+(a<n?new Array(n-a+1).join(t)+i:i)}function ur(e){return e.replace(ar,"\\$&")}function cr(e){return new RegExp("^(?:"+e.map(ur).join("|")+")","i")}function lr(e){for(var t={},n=-1,r=e.length;++n<r;)t[e[n].toLowerCase()]=n;return t}function sr(e,t,n){var r=rr.exec(t.slice(n,n+1));return r?(e.w=+r[0],n+r[0].length):-1}function fr(e,t,n){var r=rr.exec(t.slice(n,n+1));return r?(e.u=+r[0],n+r[0].length):-1}function hr(e,t,n){var r=rr.exec(t.slice(n,n+2));return r?(e.U=+r[0],n+r[0].length):-1}function dr(e,t,n){var r=rr.exec(t.slice(n,n+2));return r?(e.V=+r[0],n+r[0].length):-1}function pr(e,t,n){var r=rr.exec(t.slice(n,n+2));return r?(e.W=+r[0],n+r[0].length):-1}function yr(e,t,n){var r=rr.exec(t.slice(n,n+4));return r?(e.y=+r[0],n+r[0].length):-1}function gr(e,t,n){var r=rr.exec(t.slice(n,n+2));return r?(e.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function vr(e,t,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return r?(e.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function mr(e,t,n){var r=rr.exec(t.slice(n,n+2));return r?(e.m=r[0]-1,n+r[0].length):-1}function br(e,t,n){var r=rr.exec(t.slice(n,n+2));return r?(e.d=+r[0],n+r[0].length):-1}function _r(e,t,n){var r=rr.exec(t.slice(n,n+3));return r?(e.m=0,e.d=+r[0],n+r[0].length):-1}function xr(e,t,n){var r=rr.exec(t.slice(n,n+2));return r?(e.H=+r[0],n+r[0].length):-1}function wr(e,t,n){var r=rr.exec(t.slice(n,n+2));return r?(e.M=+r[0],n+r[0].length):-1}function kr(e,t,n){var r=rr.exec(t.slice(n,n+2));return r?(e.S=+r[0],n+r[0].length):-1}function Er(e,t,n){var r=rr.exec(t.slice(n,n+3));return r?(e.L=+r[0],n+r[0].length):-1}function Sr(e,t,n){var r=rr.exec(t.slice(n,n+6));return r?(e.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function Or(e,t,n){var r=ir.exec(t.slice(n,n+1));return r?n+r[0].length:-1}function Mr(e,t,n){var r=rr.exec(t.slice(n));return r?(e.Q=+r[0],n+r[0].length):-1}function Cr(e,t,n){var r=rr.exec(t.slice(n));return r?(e.Q=1e3*+r[0],n+r[0].length):-1}function Tr(e,t){return or(e.getDate(),t,2)}function Pr(e,t){return or(e.getHours(),t,2)}function Ar(e,t){return or(e.getHours()%12||12,t,2)}function Nr(e,t){return or(1+En.count(Dn(e),e),t,3)}function jr(e,t){return or(e.getMilliseconds(),t,3)}function Fr(e,t){return jr(e,t)+"000"}function Ir(e,t){return or(e.getMonth()+1,t,2)}function Dr(e,t){return or(e.getMinutes(),t,2)}function Rr(e,t){return or(e.getSeconds(),t,2)}function Lr(e){var t=e.getDay();return 0===t?7:t}function zr(e,t){return or(On.count(Dn(e),e),t,2)}function Br(e,t){var n=e.getDay();return e=n>=4||0===n?Pn(e):Pn.ceil(e),or(Pn.count(Dn(e),e)+(4===Dn(e).getDay()),t,2)}function Ur(e){return e.getDay()}function Hr(e,t){return or(Mn.count(Dn(e),e),t,2)}function Vr(e,t){return or(e.getFullYear()%100,t,2)}function Wr(e,t){return or(e.getFullYear()%1e4,t,4)}function qr(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+or(t/60|0,"0",2)+or(t%60,"0",2)}function Gr(e,t){return or(e.getUTCDate(),t,2)}function Yr(e,t){return or(e.getUTCHours(),t,2)}function $r(e,t){return or(e.getUTCHours()%12||12,t,2)}function Xr(e,t){return or(1+Ln.count($n(e),e),t,3)}function Kr(e,t){return or(e.getUTCMilliseconds(),t,3)}function Qr(e,t){return Kr(e,t)+"000"}function Jr(e,t){return or(e.getUTCMonth()+1,t,2)}function Zr(e,t){return or(e.getUTCMinutes(),t,2)}function ei(e,t){return or(e.getUTCSeconds(),t,2)}function ti(e){var t=e.getUTCDay();return 0===t?7:t}function ni(e,t){return or(Bn.count($n(e),e),t,2)}function ri(e,t){var n=e.getUTCDay();return e=n>=4||0===n?Wn(e):Wn.ceil(e),or(Wn.count($n(e),e)+(4===$n(e).getUTCDay()),t,2)}function ii(e){return e.getUTCDay()}function ai(e,t){return or(Un.count($n(e),e),t,2)}function oi(e,t){return or(e.getUTCFullYear()%100,t,2)}function ui(e,t){return or(e.getUTCFullYear()%1e4,t,4)}function ci(){return"+0000"}function li(){return"%"}function si(e){return+e}function fi(e){return Math.floor(+e/1e3)}!function(e){Jn=function(e){var t=e.dateTime,n=e.date,r=e.time,i=e.periods,a=e.days,o=e.shortDays,u=e.months,c=e.shortMonths,l=cr(i),s=lr(i),f=cr(a),h=lr(a),d=cr(o),p=lr(o),y=cr(u),g=lr(u),v=cr(c),m=lr(c),b={a:function(e){return o[e.getDay()]},A:function(e){return a[e.getDay()]},b:function(e){return c[e.getMonth()]},B:function(e){return u[e.getMonth()]},c:null,d:Tr,e:Tr,f:Fr,H:Pr,I:Ar,j:Nr,L:jr,m:Ir,M:Dr,p:function(e){return i[+(e.getHours()>=12)]},Q:si,s:fi,S:Rr,u:Lr,U:zr,V:Br,w:Ur,W:Hr,x:null,X:null,y:Vr,Y:Wr,Z:qr,"%":li},_={a:function(e){return o[e.getUTCDay()]},A:function(e){return a[e.getUTCDay()]},b:function(e){return c[e.getUTCMonth()]},B:function(e){return u[e.getUTCMonth()]},c:null,d:Gr,e:Gr,f:Qr,H:Yr,I:$r,j:Xr,L:Kr,m:Jr,M:Zr,p:function(e){return i[+(e.getUTCHours()>=12)]},Q:si,s:fi,S:ei,u:ti,U:ni,V:ri,w:ii,W:ai,x:null,X:null,y:oi,Y:ui,Z:ci,"%":li},x={a:function(e,t,n){var r=d.exec(t.slice(n));return r?(e.w=p[r[0].toLowerCase()],n+r[0].length):-1},A:function(e,t,n){var r=f.exec(t.slice(n));return r?(e.w=h[r[0].toLowerCase()],n+r[0].length):-1},b:function(e,t,n){var r=v.exec(t.slice(n));return r?(e.m=m[r[0].toLowerCase()],n+r[0].length):-1},B:function(e,t,n){var r=y.exec(t.slice(n));return r?(e.m=g[r[0].toLowerCase()],n+r[0].length):-1},c:function(e,n,r){return E(e,t,n,r)},d:br,e:br,f:Sr,H:xr,I:xr,j:_r,L:Er,m:mr,M:wr,p:function(e,t,n){var r=l.exec(t.slice(n));return r?(e.p=s[r[0].toLowerCase()],n+r[0].length):-1},Q:Mr,s:Cr,S:kr,u:fr,U:hr,V:dr,w:sr,W:pr,x:function(e,t,r){return E(e,n,t,r)},X:function(e,t,n){return E(e,r,t,n)},y:gr,Y:yr,Z:vr,"%":Or};function w(e,t){return function(n){var r,i,a,o=[],u=-1,c=0,l=e.length;for(n instanceof Date||(n=new Date(+n));++u<l;)37===e.charCodeAt(u)&&(o.push(e.slice(c,u)),null!=(i=nr[r=e.charAt(++u)])?r=e.charAt(++u):i="e"===r?" ":"0",(a=t[r])&&(r=a(n,i)),o.push(r),c=u+1);return o.push(e.slice(c,u)),o.join("")}}function k(e,t){return function(n){var r,i,a=Qn(1900);if(E(a,e,n+="",0)!=n.length)return null;if("Q"in a)return new Date(a.Q);if("p"in a&&(a.H=a.H%12+12*a.p),"V"in a){if(a.V<1||a.V>53)return null;"w"in a||(a.w=1),"Z"in a?(r=(i=(r=Kn(Qn(a.y))).getUTCDay())>4||0===i?Un.ceil(r):Un(r),r=Ln.offset(r,7*(a.V-1)),a.y=r.getUTCFullYear(),a.m=r.getUTCMonth(),a.d=r.getUTCDate()+(a.w+6)%7):(r=(i=(r=t(Qn(a.y))).getDay())>4||0===i?Mn.ceil(r):Mn(r),r=En.offset(r,7*(a.V-1)),a.y=r.getFullYear(),a.m=r.getMonth(),a.d=r.getDate()+(a.w+6)%7)}else("W"in a||"U"in a)&&("w"in a||(a.w="u"in a?a.u%7:"W"in a?1:0),i="Z"in a?Kn(Qn(a.y)).getUTCDay():t(Qn(a.y)).getDay(),a.m=0,a.d="W"in a?(a.w+6)%7+7*a.W-(i+5)%7:a.w+7*a.U-(i+6)%7);return"Z"in a?(a.H+=a.Z/100|0,a.M+=a.Z%100,Kn(a)):t(a)}}function E(e,t,n,r){for(var i,a,o=0,u=t.length,c=n.length;o<u;){if(r>=c)return-1;if(37===(i=t.charCodeAt(o++))){if(i=t.charAt(o++),!(a=x[i in nr?t.charAt(o++):i])||(r=a(e,n,r))<0)return-1}else if(i!=n.charCodeAt(r++))return-1}return r}return b.x=w(n,b),b.X=w(r,b),b.c=w(t,b),_.x=w(n,_),_.X=w(r,_),_.c=w(t,_),{format:function(e){var t=w(e+="",b);return t.toString=function(){return e},t},parse:function(e){var t=k(e+="",Xn);return t.toString=function(){return e},t},utcFormat:function(e){var t=w(e+="",_);return t.toString=function(){return e},t},utcParse:function(e){var t=k(e,Kn);return t.toString=function(){return e},t}}}(e),Zn=Jn.format,Jn.parse,er=Jn.utcFormat,tr=Jn.utcParse}({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]}),Date.prototype.toISOString||er("%Y-%m-%dT%H:%M:%S.%LZ"),+new Date("2000-01-01T00:00:00.000Z")||tr("%Y-%m-%dT%H:%M:%S.%LZ");var hi=1e3,di=60*hi,pi=60*di,yi=24*pi,gi=7*yi,vi=30*yi,mi=365*yi;function bi(e){return new Date(e)}function _i(e){return e instanceof Date?+e:+new Date(+e)}var xi=function(){return function e(t,n,r,i,a,o,u,c,l){var s=At(Mt,it),f=s.invert,h=s.domain,d=l(".%L"),p=l(":%S"),y=l("%I:%M"),g=l("%I %p"),m=l("%a %d"),b=l("%b %d"),_=l("%B"),x=l("%Y"),w=[[u,1,hi],[u,5,5*hi],[u,15,15*hi],[u,30,30*hi],[o,1,di],[o,5,5*di],[o,15,15*di],[o,30,30*di],[a,1,pi],[a,3,3*pi],[a,6,6*pi],[a,12,12*pi],[i,1,yi],[i,2,2*yi],[r,1,gi],[n,1,vi],[n,3,3*vi],[t,1,mi]];function k(e){return(u(e)<e?d:o(e)<e?p:a(e)<e?y:i(e)<e?g:n(e)<e?r(e)<e?m:b:t(e)<e?_:x)(e)}function E(e,n,r,i){if(null==e&&(e=10),"number"==typeof e){var a=Math.abs(r-n)/e,o=v(function(e){return e[2]}).right(w,a);o===w.length?(i=T(n/mi,r/mi,e),e=t):o?(i=(o=w[a/w[o-1][2]<w[o][2]/a?o-1:o])[1],e=o[0]):(i=Math.max(T(n,r,e),1),e=c)}return null==i?e:e.every(i)}return s.invert=function(e){return new Date(f(e))},s.domain=function(e){return arguments.length?h(H.call(e,_i)):h().map(bi)},s.ticks=function(e,t){var n,r=h(),i=r[0],a=r[r.length-1],o=a<i;return o&&(n=i,i=a,a=n),n=(n=E(e,i,a,t))?n.range(i,a+1):[],o?n.reverse():n},s.tickFormat=function(e,t){return null==t?k:l(t)},s.nice=function(e,t){var n=h();return(e=E(e,n[0],n[n.length-1],t))?h(Kt(n,e)):s},s.copy=function(){return Pt(s,e(t,n,r,i,a,o,u,c,l))},s}(Dn,Fn,On,En,wn,_n,mn,pn,Zn).domain([new Date(2e3,0,1),new Date(2e3,0,2)])},wi=function(e){return e.match(/.{6}/g).map(function(e){return"#"+e})},ki=wi("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),Ei=wi("393b795254a36b6ecf9c9ede6379398ca252b5cf6bcedb9c8c6d31bd9e39e7ba52e7cb94843c39ad494ad6616be7969c7b4173a55194ce6dbdde9ed6"),Si=(wi("3182bd6baed69ecae1c6dbefe6550dfd8d3cfdae6bfdd0a231a35474c476a1d99bc7e9c0756bb19e9ac8bcbddcdadaeb636363969696bdbdbdd9d9d9"),wi("1f77b4aec7e8ff7f0effbb782ca02c98df8ad62728ff98969467bdc5b0d58c564bc49c94e377c2f7b6d27f7f7fc7c7c7bcbd22dbdb8d17becf9edae5"));function Oi(e){var t=e.length;return function(n){return e[Math.max(0,Math.min(t-1,Math.floor(n*t)))]}}function Mi(e){var t=0,n=1,r=!1;function i(i){var a=(i-t)/(n-t);return e(r?Math.max(0,Math.min(1,a)):a)}return i.domain=function(e){return arguments.length?(t=+e[0],n=+e[1],i):[t,n]},i.clamp=function(e){return arguments.length?(r=!!e,i):r},i.interpolator=function(t){return arguments.length?(e=t,i):e},i.copy=function(){return Mi(e).domain([t,n]).clamp(r)},Yt(i)}wt(We(300,.5,0),We(-240,.5,1)),wt(We(-100,.75,.35),We(80,1.5,.8)),wt(We(260,.75,.35),We(80,1.5,.8)),We(),Oi(wi("44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725")),Oi(wi("00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf")),Oi(wi("00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4")),Oi(wi("0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921"));var Ci=function(e){for(var t=e.length/6|0,n=new Array(t),r=0;r<t;)n[r]="#"+e.slice(6*r,6*++r);return n},Ti=(Ci("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),Ci("7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666")),Pi=Ci("1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666"),Ai=Ci("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928"),Ni=Ci("fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2"),ji=Ci("b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc"),Fi=Ci("e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999"),Ii=Ci("66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3"),Di=Ci("8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f"),Ri=function(e){return rt(e[e.length-1])},Li=new Array(3).concat("d8b365f5f5f55ab4ac","a6611adfc27d80cdc1018571","a6611adfc27df5f5f580cdc1018571","8c510ad8b365f6e8c3c7eae55ab4ac01665e","8c510ad8b365f6e8c3f5f5f5c7eae55ab4ac01665e","8c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e","8c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e","5430058c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e003c30","5430058c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e003c30").map(Ci),zi=Ri(Li),Bi=new Array(3).concat("af8dc3f7f7f77fbf7b","7b3294c2a5cfa6dba0008837","7b3294c2a5cff7f7f7a6dba0008837","762a83af8dc3e7d4e8d9f0d37fbf7b1b7837","762a83af8dc3e7d4e8f7f7f7d9f0d37fbf7b1b7837","762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b7837","762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b7837","40004b762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b783700441b","40004b762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b783700441b").map(Ci),Ui=Ri(Bi),Hi=new Array(3).concat("e9a3c9f7f7f7a1d76a","d01c8bf1b6dab8e1864dac26","d01c8bf1b6daf7f7f7b8e1864dac26","c51b7de9a3c9fde0efe6f5d0a1d76a4d9221","c51b7de9a3c9fde0eff7f7f7e6f5d0a1d76a4d9221","c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221","c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221","8e0152c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221276419","8e0152c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221276419").map(Ci),Vi=Ri(Hi),Wi=Ri(new Array(3).concat("998ec3f7f7f7f1a340","5e3c99b2abd2fdb863e66101","5e3c99b2abd2f7f7f7fdb863e66101","542788998ec3d8daebfee0b6f1a340b35806","542788998ec3d8daebf7f7f7fee0b6f1a340b35806","5427888073acb2abd2d8daebfee0b6fdb863e08214b35806","5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b35806","2d004b5427888073acb2abd2d8daebfee0b6fdb863e08214b358067f3b08","2d004b5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b358067f3b08").map(Ci)),qi=Ri(new Array(3).concat("ef8a62f7f7f767a9cf","ca0020f4a58292c5de0571b0","ca0020f4a582f7f7f792c5de0571b0","b2182bef8a62fddbc7d1e5f067a9cf2166ac","b2182bef8a62fddbc7f7f7f7d1e5f067a9cf2166ac","b2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac","b2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac","67001fb2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac053061","67001fb2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac053061").map(Ci)),Gi=Ri(new Array(3).concat("ef8a62ffffff999999","ca0020f4a582bababa404040","ca0020f4a582ffffffbababa404040","b2182bef8a62fddbc7e0e0e09999994d4d4d","b2182bef8a62fddbc7ffffffe0e0e09999994d4d4d","b2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d","b2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d","67001fb2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d1a1a1a","67001fb2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d1a1a1a").map(Ci)),Yi=Ri(new Array(3).concat("fc8d59ffffbf91bfdb","d7191cfdae61abd9e92c7bb6","d7191cfdae61ffffbfabd9e92c7bb6","d73027fc8d59fee090e0f3f891bfdb4575b4","d73027fc8d59fee090ffffbfe0f3f891bfdb4575b4","d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4","d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4","a50026d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4313695","a50026d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4313695").map(Ci)),$i=Ri(new Array(3).concat("fc8d59ffffbf91cf60","d7191cfdae61a6d96a1a9641","d7191cfdae61ffffbfa6d96a1a9641","d73027fc8d59fee08bd9ef8b91cf601a9850","d73027fc8d59fee08bffffbfd9ef8b91cf601a9850","d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850","d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850","a50026d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850006837","a50026d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850006837").map(Ci)),Xi=Ri(new Array(3).concat("fc8d59ffffbf99d594","d7191cfdae61abdda42b83ba","d7191cfdae61ffffbfabdda42b83ba","d53e4ffc8d59fee08be6f59899d5943288bd","d53e4ffc8d59fee08bffffbfe6f59899d5943288bd","d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd","d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd","9e0142d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd5e4fa2","9e0142d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd5e4fa2").map(Ci)),Ki=Ri(new Array(3).concat("e5f5f999d8c92ca25f","edf8fbb2e2e266c2a4238b45","edf8fbb2e2e266c2a42ca25f006d2c","edf8fbccece699d8c966c2a42ca25f006d2c","edf8fbccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45006d2c00441b").map(Ci)),Qi=Ri(new Array(3).concat("e0ecf49ebcda8856a7","edf8fbb3cde38c96c688419d","edf8fbb3cde38c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d810f7c4d004b").map(Ci)),Ji=Ri(new Array(3).concat("e0f3dba8ddb543a2ca","f0f9e8bae4bc7bccc42b8cbe","f0f9e8bae4bc7bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe0868ac084081").map(Ci)),Zi=Ri(new Array(3).concat("fee8c8fdbb84e34a33","fef0d9fdcc8afc8d59d7301f","fef0d9fdcc8afc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301fb300007f0000").map(Ci)),ea=Ri(new Array(3).concat("ece2f0a6bddb1c9099","f6eff7bdc9e167a9cf02818a","f6eff7bdc9e167a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016c59014636").map(Ci)),ta=Ri(new Array(3).concat("ece7f2a6bddb2b8cbe","f1eef6bdc9e174a9cf0570b0","f1eef6bdc9e174a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0045a8d023858").map(Ci)),na=Ri(new Array(3).concat("e7e1efc994c7dd1c77","f1eef6d7b5d8df65b0ce1256","f1eef6d7b5d8df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125698004367001f").map(Ci)),ra=Ri(new Array(3).concat("fde0ddfa9fb5c51b8a","feebe2fbb4b9f768a1ae017e","feebe2fbb4b9f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a017749006a").map(Ci)),ia=Ri(new Array(3).concat("edf8b17fcdbb2c7fb8","ffffcca1dab441b6c4225ea8","ffffcca1dab441b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea8253494081d58").map(Ci)),aa=Ri(new Array(3).concat("f7fcb9addd8e31a354","ffffccc2e69978c679238443","ffffccc2e69978c67931a354006837","ffffccd9f0a3addd8e78c67931a354006837","ffffccd9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443006837004529").map(Ci)),oa=Ri(new Array(3).concat("fff7bcfec44fd95f0e","ffffd4fed98efe9929cc4c02","ffffd4fed98efe9929d95f0e993404","ffffd4fee391fec44ffe9929d95f0e993404","ffffd4fee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c02993404662506").map(Ci)),ua=Ri(new Array(3).concat("ffeda0feb24cf03b20","ffffb2fecc5cfd8d3ce31a1c","ffffb2fecc5cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cbd0026800026").map(Ci)),ca=new Array(3).concat("deebf79ecae13182bd","eff3ffbdd7e76baed62171b5","eff3ffbdd7e76baed63182bd08519c","eff3ffc6dbef9ecae16baed63182bd08519c","eff3ffc6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b508519c08306b").map(Ci),la=Ri(ca),sa=Ri(new Array(3).concat("e5f5e0a1d99b31a354","edf8e9bae4b374c476238b45","edf8e9bae4b374c47631a354006d2c","edf8e9c7e9c0a1d99b74c47631a354006d2c","edf8e9c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45006d2c00441b").map(Ci)),fa=Ri(new Array(3).concat("f0f0f0bdbdbd636363","f7f7f7cccccc969696525252","f7f7f7cccccc969696636363252525","f7f7f7d9d9d9bdbdbd969696636363252525","f7f7f7d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525000000").map(Ci)),ha=Ri(new Array(3).concat("efedf5bcbddc756bb1","f2f0f7cbc9e29e9ac86a51a3","f2f0f7cbc9e29e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a354278f3f007d").map(Ci)),da=Ri(new Array(3).concat("fee0d2fc9272de2d26","fee5d9fcae91fb6a4acb181d","fee5d9fcae91fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181da50f1567000d").map(Ci)),pa=Ri(new Array(3).concat("fee6cefdae6be6550d","feeddefdbe85fd8d3cd94701","feeddefdbe85fd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d94801a636037f2704").map(Ci)),ya=wt(We(300,.5,0),We(-240,.5,1)),ga=wt(We(-100,.75,.35),We(80,1.5,.8)),va=wt(We(260,.75,.35),We(80,1.5,.8)),ma=We(),ba=function(e){(e<0||e>1)&&(e-=Math.floor(e));var t=Math.abs(e-.5);return ma.h=360*e-100,ma.s=1.5-1.5*t,ma.l=.8-.9*t,ma+""};function _a(e){var t=e.length;return function(n){return e[Math.max(0,Math.min(t-1,Math.floor(n*t)))]}}de(),Math.PI,Math.PI;var xa=_a(Ci("44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725")),wa=_a(Ci("00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf")),ka=_a(Ci("00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4")),Ea=_a(Ci("0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921")),Sa="__id__",Oa={ACTION_INF:"actionInf",ON_LAYER_DRAW:"onlayerdraw"},Ma=n(0),Ca=n.n(Ma),Ta=Array.prototype.slice,Pa=function(e){return e},Aa=1,Na=2,ja=3,Fa=4,Ia=1e-6;function Da(e){return"translate("+(e+.5)+",0)"}function Ra(e){return"translate(0,"+(e+.5)+")"}function La(){return!this.__axis}function za(e,t){var n=[],r=null,i=null,a=null,o=6,u=6,c=3,l=e===Aa||e===Fa?-1:1,s=e===Fa||e===Na?"x":"y",f=e===Aa||e===ja?Da:Ra;function h(h){var d=null==r?t.ticks?t.ticks.apply(t,n):t.domain():r,p=null==i?t.tickFormat?t.tickFormat.apply(t,n):Pa:i,y=Math.max(o,0)+c,g=t.range(),v=+g[0]+.5,m=+g[g.length-1]+.5,b=(t.bandwidth?function(e){var t=Math.max(0,e.bandwidth()-1)/2;return e.round()&&(t=Math.round(t)),function(n){return+e(n)+t}}:function(e){return function(t){return+e(t)}})(t.copy()),_=h.selection?h.selection():h,x=_.selectAll(".domain").data([null]),w=_.selectAll(".tick").data(d,t).order(),k=w.exit(),E=w.enter().append("g").attr("class","tick"),S=w.select("line"),O=w.select("text");x=x.merge(x.enter().insert("path",".tick").attr("class","domain").attr("stroke","#000")),w=w.merge(E),S=S.merge(E.append("line").attr("stroke","#000").attr(s+"2",l*o)),O=O.merge(E.append("text").attr("fill","#000").attr(s,l*y).attr("dy",e===Aa?"0em":e===ja?"0.71em":"0.32em")).style("transform",a),h!==_&&(x=x.transition(h),w=w.transition(h),S=S.transition(h),O=O.transition(h),k=k.transition(h).attr("opacity",Ia).attr("transform",function(e){return isFinite(e=b(e))?f(e):this.getAttribute("transform")}),E.attr("opacity",Ia).attr("transform",function(e){var t=this.parentNode.__axis;return f(t&&isFinite(t=t(e))?t:b(e))})),k.remove(),x.attr("d",e===Fa||e==Na?"M"+l*u+","+v+"H0.5V"+m+"H"+l*u:"M"+v+","+l*u+"V0.5H"+m+"V"+l*u),w.attr("opacity",1).attr("transform",function(e){return f(b(e))}),S.attr(s+"2",l*o),O.attr(s,l*y).text(p),_.filter(La).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",e===Na?"start":e===Fa?"end":"middle"),_.each(function(){this.__axis=b})}return h.scale=function(e){return arguments.length?(t=e,h):t},h.tickTransform=function(e){return arguments.length?(a=e,h):a},h.ticks=function(){return n=Ta.call(arguments),h},h.tickArguments=function(e){return arguments.length?(n=null==e?[]:Ta.call(e),h):n.slice()},h.tickValues=function(e){return arguments.length?(r=null==e?null:Ta.call(e),h):r&&r.slice()},h.tickFormat=function(e){return arguments.length?(i=e,h):i},h.tickSize=function(e){return arguments.length?(o=u=+e,h):o},h.tickSizeInner=function(e){return arguments.length?(o=+e,h):o},h.tickSizeOuter=function(e){return arguments.length?(u=+e,h):u},h.tickPadding=function(e){return arguments.length?(c=+e,h):c},h}var Ba=Math.PI,Ua=2*Ba,Ha=Ua-1e-6;function Va(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function Wa(){return new Va}Va.prototype=Wa.prototype={constructor:Va,moveTo:function(e,t){this._+="M"+(this._x0=this._x1=+e)+","+(this._y0=this._y1=+t)},closePath:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(e,t){this._+="L"+(this._x1=+e)+","+(this._y1=+t)},quadraticCurveTo:function(e,t,n,r){this._+="Q"+ +e+","+ +t+","+(this._x1=+n)+","+(this._y1=+r)},bezierCurveTo:function(e,t,n,r,i,a){this._+="C"+ +e+","+ +t+","+ +n+","+ +r+","+(this._x1=+i)+","+(this._y1=+a)},arcTo:function(e,t,n,r,i){e=+e,t=+t,n=+n,r=+r,i=+i;var a=this._x1,o=this._y1,u=n-e,c=r-t,l=a-e,s=o-t,f=l*l+s*s;if(i<0)throw new Error("negative radius: "+i);if(null===this._x1)this._+="M"+(this._x1=e)+","+(this._y1=t);else if(f>1e-6)if(Math.abs(s*u-c*l)>1e-6&&i){var h=n-a,d=r-o,p=u*u+c*c,y=h*h+d*d,g=Math.sqrt(p),v=Math.sqrt(f),m=i*Math.tan((Ba-Math.acos((p+f-y)/(2*g*v)))/2),b=m/v,_=m/g;Math.abs(b-1)>1e-6&&(this._+="L"+(e+b*l)+","+(t+b*s)),this._+="A"+i+","+i+",0,0,"+ +(s*h>l*d)+","+(this._x1=e+_*u)+","+(this._y1=t+_*c)}else this._+="L"+(this._x1=e)+","+(this._y1=t)},arc:function(e,t,n,r,i,a){e=+e,t=+t;var o=(n=+n)*Math.cos(r),u=n*Math.sin(r),c=e+o,l=t+u,s=1^a,f=a?r-i:i-r;if(n<0)throw new Error("negative radius: "+n);null===this._x1?this._+="M"+c+","+l:(Math.abs(this._x1-c)>1e-6||Math.abs(this._y1-l)>1e-6)&&(this._+="L"+c+","+l),n&&(f<0&&(f=f%Ua+Ua),f>Ha?this._+="A"+n+","+n+",0,1,"+s+","+(e-o)+","+(t-u)+"A"+n+","+n+",0,1,"+s+","+(this._x1=c)+","+(this._y1=l):f>1e-6&&(this._+="A"+n+","+n+",0,"+ +(f>=Ba)+","+s+","+(this._x1=e+n*Math.cos(i))+","+(this._y1=t+n*Math.sin(i))))},rect:function(e,t,n,r){this._+="M"+(this._x0=this._x1=+e)+","+(this._y0=this._y1=+t)+"h"+ +n+"v"+ +r+"h"+-n+"Z"},toString:function(){return this._}};var qa=Wa,Ga=function(e){return function(){return e}},Ya=Math.abs,$a=Math.atan2,Xa=Math.cos,Ka=Math.max,Qa=Math.min,Ja=Math.sin,Za=Math.sqrt,eo=1e-12,to=Math.PI,no=to/2,ro=2*to;function io(e){return e>=1?no:e<=-1?-no:Math.asin(e)}function ao(e){return e.innerRadius}function oo(e){return e.outerRadius}function uo(e){return e.startAngle}function co(e){return e.endAngle}function lo(e){return e&&e.padAngle}function so(e,t,n,r,i,a,o){var u=e-n,c=t-r,l=(o?a:-a)/Za(u*u+c*c),s=l*c,f=-l*u,h=e+s,d=t+f,p=n+s,y=r+f,g=(h+p)/2,v=(d+y)/2,m=p-h,b=y-d,_=m*m+b*b,x=i-a,w=h*y-p*d,k=(b<0?-1:1)*Za(Ka(0,x*x*_-w*w)),E=(w*b-m*k)/_,S=(-w*m-b*k)/_,O=(w*b+m*k)/_,M=(-w*m+b*k)/_,C=E-g,T=S-v,P=O-g,A=M-v;return C*C+T*T>P*P+A*A&&(E=O,S=M),{cx:E,cy:S,x01:-s,y01:-f,x11:E*(i/x-1),y11:S*(i/x-1)}}function fo(e){this._context=e}fo.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t)}}};var ho=function(e){return new fo(e)};function po(e){return e[0]}function yo(e){return e[1]}var go=function(){var e=po,t=yo,n=Ga(!0),r=null,i=ho,a=null;function o(o){var u,c,l,s=o.length,f=!1;for(null==r&&(a=i(l=qa())),u=0;u<=s;++u)!(u<s&&n(c=o[u],u,o))===f&&((f=!f)?a.lineStart():a.lineEnd()),f&&a.point(+e(c,u,o),+t(c,u,o));if(l)return a=null,l+""||null}return o.x=function(t){return arguments.length?(e="function"==typeof t?t:Ga(+t),o):e},o.y=function(e){return arguments.length?(t="function"==typeof e?e:Ga(+e),o):t},o.defined=function(e){return arguments.length?(n="function"==typeof e?e:Ga(!!e),o):n},o.curve=function(e){return arguments.length?(i=e,null!=r&&(a=i(r)),o):i},o.context=function(e){return arguments.length?(null==e?r=a=null:a=i(r=e),o):r},o},vo=function(e,t){return t<e?-1:t>e?1:t>=e?0:NaN},mo=function(e){return e};function bo(e){this._curve=e}!function(e){function t(t){return new bo(e(t))}t._curve=e}(ho),bo.prototype={areaStart:function(){this._curve.areaStart()},areaEnd:function(){this._curve.areaEnd()},lineStart:function(){this._curve.lineStart()},lineEnd:function(){this._curve.lineEnd()},point:function(e,t){this._curve.point(t*Math.sin(e),t*-Math.cos(e))}};var _o=Array.prototype.slice,xo={draw:function(e,t){var n=Math.sqrt(t/to);e.moveTo(n,0),e.arc(0,0,n,0,ro)}},wo={draw:function(e,t){var n=Math.sqrt(t/5)/2;e.moveTo(-3*n,-n),e.lineTo(-n,-n),e.lineTo(-n,-3*n),e.lineTo(n,-3*n),e.lineTo(n,-n),e.lineTo(3*n,-n),e.lineTo(3*n,n),e.lineTo(n,n),e.lineTo(n,3*n),e.lineTo(-n,3*n),e.lineTo(-n,n),e.lineTo(-3*n,n),e.closePath()}},ko=Math.sqrt(1/3),Eo=2*ko,So={draw:function(e,t){var n=Math.sqrt(t/Eo),r=n*ko;e.moveTo(0,-n),e.lineTo(r,0),e.lineTo(0,n),e.lineTo(-r,0),e.closePath()}},Oo=Math.sin(to/10)/Math.sin(7*to/10),Mo=Math.sin(ro/10)*Oo,Co=-Math.cos(ro/10)*Oo,To={draw:function(e,t){var n=Math.sqrt(.8908130915292852*t),r=Mo*n,i=Co*n;e.moveTo(0,-n),e.lineTo(r,i);for(var a=1;a<5;++a){var o=ro*a/5,u=Math.cos(o),c=Math.sin(o);e.lineTo(c*n,-u*n),e.lineTo(u*r-c*i,c*r+u*i)}e.closePath()}},Po={draw:function(e,t){var n=Math.sqrt(t),r=-n/2;e.rect(r,r,n,n)}},Ao=Math.sqrt(3),No={draw:function(e,t){var n=-Math.sqrt(t/(3*Ao));e.moveTo(0,2*n),e.lineTo(-Ao*n,-n),e.lineTo(Ao*n,-n),e.closePath()}},jo=Math.sqrt(3)/2,Fo=1/Math.sqrt(12),Io=3*(Fo/2+1),Do={draw:function(e,t){var n=Math.sqrt(t/Io),r=n/2,i=n*Fo,a=r,o=n*Fo+n,u=-a,c=o;e.moveTo(r,i),e.lineTo(a,o),e.lineTo(u,c),e.lineTo(-.5*r-jo*i,jo*r+-.5*i),e.lineTo(-.5*a-jo*o,jo*a+-.5*o),e.lineTo(-.5*u-jo*c,jo*u+-.5*c),e.lineTo(-.5*r+jo*i,-.5*i-jo*r),e.lineTo(-.5*a+jo*o,-.5*o-jo*a),e.lineTo(-.5*u+jo*c,-.5*c-jo*u),e.closePath()}},Ro=function(){};function Lo(e,t,n){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+n)/6)}function zo(e){this._context=e}function Bo(e,t){this._basis=new zo(e),this._beta=t}function Uo(e,t,n){e._context.bezierCurveTo(e._x1+e._k*(e._x2-e._x0),e._y1+e._k*(e._y2-e._y0),e._x2+e._k*(e._x1-t),e._y2+e._k*(e._y1-n),e._x2,e._y2)}function Ho(e,t){this._context=e,this._k=(1-t)/6}function Vo(e,t){this._context=e,this._k=(1-t)/6}function Wo(e,t){this._context=e,this._k=(1-t)/6}function qo(e,t,n){var r=e._x1,i=e._y1,a=e._x2,o=e._y2;if(e._l01_a>eo){var u=2*e._l01_2a+3*e._l01_a*e._l12_a+e._l12_2a,c=3*e._l01_a*(e._l01_a+e._l12_a);r=(r*u-e._x0*e._l12_2a+e._x2*e._l01_2a)/c,i=(i*u-e._y0*e._l12_2a+e._y2*e._l01_2a)/c}if(e._l23_a>eo){var l=2*e._l23_2a+3*e._l23_a*e._l12_a+e._l12_2a,s=3*e._l23_a*(e._l23_a+e._l12_a);a=(a*l+e._x1*e._l23_2a-t*e._l12_2a)/s,o=(o*l+e._y1*e._l23_2a-n*e._l12_2a)/s}e._context.bezierCurveTo(r,i,a,o,e._x2,e._y2)}function Go(e,t){this._context=e,this._alpha=t}zo.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:Lo(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Lo(this,e,t)}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}},Bo.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var e=this._x,t=this._y,n=e.length-1;if(n>0)for(var r,i=e[0],a=t[0],o=e[n]-i,u=t[n]-a,c=-1;++c<=n;)r=c/n,this._basis.point(this._beta*e[c]+(1-this._beta)*(i+r*o),this._beta*t[c]+(1-this._beta)*(a+r*u));this._x=this._y=null,this._basis.lineEnd()},point:function(e,t){this._x.push(+e),this._y.push(+t)}},function e(t){function n(e){return 1===t?new zo(e):new Bo(e,t)}return n.beta=function(t){return e(+t)},n}(.85),Ho.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:Uo(this,this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2,this._x1=e,this._y1=t;break;case 2:this._point=3;default:Uo(this,e,t)}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}},function e(t){function n(e){return new Ho(e,t)}return n.tension=function(t){return e(+t)},n}(0),Vo.prototype={areaStart:Ro,areaEnd:Ro,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:Uo(this,e,t)}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}},function e(t){function n(e){return new Vo(e,t)}return n.tension=function(t){return e(+t)},n}(0),Wo.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:Uo(this,e,t)}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}},function e(t){function n(e){return new Wo(e,t)}return n.tension=function(t){return e(+t)},n}(0),Go.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3;default:qo(this,e,t)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};var Yo=function e(t){function n(e){return t?new Go(e,t):new Ho(e,0)}return n.alpha=function(t){return e(+t)},n}(.5);function $o(e,t){this._context=e,this._alpha=t}function Xo(e,t){this._context=e,this._alpha=t}function Ko(e){return e<0?-1:1}function Qo(e,t,n){var r=e._x1-e._x0,i=t-e._x1,a=(e._y1-e._y0)/(r||i<0&&-0),o=(n-e._y1)/(i||r<0&&-0),u=(a*i+o*r)/(r+i);return(Ko(a)+Ko(o))*Math.min(Math.abs(a),Math.abs(o),.5*Math.abs(u))||0}function Jo(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function Zo(e,t,n){var r=e._x0,i=e._y0,a=e._x1,o=e._y1,u=(a-r)/3;e._context.bezierCurveTo(r+u,i+u*t,a-u,o-u*n,a,o)}function eu(e){this._context=e}function tu(e){this._context=e}function nu(e,t){this._context=e,this._t=t}$o.prototype={areaStart:Ro,areaEnd:Ro,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:qo(this,e,t)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}},function e(t){function n(e){return t?new $o(e,t):new Vo(e,0)}return n.alpha=function(t){return e(+t)},n}(.5),Xo.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:qo(this,e,t)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}},function e(t){function n(e){return t?new Xo(e,t):new Wo(e,0)}return n.alpha=function(t){return e(+t)},n}(.5),eu.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:Zo(this,this._t0,Jo(this,this._t0))}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(t=+t,(e=+e)!==this._x1||t!==this._y1){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,Zo(this,Jo(this,n=Qo(this,e,t)),n);break;default:Zo(this,this._t0,n=Qo(this,e,t))}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}},(function(e){this._context=new tu(e)}.prototype=Object.create(eu.prototype)).point=function(e,t){eu.prototype.point.call(this,t,e)},tu.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,n,r,i,a){this._context.bezierCurveTo(t,e,r,n,a,i)}},nu.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&2===this._point&&this._context.lineTo(this._x,this._y),(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var n=this._x*(1-this._t)+e*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,t)}}this._x=e,this._y=t}};var ru=function(e){return new nu(e,.5)};function iu(e){return new nu(e,0)}function au(e){return new nu(e,1)}var ou=function(e,t){if((i=e.length)>1)for(var n,r,i,a=1,o=e[t[0]],u=o.length;a<i;++a)for(r=o,o=e[t[a]],n=0;n<u;++n)o[n][1]+=o[n][0]=isNaN(r[n][1])?r[n][0]:r[n][1]},uu=function(e){for(var t=e.length,n=new Array(t);--t>=0;)n[t]=t;return n};function cu(e,t){return e[t]}var lu=function(e){var t=e.map(su);return uu(e).sort(function(e,n){return t[e]-t[n]})};function su(e){for(var t,n=0,r=-1,i=e.length;++r<i;)(t=+e[r][1])&&(n+=t);return n}function fu(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}(function e(t){function n(e){return Math.pow(e,t)}return t=+t,n.exponent=e,n})(3),function e(t){function n(e){return 1-Math.pow(1-e,t)}return t=+t,n.exponent=e,n}(3);var hu=function e(t){function n(e){return((e*=2)<=1?Math.pow(e,t):2-Math.pow(2-e,t))/2}return t=+t,n.exponent=e,n}(3);Math.PI;var du=4/11,pu=6/11,yu=8/11,gu=.75,vu=9/11,mu=10/11,bu=.9375,_u=21/22,xu=63/64,wu=1/du/du;(function e(t){function n(e){return e*e*((t+1)*e-t)}return t=+t,n.overshoot=e,n})(1.70158),function e(t){function n(e){return--e*e*((t+1)*e+t)+1}return t=+t,n.overshoot=e,n}(1.70158);var ku=function e(t){function n(e){return((e*=2)<1?e*e*((t+1)*e-t):(e-=2)*e*((t+1)*e+t)+2)/2}return t=+t,n.overshoot=e,n}(1.70158),Eu=2*Math.PI,Su=(function e(t,n){var r=Math.asin(1/(t=Math.max(1,t)))*(n/=Eu);function i(e){return t*Math.pow(2,10*--e)*Math.sin((r-e)/n)}return i.amplitude=function(t){return e(t,n*Eu)},i.period=function(n){return e(t,n)},i}(1,.3),function e(t,n){var r=Math.asin(1/(t=Math.max(1,t)))*(n/=Eu);function i(e){return 1-t*Math.pow(2,-10*(e=+e))*Math.sin((e+r)/n)}return i.amplitude=function(t){return e(t,n*Eu)},i.period=function(n){return e(t,n)},i}(1,.3)),Ou=(function e(t,n){var r=Math.asin(1/(t=Math.max(1,t)))*(n/=Eu);function i(e){return((e=2*e-1)<0?t*Math.pow(2,10*e)*Math.sin((r-e)/n):2-t*Math.pow(2,-10*e)*Math.sin((r+e)/n))/2}return i.amplitude=function(t){return e(t,n*Eu)},i.period=function(n){return e(t,n)},i}(1,.3),function(e){return function(){return e}});function Mu(e){return e[0]}function Cu(e){return e[1]}function Tu(){this._=null}function Pu(e){e.U=e.C=e.L=e.R=e.P=e.N=null}function Au(e,t){var n=t,r=t.R,i=n.U;i?i.L===n?i.L=r:i.R=r:e._=r,r.U=i,n.U=r,n.R=r.L,n.R&&(n.R.U=n),r.L=n}function Nu(e,t){var n=t,r=t.L,i=n.U;i?i.L===n?i.L=r:i.R=r:e._=r,r.U=i,n.U=r,n.L=r.R,n.L&&(n.L.U=n),r.R=n}function ju(e){for(;e.L;)e=e.L;return e}Tu.prototype={constructor:Tu,insert:function(e,t){var n,r,i;if(e){if(t.P=e,t.N=e.N,e.N&&(e.N.P=t),e.N=t,e.R){for(e=e.R;e.L;)e=e.L;e.L=t}else e.R=t;n=e}else this._?(e=ju(this._),t.P=null,t.N=e,e.P=e.L=t,n=e):(t.P=t.N=null,this._=t,n=null);for(t.L=t.R=null,t.U=n,t.C=!0,e=t;n&&n.C;)n===(r=n.U).L?(i=r.R)&&i.C?(n.C=i.C=!1,r.C=!0,e=r):(e===n.R&&(Au(this,n),n=(e=n).U),n.C=!1,r.C=!0,Nu(this,r)):(i=r.L)&&i.C?(n.C=i.C=!1,r.C=!0,e=r):(e===n.L&&(Nu(this,n),n=(e=n).U),n.C=!1,r.C=!0,Au(this,r)),n=e.U;this._.C=!1},remove:function(e){e.N&&(e.N.P=e.P),e.P&&(e.P.N=e.N),e.N=e.P=null;var t,n,r,i=e.U,a=e.L,o=e.R;if(n=a?o?ju(o):a:o,i?i.L===e?i.L=n:i.R=n:this._=n,a&&o?(r=n.C,n.C=e.C,n.L=a,a.U=n,n!==o?(i=n.U,n.U=e.U,e=n.R,i.L=e,n.R=o,o.U=n):(n.U=i,i=n,e=n.R)):(r=e.C,e=n),e&&(e.U=i),!r)if(e&&e.C)e.C=!1;else{do{if(e===this._)break;if(e===i.L){if((t=i.R).C&&(t.C=!1,i.C=!0,Au(this,i),t=i.R),t.L&&t.L.C||t.R&&t.R.C){t.R&&t.R.C||(t.L.C=!1,t.C=!0,Nu(this,t),t=i.R),t.C=i.C,i.C=t.R.C=!1,Au(this,i),e=this._;break}}else if((t=i.L).C&&(t.C=!1,i.C=!0,Nu(this,i),t=i.L),t.L&&t.L.C||t.R&&t.R.C){t.L&&t.L.C||(t.R.C=!1,t.C=!0,Au(this,t),t=i.L),t.C=i.C,i.C=t.L.C=!1,Nu(this,i),e=this._;break}t.C=!0,e=i,i=i.U}while(!e.C);e&&(e.C=!1)}}};var Fu=Tu;function Iu(e,t,n,r){var i=[null,null],a=rc.push(i)-1;return i.left=e,i.right=t,n&&Ru(i,e,t,n),r&&Ru(i,t,e,r),tc[e.index].halfedges.push(a),tc[t.index].halfedges.push(a),i}function Du(e,t,n){var r=[t,n];return r.left=e,r}function Ru(e,t,n,r){e[0]||e[1]?e.left===n?e[1]=r:e[0]=r:(e[0]=r,e.left=t,e.right=n)}function Lu(e,t,n,r,i){var a,o=e[0],u=e[1],c=o[0],l=o[1],s=0,f=1,h=u[0]-c,d=u[1]-l;if(a=t-c,h||!(a>0)){if(a/=h,h<0){if(a<s)return;a<f&&(f=a)}else if(h>0){if(a>f)return;a>s&&(s=a)}if(a=r-c,h||!(a<0)){if(a/=h,h<0){if(a>f)return;a>s&&(s=a)}else if(h>0){if(a<s)return;a<f&&(f=a)}if(a=n-l,d||!(a>0)){if(a/=d,d<0){if(a<s)return;a<f&&(f=a)}else if(d>0){if(a>f)return;a>s&&(s=a)}if(a=i-l,d||!(a<0)){if(a/=d,d<0){if(a>f)return;a>s&&(s=a)}else if(d>0){if(a<s)return;a<f&&(f=a)}return!(s>0||f<1)||(s>0&&(e[0]=[c+s*h,l+s*d]),f<1&&(e[1]=[c+f*h,l+f*d]),!0)}}}}}function zu(e,t,n,r,i){var a=e[1];if(a)return!0;var o,u,c=e[0],l=e.left,s=e.right,f=l[0],h=l[1],d=s[0],p=s[1],y=(f+d)/2,g=(h+p)/2;if(p===h){if(y<t||y>=r)return;if(f>d){if(c){if(c[1]>=i)return}else c=[y,n];a=[y,i]}else{if(c){if(c[1]<n)return}else c=[y,i];a=[y,n]}}else if(u=g-(o=(f-d)/(p-h))*y,o<-1||o>1)if(f>d){if(c){if(c[1]>=i)return}else c=[(n-u)/o,n];a=[(i-u)/o,i]}else{if(c){if(c[1]<n)return}else c=[(i-u)/o,i];a=[(n-u)/o,n]}else if(h<p){if(c){if(c[0]>=r)return}else c=[t,o*t+u];a=[r,o*r+u]}else{if(c){if(c[0]<t)return}else c=[r,o*r+u];a=[t,o*t+u]}return e[0]=c,e[1]=a,!0}function Bu(e,t){var n=e.site,r=t.left,i=t.right;return n===i&&(i=r,r=n),i?Math.atan2(i[1]-r[1],i[0]-r[0]):(n===r?(r=t[1],i=t[0]):(r=t[0],i=t[1]),Math.atan2(r[0]-i[0],i[1]-r[1]))}function Uu(e,t){return t[+(t.left!==e.site)]}function Hu(e,t){return t[+(t.left===e.site)]}var Vu,Wu=[];function qu(e){var t=e.P,n=e.N;if(t&&n){var r=t.site,i=e.site,a=n.site;if(r!==a){var o=i[0],u=i[1],c=r[0]-o,l=r[1]-u,s=a[0]-o,f=a[1]-u,h=2*(c*f-l*s);if(!(h>=-ac)){var d=c*c+l*l,p=s*s+f*f,y=(f*d-l*p)/h,g=(c*p-s*d)/h,v=Wu.pop()||new function(){Pu(this),this.x=this.y=this.arc=this.site=this.cy=null};v.arc=e,v.site=i,v.x=y+o,v.y=(v.cy=g+u)+Math.sqrt(y*y+g*g),e.circle=v;for(var m=null,b=nc._;b;)if(v.y<b.y||v.y===b.y&&v.x<=b.x){if(!b.L){m=b.P;break}b=b.L}else{if(!b.R){m=b;break}b=b.R}nc.insert(m,v),m||(Vu=v)}}}}function Gu(e){var t=e.circle;t&&(t.P||(Vu=t.N),nc.remove(t),Wu.push(t),Pu(t),e.circle=null)}var Yu=[];function $u(e){var t=Yu.pop()||new function(){Pu(this),this.edge=this.site=this.circle=null};return t.site=e,t}function Xu(e){Gu(e),ec.remove(e),Yu.push(e),Pu(e)}function Ku(e){var t=e.circle,n=t.x,r=t.cy,i=[n,r],a=e.P,o=e.N,u=[e];Xu(e);for(var c=a;c.circle&&Math.abs(n-c.circle.x)<ic&&Math.abs(r-c.circle.cy)<ic;)a=c.P,u.unshift(c),Xu(c),c=a;u.unshift(c),Gu(c);for(var l=o;l.circle&&Math.abs(n-l.circle.x)<ic&&Math.abs(r-l.circle.cy)<ic;)o=l.N,u.push(l),Xu(l),l=o;u.push(l),Gu(l);var s,f=u.length;for(s=1;s<f;++s)l=u[s],c=u[s-1],Ru(l.edge,c.site,l.site,i);c=u[0],(l=u[f-1]).edge=Iu(c.site,l.site,null,i),qu(c),qu(l)}function Qu(e){for(var t,n,r,i,a=e[0],o=e[1],u=ec._;u;)if((r=Ju(u,o)-a)>ic)u=u.L;else{if(!((i=a-Zu(u,o))>ic)){r>-ic?(t=u.P,n=u):i>-ic?(t=u,n=u.N):t=n=u;break}if(!u.R){t=u;break}u=u.R}!function(e){tc[e.index]={site:e,halfedges:[]}}(e);var c=$u(e);if(ec.insert(t,c),t||n){if(t===n)return Gu(t),n=$u(t.site),ec.insert(c,n),c.edge=n.edge=Iu(t.site,c.site),qu(t),void qu(n);if(n){Gu(t),Gu(n);var l=t.site,s=l[0],f=l[1],h=e[0]-s,d=e[1]-f,p=n.site,y=p[0]-s,g=p[1]-f,v=2*(h*g-d*y),m=h*h+d*d,b=y*y+g*g,_=[(g*m-d*b)/v+s,(h*b-y*m)/v+f];Ru(n.edge,l,p,_),c.edge=Iu(l,e,null,_),n.edge=Iu(e,p,null,_),qu(t),qu(n)}else c.edge=Iu(t.site,c.site)}}function Ju(e,t){var n=e.site,r=n[0],i=n[1],a=i-t;if(!a)return r;var o=e.P;if(!o)return-1/0;var u=(n=o.site)[0],c=n[1],l=c-t;if(!l)return u;var s=u-r,f=1/a-1/l,h=s/l;return f?(-h+Math.sqrt(h*h-2*f*(s*s/(-2*l)-c+l/2+i-a/2)))/f+r:(r+u)/2}function Zu(e,t){var n=e.N;if(n)return Ju(n,t);var r=e.site;return r[1]===t?r[0]:1/0}var ec,tc,nc,rc,ic=1e-6,ac=1e-12;function oc(e,t,n){return(e[0]-n[0])*(t[1]-e[1])-(e[0]-t[0])*(n[1]-e[1])}function uc(e,t){return t[1]-e[1]||t[0]-e[0]}function cc(e,t){var n,r,i,a=e.sort(uc).pop();for(rc=[],tc=new Array(e.length),ec=new Fu,nc=new Fu;;)if(i=Vu,a&&(!i||a[1]<i.y||a[1]===i.y&&a[0]<i.x))a[0]===n&&a[1]===r||(Qu(a),n=a[0],r=a[1]),a=e.pop();else{if(!i)break;Ku(i.arc)}if(function(){for(var e,t,n,r,i=0,a=tc.length;i<a;++i)if((e=tc[i])&&(r=(t=e.halfedges).length)){var o=new Array(r),u=new Array(r);for(n=0;n<r;++n)o[n]=n,u[n]=Bu(e,rc[t[n]]);for(o.sort(function(e,t){return u[t]-u[e]}),n=0;n<r;++n)u[n]=t[o[n]];for(n=0;n<r;++n)t[n]=u[n]}}(),t){var o=+t[0][0],u=+t[0][1],c=+t[1][0],l=+t[1][1];!function(e,t,n,r){for(var i,a=rc.length;a--;)zu(i=rc[a],e,t,n,r)&&Lu(i,e,t,n,r)&&(Math.abs(i[0][0]-i[1][0])>ic||Math.abs(i[0][1]-i[1][1])>ic)||delete rc[a]}(o,u,c,l),function(e,t,n,r){var i,a,o,u,c,l,s,f,h,d,p,y,g=tc.length,v=!0;for(i=0;i<g;++i)if(a=tc[i]){for(o=a.site,u=(c=a.halfedges).length;u--;)rc[c[u]]||c.splice(u,1);for(u=0,l=c.length;u<l;)p=(d=Hu(a,rc[c[u]]))[0],y=d[1],f=(s=Uu(a,rc[c[++u%l]]))[0],h=s[1],(Math.abs(p-f)>ic||Math.abs(y-h)>ic)&&(c.splice(u,0,rc.push(Du(o,d,Math.abs(p-e)<ic&&r-y>ic?[e,Math.abs(f-e)<ic?h:r]:Math.abs(y-r)<ic&&n-p>ic?[Math.abs(h-r)<ic?f:n,r]:Math.abs(p-n)<ic&&y-t>ic?[n,Math.abs(f-n)<ic?h:t]:Math.abs(y-t)<ic&&p-e>ic?[Math.abs(h-t)<ic?f:e,t]:null))-1),++l);l&&(v=!1)}if(v){var m,b,_,x=1/0;for(i=0,v=null;i<g;++i)(a=tc[i])&&(_=(m=(o=a.site)[0]-e)*m+(b=o[1]-t)*b)<x&&(x=_,v=a);if(v){var w=[e,t],k=[e,r],E=[n,r],S=[n,t];v.halfedges.push(rc.push(Du(o=v.site,w,k))-1,rc.push(Du(o,k,E))-1,rc.push(Du(o,E,S))-1,rc.push(Du(o,S,w))-1)}}for(i=0;i<g;++i)(a=tc[i])&&(a.halfedges.length||delete tc[i])}(o,u,c,l)}this.edges=rc,this.cells=tc,ec=nc=rc=tc=null}cc.prototype={constructor:cc,polygons:function(){var e=this.edges;return this.cells.map(function(t){var n=t.halfedges.map(function(n){return Uu(t,e[n])});return n.data=t.site.data,n})},triangles:function(){var e=[],t=this.edges;return this.cells.forEach(function(n,r){if(a=(i=n.halfedges).length)for(var i,a,o,u=n.site,c=-1,l=t[i[a-1]],s=l.left===u?l.right:l.left;++c<a;)o=s,s=(l=t[i[c]]).left===u?l.right:l.left,o&&s&&r<o.index&&r<s.index&&oc(u,o,s)<0&&e.push([u.data,o.data,s.data])}),e},links:function(){return this.edges.filter(function(e){return e.right}).map(function(e){return{source:e.left.data,target:e.right.data}})},find:function(e,t,n){for(var r,i,a=this,o=a._found||0,u=a.cells.length;!(i=a.cells[o]);)if(++o>=u)return null;var c=e-i.site[0],l=t-i.site[1],s=c*c+l*l;do{i=a.cells[r=o],o=null,i.halfedges.forEach(function(n){var r=a.edges[n],u=r.left;if(u!==i.site&&u||(u=r.right)){var c=e-u[0],l=t-u[1],f=c*c+l*l;f<s&&(s=f,o=u.index)}})}while(null!==o);return a._found=r,null==n||s<=n*n?i.site:null}};var lc,sc,fc=function(){var e=Mu,t=Cu,n=null;function r(r){return new cc(r.map(function(n,i){var a=[Math.round(e(n,i,r)/ic)*ic,Math.round(t(n,i,r)/ic)*ic];return a.index=i,a.data=n,a}),n)}return r.polygons=function(e){return r(e).polygons()},r.links=function(e){return r(e).links()},r.triangles=function(e){return r(e).triangles()},r.x=function(t){return arguments.length?(e="function"==typeof t?t:Ou(+t),r):e},r.y=function(e){return arguments.length?(t="function"==typeof e?e:Ou(+e),r):t},r.extent=function(e){return arguments.length?(n=null==e?null:[[+e[0][0],+e[0][1]],[+e[1][0],+e[1][1]]],r):n&&[[n[0][0],n[0][1]],[n[1][0],n[1][1]]]},r.size=function(e){return arguments.length?(n=null==e?null:[[0,0],[+e[0],+e[1]]],r):n&&[n[1][0]-n[0][0],n[1][1]-n[0][1]]},r},hc=n(2),dc=n.n(hc),pc=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,i=!1,a=void 0;try{for(var o,u=e[Symbol.iterator]();!(r=(o=u.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){i=!0,a=e}finally{try{!r&&u.return&&u.return()}finally{if(i)throw a}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},yc=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),gc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function vc(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function mc(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function bc(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}window.HTMLElement;var _c=function(e){if("object"===(void 0===e?"undefined":gc(e))){if(null===e)return!1;if("[object Object]"===Object.prototype.toString.call(e))return"Object"===(e.constructor.toString().match(/^function (.*)\(\)/m)||[])[1]}return!1},xc=function(){return"id-"+(new Date).getTime()+Math.round(1e4*Math.random())},wc=function e(t){var n={},r=void 0;for(var i in t)({}).hasOwnProperty.call(t,i)&&(r=t[i],n[i]=_c(r)?e(r):r);return n},kc=function(e,t){return Math.max.apply(Math,bc(e.filter(function(e){return!isNaN(e[t])}).map(function(e){return e[t]})))},Ec=function(e,t){return Math.min.apply(Math,bc(e.filter(function(e){return!isNaN(e[t])}).map(function(e){return e[t]})))},Sc=function(e,t,n){var r,i=void 0,a=void 0;switch(e=e[0]instanceof Array?e:[e],n){case Ma.DimensionSubtype.CATEGORICAL:i=(r=[]).concat.apply(r,bc(e.map(function(e){return e.map(function(e){return e[t[0]]}).filter(function(e){return void 0!==e})})));break;default:a=e.map(function(e){var n=Ec(e,t[0]),r=Ec(e,t[1]),i=kc(e,t[0]),a=kc(e,t[1]);return[Math.min(n,r),Math.max(i,a)]}),i=[Math.min.apply(Math,bc(a.map(function(e){return e[0]}))),Math.max.apply(Math,bc(a.map(function(e){return e[1]})))]}return i},Oc={circle:xo,cross:wo,diamond:So,square:Po,star:To,wye:Do,triangle:No},Mc={cubic:fu,bounce:function(e){return(e=+e)<du?wu*e*e:e<yu?wu*(e-=pu)*e+gu:e<mu?wu*(e-=vu)*e+bu:wu*(e-=_u)*e+xu},linear:function(e){return+e},elastic:Su,back:ku,poly:hu,circle:function(e){return((e*=2)<=1?1-Math.sqrt(1-e*e):Math.sqrt(1-(e-=2)*e)+1)/2}},Cc=function(e,t,n){for(var r=0,i=e.length-1,a=void 0,o=void 0;r<i;)a=Math.floor((r+i)/2),o=Math.abs(e[a]-t),Math.abs(e[a+1]-t)<=o?r=a+1:i=a;if(!n)return i;var u=e[i];return u===t?i:u>t?0===i?i:"left"===n?i-1:i:i===e.length-1?i:"left"===n?i:i+1},Tc=(requestAnimationFrame,cancelAnimationFrame,function(e,t,n){return[n+"-"+(e=e.replace(/^\.*/,"")),n+"-"+e+"-"+t]}),Pc=function(e,t){return void 0===e||"object"===(void 0===e?"undefined":gc(e))&&!e?t:e},Ac=function(e,t){for(var n in e)Object.hasOwnProperty.call(e,n)&&t(n,e)},Nc=function(){function e(t){mc(this,e),this._voronoi=fc().x(function(e){return e.x}).y(function(e){return e.y}),this.data(t)}return yc(e,[{key:"data",value:function(e){return e&&(this._voronoiFn=this._voronoi(e)),this}},{key:"find",value:function(e,t,n){return this._voronoiFn.find(e,t,n)}}]),e}(),jc=function(){function e(t){mc(this,e),this.model=dc.a.create(t),this._listeners=[]}return yc(e,[{key:"serialize",value:function(){return this.model.serialize()}},{key:"commit",value:function(e,t){this.model.prop(e,t)}},{key:"registerChangeListener",value:function(e,t,n){var r=e;Array.isArray(e)||(r=[e]);var i=this.model.next(r,t,n);return this._listeners.push(i),this}},{key:"registerImmediateListener",value:function(e,t,n){var r=e;Array.isArray(e)||(r=[e]);var i=this.model.on(r,t,n);return this._listeners.push(i),this}},{key:"get",value:function(e){return this.model.prop(e)}},{key:"computed",value:function(e,t){return this.model.calculatedProp(e,t)}},{key:"unsubscribeAll",value:function(){this._listeners.forEach(function(e){return e()})}}]),e}(),Fc=function(e){var t=e.toString().match(/(\d+)(px)*/g);return t?parseInt(t[0],10):null},Ic=function(e,t,n){var r=void 0,i=n&&n instanceof dc.a?n:dc.a.create({}),a=function(n){({}).hasOwnProperty.call(t,n)&&(r=t[n],i.prop(n)||i.append(vc({},n,r.value)),e[n]=function(t,r,a){return function(){for(var o=arguments.length,u=Array(o),c=0;c<o;c++)u[c]=arguments[c];var l=void 0,s=void 0,f=u.length,h=i.prop(n);if(f){var d=a&&a.spreadParams;l=u;var p=[];if(a){for(var y=0;y<f;y++){l=u[y];var g=a.sanitization&&(d?a.sanitization[y]:a.sanitization),v=a.typeCheck&&(d?a.typeCheck[y]:a.typeCheck);if(g&&"function"==typeof g&&(l=g(l,h,e)),v)if("function"==typeof v){var m=a.typeExpected;m&&d&&(m=m[y]),s=m||!0,v(l)===s&&p.push(l)}else if("string"==typeof v){if("constructor"===v){var b=d?a.typeExpected[y]:a.typeExpected;l&&l.constructor.name===b&&p.push(l)}}else p.push(l);else p.push(l)}var _=a.preset,x=t.prop(r);_&&_(p[0],e),d&&x.forEach(function(e,t){void 0===p[t]&&(p[t]=e)}),p.length&&t.prop(r,d?p:p[0])}else t.prop(r,d?l:l[0]);return e}return t.prop(r)}}(i,n,r.meta))};for(var o in t)a(o);return[e,i]},Dc=function(e,t){Object.entries(t).forEach(function(t){var n=t[0],r=t[1].typeChecker,i=t[1].sanitization,a=e.constructor.prototype;Object.hasOwnProperty.call(a,n)||(e[n]=function(){if(arguments.length){var t=arguments.length<=0?void 0:arguments[0];return i&&(t=i(e,arguments.length<=0?void 0:arguments[0])),r&&!r(t)?e["_"+n]:(e["_"+n]=t,e)}return e["_"+n]})})},Rc=function(e){return function(t,n){return"Array"===e?!!t&&function(e,t){if(e.length!==t.length)return!1;for(var n=e.length;n>=0;n--)if(e[n]!==t[n])return!1;return!0}(t,n):"Object"===e?Object.is(t,n):t===n}},Lc={INTERFACE_IMPL:"Method not implemented"},zc=function e(t,n){for(var r in n)_c(t[r])&&_c(n[r])?e(t[r],n[r]):n[r]instanceof Object&&n[r].constructor===Object?(t[r]={},e(t[r],n[r])):t[r]=n[r];return t},Bc=function(){return st},Uc=function(){return it},Hc=function(){return kt},Vc=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;e=+e,t=+t,n=+n,r=+r,e/=255,t/=255,n/=255;var i=Math.max(e,t,n),a=Math.min(e,t,n),o=void 0,u=void 0,c=(i+a)/2;if(i===a)o=u=0;else{var l=i-a;switch(u=c>.5?l/(2-i-a):l/(i+a),i){case e:o=(t-n)/l+(t<n?6:0);break;case t:o=(n-e)/l+2;break;case n:o=(e-t)/l+4}o/=6}return[o,u,c,r]},Wc=function(e){return/rgb\((\d{1,3}), (\d{1,3}), (\d{1,3})\)/.test(e)||/rgba?\(((25[0-5]|2[0-4]\d|1\d{1,2}|\d\d?)\s*,\s*?){2}(25[0-5]|2[0-4]\d|1\d{1,2}|\d\d?)\s*,?\s*([01]\.?\d*?)?\)/.test(e)?"rgb":/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.test(e)||/^hsla\((0|360|35\d|3[0-4]\d|[12]\d\d|0?\d?\d),(0|100|\d{1,2})%,(0|100|\d{1,2})%,(0?\.\d|1(\.0)?)\)$/.test(e)?"hsl":/^#([0-9a-f]{3}){1,2}$/i.test(e)?"hex":e},qc=function(e,t,n){if(null===t)return null;var r=Object.keys(t);return e.select(function(e){return r.every(function(n){var r=e[n].value,i=t[n][0]instanceof Array?t[n][0]:t[n];return"string"==typeof i[0]?void 0!==i.find(function(e){return e===r}):!i||r>=i[0]&&r<=i[1]})},{saveChild:!1,mode:n})},Gc=function(e,t,n){var r=void 0;if(t instanceof Array){var i=e.getFieldsConfig(),a=t.slice(1,t.length);if(t instanceof Function)r=t(e,{},!1);else if(t instanceof Array&&t[0].length){var o=t[0].filter(function(e){return e in i});r=e.select(function(e){var t=!0;return o.forEach(function(n,r){var i=e[n].valueOf(),o=a.findIndex(function(e){return e[r]===i});t=t&&-1!==o}),t},{saveChild:!1,mode:n})}}else r=qc(e,t,n);return r},Yc=function(e,t){var n=t(e);for(var r in n)if({}.hasOwnProperty.call(n,r)){var i=n[r],a=i.type,o=i.props,u=i.listener;e.store()[a](o,u)}},$c=function(e){return!isNaN(e)&&e!==-1/0&&e!==1/0},Xc=function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if(void 0===e||null===e)return e;for(var i=e,a=0,o=n.length;a<o&&void 0!==(i=i[n[a]])&&null!==i;a++);return i},Kc=function(e){return e instanceof Array?e:[e]},Qc=function(e){return function(){var e=Ga(xo),t=Ga(64),n=null;function r(){var r;if(n||(n=r=qa()),e.apply(this,arguments).draw(n,+t.apply(this,arguments)),r)return n=null,r+""||null}return r.type=function(t){return arguments.length?(e="function"==typeof t?t:Ga(t),r):e},r.size=function(e){return arguments.length?(t="function"==typeof e?e:Ga(+e),r):t},r.context=function(e){return arguments.length?(n=null==e?null:e,r):n},r}().type(Oc[e])},Jc=(vc(lc={},"none",uu),vc(lc,"ascending",lu),vc(lc,"descending",function(e){return lu(e).reverse()}),lc),Zc=(vc(sc={},"diverging",function(e,t){if((u=e.length)>1)for(var n,r,i,a,o,u,c=0,l=e[t[0]].length;c<l;++c)for(a=o=0,n=0;n<u;++n)(i=(r=e[t[n]][c])[1]-r[0])>=0?(r[0]=a,r[1]=a+=i):i<0?(r[1]=o,r[0]=o+=i):r[0]=a}),vc(sc,"none",ou),vc(sc,"expand",function(e,t){if((r=e.length)>0){for(var n,r,i,a=0,o=e[0].length;a<o;++a){for(i=n=0;n<r;++n)i+=e[n][a][1]||0;if(i)for(n=0;n<r;++n)e[n][a][1]/=i}ou(e,t)}}),vc(sc,"wiggle",function(e,t){if((i=e.length)>0&&(r=(n=e[t[0]]).length)>0){for(var n,r,i,a=0,o=1;o<r;++o){for(var u=0,c=0,l=0;u<i;++u){for(var s=e[t[u]],f=s[o][1]||0,h=(f-(s[o-1][1]||0))/2,d=0;d<u;++d){var p=e[t[d]];h+=(p[o][1]||0)-(p[o-1][1]||0)}c+=f,l+=h*f}n[o-1][1]+=n[o-1][0]=a,c&&(a-=l/c)}n[o-1][1]+=n[o-1][0]=a,ou(e,t)}}),sc),el={curveLinear:ho,curveStepAfter:au,curveStepBefore:iu,curveStep:ru,curveCatmullRom:Yo,stepAfter:au,catmullRom:Yo,step:ru,stepBefore:iu,linear:ho},tl={axisLeft:function(e){return za(Fa,e)},axisRight:function(e){return za(Na,e)},axisTop:function(e){return za(Aa,e)},axisBottom:function(e){return za(ja,e)},line:go,area:function(){var e=po,t=null,n=Ga(0),r=yo,i=Ga(!0),a=null,o=ho,u=null;function c(c){var l,s,f,h,d,p=c.length,y=!1,g=new Array(p),v=new Array(p);for(null==a&&(u=o(d=qa())),l=0;l<=p;++l){if(!(l<p&&i(h=c[l],l,c))===y)if(y=!y)s=l,u.areaStart(),u.lineStart();else{for(u.lineEnd(),u.lineStart(),f=l-1;f>=s;--f)u.point(g[f],v[f]);u.lineEnd(),u.areaEnd()}y&&(g[l]=+e(h,l,c),v[l]=+n(h,l,c),u.point(t?+t(h,l,c):g[l],r?+r(h,l,c):v[l]))}if(d)return u=null,d+""||null}function l(){return go().defined(i).curve(o).context(a)}return c.x=function(n){return arguments.length?(e="function"==typeof n?n:Ga(+n),t=null,c):e},c.x0=function(t){return arguments.length?(e="function"==typeof t?t:Ga(+t),c):e},c.x1=function(e){return arguments.length?(t=null==e?null:"function"==typeof e?e:Ga(+e),c):t},c.y=function(e){return arguments.length?(n="function"==typeof e?e:Ga(+e),r=null,c):n},c.y0=function(e){return arguments.length?(n="function"==typeof e?e:Ga(+e),c):n},c.y1=function(e){return arguments.length?(r=null==e?null:"function"==typeof e?e:Ga(+e),c):r},c.lineX0=c.lineY0=function(){return l().x(e).y(n)},c.lineY1=function(){return l().x(e).y(r)},c.lineX1=function(){return l().x(t).y(n)},c.defined=function(e){return arguments.length?(i="function"==typeof e?e:Ga(!!e),c):i},c.curve=function(e){return arguments.length?(o=e,null!=a&&(u=o(a)),c):o},c.context=function(e){return arguments.length?(null==e?a=u=null:u=o(a=e),c):a},c},pie:function(){var e=mo,t=vo,n=null,r=Ga(0),i=Ga(ro),a=Ga(0);function o(o){var u,c,l,s,f,h=o.length,d=0,p=new Array(h),y=new Array(h),g=+r.apply(this,arguments),v=Math.min(ro,Math.max(-ro,i.apply(this,arguments)-g)),m=Math.min(Math.abs(v)/h,a.apply(this,arguments)),b=m*(v<0?-1:1);for(u=0;u<h;++u)(f=y[p[u]=u]=+e(o[u],u,o))>0&&(d+=f);for(null!=t?p.sort(function(e,n){return t(y[e],y[n])}):null!=n&&p.sort(function(e,t){return n(o[e],o[t])}),u=0,l=d?(v-h*b)/d:0;u<h;++u,g=s)c=p[u],s=g+((f=y[c])>0?f*l:0)+b,y[c]={data:o[c],index:u,value:f,startAngle:g,endAngle:s,padAngle:m};return y}return o.value=function(t){return arguments.length?(e="function"==typeof t?t:Ga(+t),o):e},o.sortValues=function(e){return arguments.length?(t=e,n=null,o):t},o.sort=function(e){return arguments.length?(n=e,t=null,o):n},o.startAngle=function(e){return arguments.length?(r="function"==typeof e?e:Ga(+e),o):r},o.endAngle=function(e){return arguments.length?(i="function"==typeof e?e:Ga(+e),o):i},o.padAngle=function(e){return arguments.length?(a="function"==typeof e?e:Ga(+e),o):a},o},arc:function(){var e=ao,t=oo,n=Ga(0),r=null,i=uo,a=co,o=lo,u=null;function c(){var c,l,s=+e.apply(this,arguments),f=+t.apply(this,arguments),h=i.apply(this,arguments)-no,d=a.apply(this,arguments)-no,p=Ya(d-h),y=d>h;if(u||(u=c=qa()),f<s&&(l=f,f=s,s=l),f>eo)if(p>ro-eo)u.moveTo(f*Xa(h),f*Ja(h)),u.arc(0,0,f,h,d,!y),s>eo&&(u.moveTo(s*Xa(d),s*Ja(d)),u.arc(0,0,s,d,h,y));else{var g,v,m=h,b=d,_=h,x=d,w=p,k=p,E=o.apply(this,arguments)/2,S=E>eo&&(r?+r.apply(this,arguments):Za(s*s+f*f)),O=Qa(Ya(f-s)/2,+n.apply(this,arguments)),M=O,C=O;if(S>eo){var T=io(S/s*Ja(E)),P=io(S/f*Ja(E));(w-=2*T)>eo?(_+=T*=y?1:-1,x-=T):(w=0,_=x=(h+d)/2),(k-=2*P)>eo?(m+=P*=y?1:-1,b-=P):(k=0,m=b=(h+d)/2)}var A=f*Xa(m),N=f*Ja(m),j=s*Xa(x),F=s*Ja(x);if(O>eo){var I=f*Xa(b),D=f*Ja(b),R=s*Xa(_),L=s*Ja(_);if(p<to){var z=w>eo?function(e,t,n,r,i,a,o,u){var c=n-e,l=r-t,s=o-i,f=u-a,h=(s*(t-a)-f*(e-i))/(f*c-s*l);return[e+h*c,t+h*l]}(A,N,R,L,I,D,j,F):[j,F],B=A-z[0],U=N-z[1],H=I-z[0],V=D-z[1],W=1/Ja(function(e){return e>1?0:e<-1?to:Math.acos(e)}((B*H+U*V)/(Za(B*B+U*U)*Za(H*H+V*V)))/2),q=Za(z[0]*z[0]+z[1]*z[1]);M=Qa(O,(s-q)/(W-1)),C=Qa(O,(f-q)/(W+1))}}k>eo?C>eo?(g=so(R,L,A,N,f,C,y),v=so(I,D,j,F,f,C,y),u.moveTo(g.cx+g.x01,g.cy+g.y01),C<O?u.arc(g.cx,g.cy,C,$a(g.y01,g.x01),$a(v.y01,v.x01),!y):(u.arc(g.cx,g.cy,C,$a(g.y01,g.x01),$a(g.y11,g.x11),!y),u.arc(0,0,f,$a(g.cy+g.y11,g.cx+g.x11),$a(v.cy+v.y11,v.cx+v.x11),!y),u.arc(v.cx,v.cy,C,$a(v.y11,v.x11),$a(v.y01,v.x01),!y))):(u.moveTo(A,N),u.arc(0,0,f,m,b,!y)):u.moveTo(A,N),s>eo&&w>eo?M>eo?(g=so(j,F,I,D,s,-M,y),v=so(A,N,R,L,s,-M,y),u.lineTo(g.cx+g.x01,g.cy+g.y01),M<O?u.arc(g.cx,g.cy,M,$a(g.y01,g.x01),$a(v.y01,v.x01),!y):(u.arc(g.cx,g.cy,M,$a(g.y01,g.x01),$a(g.y11,g.x11),!y),u.arc(0,0,s,$a(g.cy+g.y11,g.cx+g.x11),$a(v.cy+v.y11,v.cx+v.x11),y),u.arc(v.cx,v.cy,M,$a(v.y11,v.x11),$a(v.y01,v.x01),!y))):u.arc(0,0,s,x,_,y):u.lineTo(j,F)}else u.moveTo(0,0);if(u.closePath(),c)return u=null,c+""||null}return c.centroid=function(){var n=(+e.apply(this,arguments)+ +t.apply(this,arguments))/2,r=(+i.apply(this,arguments)+ +a.apply(this,arguments))/2-to/2;return[Xa(r)*n,Ja(r)*n]},c.innerRadius=function(t){return arguments.length?(e="function"==typeof t?t:Ga(+t),c):e},c.outerRadius=function(e){return arguments.length?(t="function"==typeof e?e:Ga(+e),c):t},c.cornerRadius=function(e){return arguments.length?(n="function"==typeof e?e:Ga(+e),c):n},c.padRadius=function(e){return arguments.length?(r=null==e?null:"function"==typeof e?e:Ga(+e),c):r},c.startAngle=function(e){return arguments.length?(i="function"==typeof e?e:Ga(+e),c):i},c.endAngle=function(e){return arguments.length?(a="function"==typeof e?e:Ga(+e),c):a},c.padAngle=function(e){return arguments.length?(o="function"==typeof e?e:Ga(+e),c):o},c.context=function(e){return arguments.length?(u=null==e?null:e,c):u},c},nest:F},nl={band:G},rl=function(e){for(var t=(e=e.sort(function(e,t){return e-t}))[1]-e[0],n=2;n<e.length;n++)t=Math.min(t,e[n]-e[n-1]);return t},il=(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame,"http://www.w3.org/1999/xhtml"),al={svg:"http://www.w3.org/2000/svg",xhtml:il,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},ol=function(e){var t=e+="",n=t.indexOf(":");return n>=0&&"xmlns"!==(t=e.slice(0,n))&&(e=e.slice(n+1)),al.hasOwnProperty(t)?{space:al[t],local:e}:e},ul=function(e){var t=ol(e);return(t.local?function(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}:function(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===il&&t.documentElement.namespaceURI===il?t.createElement(e):t.createElementNS(n,e)}})(t)};function cl(){}var ll=function(e){return null==e?cl:function(){return this.querySelector(e)}};function sl(){return[]}var fl=function(e){return null==e?sl:function(){return this.querySelectorAll(e)}},hl=function(e){return function(){return this.matches(e)}};if("undefined"!=typeof document){var dl=document.documentElement;if(!dl.matches){var pl=dl.webkitMatchesSelector||dl.msMatchesSelector||dl.mozMatchesSelector||dl.oMatchesSelector;hl=function(e){return function(){return pl.call(this,e)}}}}var yl=hl,gl=function(e){return new Array(e.length)};function vl(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}vl.prototype={constructor:vl,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};var ml="$";function bl(e,t,n,r,i,a){for(var o,u=0,c=t.length,l=a.length;u<l;++u)(o=t[u])?(o.__data__=a[u],r[u]=o):n[u]=new vl(e,a[u]);for(;u<c;++u)(o=t[u])&&(i[u]=o)}function _l(e,t,n,r,i,a,o){var u,c,l,s={},f=t.length,h=a.length,d=new Array(f);for(u=0;u<f;++u)(c=t[u])&&(d[u]=l=ml+o.call(c,c.__data__,u,t),l in s?i[u]=c:s[l]=c);for(u=0;u<h;++u)(c=s[l=ml+o.call(e,a[u],u,a)])?(r[u]=c,c.__data__=a[u],s[l]=null):n[u]=new vl(e,a[u]);for(u=0;u<f;++u)(c=t[u])&&s[d[u]]===c&&(i[u]=c)}function xl(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}var wl=function(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView};function kl(e,t){return e.style.getPropertyValue(t)||wl(e).getComputedStyle(e,null).getPropertyValue(t)}function El(e){return e.trim().split(/^|\s+/)}function Sl(e){return e.classList||new Ol(e)}function Ol(e){this._node=e,this._names=El(e.getAttribute("class")||"")}function Ml(e,t){for(var n=Sl(e),r=-1,i=t.length;++r<i;)n.add(t[r])}function Cl(e,t){for(var n=Sl(e),r=-1,i=t.length;++r<i;)n.remove(t[r])}function Tl(){this.textContent=""}function Pl(){this.innerHTML=""}function Al(){this.nextSibling&&this.parentNode.appendChild(this)}function Nl(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function jl(){return null}function Fl(){var e=this.parentNode;e&&e.removeChild(this)}function Il(){return this.parentNode.insertBefore(this.cloneNode(!1),this.nextSibling)}function Dl(){return this.parentNode.insertBefore(this.cloneNode(!0),this.nextSibling)}Ol.prototype={add:function(e){this._names.indexOf(e)<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};var Rl={},Ll=null;function zl(e,t,n){return e=Bl(e,t,n),function(t){var n=t.relatedTarget;n&&(n===this||8&n.compareDocumentPosition(this))||e.call(this,t)}}function Bl(e,t,n){return function(r){var i=Ll;Ll=r;try{e.call(this,this.__data__,t,n)}finally{Ll=i}}}function Ul(e){return function(){var t=this.__on;if(t){for(var n,r=0,i=-1,a=t.length;r<a;++r)n=t[r],e.type&&n.type!==e.type||n.name!==e.name?t[++i]=n:this.removeEventListener(n.type,n.listener,n.capture);++i?t.length=i:delete this.__on}}}function Hl(e,t,n){var r=Rl.hasOwnProperty(e.type)?zl:Bl;return function(i,a,o){var u,c=this.__on,l=r(t,a,o);if(c)for(var s=0,f=c.length;s<f;++s)if((u=c[s]).type===e.type&&u.name===e.name)return this.removeEventListener(u.type,u.listener,u.capture),this.addEventListener(u.type,u.listener=l,u.capture=n),void(u.value=t);this.addEventListener(e.type,l,n),u={type:e.type,name:e.name,value:t,listener:l,capture:n},c?c.push(u):this.__on=[u]}}function Vl(e,t,n,r){var i=Ll;e.sourceEvent=Ll,Ll=e;try{return t.apply(n,r)}finally{Ll=i}}function Wl(e,t,n){var r=wl(e),i=r.CustomEvent;"function"==typeof i?i=new i(t,n):(i=r.document.createEvent("Event"),n?(i.initEvent(t,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(t,!1,!1)),e.dispatchEvent(i)}"undefined"!=typeof document&&("onmouseenter"in document.documentElement||(Rl={mouseenter:"mouseover",mouseleave:"mouseout"}));var ql=[null];function Gl(e,t){this._groups=e,this._parents=t}function Yl(){return new Gl([[document.documentElement]],ql)}Gl.prototype=Yl.prototype={constructor:Gl,select:function(e){"function"!=typeof e&&(e=ll(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var a,o,u=t[i],c=u.length,l=r[i]=new Array(c),s=0;s<c;++s)(a=u[s])&&(o=e.call(a,a.__data__,s,u))&&("__data__"in a&&(o.__data__=a.__data__),l[s]=o);return new Gl(r,this._parents)},selectAll:function(e){"function"!=typeof e&&(e=fl(e));for(var t=this._groups,n=t.length,r=[],i=[],a=0;a<n;++a)for(var o,u=t[a],c=u.length,l=0;l<c;++l)(o=u[l])&&(r.push(e.call(o,o.__data__,l,u)),i.push(o));return new Gl(r,i)},filter:function(e){"function"!=typeof e&&(e=yl(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var a,o=t[i],u=o.length,c=r[i]=[],l=0;l<u;++l)(a=o[l])&&e.call(a,a.__data__,l,o)&&c.push(a);return new Gl(r,this._parents)},data:function(e,t){if(!e)return d=new Array(this.size()),l=-1,this.each(function(e){d[++l]=e}),d;var n=t?_l:bl,r=this._parents,i=this._groups;"function"!=typeof e&&(e=function(e){return function(){return e}}(e));for(var a=i.length,o=new Array(a),u=new Array(a),c=new Array(a),l=0;l<a;++l){var s=r[l],f=i[l],h=f.length,d=e.call(s,s&&s.__data__,l,r),p=d.length,y=u[l]=new Array(p),g=o[l]=new Array(p);n(s,f,y,g,c[l]=new Array(h),d,t);for(var v,m,b=0,_=0;b<p;++b)if(v=y[b]){for(b>=_&&(_=b+1);!(m=g[_])&&++_<p;);v._next=m||null}}return(o=new Gl(o,r))._enter=u,o._exit=c,o},enter:function(){return new Gl(this._enter||this._groups.map(gl),this._parents)},exit:function(){return new Gl(this._exit||this._groups.map(gl),this._parents)},merge:function(e){for(var t=this._groups,n=e._groups,r=t.length,i=n.length,a=Math.min(r,i),o=new Array(r),u=0;u<a;++u)for(var c,l=t[u],s=n[u],f=l.length,h=o[u]=new Array(f),d=0;d<f;++d)(c=l[d]||s[d])&&(h[d]=c);for(;u<r;++u)o[u]=t[u];return new Gl(o,this._parents)},order:function(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r,i=e[t],a=i.length-1,o=i[a];--a>=0;)(r=i[a])&&(o&&o!==r.nextSibling&&o.parentNode.insertBefore(r,o),o=r);return this},sort:function(e){function t(t,n){return t&&n?e(t.__data__,n.__data__):!t-!n}e||(e=xl);for(var n=this._groups,r=n.length,i=new Array(r),a=0;a<r;++a){for(var o,u=n[a],c=u.length,l=i[a]=new Array(c),s=0;s<c;++s)(o=u[s])&&(l[s]=o);l.sort(t)}return new Gl(i,this._parents).order()},call:function(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this},nodes:function(){var e=new Array(this.size()),t=-1;return this.each(function(){e[++t]=this}),e},node:function(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,a=r.length;i<a;++i){var o=r[i];if(o)return o}return null},size:function(){var e=0;return this.each(function(){++e}),e},empty:function(){return!this.node()},each:function(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var i,a=t[n],o=0,u=a.length;o<u;++o)(i=a[o])&&e.call(i,i.__data__,o,a);return this},attr:function(e,t){var n=ol(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((null==t?n.local?function(e){return function(){this.removeAttributeNS(e.space,e.local)}}:function(e){return function(){this.removeAttribute(e)}}:"function"==typeof t?n.local?function(e,t){return function(){var n=t.apply(this,arguments);null==n?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}:function(e,t){return function(){var n=t.apply(this,arguments);null==n?this.removeAttribute(e):this.setAttribute(e,n)}}:n.local?function(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}:function(e,t){return function(){this.setAttribute(e,t)}})(n,t))},style:function(e,t,n){return arguments.length>1?this.each((null==t?function(e){return function(){this.style.removeProperty(e)}}:"function"==typeof t?function(e,t,n){return function(){var r=t.apply(this,arguments);null==r?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}:function(e,t,n){return function(){this.style.setProperty(e,t,n)}})(e,t,null==n?"":n)):kl(this.node(),e)},property:function(e,t){return arguments.length>1?this.each((null==t?function(e){return function(){delete this[e]}}:"function"==typeof t?function(e,t){return function(){var n=t.apply(this,arguments);null==n?delete this[e]:this[e]=n}}:function(e,t){return function(){this[e]=t}})(e,t)):this.node()[e]},classed:function(e,t){var n=El(e+"");if(arguments.length<2){for(var r=Sl(this.node()),i=-1,a=n.length;++i<a;)if(!r.contains(n[i]))return!1;return!0}return this.each(("function"==typeof t?function(e,t){return function(){(t.apply(this,arguments)?Ml:Cl)(this,e)}}:t?function(e){return function(){Ml(this,e)}}:function(e){return function(){Cl(this,e)}})(n,t))},text:function(e){return arguments.length?this.each(null==e?Tl:("function"==typeof e?function(e){return function(){var t=e.apply(this,arguments);this.textContent=null==t?"":t}}:function(e){return function(){this.textContent=e}})(e)):this.node().textContent},html:function(e){return arguments.length?this.each(null==e?Pl:("function"==typeof e?function(e){return function(){var t=e.apply(this,arguments);this.innerHTML=null==t?"":t}}:function(e){return function(){this.innerHTML=e}})(e)):this.node().innerHTML},raise:function(){return this.each(Al)},lower:function(){return this.each(Nl)},append:function(e){var t="function"==typeof e?e:ul(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})},insert:function(e,t){var n="function"==typeof e?e:ul(e),r=null==t?jl:"function"==typeof t?t:ll(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})},remove:function(){return this.each(Fl)},clone:function(e){return this.select(e?Dl:Il)},datum:function(e){return arguments.length?this.property("__data__",e):this.node().__data__},on:function(e,t,n){var r,i,a=function(e){return e.trim().split(/^|\s+/).map(function(e){var t="",n=e.indexOf(".");return n>=0&&(t=e.slice(n+1),e=e.slice(0,n)),{type:e,name:t}})}(e+""),o=a.length;if(!(arguments.length<2)){for(u=t?Hl:Ul,null==n&&(n=!1),r=0;r<o;++r)this.each(u(a[r],t,n));return this}var u=this.node().__on;if(u)for(var c,l=0,s=u.length;l<s;++l)for(r=0,c=u[l];r<o;++r)if((i=a[r]).type===c.type&&i.name===c.name)return c.value},dispatch:function(e,t){return this.each(("function"==typeof t?function(e,t){return function(){return Wl(this,e,t.apply(this,arguments))}}:function(e,t){return function(){return Wl(this,e,t)}})(e,t))}};var $l=Yl,Xl=function(e){return"string"==typeof e?new Gl([[document.querySelector(e)]],[document.documentElement]):new Gl([[e]],ql)},Kl=0;function Ql(){this._="@"+(++Kl).toString(36)}Ql.prototype=function(){return new Ql}.prototype={constructor:Ql,get:function(e){for(var t=this._;!(t in e);)if(!(e=e.parentNode))return;return e[t]},set:function(e,t){return e[this._]=t},remove:function(e){return this._ in e&&delete e[this._]},toString:function(){return this._}};var Jl=function(){for(var e,t=Ll;e=t.sourceEvent;)t=e;return t},Zl=function(e,t){var n=e.ownerSVGElement||e;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=t.clientX,r.y=t.clientY,[(r=r.matrixTransform(e.getScreenCTM().inverse())).x,r.y]}var i=e.getBoundingClientRect();return[t.clientX-i.left-e.clientLeft,t.clientY-i.top-e.clientTop]},es=function(e){var t=Jl();return t.changedTouches&&(t=t.changedTouches[0]),Zl(e,t)},ts=function(e,t,n){arguments.length<3&&(n=t,t=Jl().changedTouches);for(var r,i=0,a=t?t.length:0;i<a;++i)if((r=t[i]).identifier===n)return Zl(e,r);return null},ns={value:function(){}};function rs(){for(var e,t=0,n=arguments.length,r={};t<n;++t){if(!(e=arguments[t]+"")||e in r)throw new Error("illegal type: "+e);r[e]=[]}return new is(r)}function is(e){this._=e}function as(e,t){for(var n,r=0,i=e.length;r<i;++r)if((n=e[r]).name===t)return n.value}function os(e,t,n){for(var r=0,i=e.length;r<i;++r)if(e[r].name===t){e[r]=ns,e=e.slice(0,r).concat(e.slice(r+1));break}return null!=n&&e.push({name:t,value:n}),e}is.prototype=rs.prototype={constructor:is,on:function(e,t){var n,r=this._,i=function(e,t){return e.trim().split(/^|\s+/).map(function(e){var n="",r=e.indexOf(".");if(r>=0&&(n=e.slice(r+1),e=e.slice(0,r)),e&&!t.hasOwnProperty(e))throw new Error("unknown type: "+e);return{type:e,name:n}})}(e+"",r),a=-1,o=i.length;if(!(arguments.length<2)){if(null!=t&&"function"!=typeof t)throw new Error("invalid callback: "+t);for(;++a<o;)if(n=(e=i[a]).type)r[n]=os(r[n],e.name,t);else if(null==t)for(n in r)r[n]=os(r[n],e.name,null);return this}for(;++a<o;)if((n=(e=i[a]).type)&&(n=as(r[n],e.name)))return n},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new is(e)},call:function(e,t){if((n=arguments.length-2)>0)for(var n,r,i=new Array(n),a=0;a<n;++a)i[a]=arguments[a+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(a=0,n=(r=this._[e]).length;a<n;++a)r[a].value.apply(t,i)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],i=0,a=r.length;i<a;++i)r[i].value.apply(t,n)}};var us=rs;function cs(){Ll.stopImmediatePropagation()}var ls=function(){Ll.preventDefault(),Ll.stopImmediatePropagation()},ss=function(e){var t=e.document.documentElement,n=Xl(e).on("dragstart.drag",ls,!0);"onselectstart"in t?n.on("selectstart.drag",ls,!0):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")},fs=function(e){return function(){return e}};function hs(e,t,n,r,i,a,o,u,c,l){this.target=e,this.type=t,this.subject=n,this.identifier=r,this.active=i,this.x=a,this.y=o,this.dx=u,this.dy=c,this._=l}function ds(){return!Ll.button}function ps(){return this.parentNode}function ys(e){return null==e?{x:Ll.x,y:Ll.y}:e}function gs(){return"ontouchstart"in this}hs.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};var vs,ms,bs=function(){var e,t,n,r,i=ds,a=ps,o=ys,u=gs,c={},l=us("start","drag","end"),s=0,f=0;function h(e){e.on("mousedown.drag",d).filter(u).on("touchstart.drag",g).on("touchmove.drag",v).on("touchend.drag touchcancel.drag",m).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function d(){if(!r&&i.apply(this,arguments)){var o=b("mouse",a.apply(this,arguments),es,this,arguments);o&&(Xl(Ll.view).on("mousemove.drag",p,!0).on("mouseup.drag",y,!0),ss(Ll.view),cs(),n=!1,e=Ll.clientX,t=Ll.clientY,o("start"))}}function p(){if(ls(),!n){var r=Ll.clientX-e,i=Ll.clientY-t;n=r*r+i*i>f}c.mouse("drag")}function y(){Xl(Ll.view).on("mousemove.drag mouseup.drag",null),function(e,t){var n=e.document.documentElement,r=Xl(e).on("dragstart.drag",null);t&&(r.on("click.drag",ls,!0),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}(Ll.view,n),ls(),c.mouse("end")}function g(){if(i.apply(this,arguments)){var e,t,n=Ll.changedTouches,r=a.apply(this,arguments),o=n.length;for(e=0;e<o;++e)(t=b(n[e].identifier,r,ts,this,arguments))&&(cs(),t("start"))}}function v(){var e,t,n=Ll.changedTouches,r=n.length;for(e=0;e<r;++e)(t=c[n[e].identifier])&&(ls(),t("drag"))}function m(){var e,t,n=Ll.changedTouches,i=n.length;for(r&&clearTimeout(r),r=setTimeout(function(){r=null},500),e=0;e<i;++e)(t=c[n[e].identifier])&&(cs(),t("end"))}function b(e,t,n,r,i){var a,u,f,d=n(t,e),p=l.copy();if(Vl(new hs(h,"beforestart",a,e,s,d[0],d[1],0,0,p),function(){return null!=(Ll.subject=a=o.apply(r,i))&&(u=a.x-d[0]||0,f=a.y-d[1]||0,!0)}))return function o(l){var y,g=d;switch(l){case"start":c[e]=o,y=s++;break;case"end":delete c[e],--s;case"drag":d=n(t,e),y=s}Vl(new hs(h,l,a,e,y,d[0]+u,d[1]+f,d[0]-g[0],d[1]-g[1],p),p.apply,p,[l,r,i])}}return h.filter=function(e){return arguments.length?(i="function"==typeof e?e:fs(!!e),h):i},h.container=function(e){return arguments.length?(a="function"==typeof e?e:fs(e),h):a},h.subject=function(e){return arguments.length?(o="function"==typeof e?e:fs(e),h):o},h.touchable=function(e){return arguments.length?(u="function"==typeof e?e:fs(!!e),h):u},h.on=function(){var e=l.on.apply(l,arguments);return e===l?h:e},h.clickDistance=function(e){return arguments.length?(f=(e=+e)*e,h):Math.sqrt(f)},h},_s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},xs=0,ws=0,ks=0,Es=1e3,Ss=0,Os=0,Ms=0,Cs="object"===("undefined"==typeof performance?"undefined":_s(performance))&&performance.now?performance:Date,Ts="object"===("undefined"==typeof window?"undefined":_s(window))&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function Ps(){return Os||(Ts(As),Os=Cs.now()+Ms)}function As(){Os=0}function Ns(){this._call=this._time=this._next=null}function js(e,t,n){var r=new Ns;return r.restart(e,t,n),r}function Fs(){Os=(Ss=Cs.now())+Ms,xs=ws=0;try{!function(){Ps(),++xs;for(var e,t=vs;t;)(e=Os-t._time)>=0&&t._call.call(null,e),t=t._next;--xs}()}finally{xs=0,function(){for(var e,t,n=vs,r=1/0;n;)n._call?(r>n._time&&(r=n._time),e=n,n=n._next):(t=n._next,n._next=null,n=e?e._next=t:vs=t);ms=e,Ds(r)}(),Os=0}}function Is(){var e=Cs.now(),t=e-Ss;t>Es&&(Ms-=t,Ss=e)}function Ds(e){xs||(ws&&(ws=clearTimeout(ws)),e-Os>24?(e<1/0&&(ws=setTimeout(Fs,e-Cs.now()-Ms)),ks&&(ks=clearInterval(ks))):(ks||(Ss=Cs.now(),ks=setInterval(Is,Es)),xs=1,Ts(Fs)))}Ns.prototype=js.prototype={constructor:Ns,restart:function(e,t,n){if("function"!=typeof e)throw new TypeError("callback is not a function");n=(null==n?Ps():+n)+(null==t?0:+t),this._next||ms===this||(ms?ms._next=this:vs=this,ms=this),this._call=e,this._time=n,Ds()},stop:function(){this._call&&(this._call=null,this._time=1/0,Ds())}};var Rs=function(e,t,n){var r=new Ns;return t=null==t?0:+t,r.restart(function(n){r.stop(),e(n+t)},t,n),r},Ls=us("start","end","interrupt"),zs=[],Bs=0,Us=1,Hs=2,Vs=3,Ws=4,qs=5,Gs=6,Ys=function(e,t,n,r,i,a){var o=e.__transition;if(o){if(n in o)return}else e.__transition={};!function(e,t,n){var r,i=e.__transition;function a(c){var l,s,f,h;if(n.state!==Us)return u();for(l in i)if((h=i[l]).name===n.name){if(h.state===Vs)return Rs(a);h.state===Ws?(h.state=Gs,h.timer.stop(),h.on.call("interrupt",e,e.__data__,h.index,h.group),delete i[l]):+l<t&&(h.state=Gs,h.timer.stop(),delete i[l])}if(Rs(function(){n.state===Vs&&(n.state=Ws,n.timer.restart(o,n.delay,n.time),o(c))}),n.state=Hs,n.on.call("start",e,e.__data__,n.index,n.group),n.state===Hs){for(n.state=Vs,r=new Array(f=n.tween.length),l=0,s=-1;l<f;++l)(h=n.tween[l].value.call(e,e.__data__,n.index,n.group))&&(r[++s]=h);r.length=s+1}}function o(t){for(var i=t<n.duration?n.ease.call(null,t/n.duration):(n.timer.restart(u),n.state=qs,1),a=-1,o=r.length;++a<o;)r[a].call(null,i);n.state===qs&&(n.on.call("end",e,e.__data__,n.index,n.group),u())}function u(){for(var r in n.state=Gs,n.timer.stop(),delete i[t],i)return;delete e.__transition}i[t]=n,n.timer=js(function(e){n.state=Us,n.timer.restart(a,n.delay,n.time),n.delay<=e&&a(e-n.delay)},0,n.time)}(e,n,{name:t,index:r,group:i,on:Ls,tween:zs,time:a.time,delay:a.delay,duration:a.duration,ease:a.ease,timer:null,state:Bs})};function $s(e,t){var n=Ks(e,t);if(n.state>Bs)throw new Error("too late; already scheduled");return n}function Xs(e,t){var n=Ks(e,t);if(n.state>Hs)throw new Error("too late; already started");return n}function Ks(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function Qs(e,t,n){var r=e._id;return e.each(function(){var e=Xs(this,r);(e.value||(e.value={}))[t]=n.apply(this,arguments)}),function(e){return Ks(e,r).value[t]}}var Js=function(e,t){var n;return("number"==typeof t?it:t instanceof le?Qe:(n=le(t))?(t=n,Qe):ct)(e,t)},Zs=$l.prototype.constructor,ef=0;function tf(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function nf(){return++ef}var rf=$l.prototype;tf.prototype=function(e){return $l().transition(e)}.prototype={constructor:tf,select:function(e){var t=this._name,n=this._id;"function"!=typeof e&&(e=ll(e));for(var r=this._groups,i=r.length,a=new Array(i),o=0;o<i;++o)for(var u,c,l=r[o],s=l.length,f=a[o]=new Array(s),h=0;h<s;++h)(u=l[h])&&(c=e.call(u,u.__data__,h,l))&&("__data__"in u&&(c.__data__=u.__data__),f[h]=c,Ys(f[h],t,n,h,f,Ks(u,n)));return new tf(a,this._parents,t,n)},selectAll:function(e){var t=this._name,n=this._id;"function"!=typeof e&&(e=fl(e));for(var r=this._groups,i=r.length,a=[],o=[],u=0;u<i;++u)for(var c,l=r[u],s=l.length,f=0;f<s;++f)if(c=l[f]){for(var h,d=e.call(c,c.__data__,f,l),p=Ks(c,n),y=0,g=d.length;y<g;++y)(h=d[y])&&Ys(h,t,n,y,d,p);a.push(d),o.push(c)}return new tf(a,o,t,n)},filter:function(e){"function"!=typeof e&&(e=yl(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var a,o=t[i],u=o.length,c=r[i]=[],l=0;l<u;++l)(a=o[l])&&e.call(a,a.__data__,l,o)&&c.push(a);return new tf(r,this._parents,this._name,this._id)},merge:function(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,i=n.length,a=Math.min(r,i),o=new Array(r),u=0;u<a;++u)for(var c,l=t[u],s=n[u],f=l.length,h=o[u]=new Array(f),d=0;d<f;++d)(c=l[d]||s[d])&&(h[d]=c);for(;u<r;++u)o[u]=t[u];return new tf(o,this._parents,this._name,this._id)},selection:function(){return new Zs(this._groups,this._parents)},transition:function(){for(var e=this._name,t=this._id,n=nf(),r=this._groups,i=r.length,a=0;a<i;++a)for(var o,u=r[a],c=u.length,l=0;l<c;++l)if(o=u[l]){var s=Ks(o,t);Ys(o,e,n,l,u,{time:s.time+s.delay+s.duration,delay:0,duration:s.duration,ease:s.ease})}return new tf(r,this._parents,e,n)},call:rf.call,nodes:rf.nodes,node:rf.node,size:rf.size,empty:rf.empty,each:rf.each,on:function(e,t){var n=this._id;return arguments.length<2?Ks(this.node(),n).on.on(e):this.each(function(e,t,n){var r,i,a=function(e){return(e+"").trim().split(/^|\s+/).every(function(e){var t=e.indexOf(".");return t>=0&&(e=e.slice(0,t)),!e||"start"===e})}(t)?$s:Xs;return function(){var o=a(this,e),u=o.on;u!==r&&(i=(r=u).copy()).on(t,n),o.on=i}}(n,e,t))},attr:function(e,t){var n=ol(e),r="transform"===n?vt:Js;return this.attrTween(e,"function"==typeof t?(n.local?function(e,t,n){var r,i,a;return function(){var o,u=n(this);if(null!=u)return(o=this.getAttributeNS(e.space,e.local))===u?null:o===r&&u===i?a:a=t(r=o,i=u);this.removeAttributeNS(e.space,e.local)}}:function(e,t,n){var r,i,a;return function(){var o,u=n(this);if(null!=u)return(o=this.getAttribute(e))===u?null:o===r&&u===i?a:a=t(r=o,i=u);this.removeAttribute(e)}})(n,r,Qs(this,"attr."+e,t)):null==t?(n.local?function(e){return function(){this.removeAttributeNS(e.space,e.local)}}:function(e){return function(){this.removeAttribute(e)}})(n):(n.local?function(e,t,n){var r,i;return function(){var a=this.getAttributeNS(e.space,e.local);return a===n?null:a===r?i:i=t(r=a,n)}}:function(e,t,n){var r,i;return function(){var a=this.getAttribute(e);return a===n?null:a===r?i:i=t(r=a,n)}})(n,r,t+""))},attrTween:function(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(null==t)return this.tween(n,null);if("function"!=typeof t)throw new Error;var r=ol(e);return this.tween(n,(r.local?function(e,t){function n(){var n=this,r=t.apply(n,arguments);return r&&function(t){n.setAttributeNS(e.space,e.local,r(t))}}return n._value=t,n}:function(e,t){function n(){var n=this,r=t.apply(n,arguments);return r&&function(t){n.setAttribute(e,r(t))}}return n._value=t,n})(r,t))},style:function(e,t,n){var r="transform"==(e+="")?gt:Js;return null==t?this.styleTween(e,function(e,t){var n,r,i;return function(){var a=kl(this,e),o=(this.style.removeProperty(e),kl(this,e));return a===o?null:a===n&&o===r?i:i=t(n=a,r=o)}}(e,r)).on("end.style."+e,function(e){return function(){this.style.removeProperty(e)}}(e)):this.styleTween(e,"function"==typeof t?function(e,t,n){var r,i,a;return function(){var o=kl(this,e),u=n(this);return null==u&&(this.style.removeProperty(e),u=kl(this,e)),o===u?null:o===r&&u===i?a:a=t(r=o,i=u)}}(e,r,Qs(this,"style."+e,t)):function(e,t,n){var r,i;return function(){var a=kl(this,e);return a===n?null:a===r?i:i=t(r=a,n)}}(e,r,t+""),n)},styleTween:function(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(null==t)return this.tween(r,null);if("function"!=typeof t)throw new Error;return this.tween(r,function(e,t,n){function r(){var r=this,i=t.apply(r,arguments);return i&&function(t){r.style.setProperty(e,i(t),n)}}return r._value=t,r}(e,t,null==n?"":n))},text:function(e){return this.tween("text","function"==typeof e?function(e){return function(){var t=e(this);this.textContent=null==t?"":t}}(Qs(this,"text",e)):function(e){return function(){this.textContent=e}}(null==e?"":e+""))},remove:function(){return this.on("end.remove",(e=this._id,function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}));var e},tween:function(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r,i=Ks(this.node(),n).tween,a=0,o=i.length;a<o;++a)if((r=i[a]).name===e)return r.value;return null}return this.each((null==t?function(e,t){var n,r;return function(){var i=Xs(this,e),a=i.tween;if(a!==n)for(var o=0,u=(r=n=a).length;o<u;++o)if(r[o].name===t){(r=r.slice()).splice(o,1);break}i.tween=r}}:function(e,t,n){var r,i;if("function"!=typeof n)throw new Error;return function(){var a=Xs(this,e),o=a.tween;if(o!==r){i=(r=o).slice();for(var u={name:t,value:n},c=0,l=i.length;c<l;++c)if(i[c].name===t){i[c]=u;break}c===l&&i.push(u)}a.tween=i}})(n,e,t))},delay:function(e){var t=this._id;return arguments.length?this.each(("function"==typeof e?function(e,t){return function(){$s(this,e).delay=+t.apply(this,arguments)}}:function(e,t){return t=+t,function(){$s(this,e).delay=t}})(t,e)):Ks(this.node(),t).delay},duration:function(e){var t=this._id;return arguments.length?this.each(("function"==typeof e?function(e,t){return function(){Xs(this,e).duration=+t.apply(this,arguments)}}:function(e,t){return t=+t,function(){Xs(this,e).duration=t}})(t,e)):Ks(this.node(),t).duration},ease:function(e){var t=this._id;return arguments.length?this.each(function(e,t){if("function"!=typeof t)throw new Error;return function(){Xs(this,e).ease=t}}(t,e)):Ks(this.node(),t).ease}};var af={time:null,delay:0,duration:250,ease:fu};function of(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))return af.time=Ps(),af;return n}$l.prototype.interrupt=function(e){return this.each(function(){!function(e,t){var n,r,i,a=e.__transition,o=!0;if(a){for(i in t=null==t?null:t+"",a)(n=a[i]).name===t?(r=n.state>Hs&&n.state<qs,n.state=Gs,n.timer.stop(),r&&n.on.call("interrupt",e,e.__data__,n.index,n.group),delete a[i]):o=!1;o&&delete e.__transition}}(this,e)})},$l.prototype.transition=function(e){var t,n;e instanceof tf?(t=e._id,e=e._name):(t=nf(),(n=af).time=Ps(),e=null==e?null:e+"");for(var r=this._groups,i=r.length,a=0;a<i;++a)for(var o,u=r[a],c=u.length,l=0;l<c;++l)(o=u[l])&&Ys(o,e,t,l,u,n||of(o,t));return new tf(r,this._parents,e,t)};var uf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},cf=function(e){return Xl(e)},lf=function(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},a=arguments[5];(e instanceof HTMLElement||e instanceof SVGElement)&&(e=cf(e));var o=r?r[0]:null,u=null,c=null,l=null,s=null,f=null,h=void 0;o?"#"===o?(u="id",c=r):(u="class",c="."===r[0]?r:"."+r):(c=t,h=!0),l=e.selectAll(c),h&&(l=l.filter(function(){return this.parentNode===e.node()})),s=(l=l.data(n,a)).enter().append(t||"div"),i.enter&&s.each(function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];i.enter.apply(i,[cf(this)].concat(t))}),f=s.merge(l),i.update&&f.each(function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];i.update.apply(i,[cf(this)].concat(t))}),"class"===u?f.classed("."===o?r.substring(1,r.length):r,!0):"id"===u&&f.attr("id",r.substring(1,r.length));var d=l.exit();return i.exit?d.each(function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];i.exit.apply(i,[cf(this)].concat(t))}):d.remove(),f},sf=function(e,t){return Object.entries(t).forEach(function(t){e.style(t[0],t[1])},void 0),e},ff=function(e,t){for(var n in t)({}).hasOwnProperty.call(t,n)&&e.attr(n,t[n])},hf=function(e,t,n){return e instanceof $l||(e=cf(e)),void 0!==n?e.selectAll("."+n).each(function(){ff(Xl(this),t)}):ff(e,t),e},df=function(e,t){for(var n in e instanceof $l||(e=cf(e)),t)({}).hasOwnProperty.call(t,n)&&e.style(n,t[n]);return e},pf=function(e){var t=Xl(e.container),n=void 0,r=void 0;"number"==typeof(n=e.data)&&(n=Array(n).fill().map(function(e,t){return t})),r=t.selectAll(e.selector).data(n),(r=t.selectAll(e.selector).filter(function(){return this.parentNode===t.node()}).data(e.data)).enter().append(e.append).merge(r).each(function(t,n){e.each(t,Xl(this),n)}).attr("class",e.className||""),r.exit().remove()},yf=function(){var e=Zl.apply(void 0,arguments);return{x:e[0],y:e[1]}},gf=function(){return Ll},vf=function(){return bs},mf=function(e,t){var n=void 0,r={"fill-opacity":0},i="string"==typeof t?t:t instanceof Array?t.join(" "):void 0;n=e.node()instanceof HTMLElement?e.append("div").html("W"):e.append("text").text("W"),i?n.attr("class",i):"object"===(void 0===t?"undefined":uf(t))&&(delete t["fill-opacity"],zc(r,t)),n.style(r);var a=window.getComputedStyle(n.node()),o={fontSize:a.fontSize,fontFamily:a.fontFamily,fontWeight:a.fontWeight,fontStyle:a.fontStyle};return n.remove(),o},bf=n(4),_f=n.n(bf),xf=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),wf=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._data=[],this._idMap={},this._mode="",this._enterdata=[],this._exitdata=[]}return xf(e,[{key:"getObjects",value:function(){var e=this;return Object.keys(this._idMap).map(function(t){return e._idMap[t]})}},{key:"data",value:function(e,t){var n=this;if(t){this._data=[],this._idGetter=t;var r={};e.forEach(function(){var e=t.apply(void 0,arguments);r[e]=arguments.length<=0?void 0:arguments[0]});var i=[];return Object.keys(this._idMap).forEach(function(e){r[e]||i.push(e)}),Object.keys(r).forEach(function(e){n._idMap[e]?(n._idMap[e]=r[e],n._data.push(r[e])):n._enterdata.push(r[e])}),i.forEach(function(e){var t=n._idMap[e];n._exitdata.push(t),delete n._idMap[e]}),this}if(e.length>this._data.length)for(var a=this._data.length;a<e.length;a+=1)this._enterdata.push(e[a]);else{for(var o=e.length,u=o;u<this._data.length;u+=1){var c=this._data[u];delete this._idMap[c.id],this._exitdata.push(c)}this._data=this._data.slice(o,this._data.length)}return this}},{key:"append",value:function(e){var t=this;return this["_"+this._mode+"data"].forEach(function(){var n=arguments.length<=0?void 0:arguments[0],r=t._idGetter?t._idGetter.apply(t,arguments):n.id||(arguments.length<=1?void 0:arguments[1]);t._idMap[r]=e.apply(void 0,arguments)}),this._mode="",this}},{key:"enter",value:function(){return this._mode="enter",this}},{key:"attr",value:function(e,t){return this._data.forEach(function(n){return n.attr(e,t)}),this}},{key:"merge",value:function(e){var t=this;return e._data.forEach(function(){for(var e=arguments.length,n=Array(e),r=0;r<e;r++)n[r]=arguments[r];var i=t._idGetter?t._idGetter.apply(t,n):n[0].id||n[1];t._idMap[i]=n[0],t._data.push(n[0])}),this._enterdata=[],this}},{key:"exit",value:function(){return this._mode="exit",this}},{key:"each",value:function(e){var t=this;return Object.keys(this._idMap).forEach(function(n){e(t._idMap[n])}),this}},{key:"map",value:function(e){var t=this;return Object.keys(this._idMap).forEach(function(){for(var n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];t._idMap[r[0]]=e.apply(void 0,[t._idMap[r[0]]].concat(r))}),this}},{key:"remove",value:function(){this["_"+this._mode+"data"].forEach(function(e){return e.remove()}),""===this._mode&&this.each(function(e){return e.remove()}),this["_"+this._mode+"data"]=[],this._mode=""}}]),e}(),kf=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();!function(){kf(function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._id=xc()},[{key:"attr",value:function(e,t){this[e]=t}},{key:"remove",value:function(){}},{key:"id",get:function(){return this._id}}])}();var Ef=["initialized","beforeupdate","updated","beforedraw","drawn","beforeremove","removed"],Sf=[];["canvas","unit","layer","axis","facet-headers","legend","caption"].forEach(function(e){Ef.forEach(function(t){Sf.push(e+"."+t)})});var Of=Sf,Mf=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),Cf=function(e){return function(t){return e(t)}},Tf=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},Pf=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._eventList=Of,this._promises=new Map,this._notifiers={},this._lifeCycles={},this._unreleasedLifeCycles={},this._boot()}return Mf(e,[{key:"_boot",value:function(){this._notifiers=this._eventList.reduce(function(e,t){return e[t]=Cf,e},{}),this._preparePromises()}},{key:"retrieve",value:function(e){return this._promises.get(e)}},{key:"_makeNotifierPromise",value:function(e){var t=this;return new Promise(function(n){t._notifiers[e]=t._notifiers[e](n)})}},{key:"_preparePromises",value:function(){var e=this;this._eventList.forEach(function(t){e._promises.set(t,e._makeNotifierPromise(t))})}},{key:"_resolvePromise",value:function(e,t){this._notifiers[e](t)}},{key:"notify",value:function(e){var t=e.formalName||e.client.constructor.formalName();e.formalName=t,this._releasePromisesFromCache(),this._notify(t,e)}},{key:"_notify",value:function(e,t){var n=t.action,r=e+"."+n;this._resolvePromise(r,t);var i=this.retrieve(r);this._lifeCycles[e]&&this._lifeCycles[e][n]?this._callLifeCycleCallback(e,n,i):this._cachePromise(e,n,i)}},{key:"_callLifeCycleCallback",value:function(e,t,n){var r=e+"."+t;this._lifeCycles[e][t](n),this._resetTargetPromise(r)}},{key:"_releasePromisesFromCache",value:function(){var e=this;Object.keys(this._unreleasedLifeCycles).forEach(function(t){Object.keys(e._unreleasedLifeCycles[t]).forEach(function(n){if(e._lifeCycles[t]&&e._lifeCycles[t][n]){var r=e._unreleasedLifeCycles[t][n];e._callLifeCycleCallback(t,n,r),delete e._unreleasedLifeCycles[t][n]}})})}},{key:"_cachePromise",value:function(e,t,n){Tf(this._unreleasedLifeCycles,e)||(this._unreleasedLifeCycles[e]={}),Tf(this._unreleasedLifeCycles[e],t)||(this._unreleasedLifeCycles[e][t]={}),this._unreleasedLifeCycles[e][t]=n}},{key:"register",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._lifeCycles=e,this._releasePromisesFromCache()}},{key:"_resetTargetPromise",value:function(e){var t=this;setTimeout(function(){t._notifiers[e]=Cf,t._promises.set(e,t._makeNotifierPromise(e))},0)}}]),e}(),Af="drag",Nf="hover",jf="selectiondrag",Ff="click",If="longtouch",Df="touchdrag",Rf="*",Lf=1,zf=-1,Bf=0,Uf=2,Hf=-2,Vf=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),Wf=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.completeSet=t,this._set=t.reduce(function(e,t){return e[t]=Bf,e},{}),this._volatile=n,this._completeSetCount=t.length,this._lockedSelection={},this._resetted=!0}return Vf(e,[{key:"add",value:function(e){this._resetted=!1;var t=this._set;for(var n in e.forEach(function(e){t[e]=Lf}),t)t[n]!==Lf&&t[n]!==Uf&&(t[n]=t[n]<0?Hf:zf);return this}},{key:"update",value:function(e){var t=this._set;return e.forEach(function(e){t[e]=Uf}),this}},{key:"updateEntry",value:function(){var e=this._set;for(var t in e)e[t]=e[t]===Lf?Uf:e[t];return this}},{key:"updateExit",value:function(){var e=this._set;for(var t in e)e[t]=e[t]===zf?Hf:e[t];return this}},{key:"remove",value:function(e){this._resetted=!1;var t=this._set;for(var n in e.forEach(function(e){t[e]=zf}),t)t[n]!==zf&&t[n]!==Hf&&(t[n]=0===t[n]?Lf:Uf);return this}},{key:"getSets",value:function(){var e=this._set,t={entrySet:[[],[]],exitSet:[[],[]],completeSet:[]};for(var n in e)e[n]>0?(e[n]===Uf&&t.entrySet[0].push(n),e[n]===Lf&&t.entrySet[1].push(n)):e[n]<0&&(e[n]===Hf&&t.exitSet[0].push(n),e[n]===zf&&t.exitSet[1].push(n)),t.completeSet.push(n);return["entrySet","exitSet"].forEach(function(e){t[e]=t[e].map(function(e){return e.map(Number)})}),t.completeSet=t.completeSet.map(Number),t}},{key:"reset",value:function(e){var t=this._set;if(e)e.forEach(function(e){t[e]=Bf});else{var n=this._lockedSelection;for(var r in t)r in n||(t[r]=Bf)}return this._resetted=!0,this}},{key:"getEntrySet",value:function(){var e=this._set,t=[];for(var n in e)e[n]===Lf&&t.push(n);return t}},{key:"getExistingEntrySet",value:function(e){var t=this._set;return e.filter(function(e){return t[e]===Lf||t[e]===Uf})}},{key:"getExistingExitSet",value:function(e){var t=this._set;return e.filter(function(e){return t[e]===zf||t[e]===Hf})}},{key:"getOldEntry",value:function(){var e=this._set,t=[];for(var n in e)e[n]===Uf&&t.push(n);return t}},{key:"getOldExit",value:function(){var e=this._set,t=[];for(var n in e)e[n]===Hf&&t.push(n);return t}},{key:"getExitSet",value:function(){var e=this._set,t=[];for(var n in e)e[n]===zf&&t.push(n);return t}},{key:"getCompleteSet",value:function(){var e=this._set,t=[];for(var n in e)t.push(n);return t}},{key:"getCompleteSetCount",value:function(){return this._completeSetCount}},{key:"resetted",value:function(){return this._resetted}},{key:"toggle",value:function(){var e=this._set;for(var t in e)e[t]===Lf?e[t]=zf:e[t]===zf?e[t]=Lf:e[t]===Uf?e[t]=Hf:e[t]=Uf;return this}}]),e}();function qf(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}var Gf=function(e,t,n){var r=e.sideEffects();for(var i in r)if({}.hasOwnProperty.call(r,i)){var a=!0;t&&!1===t(i)&&(a=!1),a&&(n?r[i].enable():r[i].disable())}},Yf=function(e){return[].concat(qf(new Set([].concat(qf(e[0]),qf(e[1])))))},$f={newEntry:[Lf],oldEntry:[Uf],mergedEnter:[Lf,Uf],newExit:[zf],oldExit:[Hf],mergedExit:[zf,Hf],complete:[]},Xf=function(e,t,n){var r=null,i=n.filteredDataModel,a=n.selectionSet;return n.propagationData?i&&(r="mergedEnter"===e?i[0]:i[1]):r=a.resetted()?null:function(e,t,n){return t?t.select(function(t,r){return $f[e].some(function(e){return n[r]===e})},{saveChild:!1}):null}(e,n.dataModel,n.selectionSet._set),{uids:t,length:t.length,model:r}},Kf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Qf=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function Jf(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}var Zf,eh=function(){function e(t,n,r,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.context=t,this._sideEffectDefinitions={},this._sideEffects={},this._propagationInf={},this._actions={behavioural:{},physical:{}},this._selectionSet={},this._volatileSelectionSet={},this._propagationFields={},this._sourceSideEffects={selectionBox:function(){return!1}},this._propagationBehaviourMap={},this._sourceBehaviours={},this._actionBehaviourMap={},this._config={},this._behaviourEffectMap={},this._entryExitSet={},this._actionHistory={},this._queuedSideEffects={},this._mappedActions={},this.mapSideEffects(i),this.registerBehaviouralActions(n.behavioural),this.registerSideEffects(r),this.registerPhysicalBehaviouralMap(n.physicalBehaviouralMap),this.registerPhysicalActions(n.physical)}return Qf(e,[{key:"config",value:function(){if(arguments.length){var e=this._config=zc(this._config,arguments.length<=0?void 0:arguments[0]),t=this.sideEffects();for(var n in t)if({}.hasOwnProperty.call(t,n)){var r=e[n];r&&t[n].config(r)}return this}return this._config}},{key:"mapSideEffects",value:function(e){var t=this._behaviourEffectMap;for(var n in e)if({}.hasOwnProperty.call(e,n)){var r=e[n]||[],i=!1,a=void 0;_c(r)?(a=r.effects,i=r.preventDefaultActions):a=r,!t[n]&&(t[n]=[]),this._behaviourEffectMap[n]=[].concat(Jf(new Set(i?a:[].concat(Jf(t[n]),Jf(a)))))}return this}},{key:"registerBehaviouralActions",value:function(e){var t=function(e,t){var n={};return(t=t instanceof Array?t:Object.values(t)).forEach(function(t){n[t.formalName()]=new t(e)}),n}(this,e);return this.prepareSelectionSets(t),Object.assign(this._actions.behavioural,t),this}},{key:"prepareSelectionSets",value:function(){return this}},{key:"registerSideEffects",value:function(e){for(var t in e)this._sideEffectDefinitions[e[t].formalName()]=e[t];return this}},{key:"applySideEffects",value:function(e,t,n){var r=this,i=this.sideEffects(),a=this._actionHistory,o=this._queuedSideEffects;return e.forEach(function(e){var t=void 0,u=void 0,c=e.effects,l=e.behaviours,s=function(e,t){var n={},r={mergedEnter:null,mergedExit:null};return t.forEach(function(t){var i=e._entryExitSet[t];i&&(n=Object.assign(n,wc(i)),["mergedEnter","mergedExit"].forEach(function(e){var t=i[e].model,a=r[e];a=r[e]=a?t.union(a):t,n[e].model=a}))}),n}(r,l);c.forEach(function(e){"object"===(void 0===e?"undefined":Kf(e))?(u=e.name,t=e.options):u=e;var c=i[u];c.isEnabled()&&(!c.constructor.mutates()&&Object.values(a).some(function(e){return e.isMutableAction})?o[u+"-"+l.join()]={name:u,params:[s,n,t]}:r.dispatchSideEffect(u,s,n,t))})}),this}},{key:"dispatchSideEffect",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=this.sideEffects(),a=i[e],o=!1;r.filter&&r.filter(a)&&(o=!0),!o&&i[e].apply(t,n,r)}},{key:"registerPropagationBehaviourMap",value:function(e){return this._propagationBehaviourMap=Object.assign(this._propagationBehaviourMap,e||{}),this}},{key:"dispatchBehaviour",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=void 0===n.propagate||n.propagate,i=this._actions.behavioural[e],a=function(e,t){var n=[];for(var r in t){var i=r.split(",");i.some(function(t){return t===e})&&n.push({effects:t[r],behaviours:i})}return n}(e,this._behaviourEffectMap);if(this._propagationInf=n,i){var o=i.dispatch(t),u=this.getPropagationSelectionSet(o);this._entryExitSet[e]=u;var c=this.shouldApplySideEffects(r);if(r&&this.propagate(e,t,o.find(function(e){return e.sourceSelectionSet}),a),c){var l=this.getApplicableSideEffects(a,t,n);this.applySideEffects(l,u,t)}}return this}},{key:"getPropagationSelectionSet",value:function(e){return e.find(function(e){return!e.sourceSelectionSet})}},{key:"shouldApplySideEffects",value:function(){return!0}},{key:"changeBehaviourStateOnPropagation",value:function(e,t){return t instanceof Function?this._sourceBehaviours[e]=t:this._sourceBehaviours[e]=function(){return t},this}},{key:"changeSideEffectStateOnPropagation",value:function(e,t){t instanceof Function?this._sourceSideEffects[e]=t:this._sourceSideEffects[e]=function(){return t}}},{key:"propagate",value:function(){return this}},{key:"sideEffects",value:function(){return arguments.length?(this._sideEffects=arguments.length<=0?void 0:arguments[0],this):this._sideEffects}},{key:"enableSideEffects",value:function(e){return Gf(this,e,!0),this}},{key:"disableSideEffects",value:function(e){return Gf(this,e,!1),this}},{key:"dissociateBehaviour",value:function(e,t){var n=this._actionBehaviourMap;for(var r in n)if(r===t){var i=n[r];i.behaviours=i.behaviours.filter(function(t){return t!==e})}return this}},{key:"dissociateSideEffect",value:function(e,t){var n=this._behaviourEffectMap;return n[t]=n[t].filter(function(t){return(t.name||t)!==e}),this}},{key:"getApplicableSideEffects",value:function(e){return e}},{key:"attachPropagationListener",value:function(e){return e.unsubscribe("propagation"),e.on("propagation",this.onDataModelPropagation()),this}},{key:"onDataModelPropagation",value:function(){var e=this;return function(t){var n=t.payload,r=n.action;e.dispatchBehaviour(r,n,{propagate:!1})}}},{key:"createSelectionSet",value:function(e,t){var n=t||this._actions.behavioural,r=this._selectionSet,i=this._volatileSelectionSet;for(var a in n)({}).hasOwnProperty.call(n,a)&&(r[a]=new Wf(e),i[a]=new Wf(e,!0));return this._volatileSelectionSet=i,this.selectionSet(r),this}},{key:"selectionSet",value:function(){return arguments.length?(this._selectionSet=arguments.length<=0?void 0:arguments[0],this):this._selectionSet}},{key:"initializeSideEffects",value:function(){var e=this._sideEffectDefinitions;return this.sideEffects(function(e,t){var n=e._sideEffects;return(t=t instanceof Array?t:Object.values(t)).forEach(function(t){var r=n[t.formalName()];n[t.formalName()]=r||new t(e)}),n}(this,e)),this}},{key:"registerPhysicalActions",value:function(e){var t=function(e,t){var n={};for(var r in t)({}).hasOwnProperty.call(r,t)||(n[r]=t[r](e));return n}(this,e);return Object.assign(this._actions.physical,t),this}},{key:"propagateWith",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=this._actions.behavioural;if(t.length){if(e===Rf)for(var i in r)this._propagationFields[i]={fields:t,append:n};else this._propagationFields[e]={fields:t,append:n};return this}return this._propagationFields}},{key:"mapActionsAndBehaviour",value:function(){var e=this._actions.physical,t=this._actionBehaviourMap,n=this._mappedActions;for(var r in t)if(!{}.hasOwnProperty.call(r,t)){var i=void 0,a=t[r];i=a.target;var o=a.touch;i||(i=this.context.getDefaultTargetContainer());var u="ontouchstart"in document.documentElement?!0===o||void 0===o:!o,c=r+"-"+a.behaviours.join();u&&!n[c]&&this.bindActionWithBehaviour(e[r],i,a.behaviours),n[c]=!0}return this}},{key:"registerPhysicalBehaviouralMap",value:function(e){return Object.assign(this._actionBehaviourMap,e),this}},{key:"bindActionWithBehaviour",value:function(e,t,n){var r=this;return"string"==typeof t&&(t=[t]),t.forEach(function(t){var i=r.context.mount(),a=t.node instanceof Function?t:cf(i).selectAll(t);n.length&&!a.empty()&&(a instanceof Array?a.forEach(function(t){e(cf(t),n)}):e(a,n))}),this}},{key:"getPropagationInf",value:function(){return this._propagationInf}},{key:"getAddSetFromCriteria",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.context,r=t.data?t.data:n.getDataModelFromIdentifiers(e,"all"),i=n.fields().x||[],a=n.fields().y||[],o=i.every(function(e){return e.type()===Ma.FieldType.MEASURE}),u=a.every(function(e){return e.type()===Ma.FieldType.MEASURE});return{model:r,uids:null===e?null:t.data?function(e,t,n){var r=t.getData(),i=r.data,a=r.schema,o=void 0;if(a.length){var u=e.getFieldsConfig();o=e.select(function(e){return i.some(function(t){return a.every(function(r,i){return!(n||r.name in u&&u[r.name].def.type!==Ma.FieldType.MEASURE)||t[i]===e[r.name].valueOf()})})},{saveChild:!1})}else o=t;return o}(this.getFullData(),t.data[0],o&&u).getData().uids:r[0].getData().uids}}},{key:"getSelectionSets",value:function(e){var t=this.context.id(),n=(this._propagationInf||{}).sourceId,r=[];return n!==t&&(r=[this._volatileSelectionSet[e]]),n&&r.push(this.selectionSet()[e]),r}},{key:"getFullData",value:function(){return this.context.data()}},{key:"resetted",value:function(){return this._resetted}},{key:"getEntryExitSet",value:function(e){return this._entryExitSet[e]}}]),e}(),th=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),nh=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.firebolt=t,this._enabled=!0}return th(e,[{key:"dispatch",value:function(e){var t=this,n=e.criteria,r=this.firebolt,i=this.constructor.formalName(),a=r.getSelectionSets(i),o=this.firebolt.getAddSetFromCriteria(n,this.firebolt.getPropagationInf()),u=o.model,c=o.uids;return a.map(function(n){return t.setSelectionSet(c,n),t.getEntryExitSet(n,u,e)})}},{key:"setSelectionSet",value:function(){return this}},{key:"getEntryExitSet",value:function(e,t,n){var r=e.getSets(),i=r.entrySet,a=r.exitSet,o=r.completeSet,u=this.firebolt.getPropagationInf(),c=this.firebolt.getFullData(),l={isSourceFieldPresent:u.isSourceFieldPresent,dataModel:c,filteredDataModel:t,propagationData:u.data,selectionSet:e};return{entrySet:[Xf("oldEntry",i[0],l),Xf("newEntry",i[1],l)],exitSet:[Xf("oldEntry",a[0],l),Xf("newExit",a[1],l)],mergedEnter:Xf("mergedEnter",Yf(i),l),mergedExit:Xf("mergedExit",Yf(a),l),completeSet:Xf("complete",o,l),isSourceFieldPresent:u.isSourceFieldPresent,fields:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.sourceIdentifiers;return n?n.getSchema().map(function(e){return e.name}):t instanceof Array?t[0]:Object.keys(t||{})}(u,n.criteria),sourceSelectionSet:!0===e._volatile}}},{key:"enable",value:function(){this._enabled=!0}},{key:"disable",value:function(){this._enabled=!1}},{key:"isEnabled",value:function(){return this._enabled}}],[{key:"mutates",value:function(){return!1}}]),e}(),rh=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),ih=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,nh),rh(t,[{key:"setSelectionSet",value:function(e,t){if(null===e)t.reset();else if(e.length){var n=e.filter(function(e){return t._set[e]===Lf||t._set[e]===Uf});t.updateExit();var r=t.getSets().entrySet;t.reset(Yf(r)),t.add(e),t.update(n)}else t.remove(t.getCompleteSet())}}]),t}(),ah="brush",oh="highlight",uh="tooltip",ch="filter",lh="select",sh=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),fh=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,ih),sh(t,null,[{key:"formalName",value:function(){return oh}}]),t}(),hh=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),dh=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,ih),hh(t,null,[{key:"formalName",value:function(){return ah}}]),t}(),ph=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),yh=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,ih),ph(t,null,[{key:"formalName",value:function(){return ch}},{key:"mutates",value:function(){return!0}}]),t}(),gh=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),vh=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,nh),gh(t,[{key:"setSelectionSet",value:function(e,t){if(null===e)t.reset();else if(e.length){var n=this.firebolt.getPropagationInf(),r=e.filter(function(e){return t._set[e]===Lf||t._set[e]===Uf});if(!1===n.propagate){t.updateExit();var i=t.getSets().entrySet;t.reset(Yf(i)),t.add(e),t.update(r)}else{r.length?(t.updateExit(),t.remove(r)):(t.updateEntry(),t.add(e));var a=t.getSets().exitSet,o=Yf(a),u=t.getCompleteSet().length;o.length===u&&t.reset()}}else t.remove(t.getCompleteSet());return this}}]),t}(),mh=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),bh=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,vh),mh(t,null,[{key:"formalName",value:function(){return lh}}]),t}(),_h=function(e,t,n){if(!e.axes.x&&!e.axes.y)return{criteria:null};var r=e.axes,i=r.x[0],a=r.y[0],o=e.fields,u=o.x[0].getMembers()[0],c=o.y[0].getMembers()[0],l=n[u].def.subtype?n[u].def.subtype:n[u].def.type,s=n[c].def.subtype?n[c].def.subtype:n[c].def.type,f={},h=t.startPos,d=t.endPos;if(h.x===d.x&&h.y===d.y)return{criteria:null};var p=l===Ma.FieldType.MEASURE?s===Ma.FieldType.MEASURE?["x","y"]:["y"]:["x"],y={},g=l===Ma.DimensionSubtype.CATEGORICAL,v=s===Ma.DimensionSubtype.CATEGORICAL,m="band"===i.constructor.type()?i.scale().invertExtent(h.x,d.x):i.invert(h.x,d.x),b="band"===a.constructor.type()?a.scale().invertExtent(h.y,d.y):a.invert(h.y,d.y),_={x:h.x===d.x?[]:g?m:m.sort(function(e,t){return e-t}),y:h.y===d.y?[]:v?b:b.sort(function(e,t){return e-t})},x={};if(2===p.length){if(x[u]=_.x,x[c]=_.y,u===c){var w=_.x,k=_.y,E=w[0]>k[0]?k:w,S=E===k?w:k;E[1]<S[0]?x[u]=[]:x[u]=[S[0],E[1]<S[1]?E[1]:S[1]],f.x=[h.x,d.x],f.y=[h.y,d.y]}}else y[p[0]]=_[p[0]]||[],"x"===p[0]?(x[u]=y.x,l===Ma.DimensionSubtype.CATEGORICAL&&(f.x=t.snap&&h.x!==d.x?i.getNearestRange(h.x,d.x):[h.x,d.x])):(x[c]=y.y,s===Ma.DimensionSubtype.CATEGORICAL&&(f.y=t.snap&&h.y!==d.y?a.getNearestRange(h.y,d.y):[h.y,d.y]));return{criteria:x,dimensions:f}},xh=function(e,t,n,r){var i={},a={},o=void 0,u=vf(),c=void 0;e.call(u().on("start",function(){var e=gf();i={x:e.x,y:e.y},o=n.context.getDrawingContext(),c=(new Date).getTime()}).on("drag",function(){var e=gf();if(a={x:e.x,y:e.y},!(r&&Math.abs(i.x-a.x)<=5)){a.x=Math.max(0,Math.min(a.x,o.width)),a.y=Math.max(0,Math.min(a.y,o.height));var u=_h(n.context.getSourceInfo(),{startPos:i,endPos:a},n.context.data().getFieldsConfig());t.forEach(function(e){return n.dispatchBehaviour(e,u)})}}).on("end",function(){var e=gf();a={x:e.x,y:e.y};var u=(new Date).getTime()-c;if(!(r&&u>100&&Math.abs(i.x-a.x)<=5)){a.x=Math.max(0,Math.min(a.x,o.width)),a.y=Math.max(0,Math.min(a.y,o.height));var l=_h(n.context.getSourceInfo(),{startPos:i,endPos:a,snap:!0},n.context.data().getFieldsConfig());l.dragEnd=!0,t.forEach(function(e){return n.dispatchBehaviour(e,l)})}}))},wh=function(e,t,n){var r=n.context,i=yf(r.getDrawingContext().svgContainer,t.touches?t.touches[0]:t),a=r.getNearestPoint(i.x,i.y,{data:e,event:t});return{criteria:a?a.id:null,showInPosition:a.showInPosition,target:a.target,position:i}};function kh(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Eh=(kh(Zf={},Af,function(e){return function(t,n){xh(t,n,e)}}),kh(Zf,Nf,function(e){return function(t,n){var r=function(t){var r=gf(),i=e.context,a=i.config().interaction.tooltip.mode,o=yf(i.getDrawingContext().svgContainer,r),u=i.getNearestPoint(o.x,o.y,{getAllPoints:"consolidated"===a||"fragmented"===a,data:t,event:r}),c={criteria:u?u.id:null,showInPosition:u.showInPosition,target:u.target,position:o,mode:a};n.forEach(function(t){return e.dispatchBehaviour(t,c)}),r.stopPropagation()};t.on("mouseover",r).on("mousemove",r).on("mouseout",function(){n.forEach(function(t){return e.dispatchBehaviour(t,{criteria:null})})})}}),kh(Zf,Ff,function(e){return function(t,n){t.on("click",function(t){var r=gf(),i=wh(t,r,e);n.forEach(function(t){return e.dispatchBehaviour(t,i)}),r.stopPropagation()})}}),kh(Zf,If,function(e){return function(t,n){var r=void 0,i=void 0;i=!1,r=gf(),t.on("touchstart",function(t){r=gf(),i=!1,setTimeout(function(){i?n.forEach(function(t){return e.dispatchBehaviour(t,{criteria:null})}):function(t){var i=wh(t,r,e);n.forEach(function(t){return e.dispatchBehaviour(t,i)}),r.stopPropagation()}(t)},100)}).on("touchend",function(){i=!0})}}),kh(Zf,Df,function(e){return function(t,n){xh(t,n,e,!0)}}),Zf),Sh=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),Oh=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.firebolt=t,this._enabled=!0,this._strategy="default",this._config={},this._id=xc(),this._strategies={},this.config(this.constructor.defaultConfig())}return Sh(e,[{key:"config",value:function(){return arguments.length?(this._config=zc(this._config,arguments.length<=0?void 0:arguments[0]),this):this._config}},{key:"disable",value:function(){return this._enabled=!1,this}},{key:"enable",value:function(){return this._enabled=!0,this}},{key:"isEnabled",value:function(){return this._enabled}},{key:"apply",value:function(){return this}},{key:"addStrategy",value:function(e,t){return this._strategies[e]=t,this}}],[{key:"defaultConfig",value:function(){return{}}},{key:"target",value:function(){return"all"}},{key:"mutates",value:function(){return!1}}]),e}(),Mh=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),Ch=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,Oh),Mh(t,[{key:"applyInteractionStyle",value:function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1];var t=arguments[2],n=arguments[3];this.firebolt.context.layers().forEach(function(r){return!1!==r.config().interactive&&r.applyInteractionStyle(t,e.uids,n)})}}]),t}(),Th=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),Ph=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,Oh),Th(t,[{key:"createElement",value:function(e,t,n,r,i){return lf(e,t,n,r,i)}},{key:"drawingContext",value:function(){return arguments.length?(this._drawingContext=arguments.length<=0?void 0:arguments[0],this):this._drawingContext()}},{key:"show",value:function(){return this}},{key:"hide",value:function(){return this}}]),t}(),Ah=(n(9),function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,i=!1,a=void 0;try{for(var o,u=e[Symbol.iterator]();!(r=(o=u.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){i=!0,a=e}finally{try{!r&&u.return&&u.return()}finally{if(i)throw a}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}),Nh=function(e,t,n){var r=e.config(),i=r.defClassName,a=r.classPrefix;cf(t).selectAll("."+a+"-"+i).style("display",n?"block":"none")},jh=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),Fh=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,Ph),jh(t,[{key:"apply",value:function(e,t){var n=void 0,r=void 0,i=void 0,a=void 0,o=this._config,u=o.box,c=this.firebolt,l=this.drawingContext(),s=l.sideEffectGroup,f=l.width,h=l.height,d=o.classPrefix,p=o.defClassName;if(null===t.criteria)return this.hide(l),this;var y=c.context.getSourceInfo(),g=function(e,t,n){var r=void 0,i=void 0,a=void 0,o=void 0,u=void 0,c=void 0,l=void 0,s=e.criteria,f=e.dimensions||{},h=f.x,d=f.y;if(null===s)return null;var p=t.x[0],y=t.y[0],g="linear"===p.constructor.type(),v="linear"===y.constructor.type(),m=""+n.x[0],b=""+n.y[0],_=s[m],x=s[b];if(_&&_[0]instanceof Array?(u=_[0],c=_[1]):(u=_||[],c=x||[]),l=_&&x?"both":_?"vertical":"horizontal",u&&u.length)if("band"===y.constructor.type()&&g)r=i=void 0,l="horizontal";else{var w=p.domain(),k="band"===p.constructor.type(),E=void 0,S=void 0;if(k){var O=w.indexOf(u[0]),M=w.indexOf(u[u.length-1]),C=[O,M].sort(function(e,t){return e-t}),T=Ah(C,2);O=T[0],M=T[1],E=w[O],S=w[M]}else E=u[0],S=u[u.length-1];r=p.getScaleValue(E),i=p.getScaleValue(S),i+=k?p.getUnitWidth():0}else r=i=void 0;if(c&&c.length)if("band"===p.constructor.type()&&v)a=o=void 0,l="vertical";else{var P=y.domain(),A=void 0,N=void 0;if("band"===y.constructor.type()){var j=P.indexOf(c[0]),F=P.indexOf(c[c.length-1]),I=[j,F].sort(function(e,t){return t-e}),D=Ah(I,2);j=D[0],F=D[1],A=P[j],N=P[F]}else A=c[0],N=c[c.length-1];a=y.getScaleValue(A),o=y.getScaleValue(N),o+="band"===y.constructor.type()?y.getUnitWidth():0}else a=o=void 0;if(v&&g||!e.dragEnd){if(h){var R=Ah(h,2);r=R[0],i=R[1]}if(d){var L=Ah(d,2);a=L[0],o=L[1]}}return{dimension:{x1:r,x2:i,y1:a,y2:o},direction:l}}(t,y.axes,y.fields),v=g.dimension,m=g.direction,b=t.dragEnd&&o.transition;"both"===m||"vertical"===m?(n=Math.min(v.x1,v.x2),i=Math.abs(v.x2-v.x1)):(n=0,i=f),"both"===m||"horizontal"===m?(r=Math.min(v.y1,v.y2),a=Math.abs(v.y2-v.y1)):(a=h,r=0),this.show(l);var _=[{x:n,y:r,width:i,height:a}],x=this,w=lf(cf(s),"g",[1],"."+d+"-"+p).selectAll("rect").data(_),k=w.enter().append("rect").each(function(){var e;(e=c,function(t,n){var r=void 0,i=void 0,a=e.context,o=function(t){n.forEach(function(n){return e.dispatchBehaviour(n,t)})},u=vf();t.call(u().on("start",function(){var e=gf();i=a.getDrawingContext(),r=e.subject}).on("drag",function(){var e=gf();r.x+=e.dx,r.y+=e.dy;var t=i.width,n=i.height,u=Math.min(t-r.width,Math.max(r.x,0)),c=Math.min(n-r.height,Math.max(r.y,0)),l=c+r.height,s=u+r.width;if(u>=0&&s<=t&&c>=0&&l<=n){var f=_h(a.getSourceInfo(),{startPos:{x:u,y:c},endPos:{x:s,y:l}},a.data().getFieldsConfig());o(f)}}).on("end",function(){var e=i.width,t=i.height,n=Math.min(e-r.width,Math.max(r.x,0)),u=Math.min(t-r.height,Math.max(r.y,0)),c=u+r.height,l=n+r.width;if(n>=0&&l<=e&&u>=0&&c<=t){var s=_h(a.getSourceInfo(),{startPos:{x:n,y:u},endPos:{x:l,y:c},snap:!0},a.data().getFieldsConfig());s.dragEnd=!0,o(s)}}))})(cf(this),["brush"],x)}).merge(w).each(function(e){var t=cf(this);for(var n in b&&(t=t.transition().duration(b.duration)),e)({}).hasOwnProperty.call(e,n)&&$c(e[n])&&t.attr(n,e[n])}),E=Tc(u.defClassName,this._id,d);return k.classed(E.join(" "),!0),k.classed(u.className,!0),this}},{key:"hide",value:function(e){Nh(this,e.sideEffectGroup,!1)}},{key:"show",value:function(e){Nh(this,e.sideEffectGroup,!0)}}],[{key:"defaultConfig",value:function(){return{defClassName:"selection-box-group",className:"",classPrefix:"muze",box:{defClassName:"selection-box",className:""},transition:{duration:200}}}},{key:"formalName",value:function(){return"selectionBox"}}]),t}(),Ih={position:"absolute",width:0,height:0},Dh={classPrefix:"muze",defClassName:"tooltip-box",connectorClassName:"tooltip-connectors",className:"",row:{margin:0},content:{spacing:5,iconContainerSize:10,iconScale:1,iconShape:"circle",iconColor:"#ff0000",rowMargin:"0px",margin:10,separator:":",className:"tooltip-content-container",parentClassName:"tooltip-content-parent-container"},arrow:{size:10,disabled:!1,defClassName:"tooltip-arrow",className:"",color:"rgba(195,195,195,0.85)"}},Rh=function(e,t,n,r){var i=void 0,a=n.x,o=n.y,u=n.boxHeight,c=n.boxWidth,l=r.arrow.disabled?0:r.arrow.size;if("left"===e||"right"===e){var s=0,f=u/2,h=t.y+t.height,d=o+u;t.y>o?(s=t.y-o,f=(h>=d?d-t.y:t.height)/2):d>h&&(f=Math.abs(o-(t.y+t.height))/2),i=s+f-l/2}else{var p=0,y=c/2,g=t.x+t.width,v=a+c;t.x>a?(p=t.x-a,y=(g>=v?v-t.x:t.width)/2):v>g&&(y=Math.abs(a-(t.x+t.width))/2),i=p+y-l/2}return i},Lh=function(e,t,n){var r=e._tooltipArrow,i=e._tooltipBackground,a=e._config,o=a.classPrefix,u=a.arrow,c=Tc(u.defClassName,e._id,a.classPrefix);r.style("display","block"),r.attr("class",""+c.join(" ")),"left"===t||"right"===t?(r.style("top",n+"px"),r.style("left",""),i.style("top",n+"px"),i.style("left","")):("bottom"===t?r.style("top","100%"):r.style("top","-"+u.size+"px"),r.style("left",n+"px"),"bottom"===t?i.style("top","100%"):i.style("top","-"+(u.size+3)+"px"),i.style("left",n+"px")),r.classed(o+"-tooltip-arrow",!0),r.classed(o+"-tooltip-arrow-"+e._arrowOrientation,!1),r.classed(o+"-tooltip-arrow-"+t,!0),i.classed(o+"-tooltip-background-arrow",!0),i.classed(o+"-tooltip-background-arrow-"+e._arrowOrientation,!1),i.classed(o+"-tooltip-background-arrow-"+t,!0)};function zh(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function Bh(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n(11);var Uh={millisecond:"%A, %b %e, %H:%M:%S.%L",second:"%A, %b %e, %H:%M:%S",minute:"%A, %b %e, %H:%M",hour:"%A, %b %e, %H:%M",day:"%A, %b %e, %Y",month:"%B %Y",year:"%Y"},Hh=[["millisecond","second","minute","hour","day","month","year"],[1,1e3,6e4,36e5,864e5,2592e6,31536e6]],Vh=function(e,t){var n;return(Bh(n={},Ma.DimensionSubtype.TEMPORAL,function(e,t){var n=function(e){var t=Cc(Hh[1],e);return Hh[0][t]}(t);return Ma.DateTimeFormatter.formatAs(e,Uh[n])}),Bh(n,Ma.FieldType.MEASURE,function(e){return t(e?e.toFixed(2):e)}),Bh(n,Ma.FieldType.DIMENSION,function(e){return e}),n)[e]},Wh={keyValue:function(e,t,n){return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments[2],r=[],i=e.getData(),a=i.data,o=i.schema,u=t.formatters,c=t.separator,l=e.getFieldsConfig(),s=e.getFieldspace(),f=s.fieldsObj(),h=n.dimensionMeasureMap,d=n.axes,p=n.detailFields||[],y=o.filter(function(e){return e.type===Ma.FieldType.DIMENSION}),g=o.filter(function(e){return e.type===Ma.FieldType.MEASURE}),v=o.find(function(e){return-1!==p.indexOf(e.name)}),m=a.length,b=function(e,n){var r=void 0,i=void 0,o=void 0,p=[],y=l[e].index,g=l[e].def.subtype===Ma.DimensionSubtype.TEMPORAL?f[e].getMinDiff():0,v=u&&u[e]||Vh(n,function(e){return e});if(null!==r){var b=n===Ma.FieldType.MEASURE?a.map(function(e){return e[y]}):[].concat(zh(new Set(a.map(function(e){return e[y]}))));b=b.filter(function(e){return""!==e});var _=d.color[0],x=d.shape[0],w=d.size[0],k=(_||x||w)&&m>1&&n!==Ma.FieldType.MEASURE;b.forEach(function(n,u){var f=void 0,d=h[e];if(d&&d.length&&m>1){f=n;var y={value:""};k&&(y={type:"icon",color:_.getColor(n),shape:x.getShape(n),size:w.getSize(n)*t.iconScale}),d.length>1?(p.push([y,""+f]),d.forEach(function(e){o=l[e].index,r=a[u][o],i=Vh("measure",s.fields[o]._ref.numberFormat())(r,g),p.push([{value:""+e+c,style:{"margin-left":t.margin+"px}"},className:t.classPrefix+"-tooltip-key"},{value:""+i,className:t.classPrefix+"-tooltip-value"}])})):(o=l[d[0]].index,r=a[u][o],i=Vh("measure",s.fields[o]._ref.numberFormat())(r,g),p.push([y,{value:""+f+c,className:t.classPrefix+"-tooltip-key"},{value:""+i,className:t.classPrefix+"-tooltip-value"}]))}else f=e,i=v(r=n,g),p.push([{value:""+f+c,className:t.classPrefix+"-tooltip-key"},{value:""+i,className:t.classPrefix+"-tooltip-value"}])})}return p},_="keyValue";if(m>1&&v)r=function(e,t,n,r){var i=[];return i.push(t.map(function(e){return e.name})),e.forEach(function(e){var a=[];t.forEach(function(t,i){var o=t.subtype===Ma.DimensionSubtype.TEMPORAL?r[t.name]:0,u=t.type===Ma.FieldType.MEASURE&&n.fields[i]._ref.numberFormat(),c=Vh(t.subtype||t.type,u)(e[i],o);a.push(c)}),i.push(a)}),i}(a,o,s,n.timeDiffs),_="table";else{y.forEach(function(e){var t=e.subtype?e.subtype:e.type;r=[].concat(zh(r),zh(b(e.name,t)))});var x=[].concat(zh(new(Function.prototype.bind.apply(Set,[null].concat(zh(Object.values(h)))))));(m>1?g.filter(function(e){return-1===x.indexOf(e.name)}):g).forEach(function(e){var t=e.subtype?e.subtype:e.type;r=[].concat(zh(r),zh(b(e.name,t)))})}return{content:r,displayFormat:_}}(e,t,n)}},qh="keyValue",Gh=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),Yh=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._model=null,this._strategy=qh,this._formatter=null,this._config=this.constructor.defaultConfig()}return Gh(e,[{key:"config",value:function(){return arguments.length>0?(this._config=zc(this._config,arguments.length<=0?void 0:arguments[0]),this):this._config}},{key:"update",value:function(e){return this._model=e.model,this._strategy=void 0!==e.strategy?e.strategy:qh,this._formatter=e.formatter,this}},{key:"context",value:function(e){return this._context=e,this}},{key:"render",value:function(e){var t=void 0,n=this._config,r=n.iconContainerSize,i=this._formatter,a=n.rowMargin,o=this._model;if(this._mount=e,(t=o instanceof Array?o:i instanceof Function?i(this._model,this._context):Wh[this._strategy](this._model,this.config(),this._context))instanceof Function)e.html(t());else{var u=t,c="default";_c(t)&&(u=t.content,c=t.displayFormat);var l=lf(e,"div",[c],n.classPrefix+"-tooltip-content",{},function(e){return e});if("table"===c){var s=lf(l,"table",[1],n.classPrefix+"-tooltip-table"),f=lf(s,"tbody",[1],n.classPrefix+"-tooltip-table-tbody"),h=lf(f,"tr",u,n.classPrefix+"-tooltip-table-row");h.each(function(e,t){cf(this).classed(n.classPrefix+"-tooltip-table-row-"+t,!0)}),lf(h,"td",function(e){return e},n.classPrefix+"-tooltip-table-cell").each(function(e){cf(this).html(e)})}else{var d=lf(l,"div",u,n.classPrefix+"-tooltip-row"),p=lf(d,"span",function(e){return e},n.classPrefix+"-tooltip-content");p.attr("class",n.classPrefix+"-tooltip-content"),df(d,{margin:a}),df(p,{display:"inline-block","margin-right":n.spacing+"px"}),p.each(function(e){var t=cf(this);if(t.html(""),e instanceof Object)if("icon"===e.type){var n=lf(t,"svg",[1]),i=lf(n,"path",[1]),a=e.shape instanceof Function?e.shape:Qc(e.shape);hf(n,{x:0,y:0,width:r,height:r}),hf(i,{d:a.size(e.size)(),transform:"translate("+r/2+", "+r/2+")"}),df(i,{fill:e.color}),df(n,{width:r+"px",height:r+"px"})}else t.html(e.value),e.className&&t.classed(e.className,!0),df(t,e.style);else t.html(e)})}}return this}},{key:"clear",value:function(){return this._model=null,this}}],[{key:"defaultConfig",value:function(){var e=Dh.content;return e.classPrefix=Dh.classPrefix,e}}]),e}(),$h=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),Xh=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var r=n;this._id=xc(),this._config={},this.config({});var i=this._config,a=i.classPrefix,o=i.content.parentClassName,u=lf(t,"div",[1],a+"-tooltip-container");this._container=u,this._tooltipContainer=u.append("div").style("position","absolute"),this._contentContainer=this._tooltipContainer.append("div").attr("class",a+"-"+o),this._tooltipBackground=this._tooltipContainer.append("div").style("position","relative"),this._tooltipArrow=this._tooltipContainer.append("div"),n||(r=t.append("svg").style("pointer-events","none")),this._contents={},this._tooltipConnectorContainer=cf(r).append("g").attr("class",i.classPrefix+"-"+i.connectorClassName);var c=this._id,l=i.defClassName,s=Tc(l,c,i.classPrefix);df(this._tooltipArrow,Ih),df(this._tooltipBackground,Ih),this.addClass(s.join(" ")),this.addClass(i.className),this.hide()}return $h(e,[{key:"config",value:function(){if(arguments.length>0){var e=zc({},this.constructor.defaultConfig());return this._config=zc(e,arguments.length<=0?void 0:arguments[0]),this}return this._config}},{key:"addClass",value:function(e){return this._tooltipContainer.classed(e,!0),this}},{key:"context",value:function(){return arguments.length?(this._context=arguments.length<=0?void 0:arguments[0],this):this._context}},{key:"content",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=this.config(),i=r.classPrefix,a=r.content.className,o=r.formatter,u=n.className||i+"-"+a+"-"+e,c=this._contents[e]=this._contents[e]||new Yh,l=lf(this._contentContainer,"div",[n.order],u);l.attr("class",i+"-"+a+" "+u),function(e,t){e.selectAll(t).sort(function(e,t){return e-t})}(this._contentContainer,"."+i+"-"+a);var s=r.content;return n.classPrefix=this._config.classPrefix,c.config(s),null===t?(c.clear(),l.remove(),delete this._contents[e]):(c.update({model:t,formatter:n.formatter||o}),c.context(this._context),c.render(l)),Object.keys(this._contents).length||this.hide(),this}},{key:"getContents",value:function(){return Object.values(this._contents)}},{key:"position",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!Object.keys(this._contents).length)return this.hide(),this;this.show();var r=this._target,i=n.repositionArrow;if(r&&i){var a=this._tooltipContainer.node(),o=this._config,u=o.arrow.disabled,c=u?0:o.arrow.size,l=this._arrowOrientation,s="left"===l||"right"===l?t+a.offsetHeight-c<r.y||t>r.y+r.height:e+a.offsetWidth-c<r.x||e>r.x+r.width;if(!u)if(s){var f=void 0;this._tooltipArrow.style("display","none"),this._tooltipBackground.style("display","none"),this._tooltipConnectorContainer.style("display","block");var h=this._tooltipConnectorContainer.selectAll("path").data([1]),d=h.enter().append("path");"left"===l?f="M "+e+" "+(t+a.offsetHeight/2)+" L "+(r.x+r.width)+" "+(r.y+r.height/2):"right"===l?f="M "+(e+a.offsetWidth)+" "+(t+a.offsetHeight/2)+" L "+r.x+" "+(r.y+r.height/2):"bottom"===l&&(f="M "+(e+a.offsetWidth/2)+" "+(t+a.offsetHeight)+" L "+(r.x+r.width/2)+" "+r.y),d.merge(h).attr("d",f).style("display","block")}else{var p=Rh(l,r,{x:e,y:t,boxHeight:a.offsetHeight,boxWidth:a.offsetWidth},this._config);Lh(this,this._arrowOrientation,p),this._tooltipConnectorContainer.style("display","none")}}var y=this._offset||{x:0,y:0};return this._tooltipContainer.style("left",y.x+e+"px").style("top",y.y+t+"px"),this}},{key:"positionRelativeTo",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=void 0,i=n.orientation;if(this.show(),!e)return this.hide(),this;var a=this._extent,o=this._tooltipContainer.node();this._tooltipContainer.style("top","0px").style("left","0px");var u=o.offsetWidth+2,c=o.offsetHeight+2,l=this._config,s=this._offset,f=l.arrow.disabled,h=f?0:l.arrow.size,d=void 0===n.draw||n.draw,p=e.y,y=e.x+e.width+s.x,g=a.width-y,v=e.x+s.x-a.x,m=p>c+h,b=g>=u+h,_=v>=u+h;return this._target=e,i||(i=m?"vertical":b||_?"horizontal":"vertical"),"horizontal"===i?r=function(){var n=void 0,r=e.x+e.width,i=e.y;return b?(n="left",r+=h):_?(r=e.x-u,n="right",r-=h):(n="left",r+=h),e.height<c&&(i=Math.max(0,e.y+e.height/2-c/2)),{position:n,arrowPos:Rh(n,e,{x:r,y:i,boxHeight:c,boxWidth:u},t._config),x:r,y:i}}():"vertical"===i&&(r=function(){var n=void 0,r=void 0,i=e.x-u/2+e.width/2;return a.width-(e.x+s.x)<u?i=a.width-u-s.x:i+s.x<a.x&&(i=a.x),m?(r=e.y-c-h,n="bottom"):(r=e.y+e.height+h,n="top"),{position:n,arrowPos:Rh(n,e,{x:i,y:r,boxHeight:c,boxWidth:u},t._config),x:i,y:r}}()),this._position={x:r.x,y:r.y},this._arrowPos=r.arrowPos,f?(this._tooltipArrow.style("display","none"),this._tooltipBackground.style("display","none")):Lh(this,r.position,r.arrowPos),this._arrowOrientation=r.position,d&&this.position(r.x,r.y),this}},{key:"hide",value:function(){return this._tooltipContainer.style("display","none"),this._tooltipConnectorContainer.style("display","none"),this}},{key:"show",value:function(){return this._tooltipContainer.style("display","block"),this}},{key:"extent",value:function(e){return this._extent=e,this}},{key:"offset",value:function(e){return this._offset=e,this}},{key:"remove",value:function(){return this._tooltipContainer.remove(),this._tooltipBackground.remove(),this._tooltipConnectorContainer.remove(),this}}],[{key:"defaultConfig",value:function(){return Dh}}]),e}(),Kh={showSelectedItems:function(e){var t=e.getData(),n=t.schema.filter(function(e){return e.type===Ma.FieldType.MEASURE}),r=e.groupBy([""],n.reduce(function(e,t){return e[t.name]="count"===t.defAggFn?"sum":t.defAggFn,e},{})),i=e.getFieldspace().fieldsObj(),a=r.getFieldsConfig(),o=[{value:""+t.data.length,style:{"font-weight":"bold"}},"Items Selected"],u=n.map(function(e){return e.name});return u.length&&(o=[].concat(function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(o),["("+i[u[0]].defAggFn().toUpperCase()+") "+u[0],{value:""+r.getData().data[0][a[u[0]].index].toFixed(2),style:{"font-weight":"bold"}}])),[o]}},Qh=(n(13),function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}()),Jh=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(r)));return a._tooltips={},a._strategies=Kh,a._strategy="default",a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,Ph),Qh(t,[{key:"apply",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=0,i=0,a=e.mergedEnter.model,o=this.firebolt.context,u=this.drawingContext();if(a.isEmpty()||null===t.criteria||!1===e.isSourceFieldPresent)return this.hide(n,null),this;var c=this._tooltips,l=this.config(),s={width:u.width,height:u.height},f=t.showInPosition,h=l.padding,d=[],p="fragmented"===l.mode,y=o.getSourceInfo(),g=y.fields,v=!(!g.x[0]||g.x[0].type()!==Ma.FieldType.DIMENSION),m=t.position,b=[],_={},x=a.getData().uids;p?d.push.apply(d,function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(x.map(function(e){return a.select(function(t,n){return n===e},{saveChild:!1})}))):d.push(a);var w=t.target,k=[];if(w){k=w[0]||[];for(var E=t.sourceFields,S=[],O=0,M=k.length;O<M;O++)-1!==E.indexOf(k[O])&&S.push(O);w=w.map(function(e){return e.filter(function(e,t){return-1!==S.indexOf(t)})})}for(var C=o.getPlotPointsFromIdentifiers(w||t.criteria,{getBBox:!0}),T=0;T<d.length;T++){var P=C[T];if(p){var A=d[T].getData().schema.filter(function(e){return e.type===Ma.FieldType.DIMENSION}).map(function(e){return e.name});P=(P=o.getPlotPointsFromIdentifiers(d[T].project(A),{getBBox:!0}))&&P[0]}var N=d[T];l.fields&&(N=N.project(l.fields,{saveChild:!1})),l.dataTransform&&(N=l.dataTransform(N,T)),_[T]=!0;var j=u.parentContainer,F=j.getBoundingClientRect(),I=u.htmlContainer.getBoundingClientRect(),D=I.left-F.left,R=I.top-F.top,L=c[T]=c[T]||new Xh(j,u.svgContainer);y.payload=t,y.firebolt=this.firebolt,y.detailFields=o.detailFields(),y.timeDiffs=o.timeDiffsByField(),L.context(y);var z=Kh[n.strategy];if(L.content(n.strategy||this._strategy,N,{formatter:z,order:n.order}).config(this.config()).extent({x:0,y:0,width:F.width,height:F.height}).offset({x:D+(l.offset.x||0),y:R+(l.offset.y||0)}),f)L.position(m.x+h,m.y+h);else{if(!P){L.hide();break}L.positionRelativeTo({x:P.x,y:P.y,width:P.width||0,height:P.height||0},{orientation:p?v?"horizontal":"vertical":void 0})}if(p){var B=L._position,U=L._tooltipContainer.node().getBoundingClientRect();if(r+=U.height+h,i+=U.width+h,v?r>u.height:i>u.width)break;b.push({x:B.x,y:B.y,width:U.width,height:U.height,tooltip:L})}}for(var H in c)if(!_[H]){var V=c[H];V.content(t.action,null),V.getContents().length||(V.remove(),delete c[H])}return p&&(function(e,t,n){var r=void 0,i=void 0,a=void 0,o=void 0,u=void 0,c=e.length,l=function(e,t,u){a=e.x,o=e.width,r=e.y,i=e.height;var c=r+i,l=a+o;n?(u?r<t.y+t.height:c>t.y)&&(t.y=u?e.y-t.height-5:c+5):(u?a<t.x+t.width:l>t.x)&&(t.x=u?e.x-t.width-5:l+5)};for(e.sort(function(e,t){return n?e.y-t.y:e.x-t.x}),u=0,u=0;u<c-1;u++)l(e[u],e[u+1]);if(e[u].y+e[u].height>t.height||e[u].x+e[u].width>t.width)for(n?e[u].y-=e[u].height+e[u].y-t.height:e[u].x-=e[u].width+e[u].x-t.width,u=c-1;u>0;u--)l(e[u],e[u-1],!0)}(b,s,v),b.forEach(function(e){return e.tooltip.position(e.x,e.y,{repositionArrow:!0})})),this}},{key:"hide",value:function(e){var t=this._tooltips;for(var n in t)if({}.hasOwnProperty.call(t,n)){var r=e.strategy||this._strategy;t[n].content(r,null),t[n].hide()}}}],[{key:"defaultConfig",value:function(){return{padding:5,offset:{x:0,y:0}}}},{key:"formalName",value:function(){return"tooltip"}}]),t}(),Zh=(n(15),function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}());function ed(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}var td,nd=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,Ph),Zh(t,[{key:"apply",value:function(e,t){var n=this,r=void 0,i=void 0,a=void 0,o=void 0,u=this.config(),c=u.className,l=u.bandClass,s=u.lineClass,f=e.mergedEnter.model,h=this.drawingContext();if(t.criteria&&f&&f.isEmpty())return this;if(null===t.criteria||!f)return this.hide(),this;var d=f.getData(),p=this.firebolt.context.getSourceInfo(),y=p.axes,g=p.fields,v=e.fields,m=d.data,b=f.getFieldsConfig(),_=h.sideEffectGroup,x=[];if(v.forEach(function(e){var t=b[e]&&b[e].index,u=m.map(function(e){return e[t]}),c=[["x",0],["x",1],["y",0],["y",1]].find(function(t){var n=g[t[0]][t[1]];return n&&n.type()===Ma.FieldType.DIMENSION&&-1!==n.getMembers().indexOf(e)});if(void 0!==c&&m.length){var f=c[0],d=y[f][c[1]],p=u[0];i=d.getUnitWidth()||0,a=d.getScaleValue(p)+i/2+h.xOffset;var v=Math.max.apply(Math,ed(n.firebolt.context.layers().map(function(e){return e.getPlotSpan()[f]}))),_=Math.max.apply(Math,ed(n.firebolt.context.layers().map(function(e){return e.getPlotPadding()[f]})));r=h.height,o=h.width;var w=a-v/2-_/2,k=a+v/2+_/2,E={};E.d="y"===f?"M 0 "+w+" L 0 "+k+" L "+o+" "+k+" L "+o+" "+w+" Z":"M "+w+" 0 L "+k+" 0 L "+k+" "+r+" L "+w+" "+r+" Z",E.className=v?l:s,x.push(E)}}),x.length){var w=this.createElement(_,"g",[1],c);this.createElement(w,"path",x).attr("d",function(e){return e.d}).style("pointer-events","none").attr("class",function(e){return e.className})}return this}},{key:"hide",value:function(){var e=this.config().className,t=this.drawingContext();cf(t.sideEffectGroup).selectAll("."+e).remove()}}],[{key:"defaultConfig",value:function(){return{className:"muze-crossline-group",bandClass:"muze-crossband",lineClass:"muze-crossline"}}},{key:"formalName",value:function(){return"crossline"}}]),t}(),rd={fade:function(e,t,n){var r=e.mergedEnter,i=e.mergedExit,a=e.exitSet,o=e.completeSet;r.length||i.length?(t.applyInteractionStyle(a[1],{},n,!0),t.applyInteractionStyle(r,{},n,!1)):t.applyInteractionStyle(o,{},n,!1)},focus:function(e,t){var n=e.mergedEnter,r=e.mergedExit,i=e.completeSet;n.length||r.length?(t.applyInteractionStyle(r,{},"focus",!0),t.applyInteractionStyle(n,{},"focus",!1)):t.applyInteractionStyle(i,{},"focus",!1)},highlight:function(e,t){var n=e.mergedEnter,r=e.mergedExit,i=e.entrySet,a=e.exitSet,o=e.completeSet;n.length||r.length?(t.applyInteractionStyle(i[1],{},"highlight",!0),t.applyInteractionStyle(a[1],{},"highlight",!1)):t.applyInteractionStyle(o,{},"highlight",!1)}},id=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),ad=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(r)));return a._strategy="highlight",a._strategies=rd,a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,Ch),id(t,[{key:"apply",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=this._strategies[n.strategy||this._strategy];return!1!==e.isSourceFieldPresent&&r(e,this,n.strategy||this._strategy),this}}],[{key:"formalName",value:function(){return"highlighter"}},{key:"target",value:function(){return"visual-unit"}}]),t}(),od=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),ud=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,Ch),od(t,[{key:"apply",value:function(e,t){var n=this.firebolt.context,r=e.mergedEnter.model;return null===t.criteria?n.clearCaching().resetData():n.enableCaching().data(r),this}}],[{key:"formalName",value:function(){return"filter"}},{key:"target",value:function(){return"visual-unit"}},{key:"mutates",value:function(){return!0}}]),t}(),cd=(n(17),function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,i=!1,a=void 0;try{for(var o,u=e[Symbol.iterator]();!(r=(o=u.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){i=!0,a=e}finally{try{!r&&u.return&&u.return()}finally{if(i)throw a}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}),ld=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),sd=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(r))),o=a.firebolt.context;return a._layers=a.addAnchorLayers(o),a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,Ph),ld(t,[{key:"addAnchorLayers",value:function(e){var t=this,n=[];return this.firebolt.context.layers().forEach(function(r,i){if(r.shouldDrawAnchors()){var a=r.encodingFieldsInf(),o={instances:e.addLayer({name:r.alias()+"-"+t.constructor.formalName()+"-"+i,mark:"point",encoding:{x:a.xField,y:a.yField,color:{field:a.colorField},size:{field:a.sizeField,value:t.defaultSizeValue()}},transform:{type:"identity"},transition:t.getTransitionConfig(),calculateDomain:!1,source:function(e){return e.select(function(){return!1},{saveChild:!1})},interactive:!1,render:!1}),linkedLayer:r};n.push(o)}}),n}},{key:"getTransitionConfig",value:function(){return{disabled:!0}}},{key:"defaultSizeValue",value:function(){return 100}},{key:"apply",value:function(e){var t=this,n=e.mergedEnter.model;if(!1!==e.isSourceFieldPresent){var r=this.drawingContext().sideEffectGroup,i=""+this.config().className,a=this._layers,o=this.createElement(r,"g",[1],i+"-container");this.createElement(o,"g",a).each(function(e){var r=e.instances,a=t.createElement(this,"g",r,i),o=e.linkedLayer.getTransformedDataFromIdentifiers(n),u=cd(o,2),c=u[0],l=u[1],s=new Ca.a(c,l);a.each(function(e,t){r[t].data(s).mount(this)})})}return this}}],[{key:"target",value:function(){return"visual-unit"}},{key:"defaultConfig",value:function(){return{className:"muze-anchors-group"}}},{key:"formalName",value:function(){return"anchors"}}]),t}(),fd=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),hd=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,sd),fd(t,[{key:"getTransitionConfig",value:function(){return{disabled:!0}}}],[{key:"formalName",value:function(){return"persistent-anchors"}},{key:"defaultConfig",value:function(){return{className:"muze-persistent-anchors"}}}]),t}(),dd=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),pd=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,sd),dd(t,[{key:"getTransitionConfig",value:function(){return{disabled:!0}}}],[{key:"formalName",value:function(){return"brush-anchors"}},{key:"defaultConfig",value:function(){return{className:"muze-brush-anchors"}}}]),t}();function yd(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var gd,vd=(yd(td={},ah,["selectionBox",{name:"highlighter",options:{strategy:"fade"}},"brush-anchors"]),yd(td,ah+","+lh,[{name:"tooltip",options:{strategy:"showSelectedItems",order:0,filter:function(e){return"fragmented"===e.config().mode}}}]),yd(td,oh,[{name:"highlighter",options:{strategy:"highlight"}},"crossline",{name:"tooltip",options:{order:9999}},"anchors"]),yd(td,ch,["filter"]),yd(td,lh,[{name:"highlighter",options:{strategy:"focus"}},"persistent-anchors"]),td),md="stack",bd="angle",_d="radius",xd="size",wd="color",kd="shape",Ed={X:"x",Y:"y",X0:"x0",Y0:"y0"},Sd={classPrefix:"muze",defClassName:"layer-area",className:"",interpolate:"linear",transform:{type:md},interaction:{},nearestPointThreshold:10,encoding:{color:{},x:{},y:{},y0:{},strokeOpacity:{value:1}},transition:{effect:"cubic",duration:1e3},connectNullData:!1},Od=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),Md=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return Od(e,[{key:"formalName",value:function(){throw new Error(Lc.INTERFACE_IMPL)}},{key:"dependencies",value:function(){throw new Error(Lc.INTERFACE_IMPL)}},{key:"config",value:function(){throw new Error(Lc.INTERFACE_IMPL)}},{key:"data",value:function(){throw new Error(Lc.INTERFACE_IMPL)}},{key:"serialize",value:function(){throw new Error(Lc.INTERFACE_IMPL)}},{key:"id",value:function(){throw new Error(Lc.INTERFACE_IMPL)}},{key:"normalizeTransformedData",value:function(){throw new Error(Lc.INTERFACE_IMPL)}},{key:"getTransformedData",value:function(){throw new Error(Lc.INTERFACE_IMPL)}},{key:"_calculateDomainFromData",value:function(){throw new Error(Lc.INTERFACE_IMPL)}},{key:"getDomain",value:function(){throw new Error(Lc.INTERFACE_IMPL)}},{key:"getNearestPoint",value:function(){throw new Error(Lc.INTERFACE_IMPL)}},{key:"highlightPoint",value:function(){throw new Error(Lc.INTERFACE_IMPL)}},{key:"dehighlightPoint",value:function(){return this}},{key:"linkLayerStore",value:function(){throw new Error(Lc.INTERFACE_IMPL)}},{key:"mount",value:function(){throw new Error(Lc.INTERFACE_IMPL)}},{key:"render",value:function(){throw new Error(Lc.INTERFACE_IMPL)}}]),e}(),Cd="dataUpdated";function Td(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Pd,Ad="bottom",Nd="top",jd="left",Fd="right",Id=(Td(gd={},jd,tl.axisLeft),Td(gd,Ad,tl.axisBottom),Td(gd,Fd,tl.axisRight),Td(gd,Nd,tl.axisTop),gd),Dd="linear",Rd="band",Ld="temporal",zd="color",Bd="ordinal",Ud="quantize",Hd="quantile",Vd="log",Wd="pow",qd="identity",Gd="sequential",Yd="threshold",$d=(n(19),"continous"),Xd="discrete",Kd="sequential",Qd="ordinal",Jd="linear",Zd="quantize";function ep(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var tp=r.scaleLinear,np=r.scaleThreshold,rp=r.scaleLog,ip=r.scalePow,ap=r.scaleIdentity,op=r.scaleOrdinal,up=r.scaleSequential,cp=r.scaleQuantize,lp=r.scaleQuantile,sp=r.scaleBand,fp=r.scaleTime,hp=(ep(Pd={},Dd,tp),ep(Pd,Rd,sp),ep(Pd,Ud,cp),ep(Pd,Hd,lp),ep(Pd,Yd,np),ep(Pd,Gd,up),ep(Pd,Vd,rp),ep(Pd,Wd,ip),ep(Pd,qd,ap),ep(Pd,Ld,fp),ep(Pd,zd,tp),ep(Pd,Bd,op),Pd);function dp(e){if(!e.type||!hp[e.type])throw new Error(e.type+" is not a valid scale type");if(!Array.isArray(e.range))throw new Error("range parameter must be an array");var t=null,n=e.range;if(e.type===Jd&&e.interpolator){if(t=hp[e.interpolator],e.interpolator===Wd)return t().range(n).exponent(e.exponent);if(e.interpolator===Vd)return t().range(n).base([e.base])}else t=hp[e.type];return e.type===Zd&&t().nice(),t().range(n)}var pp={id:xc(),axisName:{defClassName:"axis-name"},axisNamePadding:12,base:10,classPrefix:"muze",className:"muze-axis",exponent:1,interpolator:"linear",fixedBaseline:!0,labels:{rotation:0,smartTicks:!1},orientation:"left",maxHeight:50,maxWidth:40,numberFormat:function(e){return e},padding:.3,nice:!0,numberOfTicks:10,rotate:!1,show:!0,showAxisName:!0,showInnerTicks:null,showOuterTicks:null,style:{},type:"linear",tickFormat:null,tickValues:null,xOffset:void 0,yOffset:void 0},yp=function(e,t,n){var r=t._smartTicks,i=t.config(),a=t.dependencies().labelManager,o=i.labels,u=i.orientation,c=o.rotation,l=o.smartTicks,s=e.selectAll(".tick text");return s.selectAll("tspan").remove(),0===c||!1!==l||"top"!==u&&"bottom"!==u?0===c&&!1===l?s.attr("transform",""):(s.attr("y",0).attr("x",0).text(""),lf(s,"tspan",function(e,t){return r[t].lines},"smart-text").attr("dy","0").style("opacity","0").transition().duration(1e3).attr("dy",function(e,t){return"bottom"===u||0!==t?r[t].oriTextHeight:-r[t].oriTextHeight*(r[t].lines.length-1)-n}).style("opacity",1).attr("x",0).text(function(e){return e})):function(e,t,n,r){var i=e.axis(),a=e.scale(),o=r.orientation,u=r.labels,c=r.fixedBaseline,l=r.type,s=u.rotation,f=e.getTickSize();t.each(function(e,t){var r=void 0,u=void 0,h=i.tickFormat()?i.tickFormat:a.tickFormat;e=(h?h()(e):e).toString();var d=n.getOriSize(e),p=.5*d.width,y=.5*d.height;s<0&&(s=360+s);var g=4-Math.floor(s/90),v=(g%2==0?s:180*Math.ceil(s/180)-s)%180;r=Math.sqrt(Math.pow(y,2)+Math.pow(p,2))*Math.sin(function(e){return e*Math.PI/180}(v)),3!==g&&2!==g||v>67.5&&v<=90||(r+=2*y),u=p,u=90===s?y:270===s?-y:0,o===Nd?(u=0===t&&c&&l===Jd?u+u/2:u,cf(this).attr("transform","translate("+(-u+f)+" \n                                "+(-r-f)+") rotate("+s+")")):(u=0===t&&c&&l===Jd?u-u/2:u,cf(this).attr("transform","translate("+(u-f)+" \n                                "+(r+f)+") rotate("+s+")"))})}(t,s,a,i),s};function gp(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}var vp,mp=function(e){var t="",n=void 0,r={},i=void 0,a=e.scale(),o=[],u=e.config(),c=u.tickFormat,l=u.tickValues,s=u.numberFormat,f=a.ticks||a.quantile||a.domain,h=e.dependencies().labelManager;return h.setStyle(e._tickLabelStyle),i=(i=l||f()).map(function(u,l){var f=s(u),d=c?c(f,l,i):a.tickFormat?s(a.tickFormat()(u)):f,p=d.toString();return o.push(h.getOriSize(p)),p.length>t.length&&(t=p,r=e.smartTicks()?e.smartTicks()[l]:{},n=o[l]),d}),n=h.getOriSize(t),{largestLabel:t,largestLabelDim:n,axisTickLabels:i,allLabelLengths:o,smartTick:r}},bp=function(e){var t=0,n=0,r=e.logicalSpace(),i=e.config(),a=i.orientation,o=i.xOffset,u=i.yOffset;a===jd&&(t=void 0===o?r.width:o),a===Nd&&(n=void 0===u?r.height:u),e.config({xOffset:t,yOffset:n})},_p=function(e,t,n,r){var i=function(e,t,n){var r=Math.abs(t[1]-t[0])/(n[1]-n[0])*e,i=t[1]-t[0],a=i/r;return(i-i/(a+1)*a)/2}(e,t,n);return r===Nd||r===Ad?(t[0]+=i,t[1]-=i):(t[0]-=i,t[1]+=i),t},xp=function(e){return e.store().model.next(["domain","range","mount","config"],function(){for(var t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];e.render(),e._domainLock=!1,e._eventList.forEach(function(e){e.action instanceof Function&&e.action.apply(e,n)})},!0),e},wp=function(e,t,n,r){var i=void 0,a=void 0,o=t.tickSize,u=t.tickLabelDim,c=t.axisLabelDim,l=n.axisNamePadding,s=n.showAxisName,f=n.tickValues,h=e.domain(),d=c.height,p=u.height,y=u.width;if(i=r&&r.length?r[1]-r[0]:0,a=0,f){var g=e.getMinTickDifference(),v=[Math.min.apply(Math,gp(f).concat(gp(h))),Math.max.apply(Math,gp(f).concat(gp(h)))];i=(v[1]-v[0])/Math.abs(g)*(y+e._minTickDistance.width)}return a=i&&0!==i?p:Math.max(y,p),{width:i,height:a+=(s?d+l:0)+o}},kp=function(e,t,n){var r=void 0,i=void 0,a=t.tickSize,o=t.tickLabelDim,u=t.axisLabelDim,c=n.axisNamePadding,l=n.showAxisName,s=n.tickValues,f=e.domain(),h=u.height,d=o.height;if(r=0,i=o.width,s){var p=e.getMinTickDifference(),y=[Math.min.apply(Math,gp(s).concat(gp(f))),Math.max.apply(Math,gp(s).concat(gp(f)))];r=(y[1]-y[0])/Math.abs(p)*d}return{height:r,width:i+=(l?h:0)+a+c}},Ep={availableSpace:{},axisDimensions:{},config:{sanitization:function(e,t){return t.labels&&t.labels.rotation&&(e._rotationLock=!0),(t=zc(e._config||{},t)).axisNamePadding=Math.max(t.axisNamePadding,0),e.axis(e.createAxis(t)),e.store().commit("config",t),t}},logicalSpace:{},mount:{sanitization:function(e,t){return e.store().commit("mount",t),t}},range:{sanitization:function(e,t){return e.scale().range(t),e.logicalSpace(null),e.store().commit("range",t),t}},smartTicks:{},store:{},tickSize:{}},Sp=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),Op=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._id=xc(),this._dependencies=n,this._mount=null,this._range=[],this._domain=[],this._domainLock=!1,this._rotationLock=!1,this._axisDimensions={},this._eventList=[];var r=zc({},this.constructor.defaultConfig()),i=zc(r,t),a=cf("body"),o=i.classPrefix;this._tickLabelStyle=mf(a,o+"-ticks"),this._axisNameStyle=mf(a,o+"-axis-name"),n.labelManager.setStyle(this._tickLabelStyle),this._minTickDistance=n.labelManager.getOriSize("ww"),Dc(this,Ep),this.store(new jc({domain:this.domain(),range:this.range(),config:i,mount:this.mount()})),this.config(i),this._scale=this.createScale(this._config),this._axis=this.createAxis(this._config),xp(this)}return Sp(e,[{key:"setFixedBaseline",value:function(){return this}},{key:"scale",value:function(){return arguments.length?(this._scale=arguments.length<=0?void 0:arguments[0],this):this._scale}},{key:"axis",value:function(){return arguments.length?(this._axis=arguments.length<=0?void 0:arguments[0],this):this._axis}},{key:"domain",value:function(){return arguments.length?(this.scale().domain(arguments.length<=0?void 0:arguments[0]),this._domain=this.scale().domain(),this.smartTicks(this.setTickConfig()),this.store().commit("domain",this._domain),this.logicalSpace(null),this):this._domain}},{key:"dependencies",value:function(){return this._dependencies}},{key:"createScale",value:function(e){var t=e.base;return dp({padding:e.padding,interpolator:e.interpolator,exponent:e.exponent,base:t,range:this.range(),type:this.constructor.type()})}},{key:"getTickFormatter",value:function(e,t){return e?function(n){return function(r,i){return e(t(r),i,n)}}:function(){return function(e){return t(e)}}}},{key:"createAxis",value:function(e){var t=e.tickFormat,n=e.numberFormat,r=e.orientation,i=Id[r];if(i){var a=i(this.scale());return this.formatter=this.getTickFormatter(t,n),a}return null}},{key:"setTickConfig",value:function(){return this}},{key:"setRotationConfig",value:function(e,t){var n=this.config().orientation;if(n===Nd||n===Ad){var r=this.range(),i=Math.abs(r[0]-r[1]);this.config({labels:{rotation:0}}),i>0&&e.length*(t+this._minTickDistance.width)>i&&this.config({labels:{rotation:-90}})}return this}},{key:"adjustRange",value:function(){return this}},{key:"getScaleValue",value:function(e){if(null!==e&&void 0!==e)return this.scale()(e)}},{key:"getTickSize",value:function(){return this.axis().tickSize()}},{key:"getAxisDimensions",value:function(){return this.axisDimensions(function(e){var t={},n=e.config(),r=n.name,i=n.labels,a=n.tickValues,o=(i.smartTicks?0:i.rotation)*Math.PI/180,u=e.dependencies().labelManager,c=mp(e),l=c.largestLabelDim,s=c.axisTickLabels,f=c.smartTick,h=l.height,d=l.width;return 0===e.domain().length?null:(!1===e._rotationLock&&(e.setRotationConfig(a||s,l.width),e._rotationLock=!1),t=i.smartTicks?f:{width:Math.abs(h*Math.sin(o))+Math.abs(d*Math.cos(o)),height:Math.abs(d*Math.sin(o))+Math.abs(h*Math.cos(o))},u.setStyle(e._axisNameStyle),{tickSize:e.getTickSize(),tickLabelDim:t,axisLabelDim:u.getOriSize(r),largestLabelDim:l,axisTickLabels:s})}(this)),this.axisDimensions()}},{key:"getLogicalSpace",value:function(){return this.logicalSpace()||(this.logicalSpace(function(e){e.range();var t=e.config(),n=e.getAxisDimensions(),r=t.orientation,i=t.show,a=t.showAxisName,o=n.axisLabelDim;if(!1===i)return{width:0,height:0};var u=o.width;if(r===Nd||r===Ad){var c=wp(e,n,t),l=c.width,s=c.height;return{width:Math.max(l,u),height:s}}var f=kp(e,n,t),h=f.width,d=f.height;return{width:h,height:Math.max(d,a?u:0)}}(this)),bp(this),this.logicalSpace()),this.logicalSpace()}},{key:"invert",value:function(){for(var e=this,t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=n.map(function(t){return e.scale().invert(t)})||[];return 1===n.length?i[0]:i}},{key:"getNearestRange",value:function(e,t){var n=void 0,r=this.config().type,i=this.scale(),a=i.range(),o=a[0]>a[1];return"band"===r?(n=i.invertExtent(e,t),[i(o?n[n.length-1]:n[0]),i(o?n[0]:n[n.length-1])+i.bandwidth()]):[e,t]}},{key:"updateDomainBounds",value:function(e){var t=this.domain();return this.config().domain?t=this.config().domain:(0===t.length&&(t=e),e.length&&(t=[Math.min(t[0],e[0]),Math.max(t[1],e[1])])),this.domain(t)}},{key:"updateDomainCache",value:function(e){!1===this._domainLock&&(this.domain([]),this._domainLock=!0);var t=[];return e&&e.forEach(function(e){void 0!==e&&null!==e&&t.push(e)}),this.updateDomainBounds(t)}},{key:"getMinTickDifference",value:function(){return this.domain()}},{key:"getFormattedTickValues",value:function(e){return e}},{key:"setTickValues",value:function(){var e=this.config().tickValues;return e?(e instanceof Array&&this.axis().tickValues(e),this):this}},{key:"getUnitWidth",value:function(){return 0}},{key:"serialize",value:function(){return{name:this.name,type:this.type,range:this.range(),config:this.config()}}},{key:"registerEvent",value:function(e,t){this._eventList.push({name:e,action:t})}},{key:"on",value:function(e,t){e=e||"update",this.registerEvent(e,t)}},{key:"render",value:function(){return this.mount()&&function(e){var t=e.config(),n=e.dependencies().labelManager,r=e.mount(),i=e.range(),a=e.axis(),o=e.scale(),u=e._axisNameStyle,c=e._tickLabelStyle,l=e.formatter,s=e.tickValues,f=t.orientation,h=t.name,d=t.labels,p=t.xOffset,y=t.yOffset,g=t.axisNamePadding,v=t.className,m=t.showAxisName,b=t.show,_=t.id,x=t.interpolator,w=t.classPrefix;if(b){var k=e.getTickSize(),E=lf(cf(r),"g",[e],""+v,{},function(e){return e.config().id});n.setStyle(c),"linear"===x&&e.setTickValues();var S=o.ticks||o.quantile||o.domain;l&&a.tickFormat(l(s||a.tickValues()||S()));var O=Math.abs(i[0]-i[1]),M=e.axisDimensions().tickLabelDim;E.attr("transform","translate("+p+","+y+")"),function(e){e.config().fixedBaseline&&e.setFixedBaseline()}(e),!1===d.smartTicks?E.transition().duration(1e3).call(a):E.call(a),E.selectAll(".tick").classed(w+"-ticks",!0),E.selectAll(".tick line").classed(w+"-tick-lines",!0),E.selectAll(".tick text").classed(w+"-ticks",!0).classed(w+"-ticks-"+_,!0),yp(E,e,k);var C=lf(E,"text",[h],w+"-axis-name").attr("text-anchor","middle").classed(w+"-axis-name-"+_,!0).text(function(e){return e});C.classed("hidden",!m);var T=O/2;n.setStyle(u);var P=n.getOriSize(h);!function(e,t,n){var r=n.axisNameHeight,i=n.yOffset,a=n.labelOffset,o=n.availableSpace;switch(t){case jd:e.attr("transform","translate("+-(o.width-r)+","+(i+a)+")rotate(-90)");break;case Fd:e.attr("transform","translate("+(o.width-r)+","+(i+a)+")rotate(90)");break;case Nd:e.attr("transform","translate("+o.width/2+","+(-o.height+r)+")");break;case Ad:e.attr("transform","translate("+o.width/2+","+(o.height-r/2)+")")}}(C,f,{labelProps:M,tickSize:k,axisNamePadding:g,axisNameHeight:P.height,axisNameWidth:P.width,yOffset:y,xOffset:p,labelOffset:T,availableSpace:e.availableSpace()})}}(this),this}},{key:"remove",value:function(){return this.store().unsubscribeAll(),cf(this.mount()).remove(),this}},{key:"unsubscribe",value:function(){return this.store().unsubscribeAll(),this}},{key:"isReverse",value:function(){var e=this.range();return e[0]>e[1]}},{key:"getPixelToValueRatio",value:function(){var e=this.scale(),t=e.range(),n=e.domain();return Math.abs(t[1]-t[0])/(n[1]-n[0])}},{key:"id",get:function(){return this._id}}],[{key:"defaultConfig",value:function(){return pp}}]),e}(),Mp=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),Cp=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return Mp(e,[{key:"createScale",value:function(e){var t=e.range,n=hp.linear;return this._scale=n().range(t),this._scale}},{key:"getScaleValue",value:function(e){return this._scale(e)+.5}},{key:"sanitizeDomain",value:function(e){return e}}]),e}(),Tp=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),Pp=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return Tp(e,[{key:"createScale",value:function(e){var t=e.range,n=e.base,r=hp.log;return this._scale=r().range(t).base(n),this._scale}},{key:"getScaleValue",value:function(e){return e<=0?1:this._scale(e)+.5}},{key:"sanitizeDomain",value:function(e){return e[0]<=0?[Math.max(1,e[0]),Math.max(1,e[1])]:e}}]),e}(),Ap=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),Np=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return Ap(e,[{key:"createScale",value:function(e){var t=e.range,n=e.exponent,r=hp.pow;return this._scale=r().range(t).exponent(n),this._scale}},{key:"getScaleValue",value:function(e){return this._scale(e)+.5}},{key:"sanitizeDomain",value:function(e){return e}}]),e}(),jp=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function Fp(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Ip=(Fp(vp={},Vd,Pp),Fp(vp,Wd,Np),Fp(vp,Dd,Cp),vp),Dp=function(e){function t(e,n){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),e.tickFormat=e.tickFormat||function(e){return e},function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,Op),jp(t,[{key:"createScale",value:function(e){var t=e.base,n=e.padding,r=e.interpolator,i=e.exponent,a=this.range(),o=Ip[r];this._interpolator=new o;var u=this._interpolator.createScale({padding:n,exponent:i,base:t,range:a});return u.nice()}},{key:"updateDomainBounds",value:function(e){var t=this.domain();return this.config().domain?t=this.config().domain:(0===t.length&&(t=e),e.length&&(t=[Math.min(t[0],e[0]),Math.max(t[1],e[1])])),this.domain(t)}},{key:"getScaleValue",value:function(e){if(null!==e&&void 0!==e)return this._interpolator.getScaleValue(e)}},{key:"getTickSize",value:function(){var e=this.config(),t=e.showInnerTicks,n=e.showOuterTicks,r=this.axis();return r.tickSizeInner(!1===t?0:6),r.tickSizeOuter(!1===n?0:6),r.tickSize()}},{key:"domain",value:function(e){if(e&&e.length){var t=this.config().nice;return e.length&&e[0]===e[1]&&(e=[0,2*+e[0]]),this.scale().domain(e),t&&this.scale().nice(),this._domain=this.scale().domain(),this.store().commit("domain",this._domain),this.logicalSpace(null),this}return this._domain}},{key:"setAvailableSpace",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments[1],n=arguments[2],r=arguments[3],i=n.left,a=n.right,o=n.top,u=n.bottom,c=this.config(),l=c.orientation,s=c.fixedBaseline,f=this.getAxisDimensions().tickLabelDim;if(this.availableSpace({width:e,height:t}),l===Nd||l===Ad){var h=f.width;this.range([(s?0:h/2)+i,e-a-h/2]);var d=this.getLogicalSpace().height;r&&this.config({yOffset:Math.max(d,t)})}else{var p=f.height;this.range([t-u-(s?1:p/2),p/2+o]);var y=this.getLogicalSpace().width;r&&this.config({xOffset:Math.max(y,e)})}return this}},{key:"setTickValues",value:function(){var e=this.config().tickValues,t=this.axis();return e?(e instanceof Array&&this.axis().tickValues(e),this):(t.tickValues(this.getTickValues()),this)}},{key:"getTickValues",value:function(){var e=this.config(),t=e.orientation,n=e.tickValues,r=this.range(),i=this.axis(),a=Math.abs(r[0]-r[1]),o=mp(this).largestLabelDim;return n?i.scale().ticks(n):function(e,t,n,r){var i=n.scale().ticks(),a=r.config().numberOfTicks,o=i.length,u=o;return o*(1.5*t)>e&&(u=Math.floor(e/(1.5*t))),u=Math.min(a,Math.max(1,u)),n.scale().ticks(u)}(a,o[t===Ad||t===Nd?"width":"height"],i,this)}},{key:"getMinTickDifference",value:function(){return rl(this.config().tickValues)}},{key:"setFixedBaseline",value:function(e){var t=this.config(),n=t.orientation,r=t.labels.rotation,i=this.axis(),a=this._axisDimensions.largestLabelDim,o=a.width,u=a.height;return i.tickTransform(function(e,t){return 0!==t||n!==jd&&n!==Fd?0!==t||n!==Nd&&n!==Ad||0!==r?"":"translate("+o/2+"px,  0px) rotate("+r+"deg)":"translate(0, -"+u/3+"px)"}),e}}],[{key:"type",value:function(){return Dd}}]),t}(),Rp=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),Lp=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,Op),Rp(t,[{key:"createScale",value:function(e){var n=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var a=Object.getPrototypeOf(t);return null===a?void 0:e(a,n,r)}if("value"in i)return i.value;var o=i.get;return void 0!==o?o.call(r):void 0}(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"createScale",this).call(this,e),r=this.config().padding;return"number"==typeof r&&n.padding(r),n}},{key:"setAvailableSpace",value:function(e,t,n,r){var i=n.left,a=n.right,o=n.top,u=n.bottom,c=this.config(),l=c.orientation,s=c.showAxisName,f=c.axisNamePadding,h=this.getAxisDimensions().axisLabelDim.height;if(this.availableSpace({width:e,height:t}),l===Nd||l===Ad){this.range([0,e-i-a]);var d=this.getLogicalSpace().height-(!1===s?h+f:0);r&&this.config({yOffset:Math.max(d,t)})}else{this.range([t-u,o]);var p=this.getLogicalSpace().width-(!1===s?h:0);r&&this.config({xOffset:Math.max(p,e)})}return this}},{key:"getUnitWidth",value:function(){return this.scale().bandwidth()}},{key:"setTickConfig",value:function(){var e="",t=void 0,n=this.config(),r=n.maxWidth,i=n.maxHeight,a=n.tickFormat,o=this._dependencies.labelManager,u=this.axis().scale().domain();e=u;var c=a||function(e){return e};return u&&u.length&&(e=u.map(function(e,n){return o.useEllipsesOnOverflow(!0),t=o.getSmartText(c(e,n,u),r,i),o.constructor.textToLines(t)})),e}},{key:"getLogicalSpace",value:function(){return this.logicalSpace()||(this.logicalSpace(function(e){var t=e.range(),n=e.config(),r=n.orientation,i=n.show,a=e.getAxisDimensions(),o=a.largestLabelDim,u=a.axisTickLabels,c=o.height,l=o.width;if(r===Nd||r===Ad){var s=wp(e,a,n,t),f=s.width,h=s.height;return f&&0!==f||(f=u.length*Math.min(l+e._minTickDistance.width,c+e._minTickDistance.width)),!1===i&&(h=0),{width:f,height:h}}var d=kp(e,a,n),p=d.width,y=d.height;return y&&0!==y||(y=u.length*(c+c/2)+c),!1===i&&(p=0),{width:p,height:y}}(this)),bp(this),this.logicalSpace()),this.logicalSpace()}},{key:"setRotationConfig",value:function(e,t){var n=this,r=this.config().orientation,i=this.range(),a=Math.abs(i[0]-i[1]);if(this.config({labels:{rotation:0,smartTicks:!1}}),r===Nd||r===Ad){var o=this.smartTicks().reduce(function(e,t){return e+t.width+n._minTickDistance.width},0);a>0&&e.length*(t+this._minTickDistance.width)>a&&(a&&o<a?this.config({labels:{smartTicks:!0}}):this.config({labels:{rotation:-90}}))}return this}},{key:"getTickValues",value:function(){return this.axis().scale().domain()}},{key:"getTickSize",value:function(){var e=this.config(),t=e.showInnerTicks,n=e.showOuterTicks,r=this.axis();return r.tickSizeInner(t?6:0),r.tickSizeOuter(n?6:0),r.tickSize()}},{key:"updateDomainBounds",value:function(e){var t=this.domain();return this.config().domain?t=this.config().domain:(0===t.length&&(t=e),t=t.concat(e)),this.domain(t),this}},{key:"invert",value:function(){for(var e=this,t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=n.map(function(t){return e.scale().invert(t)})||[];return 1===n.length?i[0]&&i[0].toString():i.map(function(e){return e.toString()})}}],[{key:"type",value:function(){return Rd}}]),t}(),zp=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),Bp=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var a=Object.getPrototypeOf(t);return null===a?void 0:e(a,n,r)}if("value"in i)return i.value;var o=i.get;return void 0!==o?o.call(r):void 0},Up=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(r)));return a._minDiff=1/0,a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,Op),zp(t,[{key:"createScale",value:function(e){var n=Bp(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"createScale",this).call(this,e);return n.nice()}},{key:"setTickConfig",value:function(){var e=void 0,t=void 0,n=this.config(),r=n.maxWidth,i=n.maxHeight,a=n.tickFormat,o=this._dependencies.labelManager,u=this.getTickValues(),c=this.scale();e=u;var l=a||c.tickFormat();return u&&u.length&&(e=u.map(function(e,n){return t=o.getSmartText(l(e,n,u),r,i),o.constructor.textToLines(t)})),e}},{key:"createAxis",value:function(e){var t=e.tickFormat,n=e.orientation,r=Id[n];if(r){var i=r(this.scale());return this.formatter=this.getTickFormatter(t),i}return null}},{key:"getTickFormatter",value:function(e){return e?function(t){return function(n,r){return e(n,r,t)}}:null}},{key:"getTickSize",value:function(){var e=this.config(),n=e.showInnerTicks,r=e.showOuterTicks,i=this.axis();return i.tickSizeInner(!1===n?0:6),i.tickSizeOuter(!1===r?0:6),Bp(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"getTickSize",this).call(this)}},{key:"getTickValues",value:function(){return this.scale().ticks()}},{key:"minDiff",value:function(e){return this._minDiff=Math.min(this._minDiff,e),this}},{key:"setRotationConfig",value:function(e,t){var n=this.config().orientation,r=this.range(),i=Math.abs(r[0]-r[1]);if(this.config({labels:{rotation:0,smartTicks:!1}}),n===Nd||n===Ad){var a=this.smartTicks().reduce(function(e,t){return e+t.width},0);i>0&&e.length*t>i&&(i&&1.25*a<i&&this.config({labels:{smartTicks:!0}}),this.config({labels:{rotation:-90}}))}return this}},{key:"domain",value:function(e){if(e){var t=this.config().nice;return e.length&&e[0]===e[1]&&(e=[0,2*+e[0]]),this.scale().domain(e),t&&this.scale().nice(),this._domain=this.scale().domain(),this.smartTicks(this.setTickConfig()),this.store().commit("domain",this._domain),this.logicalSpace(null),this}return this._domain}},{key:"getMinTickDifference",value:function(){return rl(this.config().tickValues)}},{key:"setAvailableSpace",value:function(e,t,n,r){var i=n.left,a=n.right,o=n.top,u=n.bottom,c=this.config(),l=c.orientation,s=c.showAxisName,f=c.axisNamePadding,h=this.domain(),d=this.getAxisDimensions(),p=d.axisLabelDim,y=d.tickLabelDim,g=p.height,v=y.height,m=y.width;if(this.availableSpace({width:e,height:t}),l===Nd||l===Ad){var b=m;this.range(_p(this._minDiff,[b/2,e-i-a-b/2],h,l));var _=this.getLogicalSpace().height-(!1===s?g+f:0);r&&this.config({yOffset:Math.max(_,t)})}else{var x=v;this.range(_p(this._minDiff,[t-o-u-x/2,x/2],h,l));var w=this.getLogicalSpace().width-(!1===s?g:0);this.isOffset&&this.config({xOffset:Math.max(w,e)})}return this}}],[{key:"type",value:function(){return Ld}}]),t}(),Hp={Pink:{hex:"ffc0cb",rgb:"255,192,203"},LightPink:{hex:"ffb6c1",rgb:"255,182,193"},HotPink:{hex:"ff69b4",rgb:"255,105,180"},DeepPink:{hex:"ff1493",rgb:"255,20,147"},PaleVioletRed:{hex:"db7093",rgb:"219,112,147"},MediumVioletRed:{hex:"c71585",rgb:"199,21,133"},LightSalmon:{hex:"ffa07a",rgb:"255,160,122"},Salmon:{hex:"fa8072",rgb:"250,128,114"},DarkSalmon:{hex:"e9967a",rgb:"233,150,122"},LightCoral:{hex:"f08080",rgb:"240,128,128"},IndianRed:{hex:"cd5c5c",rgb:"205,92,92"},Crimson:{hex:"dc143c",rgb:"220,20,60"},FireBrick:{hex:"b22222",rgb:"178,34,34"},DarkRed:{hex:"8b0000",rgb:"139,0,0"},Red:{hex:"ff0000",rgb:"255,0,0"},OrangeRed:{hex:"ff4500",rgb:"255,69,0"},Tomato:{hex:"ff6347",rgb:"255,99,71"},Coral:{hex:"ff7f50",rgb:"255,127,80"},DarkOrange:{hex:"ff8c00",rgb:"255,140,0"},Orange:{hex:"ffa500",rgb:"255,165,0"},Gold:{hex:"ffd700",rgb:"255,215,0"},Yellow:{hex:"ffff00",rgb:"255,255,0"},LightYellow:{hex:"ffffe0",rgb:"255,255,224"},LemonChiffon:{hex:"fffacd",rgb:"255,250,205"},LightGoldenrodYellow:{hex:"fafad2",rgb:"250,250,210"},PapayaWhip:{hex:"ffefd5",rgb:"255,239,213"},Moccasin:{hex:"ffe4b5",rgb:"255,228,181"},PeachPuff:{hex:"ffdab9",rgb:"255,218,185"},PaleGoldenrod:{hex:"eee8aa",rgb:"238,232,170"},Khaki:{hex:"f0e68c",rgb:"240,230,140"},DarkKhaki:{hex:"bdb76b",rgb:"189,183,107"},Cornsilk:{hex:"fff8dc",rgb:"255,248,220"},BlanchedAlmond:{hex:"ffebcd",rgb:"255,235,205"},Bisque:{hex:"ffe4c4",rgb:"255,228,196"},NavajoWhite:{hex:"ffdead",rgb:"255,222,173"},Wheat:{hex:"f5deb3",rgb:"245,222,179"},BurlyWood:{hex:"deb887",rgb:"222,184,135"},Tan:{hex:"d2b48c",rgb:"210,180,140"},RosyBrown:{hex:"bc8f8f",rgb:"188,143,143"},SandyBrown:{hex:"f4a460",rgb:"244,164,96"},Goldenrod:{hex:"daa520",rgb:"218,165,32"},DarkGoldenrod:{hex:"b8860b",rgb:"184,134,11"},Peru:{hex:"cd853f",rgb:"205,133,63"},Chocolate:{hex:"d2691e",rgb:"210,105,30"},SaddleBrown:{hex:"8b4513",rgb:"139,69,19"},Sienna:{hex:"a0522d",rgb:"160,82,45"},Brown:{hex:"a52a2a",rgb:"165,42,42"},Maroon:{hex:"800000",rgb:"128,0,0"},DarkOliveGreen:{hex:"556b2f",rgb:"85,107,47"},Olive:{hex:"808000",rgb:"128,128,0"},OliveDrab:{hex:"6b8e23",rgb:"107,142,35"},YellowGreen:{hex:"9acd32",rgb:"154,205,50"},LimeGreen:{hex:"32cd32",rgb:"50,205,50"},Lime:{hex:"00ff00",rgb:"0,255,0"},LawnGreen:{hex:"7cfc00",rgb:"124,252,0"},Chartreuse:{hex:"7fff00",rgb:"127,255,0"},GreenYellow:{hex:"adff2f",rgb:"173,255,47"},SpringGreen:{hex:"00ff7f",rgb:"0,255,127"},MediumSpringGreen:{hex:"00fa9a",rgb:"0,250,154"},LightGreen:{hex:"90ee90",rgb:"144,238,144"},PaleGreen:{hex:"98fb98",rgb:"152,251,152"},DarkSeaGreen:{hex:"8fbc8f",rgb:"143,188,143"},MediumSeaGreen:{hex:"3cb371",rgb:"60,179,113"},SeaGreen:{hex:"2e8b57",rgb:"46,139,87"},ForestGreen:{hex:"228b22",rgb:"34,139,34"},Green:{hex:"008000",rgb:"0,128,0"},DarkGreen:{hex:"006400",rgb:"0,100,0"},MediumAquamarine:{hex:"66cdaa",rgb:"102,205,170"},Aqua:{hex:"00ffff",rgb:"0,255,255"},Cyan:{hex:"00ffff",rgb:"0,255,255"},LightCyan:{hex:"e0ffff",rgb:"224,255,255"},PaleTurquoise:{hex:"afeeee",rgb:"175,238,238"},Aquamarine:{hex:"7fffd4",rgb:"127,255,212"},Turquoise:{hex:"40e0d0",rgb:"64,224,208"},MediumTurquoise:{hex:"48d1cc",rgb:"72,209,204"},DarkTurquoise:{hex:"00ced1",rgb:"0,206,209"},LightSeaGreen:{hex:"20b2aa",rgb:"32,178,170"},CadetBlue:{hex:"5f9ea0",rgb:"95,158,160"},DarkCyan:{hex:"008b8b",rgb:"0,139,139"},Teal:{hex:"008080",rgb:"0,128,128"},LightSteelBlue:{hex:"b0c4de",rgb:"176,196,222"},PowderBlue:{hex:"b0e0e6",rgb:"176,224,230"},LightBlue:{hex:"add8e6",rgb:"173,216,230"},SkyBlue:{hex:"87ceeb",rgb:"135,206,235"},LightSkyBlue:{hex:"87cefa",rgb:"135,206,250"},DeepSkyBlue:{hex:"00bfff",rgb:"0,191,255"},DodgerBlue:{hex:"1e90ff",rgb:"30,144,255"},CornflowerBlue:{hex:"6495ed",rgb:"100,149,237"},SteelBlue:{hex:"4682b4",rgb:"70,130,180"},RoyalBlue:{hex:"4169e1",rgb:"65,105,225"},Blue:{hex:"0000ff",rgb:"0,0,255"},MediumBlue:{hex:"0000cd",rgb:"0,0,205"},DarkBlue:{hex:"00008b",rgb:"0,0,139"},Navy:{hex:"000080",rgb:"0,0,128"},MidnightBlue:{hex:"191970",rgb:"25,25,112"},Lavender:{hex:"e6e6fa",rgb:"230,230,250"},Thistle:{hex:"d8bfd8",rgb:"216,191,216"},Plum:{hex:"dda0dd",rgb:"221,160,221"},Violet:{hex:"ee82ee",rgb:"238,130,238"},Orchid:{hex:"da70d6",rgb:"218,112,214"},Fuchsia:{hex:"ff00ff",rgb:"255,0,255"},Magenta:{hex:"ff00ff",rgb:"255,0,255"},MediumOrchid:{hex:"ba55d3",rgb:"186,85,211"},MediumPurple:{hex:"9370db",rgb:"147,112,219"},BlueViolet:{hex:"8a2be2",rgb:"138,43,226"},DarkViolet:{hex:"9400d3",rgb:"148,0,211"},DarkOrchid:{hex:"9932cc",rgb:"153,50,204"},DarkMagenta:{hex:"8b008b",rgb:"139,0,139"},Purple:{hex:"800080",rgb:"128,0,128"},Indigo:{hex:"4b0082",rgb:"75,0,130"},DarkSlateBlue:{hex:"483d8b",rgb:"72,61,139"},SlateBlue:{hex:"6a5acd",rgb:"106,90,205"},MediumSlateBlue:{hex:"7b68ee",rgb:"123,104,238"},White:{hex:"ffffff",rgb:"255,255,255"},Snow:{hex:"fffafa",rgb:"255,250,250"},Honeydew:{hex:"f0fff0",rgb:"240,255,240"},MintCream:{hex:"f5fffa",rgb:"245,255,250"},Azure:{hex:"f0ffff",rgb:"240,255,255"},AliceBlue:{hex:"f0f8ff",rgb:"240,248,255"},GhostWhite:{hex:"f8f8ff",rgb:"248,248,255"},WhiteSmoke:{hex:"f5f5f5",rgb:"245,245,245"},Seashell:{hex:"fff5ee",rgb:"255,245,238"},Beige:{hex:"f5f5dc",rgb:"245,245,220"},OldLace:{hex:"fdf5e6",rgb:"253,245,230"},FloralWhite:{hex:"fffaf0",rgb:"255,250,240"},Ivory:{hex:"fffff0",rgb:"255,255,240"},AntiqueWhite:{hex:"faebd7",rgb:"250,235,215"},Linen:{hex:"faf0e6",rgb:"250,240,230"},LavenderBlush:{hex:"fff0f5",rgb:"255,240,245"},MistyRose:{hex:"ffe4e1",rgb:"255,228,225"},Gainsboro:{hex:"dcdcdc",rgb:"220,220,220"},LightGray:{hex:"d3d3d3",rgb:"211,211,211"},Silver:{hex:"c0c0c0",rgb:"192,192,192"},DarkGrey:{hex:"a9a9a9",rgb:"169,169,169"},Grey:{hex:"808080",rgb:"128,128,128"},DimGrey:{hex:"696969",rgb:"105,105,105"},LightSlateGrey:{hex:"778899",rgb:"119,136,153"},SlateGrey:{hex:"708090",rgb:"112,128,144"},DarkSlateGrey:{hex:"2f4f4f",rgb:"47,79,79"},Black:{hex:"000000",rgb:"0,0,0"}},Vp=["#086bb6","#f37d45","#f5ce02","#67bda0","#c54e4e","#ae70af"],Wp="#eaeaea",qp={range:Vp,value:Vp[0],step:!1,stops:5,type:Jd};function Gp(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}var Yp=function(e){return"hsla("+360*e[0]+","+100*e[1]+"%,"+100*e[2]+"%,"+(e[3]||1)+")"},$p=function(e){return(e.split(" ")||[]).reduce(function(e,t){return""+e+t.charAt(0).toUpperCase()+t.slice(1)},"")},Xp=function(e,t){var n="";if("string"==typeof e)if(e=(e=e.replace(/ /g,"")).toLowerCase(),"hsl"===Wc(e)||"hsla"===Wc(e))n=[(n=e.match(/(\d+(\.\d+)?)/g))[0]/360,n[1]/100,n[2]/100,n[3]||1];else if("hex"===Wc(e))n=function(e){var t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e),n=parseInt(t[1],16),r=parseInt(t[2],16),i=parseInt(t[3],16),a=t[4]?parseInt(t[4],16):1;return Vc(n,r,i,a)}(e);else if("rgb"===Wc(e)){var r=e.substring(e.indexOf("(")+1,e.lastIndexOf(")")).split(/,\s*/);n=Vc.apply(void 0,Gp(r))}else Hp[$p(e)]&&(n=Vc.apply(void 0,Gp(Hp[$p(e)].rgb.split(","))));else n=e instanceof Array?e:Vc(t);return n},Kp={config:{sanitization:function(e,t){var n=zc({},e.constructor.defaultConfig());t.type===Jd&&(t.range=t.range||[n.range[0]],t.range=t.range.length>1?t.range:[Wp].concat(Gp(t.range)));var r=zc(n,e.config()),i=zc(r,t);return i.range instanceof Array&&(i.range=i.range.map(function(e,t){return Xp(e,Vp[t])}),i.stops=t.stops||i.range.length),i.value=Xp(i.value,i.value),i}},domain:{},scale:{},uniqueValues:{}};function Qp(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Jp(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}var Zp=function(e,t){var n=[];if(t instanceof Array)n=t.slice().sort(),n=[].concat(Jp(new Set([e[0]].concat(Jp(t),[e[1]])))).sort();else for(var r=Uc().apply(void 0,Jp(e)),i=0;i<=t;i++)n[i]=r(i/t);return n[0]<e[0]&&n.shift(),{domain:e,newStops:n}},ey=function(e){var t=e;return{domain:e.map(function(t,n){return n/(e.length-1)}),uniqueVals:t,scaleDomain:[0,1]}},ty=function(e,t,n){return{domain:e,uniqueVals:e,scaleDomain:[0,1],range:n}},ny=function(e,t,n){return{uniqueVals:e,domain:e,nice:!0,range:n}},ry=function(e,t,n){var r=Zp(e,t),i=r.domain,a=r.newStops;return{uniqueVals:i,domain:a,nice:!0,range:function(e,t){var n=[];if(e>Math.min(t.length,18))for(var r=Hc()(bt,t.map(function(e){return Yp(e)})),i=0;i<e;i++)n[i]=r(i/(e-1));else n=t.slice(0,e);return{newRange:n}}(a.length-1,n).newRange}},iy=function(e,t,n){var r=Zp(e,n.length-1);return{uniqueVals:r.domain,domain:r.newStops,nice:!0,range:n.map(function(e){return Yp(e)})}},ay=function(e,t,n,r){return t(n[r.indexOf(e)])},oy=function(e,t,n){return t((e-n[0])/(n[n.length-1]-n[0]))},uy=function(e,t){return t(e)},cy=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function ly(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}var sy,fy=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Dc(this,Kp),this.config(t),this._domainType="linear"===this._config.type?$d:Xd,this._rangeType="linear"!==this._config.type||this._config.step?Xd:$d,this._schemeType=function(e){return e&&"string"==typeof e&&"i"===e[0]?Kd:Qd}(this._config.range),this._colorStrategy=this.setColorStrategy(this._domainType,this._rangeType,this._schemeType),this._scale=this.createScale(this._colorStrategy),this._id=xc(),this.updateDomain(t.domain)}return cy(e,[{key:"createScale",value:function(e){var t=this.config().range;return t&&"string"==typeof t?function(e){return"i"===e[0]?up(i[e]):op(i[e])}(t):dp({type:e.scale,range:t})}},{key:"setColorStrategy",value:function(e,t,n){return this.config().stops,function(e,t,n,r){return function(){var e;return Qp(e={},$d+"-"+$d+"-"+Gd,{scale:Gd,domainRange:function(){return ty},value:function(){return oy}}),Qp(e,$d+"-"+Xd+"-"+Gd,{scale:Gd,domainRange:function(){return ty},value:function(){return oy}}),Qp(e,Xd+"-"+Xd+"-"+Gd,{scale:Gd,domainRange:function(){return ey},value:function(){return ay}}),Qp(e,Xd+"-"+Xd+"-"+Bd,{scale:Bd,domainRange:function(){return ny},value:function(){return uy}}),Qp(e,$d+"-"+$d+"-"+Bd,{scale:Dd,domainRange:function(){return iy},value:function(){return uy}}),Qp(e,$d+"-"+Xd+"-"+Bd,{scale:Hd,domainRange:function(){return ry},value:function(){return uy}}),e}()[e+"-"+t+"-"+(n||"")]}(e,t,n)}},{key:"getHslString",value:function(e){return Yp(e)}},{key:"getColor",value:function(e){return this.getHslString(this.getRawColor(e))}},{key:"getRawColor",value:function(e){if(this.domain()&&void 0!==e){var t=this.scale(),n=t.range?t.range():null,r=this._colorStrategy.value(n)(e,t,this.domain(),this.uniqueValues());if("string"==typeof r){var i=r.substring(r.indexOf("(")+1,r.lastIndexOf(")")).split(/,\s*/);return Vc.apply(void 0,ly(i))}return[].concat(ly(r))}return[].concat(ly(this.config().value))}},{key:"updateDomain",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(e.length){var t=this.scale(),n=t.range?t.range():null,r=this._colorStrategy.domainRange()(e,this.config().stops,n);this.domain(r.domain),r.range&&this.scale().range(r.range),this.uniqueValues(r.uniqueVals),this.scale().domain(r.scaleDomain||this.domain())}return this}},{key:"serialize",value:function(){return{type:this.constructor.type(),scale:this.scale(),domain:this.domain(),config:this.config()}}},{key:"transformColor",value:function(e,t){var n=360*e[0],r=100*e[1],i=100*e[2],a=e[3]||1,o=n+t[0],u=r+t[1],c=i+t[2],l=a+t[3]||0;return{color:"hsla("+o+","+u+"%,"+c+"%,"+l+")",hsla:[o/360,u/100,c/100,l]}}},{key:"id",value:function(){return this._id}}],[{key:"defaultConfig",value:function(){return qp}},{key:"type",value:function(){return"color"}}]),e}(),hy={value:36,range:[36,1e3]};function dy(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function py(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}var yy,gy=(dy(sy={},Xd+"-"+$d,{scale:Dd,domain:function(e){var t=e;return{domain:e.map(function(t,n){return n/(e.length-1)}),uniqueVals:t,scaleDomain:[0,1]}},range:function(e,t,n,r){var i=n[r.indexOf(e)];return Hc()(Uc(),[].concat(py(t.range())))(i)}}),dy(sy,$d+"-"+$d,{scale:Dd,domain:function(e){return{uniqueVals:e,domain:e}},range:function(e,t){return t(e)}}),dy(sy,$d+"-"+Xd,{scale:Yd,domain:function(e,t){var n=[];if(t instanceof Array)n=t.slice().sort();else for(var r=Uc().apply(void 0,py(e)),i=0;i<t;i++)n[i]=r(i/(t-1));return n[0]<e[0]&&n.shift(),{uniqueVals:n,domain:n,nice:!0}},range:function(e,t,n){var r=(e-n[0])/(n[n.length-1]-n[0]);return Uc().apply(void 0,py(t.range()))(r)}}),sy),vy={config:{},domain:{sanitization:function(e,t){return e.scale().domain(t),t}},range:{},scale:{},uniqueValues:{}},my=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),by=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Dc(this,vy),this._id=xc(),this._config=Object.assign({},this.constructor.defaultConfig(),t),this._domainType="linear"===this._config.type?$d:Xd,this._rangeType=$d,this._sizeStrategy=this.setStrategy(this._domainType,this._rangeType),this._scale=this.createScale(this._sizeStrategy),this._range=this._config.range,this.updateDomain(t.domain)}return my(e,[{key:"setStrategy",value:function(e,t){return function(e,t){return gy[e+"-"+t]}(e,t)}},{key:"createScale",value:function(e){var t=this.config().range;return dp({type:e.scale,range:t})}},{key:"getSize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=this.config().value,n=this.scale(),r=this.domain()||[1,1];return n&&r[0]!==r[1]?this._sizeStrategy.range(e,n,this.domain(),this.uniqueValues()):t}},{key:"updateDomain",value:function(e){if(e){var t=(0,this._sizeStrategy.domain)(e,this.config().intervals);this.domain(t.domain),this.uniqueValues(t.uniqueVals),this.scale().domain(t.scaleDomain||this.domain())}return this}},{key:"serialize",value:function(){return{type:this.constructor.type(),scale:this.scale(),domain:this.domain(),range:this.range(),config:this.config()}}},{key:"id",value:function(){return this._id}}],[{key:"defaultConfig",value:function(){return hy}},{key:"type",value:function(){return"size"}}]),e}(),_y={generator:null,value:"circle",range:["circle","diamond","star","cross","square","wye","triangle"]},xy={config:{},domain:{},scale:{},uniqueValues:{},generator:{}},wy=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),ky=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Dc(this,xy),this._id=xc(),this._config=Object.assign({},this.constructor.defaultConfig()),this._config=zc(this._config,t),this._scale=dp({type:"ordinal",range:this._config.range}),this.updateDomain(t.domain)}return wy(e,[{key:"getShape",value:function(e){if(!this.scale()||!this.domain()||!e)return this.config().value;if(this._generatedShapes)return this._generatedShapes[e];var t=this.scale()(e);return"string"===t?Qc(t):t}},{key:"updateDomain",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.length&&(this.uniqueValues(e),this.domain(e),this.scale().domain(e),this.config().generator&&(this._generatedShapes=function(e,t){var n={};return e.forEach(function(e){n[e]=t(e)}),n}(e,this.config().generator))),this}},{key:"serialize",value:function(){return{type:this.constructor.type(),scale:this.scale(),domain:this.domain(),range:this.config().range,config:this.config()}}},{key:"id",value:function(){return this._id}}],[{key:"defaultConfig",value:function(){return _y}},{key:"type",value:function(){return"shape"}}]),e}();function Ey(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Sy,Oy=(Ey(yy={},"dimension",Rd),Ey(yy,"measure",Dd),Ey(yy,"temporal",Ld),function(e,t,n){var r=n.groupBy instanceof Array?n.groupBy:[n.groupBy],i=r.map(function(t){return e.findIndex(function(e){return e.name===t})});if(void 0!==i.find(function(e){return-1===e}))throw new Error("Groupby field "+r+" not found in schema");return function(e){var t=F();return e.keys.forEach(function(e){return t.key(function(t){return t[e]})}),t.entries(e.data)}({keys:i,data:t})});function My(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Cy,Ty=(My(Sy={},"identity",function(e,t,n){return t}),My(Sy,"group",Oy),My(Sy,"stack",function(e,t,n){var r=n.uniqueField,i=n.value,a=n.groupBy,o=n.sort||"descending",u=function(e,t,n,r,i){var a=Oy(t,e,{groupBy:r}),o=t.findIndex(function(e){return e.name===r}),u=t.findIndex(function(e){return e.name===n}),c=t.findIndex(function(e){return e.name===i}),l=e.map(function(e){return e[c]}).filter(function(e,t,n){return n.indexOf(e)===t}).sort(),s=t.reduce(function(e,t,n){return e[n]=t.name,e},{});return{data:a.map(function(e){var t={},n=e.values.reduce(function(e,n){return n.reduce(function(e,r,i){return i===c?(e[r]=n[u],t[r]=n):i!==u&&(e[s[i]]=r),e},e)},{});return n._tuple=t,l.forEach(function(t){if(void 0===n[t]){n[t]=0;var r=new Array(e.values[0].length);r[o]=e.key,r[c]=t,n._tuple[t]=r}}),n}),keys:l}}(t,e,i,r,a),c=u.keys,l={},s=n.orderBy,f=e.findIndex(function(e){return e.name===s}),h=e.findIndex(function(e){return e.name===a});-1!==f&&(c.forEach(function(e){var n=t.find(function(t){return t[h]===e});l[e]=n[f]}),u.keys.sort(function(e,t){return l[e].localeCompare(l[t])}));var d=function(e){return function(){var e=Ga([]),t=uu,n=ou,r=cu;function i(i){var a,o,u=e.apply(this,arguments),c=i.length,l=u.length,s=new Array(l);for(a=0;a<l;++a){for(var f,h=u[a],d=s[a]=new Array(c),p=0;p<c;++p)d[p]=f=[0,+r(i[p],h,p,i)],f.data=i[p];d.key=h}for(a=0,o=t(s);a<l;++a)s[o[a]].index=a;return n(s,o),s}return i.keys=function(t){return arguments.length?(e="function"==typeof t?t:Ga(_o.call(t)),i):e},i.value=function(e){return arguments.length?(r="function"==typeof e?e:Ga(+e),i):r},i.order=function(e){return arguments.length?(t=null==e?uu:"function"==typeof e?e:Ga(_o.call(e)),i):t},i.offset=function(e){return arguments.length?(n=null==e?ou:e,i):n},i}().keys(e.keys).offset(Zc[e.offset]).order(Jc[e.order])(e.data)}({keys:u.keys,offset:n.offset||"diverging",order:o,data:u.data});return d.forEach(function(e){e.forEach(function(t){t.data=t.data._tuple[e.key]})}),d}),Sy),Py=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,i=!1,a=void 0;try{for(var o,u=e[Symbol.iterator]();!(r=(o=u.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){i=!0,a=e}finally{try{!r&&u.return&&u.return()}finally{if(i)throw a}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},Ay=f.BAND,Ny=function(e,t){var n=e.datum,r=e.index,i=t.colorEncoding,a=t.colorAxis,o=t.colorFieldIndex,u="",c="";return i&&i.value instanceof Function?(c=i.value(n,r),u=i.value(n,r)):(u=a.getRawColor(n._data[o]),c=a.getHslString(u)),{color:c,rawColor:u}},jy=function(e,t,n,r){t.meta.stateColor[n]=t.meta.stateColor[n]||t.meta.originalColor;var i=e.transformColor(t.meta.stateColor[n],r);return t.meta.stateColor[n]=i.hsla,i},Fy=function(e){var t=[Ed.X,Ed.Y].map(function(t){return e[t]}),n=Py(t,2),r=n[0],i=n[1],a=[r,i].map(function(e){return e&&e.scale()}),o=Py(a,2);return{xAxis:r,yAxis:i,xScale:o[0],yScale:o[1]}},Iy=function(e,t,n,r){var i=r.config().individualClassName,a="";return i instanceof Function&&(a=i(e,t,n,r)),a},Dy=function(e,t){var n;e.data((n=[]).concat.apply(n,function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(t)).filter(function(e){return void 0!==e._id}).map(function(e){var t=e.update;return{x:t.x,y:t.y,data:e}}))},Ry=function(e,t,n){for(var r in t)({}).hasOwnProperty.call(t,r)&&e.style(r,n?null:t[r])},Ly=function(e,t){var n=e.encodingTransform();return n?n(t,e,{smartLabel:e._dependencies.smartLabel}):t},zy=function(e,t){var n=e.encodingFieldsInf(),r=e.axes(),i=e.transformType(),a=e.config(),o=e._bandScale;return["x","y"].map(function(u){var c=0,l=0,s=0,f=[];if(n[u+"FieldType"]===Ma.FieldType.DIMENSION){var h=void 0,d=n[u+"FieldSubType"]===Ma.DimensionSubtype.TEMPORAL?e.dataProps().timeDiffs[u]:0,p=r[u],y=a["pad"+u.toUpperCase()],g=a.innerPadding,v=t,m=p.scale();l=function(e,t){var n=e.getUnitWidth(),r=e.scale(),i=r.range(),a=r.domain();return n||Math.abs(i[1]-i[0])/Math.abs(a[1]-a[0])*t}(p,d);var b=p.constructor.type()===Ay,_=p.config().padding;if("group"===i){var x=b?0:_*l/2;o.range([x,l-x]).domain(v).paddingInner(g),c=o.bandwidth(),h=l-(b?0:_*l),f=v.map(function(e){return o(e)-(b?0:l/2)})}else if(void 0!==y){var w=void 0;if(b){var k=m.step();w=m.padding()*k,c=m.bandwidth()+w}else c=l;f=v.map(function(){return b?-w/2:-c/2})}else h=c=l-(s=b?0:_*l),f=v.map(function(){return b?0:-c/2});l=h,s=b?_*p.scale().step():_*l}return{span:c,offsetValues:f,groupSpan:l,padding:s}})},By=function(e){return[{props:["transformedData"],listener:function(t){return t("data","config",function(t,n){var r=t.value,i=n.value,a=i&&i.encoding;if(r&&a){var o=r.getFieldsConfig(),u=function(e,t){var n=[Ed.X,Ed.Y,Ed.X0,Ed.Y0,wd,kd,xd].map(function(t){return e[t]&&e[t].field}),r=Py(n,7),i=r[0],a=r[1],o=r[2],u=r[3],c=r[4],l=r[5],s=r[6],f=[i,a,o,u].map(function(e){return t[e]&&t[e].def.type}),h=Py(f,2),d=h[0],p=h[1],y=[i,a].map(function(e){return t[e]&&(t[e].def.subtype||t[e].def.type)}),g=Py(y,2),v=g[0],m=g[1],b=[i,a,o,u].map(function(e){return t[e]&&t[e].index}),_=Py(b,4);return{xField:i,yField:a,colorField:c,shapeField:l,sizeField:s,x0Field:o,y0Field:u,xFieldType:d,yFieldType:p,xFieldSubType:v,yFieldSubType:m,xFieldIndex:_[0],yFieldIndex:_[1],x0FieldIndex:_[2],y0FieldIndex:_[3]}}(a,o);return e.encodingFieldsInf(u),e.transformType(function(e,t,n){var r=void 0,i=e.transform,a=n.xField,o=n.yField,u=n.xFieldType,c=n.yFieldType,l=i.groupBy,s=t[l]&&t[l].def.type===Ma.FieldType.MEASURE;return r=i.type,a&&o&&!s&&l&&(u!==Ma.FieldType.DIMENSION||c!==Ma.FieldType.DIMENSION)||(r="identity"),r}(i,o,u)),e.getTransformedData(r,i,e.transformType(),u)}return null})},type:"computed"},{props:["normalizedData"],listener:function(t){return t("transformedData",function(t){var n=t.value;if(n){var r=e.data().getFieldsConfig();return e.getNormalizedData(n,r)}return null})},type:"computed"},{props:["domain"],listener:function(t){return t("normalizedData",function(t){var n=t.value;return n?e.calculateDomainFromData(n,e.encodingFieldsInf(),e.data().getFieldsConfig()):null})},type:"computed"},{props:["data"],listener:function(t){t[1]&&function(e){setTimeout(function(){e()},0)}(function(){e.store().commit(Cd,!0)})},type:"registerImmediateListener"},{props:["mount",Cd],listener:function(t,n){t[1]&&n[1]&&(e.render(t[1]),e.dependencies().throwback.commit("onlayerdraw",!0))},type:"registerChangeListener"}]};function Uy(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Hy=(Uy(Cy={},"config",{value:null,meta:{sanitization:function(e,t,n){var r=n.constructor,i=zc({},r.defaultConfig());return r.defaultPolicy(i,e)}}}),Uy(Cy,"data",{value:null,meta:{preset:function(e,t){t._cacheEnabled?t._cachedData.push(e):t._cachedData=[e]}}}),Uy(Cy,"mount",{value:null}),Uy(Cy,"axes",{value:null}),Uy(Cy,"measurement",{value:null}),Cy),Vy=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,i=!1,a=void 0;try{for(var o,u=e[Symbol.iterator]();!(r=(o=u.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){i=!0,a=e}finally{try{!r&&u.return&&u.return()}finally{if(i)throw a}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},Wy=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),qy=function(e){function t(e,n,r,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return a.store(new jc(function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}({DATA:null},Cd,null))),Ic(a,Hy,a.store().model),a.data(e),a.axes(n),a.config(r),a.alias(a.constructor.formalName()+xc()),a.dependencies(i),a._points=[],a._cachedData=[],a._id=xc(),a._measurement={},Yc(a,By),a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,Md),Wy(t,[{key:"store",value:function(){return arguments.length?(this._store=arguments.length<=0?void 0:arguments[0],this):this._store}},{key:"encodingFieldsInf",value:function(){return arguments.length?(this._encodingFieldsInf=arguments.length<=0?void 0:arguments[0],this):this._encodingFieldsInf}},{key:"encodingTransform",value:function(){return arguments.length?(this._encodingTransform=arguments.length<=0?void 0:arguments[0],this):this._encodingTransform}},{key:"alias",value:function(){return arguments.length?(this._alias=arguments.length<=0?void 0:arguments[0],this):this._alias||this.constructor.formalName()}},{key:"dependencies",value:function(){return arguments.length?(this._dependencies=arguments.length<=0?void 0:arguments[0],this):this._dependencies}},{key:"enableCaching",value:function(){return this._cacheEnabled=!0,this}},{key:"clearCaching",value:function(){return this._cacheEnabled=!1,this.data(this._cachedData[0])}},{key:"serialize",value:function(){return this.config()}},{key:"id",value:function(){return this._id}},{key:"getTransformedData",value:function(e,t,n,r){return function(e,t,n,r){var i=e.getData({withUid:!0}),a=i.schema,o=t.transform,u=r.xField,c=r.yField,l=r.xFieldType,s=r.yFieldType,f=l===Ma.FieldType.MEASURE?c:u;return function(e){var t=Ty[e];if("function"!=typeof t)throw new Error("Invalid transform type supplied.");return t}(n)(a,i.data,{groupBy:o.groupBy,uniqueField:f,sort:o.sort||"none",offset:o.offset,orderBy:o.orderBy,value:s===Ma.FieldType.MEASURE?c:u},i.uids)}(e,t,n,r)}},{key:"calculateDomainFromData",value:function(e){var t={};return this.data().isEmpty()||(t=function(e,t,n){var r=t.xFieldSubType,i=t.yFieldSubType,a=t.xField,o=t.yField,u=t.x0Field,c=t.y0Field,l={},s=Ed.Y,f=Ed.X;return a&&(l.x=Sc(e,u||n===md?[f,Ed.X0]:[f,f],r)),o&&(l.y=Sc(e,c||n===md?[Ed.Y0,Ed.Y]:[s,s],i)),l}(e,this.encodingFieldsInf(),this.transformType())),t}},{key:"shouldDrawAnchors",value:function(){return!1}},{key:"getDataDomain",value:function(e){var t=this.store().get("domain");return void 0!==e?t[e]||[]:t}},{key:"getNormalizedData",value:function(e,t){return function(e,t,n,r){var i="identity"===r?[e]:e,a=n.xFieldType,o=n.xFieldIndex,u=n.yFieldIndex,c=n.x0FieldIndex,l=n.y0FieldIndex,s=Object.keys(t).length;return i.map(function(e){return("group"===r?e.values:e).map(function(e){var t={},n=void 0;if(r===md){n=e.data||[];var i=void 0,f=void 0,h=void 0,d=void 0;e[1]>=e[0]?(i=d=e[1],h=f=e[0]):(i=d=e[0],h=f=e[1]),(t=a===Ma.FieldType.MEASURE?{x:h,x0:d,y:n[u],y0:n[u]}:{x:n[o],x0:n[o],y:i,y0:f})._data=n,t._id=n[s]}else(t={x:e[o],y:e[u],x0:e[c],y0:e[l]})._data=e,t._id=e[s];return t})}).filter(function(e){return e.length})}(e,t,this.encodingFieldsInf(),this.transformType())}},{key:"getNearestPoint",value:function(){return null}},{key:"applyInteractionStyle",value:function(e,t,n){var r=(this.config().interaction||{})[e];r&&function(e,t,n,r){var i=e.getPlotElementsFromSet(t),a=e.axes().color,o=r.apply,u=r.interactionType;n.forEach(function(e){var t=e.type;i.style(t,function(n){var r=n.meta,i=r.colorTransform,c=r.stateColor,l=r.originalColor;if(i[u]=i[u]||{},o&&!i[u][t])return i[u][t]=e.intensity,jy(a,n,t,e.intensity).color;if(!o&&i[u][t])return i[u][t]=null,jy(a,n,t,e.intensity.map(function(e){return-e})).color;var s=c[t]?c[t]:l,f=Py(s,4);return"hsla("+360*f[0]+","+100*f[1]+"%,"+100*f[2]+"%, "+(f[3]||1)+")"})})}(this,t,r,{apply:n,interactionType:e})}},{key:"transformType",value:function(){return arguments.length?(this._transformType=arguments.length<=0?void 0:arguments[0],this):this._transformType}},{key:"render",value:function(){return this}},{key:"elemType",value:function(){return"g"}},{key:"remove",value:function(){return this.store().unsubscribeAll(),cf(this.mount()).remove(),this}},{key:"cachePoint",value:function(e,t){if(null===e)return this;var n=this._pointMap;return!n[e]&&(n[e]=[]),n[e].push(t),this}},{key:"dataProps",value:function(){return arguments.length?(this._dataProps=arguments.length<=0?void 0:arguments[0],this):this._dataProps}},{key:"getIdentifiersFromData",value:function(e){var t=this.data().getData().schema,n=this.data().getFieldsConfig(),r=[[],[]],i=this.encodingFieldsInf(),a=i.xFieldType,o=i.yFieldType,u=i.xField,c=i.yField,l=[a,o].map(function(e){return e===Ma.FieldType.MEASURE}),s=Vy(l,2),f=s[0],h=s[1];if(t.forEach(function(t,i){var a=t.name;n[a].def.type===Ma.FieldType.DIMENSION&&(r[0].push(a),r[1].push(e[i]))}),f&&h){var d,p,y=n[u].index,g=n[c].index;(d=r[0]).push.apply(d,[u,c]),(p=r[1]).push.apply(p,[e[y],e[g]])}return r}},{key:"getPlotSpan",value:function(){return{x:0,y:0}}},{key:"getPlotPadding",value:function(){return{x:0,y:0}}},{key:"getPointsFromIdentifiers",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.getAllAttrs,i=n.getBBox;if(!this.data())return[];var a=void 0,o=void 0;if(e instanceof Ca.a){var u=e.getData();a=u.schema.map(function(e){return e.name}),o=u.data}else a=e[0],o=e.slice(1,e.length);var c=this._points,l=this.data().getFieldsConfig(),s=(t=[]).concat.apply(t,function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(c)).filter(function(e){var t=e._data,n=e._id;return a.every(function(e,r){return e in l&&l[e].def.type===Ma.FieldType.DIMENSION?-1!==o.findIndex(function(n){return n[r]===t[l[e].index]}):e!==Sa||-1!==o.findIndex(function(e){return e[r]===n})})});return r?s:s.map(function(e){var t=wc(e);if(i){var n=t.update||t;if(void 0!==t.size){var r=2*Math.sqrt(t.size/Math.PI);n.width=r,n.height=r,n.x-=r/2,n.y-=r/2}else void 0===n.width&&(n.width=2),void 0===n.height&&(n.height=2)}return t.update||t}).sort(function(e,t){return e.y-t.y})}},{key:"getTransformedDataFromIdentifiers",value:function(e){var t=e.getData(),n=t.data,r=t.schema,i=this.store().get("normalizedData"),a=this.data().getFieldsConfig(),o=this.encodingFieldsInf(),u=o.yField,c=o.xField,l=o.yFieldType,s=void 0,f=void 0;o.xFieldType===Ma.FieldType.MEASURE?(s=a[c].index,f="x"):l===Ma.FieldType.MEASURE&&(s=a[u].index,f="y");var h=[];return i.forEach(function(e){e.forEach(function(e){var t=e._data;if(r.every(function(e,r){return-1!==n.findIndex(function(n){return t[a[e.name].index]===n[r]})})){var i=e[f],o=e._data,u={};for(var c in a){var l=a[c].index;u[c]=o[l],l===s&&(u[c]=i)}h.push(u)}})}),[h,this.data().getData().schema]}},{key:"getPlotElementsFromSet",value:function(e){return cf(this.mount()).selectAll(this.elemType()).filter(function(t){return!!t&&-1!==e.indexOf(t._id)})}}],[{key:"create",value:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return new(Function.prototype.bind.apply(this,[null].concat(t)))}},{key:"defaultConfig",value:function(){return{transform:{type:"identity"}}}},{key:"defaultPolicy",value:function(e,t){return zc(e,t)}},{key:"formalName",value:function(){return"base"}}]),t}(),Gy=tl.line,Yy=function(e){var t=void 0,n=e.container,r=e.points,i=e.interpolate,a=e.connectNullData,o=e.className,u=e.style,c=e.transition,l=cf(n).attr("class",o),s=el[i],f=Gy().curve(s).x(function(e){return e.update.x}).y(function(e){return e.update.y}).defined(function(e){return null!==e.update.y});t=r,a&&(t=r.filter(function(e){return null!==e.update.y})),Ry(l,u);var h=lf(l,"path",[1]);return h.classed(r[0].className,!0),c.disabled||(h=h.transition().duration(c.duration)),h.attr("d",f(t)).style("fill-opacity",0),h},$y={classPrefix:"muze",defClassName:"layer-line",className:"",interpolate:"linear",transform:{type:"group"},interaction:{highlight:[{type:"stroke",intensity:[0,0,-15,0]}],fade:[{type:"stroke",intensity:[0,0,15,0]}],focus:[{type:"stroke",intensity:[0,0,15,0]}]},nearestPointThreshold:20,encoding:{color:{},x:{},y:{},strokeOpacity:{value:1}},transition:{effect:"cubic",duration:1e3},connectNullData:!1},Xy=(n(21),function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}()),Ky=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(r)));return a._voronoi=new Nc,a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,qy),Xy(t,[{key:"elemType",value:function(){return"path"}},{key:"getDrawFn",value:function(){return Yy}},{key:"highlightPoint",value:function(){return this}},{key:"dehighlightPoint",value:function(){return this}},{key:"focusSelection",value:function(){return this}},{key:"focusOutSelection",value:function(){return this}},{key:"fadeOutSelection",value:function(){return this}},{key:"unfadeSelection",value:function(){return this}},{key:"shouldDrawAnchors",value:function(){return!0}},{key:"translatePoints",value:function(e,t,n){var r=this,i=[],a=n.x,o=n.y,u=n.color,c=this.config().encoding,l=t.xFieldType,s=t.yFieldType,f=l===Ma.FieldType.DIMENSION,h=s===Ma.FieldType.DIMENSION,d=f?Ed.X:h?Ed.Y:null,p=c.color,y=p.field,g=this.data().getFieldsConfig(),v=y&&g[y].index,m={},b={};return i=e.map(function(t,n){var i=a.getScaleValue(t.x)+a.getUnitWidth()/2,c=o.getScaleValue(t.y),l=Ny({datum:t,index:n},{colorEncoding:p,colorAxis:u,colorFieldIndex:v}),s=l.color,f=l.rawColor;m.stroke=s,m["fill-opacity"]=0,b.stateColor={},b.originalColor=f,b.colorTransform={};var h={enter:{},update:{x:i,y:null===t.y?null:c},style:m,_data:t._data,_id:t._id,rowId:t._id,source:t._data,meta:b};return h.className=Iy(t,n,e,r),r.cachePoint(t[d],h),h}),Ly(this,i)}},{key:"render",value:function(e){var t=this,n=void 0,r=void 0,i=void 0,a=this.config(),o=a.encoding,u=a.interpolate,c=a.className,l=a.defClassName,s=a.transition,f=this._store,h=f.get("normalizedData"),d=f.get("transformedData"),p=this.data().getFieldsConfig(),y=this.axes(),g=d.map(function(e){return e.key}),v=Tc(l,this.id(),a.classPrefix),m=cf(e),b=o.color.field,_=p[b]&&p[b].index;return this._points=[],this._pointMap={},m.classed(v.join(" "),!0),m.classed(c,!0),lf(e,"g",h,null,{enter:function(e){!function(e,t){var n=void 0,r=void 0,i=t.transition,a=t.groupAnimateStyle,o=i.duration,u=i.effect,c=i.disabled;a&&(df(e.node(),a.enter),r=a.update,n=c?e:e.transition().ease(Mc[u]).duration(o).on("end",function(){Ry(cf(this),r,!0)}),Ry(n,r))}(e,{transition:s,groupAnimateStyle:{enter:{"stroke-opacity":0,"fill-opacity":t.getPathStyle()["fill-opacity"]},update:{"stroke-opacity":o.strokeOpacity.value}}})},update:function(e,c,l){n=t.translatePoints(c,t.encodingFieldsInf(),y,l),t._points.push(n),r=(v[0]+"-"+(g[l]||l)).toLowerCase();var f,d=o.color.value,p=n.find(function(e){return null!==e._data[_]&&void 0!==e._data[_]});f=d?d(c,l,h):y.color.getColor(p&&p._data[_]),i=t.getPathStyle(f),t.getDrawFn()({container:e.node(),interpolate:u,points:n,className:r,transition:s,style:i||{},connectNullData:a.connectNullData})}},function(e){return e[0]._data[_]||e[0]._id}),Dy(this._voronoi,this._points),this}},{key:"getPathStyle",value:function(e){return{stroke:e,"fill-opacity":"0"}}},{key:"getNearestPoint",value:function(e,t,n){var r=n.searchRadius,i=this.data();if(!i||i&&i.isEmpty())return null;r=void 0!==r?r:this.config().nearestPointThreshold;var a=this._voronoi.find(e,t,r),o=Xc(a,"data","data","update");if(a){var u=a.data.data,c=u._data,l=u._id;return{id:this.getIdentifiersFromData(c,l),dimensions:[{x:o.x,y:o.y,width:2,height:2}],layerId:this.id()}}return null}}],[{key:"formalName",value:function(){return"line"}},{key:"defaultConfig",value:function(){return $y}},{key:"defaultPolicy",value:function(e,t){var n=qy.defaultPolicy(e,t),r=n.encoding,i=n.transform,a=r.color&&r.color.field;return a&&!i.groupBy&&(i.groupBy=a),n}}]),t}(),Qy=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,i=!1,a=void 0;try{for(var o,u=e[Symbol.iterator]();!(r=(o=u.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){i=!0,a=e}finally{try{!r&&u.return&&u.return()}finally{if(i)throw a}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},Jy=tl.area,Zy=function(e){var t=void 0,n=e.container,r=e.points,i=e.style,a=e.transition,o=e.className,u=e.connectNullData,c=e.interpolate,l=a.effect,s=a.duration,f=cf(n),h=el[c],d=f.selectAll("path").data([e.points]),p=["enter","update"].map(function(e){return Jy().curve(h).x(function(t){return t[e].x}).y1(function(t){return t[e].y}).y0(function(t){return t[e].y0}).defined(function(t){return null!==t[e].y})}),y=Qy(p,2),g=y[0],v=y[1];t=r,f.attr("class",o),u&&(t=r.filter(function(e){return null!==e.update.y}));var m=d.enter().append("path").attr("d",g(t));d.merge(m).transition().ease(Mc[l]).duration(s).attr("d",v(t)).each(function(e){var t=cf(this);t.classed(e[0].className,!0),Object.keys(i).forEach(function(e){return t.style(e,i[e])})})},eg=(n(23),function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}()),tg=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,Ky),eg(t,[{key:"calculateDomainFromData",value:function(e,n,r){var i=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var a=Object.getPrototypeOf(t);return null===a?void 0:e(a,n,r)}if("value"in i)return i.value;var o=i.get;return void 0!==o?o.call(r):void 0}(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"calculateDomainFromData",this).call(this,e,r);return[Ed.X,Ed.Y].forEach(function(e){n[e+"FieldType"]===Ma.FieldType.MEASURE&&(i[e][0]=Math.min(i[e][0],0))}),i}},{key:"getDrawFn",value:function(){return Zy}},{key:"translatePoints",value:function(e,t,n){var r=this,i=[],a=this.transformType(),o=n.color,u=this.config(),c=u.encoding.color,l=c.field,s=this.data().getFieldsConfig(),f=l&&s[l].index,h=t.xField,d=t.yField,p=t.y0Field,y=Fy(n),g=y.xAxis,v=y.yAxis,m=u.individualClassName,b=s[h]&&s[h].def.type===Ma.FieldType.DIMENSION,_=s[d]&&s[d].def.type===Ma.FieldType.DIMENSION,x=b?"x":_?"y":null;return i=e.map(function(t,n){var i=g.getScaleValue(t.x)+g.getUnitWidth()/2,u=v.getScaleValue(t.y),l=p||a===md?v.getScaleValue(t.y0):v.getScaleValue(0),s=Ny({datum:t,index:n},{colorEncoding:c,colorAxis:o,colorFieldIndex:f}),h=s.color,d=s.rawColor,y={},b={};y.fill=h,b.stateColor={},b.originalColor=d,b.colorTransform={};var _={enter:{x:i,y:null===t.y?t.y:v.getScaleValue(0),y0:null===t.y0?t.y0:v.getScaleValue(0)},update:{x:i,y:null===t.y?t.y:u,y0:null===t.y0?t.y0:l},_id:t._id,_data:t._data,source:t._data,rowId:t._id,className:m?m(t,n,e,r):"",style:y,meta:b};return _.className=Iy(t,n,e,r),r.cachePoint(t[x],_),_}),Ly(this,i)}},{key:"getPathStyle",value:function(e){return{fill:e}}}],[{key:"defaultConfig",value:function(){return Sd}},{key:"formalName",value:function(){return"area"}}]),t}(),ng={classPrefix:"muze",defClassName:"layer-arc",padding:{top:1,bottom:1,left:1,right:1},className:"",minOuterRadius:10,interaction:{highlight:[{type:"fill",intensity:[0,0,-15,0]}],fade:[{type:"fill",intensity:[0,0,15,0]}],focus:[{type:"fill",intensity:[0,0,15,0]}]},height:100,width:100,sort:"",cornerRadius:0,padAngle:0,padRadius:0,startAngle:0,endAngle:360,colors:["#F44336","blue","green","yellow","orange","purple"],transform:{type:"identity"},encoding:{"stroke-width":{value:"2px"},"stroke-linejoin":{value:"round"},angle:{value:"1"},radius:{value:"1"},opacity:{value:"1"},color:{value:"1"},shape:{value:"1"},size:{value:"1"}},innerRadiusFixer:10,transition:{effect:"cubic",duration:500},states:{highlight:{className:"muze-layer-arc-highlight"},fadeout:{className:"muze-layer-arc-fadeout"},selected:{className:"muze-layer-arc-selected"}}},rg=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,i=!1,a=void 0;try{for(var o,u=e[Symbol.iterator]();!(r=(o=u.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){i=!0,a=e}finally{try{!r&&u.return&&u.return()}finally{if(i)throw a}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},ig=(n(25),function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}()),ag=tl.pie,og=tl.arc,ug=function(e){function t(e,n,r,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n,r,i));return a._prevPieData={},a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,qy),ig(t,[{key:"elemType",value:function(){return"path"}},{key:"getTransformedData",value:function(e,t){var n=this,r=[],i={},a=t.startAngle,o=t.endAngle,u=t.encoding,c=t.sort,l=t.minOuterRadius,s=this._store.get("transformedData")||[],f=function(e,t){var n=[bd,_d,wd,xd].map(function(t){return e[t].field}),r=rg(n,4),i=r[0],a=r[1],o=r[2],u=[i,r[3],a].map(function(e){var n=t[e];return n&&n.def.type===Ma.FieldType.MEASURE?n.index:null}),c=rg(u,3);return{angleIndex:c[0],sizeIndex:c[1],radiusIndex:c[2],colorIndex:Xc(t,o,"index")}}(u,this.data().getFieldsConfig()),h=f.angleIndex,d=f.sizeIndex,p=f.radiusIndex,y=f.colorIndex,g=e.getData(),v=g.data,m=g.uids;this._prevPieData={},s.forEach(function(e,t){n._prevPieData[e.uid]=[e,t],i[e.index]=e}),r=ag().startAngle(a/180*Math.PI).endAngle(Math.PI*o/180).value(function(e){return e[h]||1}).sortValues(null),c.length&&p&&r.sort(function(e,t){return"asc"===c?e[p]-t[p]:t[p]-e[p]});var b=v.reduce(function(e,t){return e+(t[d]||0)},1);return r(v).map(function(e,r){return e.outerRadiusValue=v[r][p]||l,e.innerRadius=t.innerRadius,e.colorVal=v[r][y],e.angleVal=v[r][h],e.sizeVal=b,e.uid=m[r],e.rowId=e.uid,e.source=v[r],e._previousInfo=n._prevPieData[e.uid]?n._prevPieData[e.uid][0]:function(e,t,n){var r=e[t-1],i=e[t];return r&&i?{startAngle:r.endAngle,endAngle:i.startAngle}:i?{startAngle:n.startAngle*Math.PI*2/360,endAngle:n.startAngle*Math.PI*2/360}:{startAngle:n.endAngle*Math.PI*2/360,endAngle:n.endAngle*Math.PI*2/360}}(i,e.index,t),e})}},{key:"getNormalizedData",value:function(e){return e}},{key:"calculateDomainFromData",value:function(e){return{radius:Sc([e],["outerRadiusValue","outerRadiusValue"])}}},{key:"getNearestPoint",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=cf(n.event.target).data()[0];if(_c(r)){var i=r.datum,a=i.data,o=i.uid;return{id:this.getIdentifiersFromData(a,o),layerId:this.id()}}return null}},{key:"getPlotElementsFromSet",value:function(e){return cf(this.mount()).selectAll(this.elemType()).filter(function(t){return-1!==e.indexOf(t.datum.uid)})}},{key:"render",value:function(e){var t=this,n=this.measurement(),r=n.height,i=n.width,a=this.config(),o=a.classPrefix,u=a.defClassName,c=a.minOuterRadius,l=a.innerRadius,s=a.outerRadius,f=a.cornerRadius,h=a.padAngle,d=a.padRadius,p=a.padding,y=a.transition,g=a.innerRadiusFixer,v=this.axes().size,m=this._store,b=m.get("transformedData"),_=r-p.top-p.bottom,x=i-p.left-p.right,w=Tc(u,this.id(),o),k=function(e,t,n){var r=n.minOuterRadius,i=n.innerRadius,a=n.outerRadius,o=n.innerRadiusFixer;return[Math.max(i+o||0,r),a||Math.min(t,e)/2]}(x,_,{minOuterRadius:c,innerRadius:l,outerRadius:s,innerRadiusFixer:g}),E=this.axes().color,S=s||Math.min(_,x)/2,O=m.get("domain").radius,M=function(e){return function(e,t,n,r,i){var a=1,o=e.outerRadiusValue,u=e.sizeVal,c=i.domain(),l=i.getSize(u)/(c?i.range()[1]:i.config().value);return a*=(t[1]-t[0])/(n[1]-n[0]),(t[0]+(o-n[0])*a||r)*l}(e,k,O,S,v)},C=og().innerRadius(l?Math.min(_/2,x/2,l):0).cornerRadius(f).padAngle(h).padRadius(d);this._chartWidth=x,this._chartHeight=_;var T=lf(cf(e),"g",[1],w[0]+"-group").classed(w[1]+"-group",!0).attr("transform","translate("+x/2+","+_/2+")"),P=[],A=0;return lf(T,"g",b,""+w[0],{update:function(e){lf(e,"path",function(e,t){return[{datum:e,index:t,arcFn:C,meta:{originalColor:E.getRawColor(e.colorVal),stateColor:{},colorTransform:{}}}]},w[0]+"-path").style("fill",function(e){return E.getColor(e.datum.colorVal)}).transition().duration(y.duration).attrTween("d",function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e,t,n){var r=n[0].datum,i=t(r);return r.outerRadius=i,r._previousInfo.outerRadius=r._previousInfo.outerRadius||i,function(t){return e(Bc()(r._previousInfo,r)(t))}}(C,M,t)}).attr("class",function(e,n){var r=Iy(e,n,b,t);return w[0]+"-path "+w[1]+"-path-"+e.index+"\n                                    "+r})},exit:function(e,t){var n=P[A],r=A;n?n[n.length-1].datum.index===t.index-1?n.push({elem:e,datum:t}):A++:n=[{elem:e,datum:t}],P[r]=n}}).attr("class",function(e,t){return w[0]+" "+w[1]+"-"+t}),function(e,t,n,r){e.length>0&&e.forEach(function(e){var i=e[0].datum.startAngle,a=e[e.length-1].datum.endAngle,o=2*Math.PI*i/(2*Math.PI+i-a);e.forEach(function(e){var i=e.elem,a=e.datum;i.each(function(){var e=cf(this);e.selectAll("path").transition().duration(t.duration).attrTween("d",function(){return function(e){var t=n(a);return a.outerRadius=t,r(Bc()(a,{startAngle:o,endAngle:o,outerRadius:t})(e))}}).remove(),e.remove()})})})}(P,y,M,C),this}},{key:"getPointsFromIdentifiers",value:function(e){if(!this.data())return[];var t=e[0],n=e.slice(1,e.length),r=cf(this.mount()).selectAll("path").data(),i=this.data().getFieldsConfig(),a=r.filter(function(e){var r=e.datum.data,a=e.datum.uid;return t.every(function(e,t){return e in i&&i[e].def.type===Ma.FieldType.DIMENSION?-1!==n.findIndex(function(n){return n[t]===r[i[e].index]}):e!==Sa||-1!==n.findIndex(function(e){return e[t]===a})})})[0];if(a){var o=a.arcFn.centroid(a.datum);return[{x:o[0]+this._chartWidth/2,y:o[1]+this._chartHeight/2,width:2,height:2}]}return[]}}],[{key:"defaultConfig",value:function(){return ng}},{key:"formalName",value:function(){return"arc"}}]),t}(),cg={defClassName:"layer-text",classPrefix:"muze",className:"",transform:{type:"identity"},interaction:{highlight:[{type:"fill",intensity:[0,0,-15,0]}],fade:[{type:"fill",intensity:[0,0,15,0]}],focus:[{type:"fill",intensity:[0,0,15,0]}]},transition:{effect:"cubic",duration:1e3},encoding:{color:{},text:{value:"",background:{padding:10}}},states:{highlight:{className:"muze-layer-text-highlight"},fadeout:{className:"muze-layer-text-fadeout"},selected:{className:"muze-layer-text-selected"}}},lg=(n(27),function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,i=!1,a=void 0;try{for(var o,u=e[Symbol.iterator]();!(r=(o=u.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){i=!0,a=e}finally{try{!r&&u.return&&u.return()}finally{if(i)throw a}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}),sg=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),fg=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,qy),sg(t,[{key:"elemType",value:function(){return"text"}},{key:"translatePoints",value:function(e,t,n){for(var r=this,i=[],a=n.color,o=t.text,u=o.field,c=o.value,l=o.formatter,s=t.color,f=s&&s.field,h=this.data().getFieldsConfig(),d=t.text.background,p=d.padding,y=d.value,g=h[f]?h[f].index:-1,v=u?h[u]&&h[u].index:-1,m=Ed.X,b=Ed.Y,_=function(t,o){var f=e[t],h=f._data,d=u?h[v]:c,_=[m,b].map(function(e){return n[e]?n[e].getScaleValue(f[e])+n[e].getUnitWidth()/2:0}),x=lg(_,2),w=x[0],k=x[1],E=Ny({datum:f,index:t},{colorEncoding:s,colorAxis:a,colorFieldIndex:g}),S=E.color,O=E.rawColor,M={enter:{},update:{x:w,y:k},text:l?l(d):d,color:S,background:{value:y instanceof Function?y(f,t,e,r):null,padding:p},meta:{stateColor:{},originalColor:O,colorTransform:{}},style:{},_data:h,_id:f._id,source:f._data,rowId:f._id};null!==f.x&&null!==f.y&&i.push(M),M.className=Iy(f,t,e,r)},x=0,w=e.length;x<w;x++)_(x);return i=Ly(this,i)}},{key:"render",value:function(e){var t=this,n=void 0,r=this.config(),i=r.encoding,a=this._store.get("normalizedData"),o=r.className,u=Tc(r.defClassName,this.id(),r.classPrefix),c=this.axes();return cf(e).classed(u.join(" ")+" "+o,!0),pf({data:a,append:"g",selector:"g",container:e,each:function(e,r,a){var o=r.node();n=t.translatePoints(e,i,c,a),df(o,{"text-anchor":"middle"}),function(e,t,n,r){var i=cf(e).selectAll("g").data(t),a=i.enter().append("g").each(function(e){hf(this,e.enter)}).merge(i),o=mf(cf(e),n.className),u=parseInt(o.fontSize,10);r.setStyle(o),a.each(function(e){var t,n=cf(this),i=e.update,a=e.text,o=e.color,c=e.textanchor,l=e.style,s=e.background;if(t=s.value){var f,h=s.padding,d=r.getOriSize(e.text),p=d.width,y=d.height,g=lf(n,"rect",[1]);f="end"===c?p:"start"===c?0:p/2,hf(g.node(),{x:i.x-f-h/2,y:i.y-u-h/2,width:p+h,height:y+h}),s&&df(g,{background:t})}var v=lf(n,"text",function(e){return[e]}).text(a),m=v.node();l&&df(m,l),o&&df(m,{fill:o}),e.className&&v.classed(e.className,!0),hf(m,i),v.attr("text-anchor",c)}),i.exit().remove()}(o,n,{className:u[0]},t._dependencies.smartLabel)}}),this}}],[{key:"defaultConfig",value:function(){return cg}},{key:"formalName",value:function(){return"text"}}]),t}(),hg=function(e){var t=void 0,n=e.container,r=e.points,i=e.transition,a=e.className,o=i.duration,u=i.effect,c=i.disabled,l=cf(n);l.attr("class",a);var s=l.selectAll("g").data(r,e.keyFn),f=s.enter().append("g").attr("transform",function(e){return"translate("+e.enter.x+","+e.enter.y+")"});t=s.merge(f).each(function(e){!function e(t,n){var r=cf(n),i=t.shape,a=t.size,o=t.update;if(i instanceof Promise)i.then(function(r){t.shape=r,e(t,n)});else if(i instanceof Element){var u=i.cloneNode(!0);if("img"===u.nodeName.toLowerCase()){var c=u.src||u.href;(u=document.createElementNS("http://www.w3.org/2000/svg","image")).setAttribute("href",c)}var l=cf(u);"path"===u.nodeName||"image"===u.nodeName?l.attr("transform","scale("+a/100+")"):(l.attr("height",a),l.attr("width",a)),l.attr("x",-a/2),l.attr("y",-a/2),cf(r.node().appendChild(u))}else if("string"==typeof i){var s;s=function(e){return!!(/^[mzlhvcsqta]\s*[-+.0-9][^mlhvzcsqta]+/i.test(e)&&/[\dz]$/i.test(e)&&e.length>4)}(i)?i:Qc(i).size(a)(o),lf(r,"path",function(e){return[e]}).attr("d",s)}else t.shape="circle",e(t,n)}(e,this)}),(t=c?t:t.transition().duration(c?0:i.duration)).attr("transform",function(e){return"translate("+e.update.x+","+e.update.y+")"}).each(function(e){var t=e.style,n=cf(this);Ac(t,function(e){return n.style(e,t[e])}),n.attr("class",""+a),n.classed(e.className,!0)});var h=s.exit();c?h.remove():h.transition().ease(Mc[u]).duration(o).on("end",function(){cf(this).remove()}).style("fill-opacity",0).style("stroke-opacity",0)},dg={defClassName:"layer-point",className:"",classPrefix:"muze",defColorStyle:"stroke",interaction:{highlight:[{type:"fill",intensity:[0,0,-20,0]}],fade:[{type:"fill",intensity:[0,0,20,0]}],focus:[{type:"fill",intensity:[0,0,20,0]}]},innerPadding:.1,nearestPointThreshold:10,transform:{type:"identity"},transition:{effect:"cubic",duration:1e3},encoding:{size:{value:30},color:{},shape:{value:"circle"},x:{},y:{},strokeOpacity:{value:.5},fillOpacity:{value:.5}},shapes:["circle","cross","diamond","square","star","wye","triangle"],sizes:[20,30,40,50,60,70]},pg=(n(29),function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,i=!1,a=void 0;try{for(var o,u=e[Symbol.iterator]();!(r=(o=u.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){i=!0,a=e}finally{try{!r&&u.return&&u.return()}finally{if(i)throw a}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}),yg=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),gg=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(r)));return a._voronoi=new Nc,a._bandScale=nl.band(),a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,qy),yg(t,[{key:"elemType",value:function(){return"g"}},{key:"translatePoints",value:function(e,t,n){for(var r=this,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=[],o=t.size,u=t.shape,c=t.color,l=t.x,s=t.y,f=o.field,h=o.value,d=u.field,p=l.field,y=s.field,g=n.size,v=n.shape,m=this.data().getFieldsConfig(),b=m[p]&&m[p].def.type===Ma.FieldType.DIMENSION,_=m[y]&&m[y].def.type===Ma.FieldType.DIMENSION,x=b?Ed.X:_?Ed.Y:null,w=c&&c.field,k=m[w]&&m[w].index,E=this._store.get("measurement"),S=m[d]&&m[d].index,O=m[f]&&m[f].index,M=n.color,C=i.offset,T=C.x,P=C.y,A=function(i,o){var u=e[i],l=u._data,s=h instanceof Function?h(u,i):g.getSize(l[O]),f=v.getShape(l[S]),d=[Ed.X,Ed.Y].map(function(e){var r=null===u[e]?void 0:u[e],i=e===Ed.X?E.width:E.height;return t[e].field?n[e].getScaleValue(r):i/2}),p=pg(d,2),y=p[0],m=p[1];y+=T,m+=P;var b=Ny({datum:u,index:i},{colorEncoding:c,colorAxis:M,colorFieldIndex:k}),_=b.color,w=b.rawColor,C={fill:_,stroke:_};if(!isNaN(y)&&!isNaN(m)){var A={enter:{x:y,y:m},update:{x:y,y:m},shape:f,size:Math.abs(s),meta:{stateColor:{},originalColor:w,colorTransform:{}},style:C,_data:l,_id:u._id,source:u._data,rowId:u._id};A.className=Iy(u,i,e,r),a.push(A),r.cachePoint(u[x],A)}},N=0,j=e.length;N<j;N++)A(N);return a=Ly(this,a)}},{key:"render",value:function(e){var t=this,n=0,r=void 0,i=this.config(),a=this._store.get("transformedData").map(function(e){return e.key}),o=i.transition,u=i.className,c=i.defClassName,l=i.classPrefix,s=this._store.get("normalizedData"),f=cf(e),h=Tc(c,this.id(),l);return this._points=[],this._pointMap={},f.classed(h.join(" "),!0).classed(u,!0),this._points=this.generateDataPoints(s,a),lf(e,"g",this._points,null,{update:function(e,i){n=Math.max.apply(Math,[n].concat(function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(i.map(function(e){return e.size})))),r=""+h[0],t.constructor.drawFn()({container:e.node(),points:i,className:r,transition:o,keyFn:function(e){return e._id}})}},function(e){return e[0]._id}),this._maxSize=2*Math.sqrt(n/Math.PI),Dy(this._voronoi,this._points),this}},{key:"generateDataPoints",value:function(e,t){var n=this,r=this.config().encoding,i=this.axes(),a=zy(this,t),o=pg(a,2),u=o[0],c=o[1],l=u.offsetValues||[],s=c.offsetValues||[];return e.map(function(e,t){var a=n.getMeasurementConfig(l[t],s[t],u.span,c.span);return n.translatePoints(e,r,i,a)}).filter(function(e){return e.length})}},{key:"getMeasurementConfig",value:function(e,t,n,r){return{offset:{x:(e||0)+n/2,y:(t||0)+r/2},span:{x:n,y:r}}}},{key:"getNearestPoint",value:function(e,t){var n=Math.max(this._maxSize,this.config().nearestPointThreshold);if(!this.data())return null;var r=this._voronoi.find(e,t,n),i=r&&r.data.data.update,a=r?Math.sqrt(r.data.data.size/Math.PI):0;if(r){var o=r.data.data,u=o._data,c=o._id;return{id:this.getIdentifiersFromData(u,c),dimensions:[{x:i.x,y:i.y,width:a,height:a}],layerId:this.id()}}return null}}],[{key:"defaultConfig",value:function(){return dg}},{key:"defaultPolicy",value:function(e,t){var n=qy.defaultPolicy(e,t),r=n.encoding,i=n.transform,a=r.color&&r.color.field;return a&&(i.groupBy=a),n}},{key:"formalName",value:function(){return"point"}},{key:"drawFn",value:function(){return hg}}]),t}(),vg={classPrefix:"muze",defClassName:"layer-bar",className:"",interaction:{highlight:[{type:"fill",intensity:[0,0,-15,0]}],fade:[{type:"fill",intensity:[0,0,15,0]}],focus:[{type:"fill",intensity:[0,0,15,0]}]},transform:{type:"stack"},transition:{effect:"cubic",duration:1e3},innerPadding:.1,encoding:{color:{},x:{},y:{},x0:{},y0:{}},states:{highlight:{className:"muze-layer-bar-highlight"},fadeout:{className:"muze-layer-bar-fadeout"},selected:{className:"muze-layer-bar-selected"}}},mg=(n(31),function(e,t,n,r){var i="x"===e?"width":"height",a=[n[e+"FieldType"],t[e+"Axis"]],o=a[0],u=a[1],c=n.transformType,l=n.sizeEncoding,s=n.sizeConfig,f=n.measurement,h=l.value,d=0,p=void 0,y=0,g=0;if(void 0!==o)if(n[e+"0Field"]){var v=r[e],m=r[e+"0"],b=void 0,_=void 0;if(null===v||null===m)return{enterSpace:void 0,enter:void 0,pos:void 0,space:void 0};o===Ma.FieldType.MEASURE||o===Ma.DimensionSubtype.TEMPORAL?(b=Math.min(v,m),_=Math.max(v,m)):(b=v,_=m);var x="x"===e?[b,_]:[_,b];p=u.getScaleValue(x[0])+u.getUnitWidth()/2,y=Math.abs(u.getScaleValue(x[1])-p)+u.getUnitWidth()/2,d=p,g=0}else if(o===Ma.DimensionSubtype.CATEGORICAL||o===Ma.DimensionSubtype.TEMPORAL){if(p=u.getScaleValue(r[e])+(s["x"===e?"barWidthOffset":"barHeightOffset"]||0),y=s["x"===e?"barWidth":"barHeight"],void 0!==h){var w=h*y;y-=w,p+=w/2}d=p,g=y}else{var k=u.getScaleValue(0),E=u.getScaleValue(r[e]),S=u.getScaleValue(r[e+"0"]);g=0,"x"===e?(p=r[e]<0||c===md?E:k,y=Math.abs(p-(c===md?S:r[e]>=0?E:k))):(p=c===md||r[e]>=0?E:k,y=Math.abs(p-(c===md?S:r[e]>=0?k:E))),d=k}else p=0,y=f[i];return{enterSpace:g,enter:d,pos:p,space:y}}),bg=function(e,t,n){var r={xAxis:n.x,yAxis:n.y},i=mg("x",r,t,e),a=i.enterSpace,o=i.enter,u=i.pos,c=i.space,l=mg("y",r,t,e),s=l.enterSpace;return{enter:{x:o,y:l.enter,width:a,height:s},update:{x:u,y:l.pos,width:c,height:l.space}}},_g=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,i=!1,a=void 0;try{for(var o,u=e[Symbol.iterator]();!(r=(o=u.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){i=!0,a=e}finally{try{!r&&u.return&&u.return()}finally{if(i)throw a}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},xg=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),wg=Ma.FieldType.MEASURE,kg=nl.band,Eg=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(r)));return a._bandScale=kg(),a._plotPadding={x:0,y:0},a._plotSpan={x:0,y:0},a._pointMap={},a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,qy),xg(t,[{key:"elemType",value:function(){return"rect"}},{key:"calculateDomainFromData",value:function(e,n,r){var i=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var a=Object.getPrototypeOf(t);return null===a?void 0:e(a,n,r)}if("value"in i)return i.value;var o=i.get;return void 0!==o?o.call(r):void 0}(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"calculateDomainFromData",this).call(this,e,n,r);return["x","y"].forEach(function(e){n[e+"FieldType"]===wg&&i[e]&&(n[e+"0Field}"]?i[e]=i[e].sort(function(e,t){return e-t}):i[e][0]=Math.min(i[e][0],0))}),i}},{key:"translatePoints",value:function(e,t){return function(e,t,n){for(var r=[],i=e.config().encoding,a=e.axes(),o=a.color,u=e.data().getFieldsConfig(),c=i.color,l=c.field,s=i.size||{},f=e.encodingFieldsInf(),h=f.x0Field,d=f.y0Field,p=f.xFieldSubType,y=f.yFieldSubType,g=e._store.get("measurement"),v=p===Ma.DimensionSubtype.CATEGORICAL||p===Ma.DimensionSubtype.TEMPORAL,m=y===Ma.DimensionSubtype.CATEGORICAL||y===Ma.DimensionSubtype.TEMPORAL,b=v?"x":m?"y":null,_=e.transformType(),x=l&&u[l]&&u[l].index,w=0,k=t.length;w<k;w++){var E=t[w],S={},O={},M=bg(E,{xFieldType:p,yFieldType:y,x0Field:h,y0Field:d,transformType:_,measurement:g,sizeConfig:n,sizeEncoding:s},a),C=Ny({datum:E,index:w},{colorEncoding:c,colorAxis:o,colorFieldIndex:x}),T=C.color,P=C.rawColor;S.fill=T,O.stateColor={},O.originalColor=P,O.colorTransform={};var A=M.update;if(!isNaN(A.x)&&!isNaN(A.y)&&void 0!==E._id){var N=null;(N={enter:M.enter,update:A,style:S,_data:E._data,_id:E._id,source:E._data,rowId:E._id,meta:O}).className=Iy(E,w,t,e),r.push(N),e.cachePoint(E[b],N)}}return Ly(e,r)}(this,e,t)}},{key:"render",value:function(e){var t=this.config(),n=t.transition,r=this._store,i=r.get("normalizedData"),a=r.get("transformedData").map(function(e){return e.key}),o=this.data().getFieldsConfig(),u=this.axes(),c=u.y&&u.y.scale().range()[0],l=u.x&&u.x.scale().range()[1],s=t.defClassName,f=Tc(s,this.id(),t.classPrefix),h=t.className,d=cf(e),p=Object.values(o).filter(function(e){return e.def.type===Ma.FieldType.DIMENSION}).map(function(e){return e.index});return d.classed(f.join(" "),!0),d.classed(h,!0),function(e,t,n){var r=lf(Xl(e),"clipPath",[1],"#"+n);lf(r,"rect",[1]).attr("x",t.x).attr("y",t.x).attr("width",t.width).attr("height",t.height),r.attr("clip-path","url(#"+n+")")}(e,{x:0,y:0,width:l,height:c},"id-"+this.id()),this._points=this.generateDataPoints(i,a),pf({data:this._points,container:e,selector:"g",append:"g",each:function(e,t,r){var i=(f[0]+"-"+(a[r]||r)).toLowerCase();t.style("display","block"),function(e){var t=e.points,n=e.container,r=e.keyFn;lf(n,"rect",t,null,{enter:function(e,t){!function(e,t){var n=e,r=t.enter||{};Object.entries(r).forEach(function(e){return!isNaN(e[1])&&n.attr(e[0],e[1])})}(e,t)},update:function(t,n,r){!function(e,t,n,r){var i=r.transition,a=i.duration,o=i.disabled,u=i.effect,c=e,l=o?c:c.transition().duration(a).ease(Mc[u]),s=t.update||t,f=t.style||{};t.className&&c.classed(t.className,!0),Object.entries(s).forEach(function(e){return!isNaN(e[1])&&l.attr(e[0],e[1])}),Object.entries(f).forEach(function(e){return c.style(e[0],e[1])})}(t,n,0,e)}},r)}({container:t.node(),points:e,className:i,transition:n,style:{},keyFn:function(e){return p.map(function(t){return e._data[t]}).join("-")}})}}),this}},{key:"generateDataPoints",value:function(e,t){var n=this,r=zy(this,t),i=_g(r,2),a=i[0],o=i[1],u=a.offsetValues||[],c=o.offsetValues||[];return this._plotSpan={x:a.groupSpan||0,y:o.groupSpan||0},this._plotPadding={x:a.padding||0,y:o.padding||0},this._pointMap={},e.map(function(e,t){return n.translatePoints(e,{barWidth:a.span,barWidthOffset:u[t]||0,barHeight:o.span,barHeightOffset:c[t]||0})})}},{key:"getPlotPadding",value:function(){return this._plotPadding}},{key:"getNearestPoint",value:function(e,t){if(!this.data())return null;var n=void 0,r=void 0,i=void 0,a=void 0,o=void 0,u=void 0,c=null,l=this.data(),s=l.getData(),f=l.getFieldsConfig(),h=this.axes(),d=s.data,p=this._pointMap,y=this.encodingFieldsInf(),g=y.xField,v=y.yField,m=y.xFieldSubType,b=y.yFieldSubType;m===Ma.FieldType.MEASURE?(n=h.y.invert(t),a=f[v].index,i=b):(n=h.x.invert(e),a=f[g].index,i=m),i===Ma.DimensionSubtype.CATEGORICAL&&(r=p[n]),i===Ma.DimensionSubtype.TEMPORAL&&(r=p[n=(o=[].concat(function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(new Set(d.map(function(e){return e[a]})))))[Cc(o,n)]]);var _=r&&r.length;r&&r.sort(function(e,t){return e.update.y-t.update.y});for(var x=0;x<_;x++){var w=r[x],k=w.update;if(e>=k.x&&e<=k.width+k.x&&t>=k.y&&t<=k.height+k.y){c=w;break}c=null}var E=c&&c._data;return E&&(u=this.getIdentifiersFromData(E,c._id)),c?{dimensions:[c.update],id:u,layerId:this.id()}:c}},{key:"getPlotSpan",value:function(){return this._plotSpan}}],[{key:"formalName",value:function(){return"bar"}},{key:"defaultConfig",value:function(){return vg}},{key:"defaultPolicy",value:function(e,t){var n=qy.defaultPolicy(e,t),r=n.encoding.color.field,i=n.transform;return r&&(i.groupBy=r),n}}]),t}(),Sg={defClassName:"layer-tick",className:"",classPrefix:"muze",interaction:{highlight:[{type:"stroke",intensity:[0,0,-15,0]}],fade:[{type:"stroke",intensity:[0,0,15,0]}],focus:[{type:"stroke",intensity:[0,0,15,0]}]},innerPadding:.1,transform:{type:"identity"},transition:{effect:"cubic",duration:1e3},encoding:{color:{},x:{},y:{},x0:{},y0:{},strokeOpacity:{value:.5},fillOpacity:{value:.5}},states:{highlight:{className:"muze-layer-tick-highlight"},fadeout:{className:"muze-layer-tick-fadeout"},selected:{className:"muze-layer-tick-selected"}}},Og=function(e){var t=e.points,n=e.container,r=e.keyFn,i=e.className,a=cf(n),o=a.selectAll("path").data(t,r),u=o.enter().append("path");return a.attr("class",i||""),u.each(function(e){var t=cf(this),n=e.enter||{};Object.entries(n).forEach(function(e){return!isNaN(e[1])&&t.attr(e[0],e[1])})}),o.exit().remove(),o.merge(u).each(function(e){var t=cf(this),n=e.update,r=e.style||{},i=void 0!==n.x0?n.x0:n.x,a=void 0!==n.y0?n.y0:n.y,o="M "+n.x+" "+n.y+" L "+i+" "+a;e.className&&t.classed(e.className,!0),t.attr("d",o),Object.entries(r).forEach(function(e){return t.style(e[0],e[1])})})},Mg=(n(33),function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}()),Cg=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,gg),Mg(t,[{key:"elemType",value:function(){return"path"}},{key:"translatePoints",value:function(e,t,n){for(var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=[],a=Fy(n),o=a.xAxis,u=a.yAxis,c=this.data().getFieldsConfig(),l=this.encodingFieldsInf(),s=l.xField,f=l.yField,h=l.x0Field,d=l.y0Field,p=l.xFieldType,y=l.yFieldType,g=p===Ma.FieldType.DIMENSION,v=y===Ma.FieldType.DIMENSION,m=g?Ed.X:v?Ed.Y:null,b=t.color,_=b&&b.field,x=c[_]&&c[_].index,w=this._store.get("measurement"),k=n.color,E=r.offset,S=E.x,O=E.y,M=r.span,C=M.x,T=M.y,P=0,A=e.length;P<A;P++){var N=void 0,j=void 0,F=void 0,I=void 0,D=e[P],R=D._data;s&&(j=(N=o.getScaleValue(D.x)+S)+C),f&&(F=null!==(I=u.getScaleValue(D.y)+O)?I+T:null),s||(N=0,j=w.width,isNaN(I)||(F=I+=T/2)),f||(I=0,F=w.height,j=N+=C/2),h&&(j=o.getScaleValue(D.x0)+C,I+=T/2,F-=T/2),d&&(F=u.getScaleValue(D.y0)+T,N+=C/2,j-=C/2);var L={},z={},B=Ny({datum:D,index:P},{colorEncoding:b,colorAxis:k,colorFieldIndex:x}),U=B.color,H=B.rawColor;if(L.stroke=U,z.stateColor={},z.originalColor=H,z.colorTransform={},!isNaN(N)&&!isNaN(I)){var V={enter:{},update:{x:N,y:I,x0:j,y0:F},style:L,_data:R,_id:D._id,source:R,rowId:D._id,meta:z};V.className=Iy(D,P,e,this),i.push(V),this.cachePoint(D[m],V)}}return Ly(this,i)}},{key:"getMeasurementConfig",value:function(e,t,n,r){return{offset:{x:e||0,y:t||0},span:{x:n,y:r}}}}],[{key:"defaultConfig",value:function(){return Sg}},{key:"formalName",value:function(){return"tick"}},{key:"drawFn",value:function(){return Og}}]),t}();function Tg(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}var Pg,Ag=function(e){for(var t in e)"string"==typeof e[t]&&(e[t]={field:e[t]})},Ng=function(){var e={},t={setLayerRegistry:function(e){t._layerRegistry=e},getSerializedConf:function(t,n){var r=void 0,i=e[t],a=zc({},n);if(i)r=i.map(function(e){var n={};return function e(t,n,r,i){for(var a in n)if(Object.hasOwnProperty.call(n,a)){var o=void 0,u=void 0,c=n[a];_c(c)?(t[a]={},e(t[a],c,r,i)):"string"==typeof c&&(o=c.split("."))&&o[0]===i?void 0!==(u=Xc.apply(void 0,[r].concat(Tg(o.slice(1,o.length)))))&&(t[a]=u):t[a]=c}}(n,e,a,t),Ag(n.encoding),n});else{var o=a.encoding;Ag(o),r=a}return r},getLayerInstance:function(e){var n=t._layerRegistry,r=(e=e instanceof Array?e:[e]).map(function(e){return n[e.mark].create()});return 1===r.length?r[0]:r},composeLayers:function(t,n){e[t]=n},sanitizeLayerConfig:function(e){var t=zc({},e);return Ag(t.encoding),t}};return t}();function jg(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Fg,Ig=(jg(Pg={},"area",tg),jg(Pg,"arc",ug),jg(Pg,"line",Ky),jg(Pg,"text",fg),jg(Pg,"point",gg),jg(Pg,"tick",Cg),jg(Pg,"bar",Eg),jg(Pg,"base",qy),Pg),Dg=n(6),Rg="x",Lg="y",zg="rows",Bg="columns",Ug="col",Hg="row",Vg="color",Wg="shape",qg="size",Gg="left",Yg="right",$g="cell",Xg="xAxes",Kg="yAxes",Qg="entryCell",Jg="exitCell",Zg="radius",ev="angle",tv="Primary",nv="Secondary";function rv(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var iv=(rv(Fg={},"config",{}),rv(Fg,zg,[]),rv(Fg,Bg,[]),rv(Fg,Vg,""),rv(Fg,Wg,""),rv(Fg,qg,""),rv(Fg,"detail",""),rv(Fg,"layers",""),rv(Fg,"transform",[]),Fg),av=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),ov=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return av(e,[{key:"data",value:function(){throw new Error(Lc.INTERFACE_IMPL)}},{key:"config",value:function(){throw new Error(Lc.INTERFACE_IMPL)}},{key:"serialize",value:function(){throw new Error(Lc.INTERFACE_IMPL)}},{key:"measurement",value:function(){throw new Error(Lc.INTERFACE_IMPL)}}]),e}(),uv=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),cv=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return uv(e,[{key:"type",value:function(){throw new Error(Lc.INTERFACE_IMPL)}},{key:"toString",value:function(){throw new Error(Lc.INTERFACE_IMPL)}}]),e}(),lv=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),sv=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(r)));return a.vars(r),a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,cv),lv(t,[{key:"vars",value:function(){return arguments.length?(this._vars=arguments.length<=0?void 0:arguments[0],this):this._vars}},{key:"data",value:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.length?(this.vars().forEach(function(e){return e.data(t[0])}),this):this._data}},{key:"getMembers",value:function(){return this.vars().map(function(e){return e.getMembers()[0]})}},{key:"type",value:function(){return this.vars()[0].type()}},{key:"toString",value:function(){return this.vars().map(function(e){return e.toString()}).join(",")}},{key:"numberFormat",value:function(){return this.vars()[0].numberFormat()}},{key:"format",value:function(e){return this.vars()[0].format(e)}},{key:"subtype",value:function(){return this.vars()[0].subtype()}},{key:"getMinDiff",value:function(){return this.vars()[0].getMinDiff()}}]),t}(),fv=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),hv=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n.oneVar(e),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,cv),fv(t,[{key:"oneVar",value:function(){return arguments.length?(this._oneVar=arguments.length<=0?void 0:arguments[0],this):this._oneVar}},{key:"data",value:function(){return arguments.length?(this._data=arguments.length<=0?void 0:arguments[0],this):this._data}},{key:"toString",value:function(){return this.oneVar()}},{key:"numberFormat",value:function(){return"measure"===this.type()?this.data().getFieldspace().getMeasure()[this.oneVar()]._ref.numberFormat():function(e){return e}}},{key:"format",value:function(e){if(e&&"temporal"===this.subtype()){var t=this.data().getFieldspace().getDimension()[this.oneVar()]._ref.schema.format,n=new Ma.DateTimeFormatter(t);e=e.map(function(e){return n.getNativeDate(e)})}return e}},{key:"getMembers",value:function(){return[this.oneVar()]}},{key:"type",value:function(){return this.data().getFieldsConfig()[this.oneVar()].def.type}},{key:"subtype",value:function(){var e=this.data().getFieldsConfig()[this.oneVar()].def;return e.subtype||e.type}},{key:"getMinDiff",value:function(){return this.data().getFieldspace().fieldsObj()[this.oneVar()].getMinDiff()}},{key:"equals",value:function(e){return this.oneVar()===e.oneVar()}}]),t}(),dv=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,i=!1,a=void 0;try{for(var o,u=e[Symbol.iterator]();!(r=(o=u.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){i=!0,a=e}finally{try{!r&&u.return&&u.return()}finally{if(i)throw a}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")};function pv(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}var yv=function(e,t){var n=[];return t&&t.forEach(function(t){t instanceof sv?(n.push(t),t.data(e)):n.push(new hv(t).data(e))}),n},gv=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,i=!1,a=void 0;try{for(var o,u=e[Symbol.iterator]();!(r=(o=u.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){i=!0,a=e}finally{try{!r&&u.return&&u.return()}finally{if(i)throw a}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},vv=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),mv=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return vv(e,[{key:"createAxis",value:function(){throw new Error(Lc.INTERFACE_IMPL)}},{key:"setCommonDomain",value:function(){throw new Error(Lc.INTERFACE_IMPL)}},{key:"getLayerConfig",value:function(){throw new Error(Lc.INTERFACE_IMPL)}},{key:"fieldInfo",value:function(){return arguments.length?(this._fieldInfo=zc(this._fieldInfo||{},arguments.length<=0?void 0:arguments[0]),this):this._fieldInfo}},{key:"fieldSanitizer",value:function(e,t){return this.fieldInfo(function(e,t){var n=[zg,Bg].map(function(n){var r=function(e,t){var n=[],r=e[t];return r[0]instanceof Array?(n[0]=r[0]||[],n[1]=r[1]||[]):n[0]=r,n}(t,n),i=[yv(e,r[0])];return r[1]&&(i[1]=yv(e,r[1])),function(e,t){var n=[[],[]],r=[[],[]],i=[[],[]],a=[[],[]];e.forEach(function(e,t){e.forEach(function(e){"dimension"===e.type()?(n[t].push(e),"temporal"===e.subtype()?i[t].push(e):a[t].push(e)):r[t].push(e)})});var o=r[0].length+(r[1]?r[1].length:0);if(!e[1]&&(r[1]=t===Bg?r[0]:[],r[0]=t!==Bg?r[0]:[],n[1]=[],n[0]=n[0],0===o)){var u=[].concat(pv(n[0]),pv(n[1]));t===Bg?(n[1]=u[u.length-1]?[u[u.length-1]]:[],u.splice(-1,1)):n[1]=[],n[0]=[].concat(pv(u))}return n[0].length&&n[1].length&&o>0&&(n[0]=[].concat(pv(n[0]),pv(n[1])),n[1]=[]),{fields:n.map(function(e,t){return 1===t?r[t].concat(n[t]):n[t].concat(r[t])}),dimensions:[].concat(pv(n[0]),pv(n[1])),measures:[].concat(pv(r[0]),pv(r[1])),temporal:[].concat(pv(i[0]),pv(i[1])),categorical:[].concat(pv(a[0]),pv(a[1]))}}(i,n)}),r=dv(n,2),i=r[0],a=r[1],o=i.fields,u=i.dimensions,c=i.measures,l=i.temporal,s=i.categorical,f=a.fields,h=a.dimensions,d=a.measures;return{rows:o,rowDimensions:u,rowMeasures:c,rowTemporalFields:l,rowCategoricalFields:s,columns:f,columnTemporalFields:a.temporal,columnCategoricalFields:a.categorical,columnDimensions:h,columnMeasures:d}}(e,t)),this.fieldInfo()}},{key:"axisFrom",value:function(){return arguments.length?(this._axisFrom=arguments.length<=0?void 0:arguments[0],this):this._axisFrom}},{key:"headerFrom",value:function(){return arguments.length?(this._headerFrom=arguments.length<=0?void 0:arguments[0],this):this.__headerFrom}},{key:"setAxisAndHeaders",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments[1],n=Wv(Hg,t.rows,e),r=gv(n,2),i=r[0],a=r[1],o=Wv("column",t.columns,e),u=gv(o,2),c=u[0],l=u[1];return this.axisFrom({row:a,column:l}),this.headerFrom({row:i,column:c}),this}}]),e}(),bv={linear:Dp,band:Lp,temporal:Up,size:by,color:fy,shape:ky},_v={dimension:f.BAND,categorical:f.BAND,measure:f.LINEAR,temporal:f.TIME},xv=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,i=!1,a=void 0;try{for(var o,u=e[Symbol.iterator]();!(r=(o=u.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){i=!0,a=e}finally{try{!r&&u.return&&u.return()}finally{if(i)throw a}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")};function wv(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}var kv=function(e,t,n){var r=n.labelManager;return new(0,bv[_v[t.subtype()]])(e,{labelManager:r})},Ev=function(e,t,n,r){var i=void 0,a=[],o=t.fields,u=t.index,c=n.cacheMaps[e+"AxesMap"];o.forEach(function(t,r){i=Bv(e,u,_v[t.subtype()]);var o=function(e,t,n){var r,i=e.index,a=e.axisIndex,o=e.axisType,u=n.config,c=n.position,l=u.axes&&u.axes[o]||{};r="both"===c?(o===Lg?[s.LEFT,s.RIGHT]:[s.TOP,s.BOTTOM])[a]:c;var f={id:o+"-"+i+"-"+a,name:t.toString(),field:t.toString(),labels:{rotation:0},numberFormat:t.numberFormat(),orientation:r,type:_v[t.subtype()]};return l.tickValues=t.format(l.tickValues),l.domain=t.format(l.domain),zc(f,l)}({index:u,axisIndex:r,axisType:e},t,n);if(c.has(i)){var l=c.get(i);l[r]=l[r]?l[r]:kv(o,t,n),l[r]._rotationLock=!1,l[r]&&l[r].config(o).domain(o.domain||[])}else{var f=kv(o,t,n);a.push(f)}}),a.length&&c.set(i,a);var l=!0,f=!1,h=void 0;try{for(var d,p=c.entries()[Symbol.iterator]();!(l=(d=p.next()).done);l=!0){var y=d.value;xv(y,1)[0]===i&&r.add(i)}}catch(e){f=!0,h=e}finally{try{!l&&p.return&&p.return()}finally{if(f)throw h}}return c.get(i)},Sv=function(e,t){for(var n=0,r=-1;-1===r&&n<e.length;)e[n].toString()===t.toString()&&(r=n),n++;return r},Ov=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),Mv=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,mv),Ov(t,[{key:"createAxis",value:function(e,t){var n=this,r={},i=e.axes,a=t.projections,o=t.indices,u=a.rowFields,c=a.columnFields,l=[{fields:u,index:o.rowIndex},{fields:c,index:o.columnIndex}],s=i.x||[],f=i.y||[];return[u,c].forEach(function(t,i){var a=0===i?Hg:"column",o=0===i?Lg:Rg;t.length>1?e.position="both":e.position=n.axisFrom()[a],r[o]=Ev(o,l[i],e,o===Rg?s:f)}),r}},{key:"getFacetsAndProjections",value:function(e,t){for(var n=[],r=[],i=0,a=[],o=[],u=e[0],c=e[1],l=u.length,s=c.length,f=this.axisFrom(),h=0;h<l;h++){var d=[u[h]],p=u[h];if("measure"===p.type()){var y=c[i];y&&"measure"===y.type()&&(i++,d=[p,y]),r.push(d)}else n.push(p),a.push(p)}if(s>i)for(var g=i;g<s;g++){var v=c[g],m=[v];"measure"===v.type()?r.push(m):(n.push(v),o.push(v))}if((a.length||o.length)&&!r.length)if(f[t=t===Ug?"column":t]!==Gg&&"top"!==f[t]||!a.length){var b=o[0];r=[[b]];var _=Sv(a,b);_>-1&&(r=[[b,b]],a.splice(_,1)),o.splice(0,1)}else{var x=a.length-1,w=a[x];r=[[w]];var k=Sv(o,w);k>-1&&(r=[[w,w]],o.splice(k,1)),a.splice(x,1)}return{facets:n=(n=[].concat(a,o)).filter(function(e,t,n){return t===n.findIndex(function(t){return t.toString()===e.toString()})}),projections:r}}},{key:"fieldSanitizer",value:function(e,n){return function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var a=Object.getPrototypeOf(t);return null===a?void 0:e(a,n,r)}if("value"in i)return i.value;var o=i.get;return void 0!==o?o.call(r):void 0}(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"fieldSanitizer",this).call(this,e,n)}},{key:"getRetinalFieldsDomain",value:function(e,t){var n=e.groupedModel,r={};for(var i in t)if({}.hasOwnProperty.call(t,i)){var a=t[i],o=a.field;if(!a.domain&&o){var u=Vv(n,o);r[o]=u}}return r}},{key:"serializeLayerConfig",value:function(e){var t=[];return e.length&&e.forEach(function(e,n){var r=Ng.sanitizeLayerConfig(e);r.order=n,t.push(r)}),t}},{key:"getLayerConfig",value:function(e,t){var n=[],r=e.columnFields,i=e.rowFields;return r.forEach(function(e){var r=e.toString();i.forEach(function(i){var a,o=i.toString(),u={x:{field:r},y:{field:o}},c=i.subtype(),l=function(e,t){return"categorical"===e||"categorical"===t?"bar":"temporal"===e||"temporal"===t?"line":"point"}(e.subtype(),c),s=[{mark:l,def:{mark:l,encoding:u}}],f=function(e,t,n){return n.filter(function(n){var r,i,a,o=n instanceof Array?n:[n],u=(r=[]).concat.apply(r,wv(o.map(function(e){return e.encoding}).filter(function(e){return void 0!==e})));if(!u.length)return!0;var c=(i=[]).concat.apply(i,wv(u.map(function(e){return[e.x&&e.x.field,e.x0&&e.x0.field]}))).filter(function(e){return void 0!==e&&null!==e}),l=(a=[]).concat.apply(a,wv(u.map(function(e){return[e.y&&e.y.field,e.y0&&e.y0.field]}))).filter(function(e){return void 0!==e&&null!==e});if(!c.length&&!l.length)return!0;var s=!!c.length&&c.every(function(t){return-1!==e.indexOf(t)}),f=!!l.length&&l.every(function(e){return-1!==t.indexOf(e)});return c.length&&l.length?s&&f:s||f})}(e.getMembers(),i.getMembers(),t||[]);a=f.length?f.map(function(e){var t=zc(zc({},s[0].def),e),n=Ng.getSerializedConf(t.mark,t);return{mark:t.mark,order:t.order,def:n}}):s,n.push.apply(n,function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(a))})}),n}}],[{key:"type",value:function(){return"cartesian"}}]),t}(),Cv=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function Tv(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}var Pv=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,mv),Cv(t,[{key:"createAxis",value:function(e,t){var n=e.axes,r=t.indices,i=r.rowIndex,a=r.columnIndex,o=n.pie||[];return o[i]=o[i]||[],o[i][a]=[],n.pie=o,n.x=null,n.y=null,n}},{key:"getFacetsAndProjections",value:function(e){for(var t=0,n=[],r=[],i=e[0],a=e[1],o=i.length,u=a.length,c=0;c<o;c++){var l=i[c];if("measure"===l.type()){var s=a[t++],f=s?[l,s]:[l];r.push(f)}else n.push(l)}if(u>t)for(var h=t;h<u;h++){var d=a[h],p=[d];"measure"===d.type()?r.push(p):n.push(d)}return{facets:n,projections:r}}},{key:"setCommonDomain",value:function(){return this}},{key:"layers",value:function(){return arguments.length?(this._layers=arguments.length<=0?void 0:arguments[0],this):this._layers}},{key:"fieldSanitizer",value:function(e,n){var r=[[],[]],i=[[],[]],a=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var a=Object.getPrototypeOf(t);return null===a?void 0:e(a,n,r)}if("value"in i)return i.value;var o=i.get;return void 0!==o?o.call(r):void 0}(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"fieldSanitizer",this).call(this,e,n),o=n.layers,u=a.rows,c=a.columns,l=o[0].encoding,s=l&&l.radius?l.radius.field:null,f=l&&l.angle?l.angle.field:null,h=[r,i];return[u,c].forEach(function(e,t){e.forEach(function(e,n){return e.forEach(function(e){e.toString()!==s&&e.toString()!==f&&"measure"!==e.type()&&h[t][n].push(e)})})}),i=[].concat(Tv(new Set(i))),r=[].concat(Tv(new Set(r))),this.fieldInfo({rows:r,columns:i}),this.fieldInfo()}},{key:"getRetinalFieldsDomain",value:function(e,t,n,r){var i=void 0,a=void 0,o=[],u=this.layers(),c=e.parentModel,l=c.getFieldsConfig(),s={};if(u&&u[0]){var f=u[0].def.encoding||{};[Zg,ev,qg,Vg].forEach(function(e){var t=f[e]?f[e].field:"",n=l[t]&&"measure"===l[t].def.type;e===qg&&n&&(i=t),e===Vg&&(a=t),l[t]&&!n&&o.push(t)})}if(i&&(s[i]=c.groupBy(n,function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}({},i,"sum")).getFieldspace().fieldsObj()[i].domain()),a){var h=c.groupBy([].concat(Tv(n),o),r.measures);s[a]=h.getFieldspace().fieldsObj()[a].domain()}return s}},{key:"getLayerConfig",value:function(e,t){var n=[],r=e.columnFields,i=e.rowFields;return[].concat(Tv(r),Tv(i)).forEach(function(){var e={mark:"arc",def:{encoding:{}}};t&&t.length>0&&(e=zc(e,t[0])),n.push(e)}),0===n.length&&(n=t),this.layers(n),n}},{key:"serializeLayerConfig",value:function(e){var t=[];return e.length&&e.forEach(function(e){var n=Ng.getSerializedConf(e.mark,e);t.push({mark:e.mark,def:n})}),t}}],[{key:"type",value:function(){return"polar"}}]),t}(),Av=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),Nv=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,mv),Av(t,[{key:"createAxis",value:function(e){var t=e.fieldsConfig,n=e.config,r={};return[Vg,Wg,qg].forEach(function(e){r[""+e]=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.axisType,r=e.fieldsConfig,i=t.field,a=[],o=bv[n];return t.type=t.type?t.type:Hv(r,i||null),a.push(new o(t)),a}({axisType:e,fieldsConfig:t},n[e])}),r}},{key:"getLayerConfig",value:function(e,t){var n=[];return t.forEach(function(t){var r=t;[Vg,Wg,qg].forEach(function(t){if(e[t]&&e[t].field){var n=r.def;r.def instanceof Array?n.forEach(function(n){n.encoding=n.encoding||{},!n.encoding[t]&&(n.encoding[t]={}),n.encoding[t].field=e[t].field}):(n.encoding=n.encoding||{},!n.encoding[t]&&(n.encoding[t]={}),n.encoding[t].field=e[t].field)}}),n.push(r)}),n}},{key:"setCommonDomain",value:function(e){var t=e.domains,n=e.axes,r=e.encoding;return Object.entries(r).forEach(function(e){if(e[1]&&e[1].field){var r=e[0],i=e[1].field;i&&n[r].forEach(function(n){var r=t[i];!e[1].domain&&n.updateDomain(r)})}}),n}}],[{key:"type",value:function(){return"retinal"}}]),t}(),jv=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,i=!1,a=void 0;try{for(var o,u=e[Symbol.iterator]();!(r=(o=u.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){i=!0,a=e}finally{try{!r&&u.return&&u.return()}finally{if(i)throw a}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")};function Fv(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function Iv(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Dv,Rv=function(){return new jc(Iv({},0,0))},Lv=function(e){return[].concat(Fv(e[0]),Fv(e[1])).reduce(function(e,t){var n=t.type();return"measure"!==n&&"temporal"!==n||(e=!0),e},!1)},zv=function(){return{cellMap:new Map,xAxesMap:new Map,yAxesMap:new Map,entryCellMap:new Map,exitCellMap:new Map}},Bv=function(e,t,n){return e+"-axis-"+t+"-"+n},Uv=function(e,t,n,r){return e.length>0?e[0].map(function(i,a){return new n({type:"header"},{labelManager:r}).source(function(e,t,n){var r="";if(t===n-1&&e.length>n){for(var i=t;i<e.length-1;i++)r+=e[i].toString()+" / ";return r+e[e.length-1].toString()}return e[t]?e[t].toString():""}(t,a,e[0].length)).config({show:i.config().show})}):[]},Hv=function(e,t){var n="ordinal";return t&&"dimension"!==e[t].def.type&&(n="linear"),n},Vv=function(e,t){return e.getFieldspace().fields.find(function(e){return e._ref.name===t.toString()}).domain()},Wv=function(e,t,n){var r=n[e],i="",a=e===Hg?[Gg,Yg]:["bottom","top"],o=jv(t,2),u=o[0],c=o[1],l=function(e){return u.length?u[e].type():null},s=function(e){return c.length?c[e].type():null};return"dimension"===l(u.length-1)&&"dimension"===s(0)?(i=r?a[1-a.indexOf(r)]:a[1],r="column"===e&&u[u.length-1].toString()===c[0].toString()?"top":r||a[0]):"dimension"===s(c.length-1)?(i=e===Hg?Yg:"bottom",r=e===Hg?Yg:"bottom"):(i=e===Hg?Gg:"top",r=e===Hg?Gg:"top"),"measure"===l(u.length-1)&&"measure"===s(0)?r=e===Hg?Gg:"top":"measure"===s(0)?r=e===Hg?Yg:"bottom":"measure"===l(u.length-1)&&(r=e===Hg?Gg:"top"),[i,r]},qv=function(e,t,n){var r=t.fields,i=t.type,a=n.simpleEncoder.getFacetsAndProjections(r,i),o=a.facets,u=a.projections;return e.facets(Iv({},i+"Facets",o)),e.projections(Iv({},i+"Projections",u)),{facets:o,projections:u,fields:r}},Gv=function(e,t,n,r){var i=e||function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return new wf(e)}([]),a=(i=i.data(n,r)).enter().append(t).merge(i);return i.exit()&&i.exit().remove(),a};function Yv(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var $v=(Yv(Dv={},a.DRAG,{behaviours:[u.BRUSH],touch:!1}),Yv(Dv,a.HOVER,{behaviours:[u.HIGHLIGHT]}),Yv(Dv,a.LONGTOUCH,{behaviours:[u.SELECT],touch:!0}),Yv(Dv,a.TOUCHDRAG,{behaviours:[u.BRUSH],touch:!0}),Yv(Dv,a.CLICK,{behaviours:[u.SELECT],touch:!1}),Dv),Xv="config",Kv="data",Qv="axes",Jv="layerDef",Zv="width",em="height",tm="mount",nm="primaryXAxisUpdated",rm="primaryYAxisUpdated",im="secondaryXAxisUpdated",am="secondaryYAxisUpdated",om="transform",um="dataDomain",cm="layersCreated",lm="fields",sm="timeDiffs",fm="layerAxisIndex";function hm(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}var dm=function(e,t,n){var r=n,i=e._layerDeps;n||(r=Ng.getLayerInstance(t));var a={},o=Kc(r);return(t=Kc(t)).reduce(function(e,t,n){var r=o[n];return r.config(t),r.dependencies(i),t.name&&r.alias(t.name),a[r.alias()]=r,e},{}),a},pm=function(e,t){var n=e.config().encodingTransform||{},r=n.resolvable,i=[];if(r){var a=r(t);i=a.depArr,e.encodingTransform(a.fn)}else n instanceof Function&&e.encodingTransform(n);return i},ym=function(e,t,n){t.forEach(function(t){var r=t.id(),i={};Ac(e,function(t){var a=n[r];a&&e[t]&&(i[t]=e[t][a[t]||0])}),Object.keys(i).length&&t.axes(i)})},gm=function(e,t){var n={};return e.forEach(function(e){var r=e.config(),i=r.axis,a=r.encoding,o=e.id();["x","y"].forEach(function(e){var r,u=Pc(Xc(i,e),a[e]&&a[e].field);r=t[e]?t[e].findIndex(function(e){return-1!==e.getMembers().indexOf(u)}):0,!n[o]&&(n[o]={}),n[o][e]=r})}),n},vm=function(e,t,n){return e.filter(function(e){return("type"===t?e.constructor.formalName():e.alias())===n})},mm=function(e,t,n){e.filter(function(e){return("type"===t?e.config().mark:e.alias())!==n||(e.remove(),!1)})},bm=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,i=!1,a=void 0;try{for(var o,u=e[Symbol.iterator]();!(r=(o=u.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){i=!0,a=e}finally{try{!r&&u.return&&u.return()}finally{if(i)throw a}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")};function _m(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var xm,wm=f.LINEAR,km=function(e,t){var n=e.axes(),r=e.config().classPrefix;n&&(n.x&&n.x.length||n.y&&n.y.length)&&(function(e,t){var n=e.config(),r=e._layerDeps,i={width:e.width(),height:e.height()};["band","line"].forEach(function(a){var o=void 0,u=void 0,c=void 0;"band"===a?(o="bar",u=n.gridBands,c=e._gridbands):(o="tick",u=n.gridLines,c=e._gridlines),function(e,t,n){return["x","y"].map(function(r){return Pc(t[r]&&t[r].show,function(e,t){return t.constructor.type()===wm&&e}(t.show,e.axes()[r][0]))?function(e,t,n,r){var i,a,o=void 0,u=e.config(),c=u.classPrefix,l=u.gridLines,s=u.gridBands,f=l.color,h=l.zeroLineColor,d="band"===n?s.defClassName:l.defClassName,p=s[r].color,y=t[r][0],g=y.constructor.type()===wm;return"band"===n&&g?(_m(a={},r,r+"value"),_m(a,r+"0",r+"value0"),o=a):o=_m({},r,g?r+"value":r+"dim"),o.color={value:function(e,t){var i=g&&y.domain()[0]<0;return"band"===n?p[t%2]:i&&0===e[r]?h:f}},{definition:(i={defClassName:d+"-"+r,className:u.className,individualClassName:function(e,t){return g&&y.domain()[0]<0&&0===e.y&&"band"!==n?c+"-axis-zero-line":c+"-grid-"+n+"-"+r+"-"+t%2}},_m(i,"pad"+r.toUpperCase(),"band"===n?0:void 0),_m(i,"encoding",o),i),axes:_m({},r,y),interactive:!1}}(e,e.axes(),n,r):void 0}).filter(function(e){return void 0!==e})}(e,u,a).forEach(function(n,a){var u=void 0,l=n.definition,s=n.axes,f=Ng.getSerializedConf(o,l);f.mark=o,c[a]?u=c[a]:(u=Ng.getLayerInstance(f)).dependencies(r),u.config(f).measurement(i).data(s.y?t.y:t.x).dataProps({timeDiffs:e.store().get(sm)}).axes(s),c[a]=u})})}(e,function(e,t,n){var r={};return["x","y"].forEach(function(i){var a=e[i][0].getTickValues(),o=Xc(n,Xc(t,i,0).getMembers()[0],"def","subtype"),u=[],c=[{name:"yvalue",type:"measure"},{name:"xvalue",type:"measure"},{name:"yvalue0",type:"measure"},{name:"xvalue0",type:"measure"},{name:"xdim",type:"dimension",subtype:o},{name:"ydim",type:"dimension",subtype:o}],l=Math.max(a.length);a=o===Ma.DimensionSubtype.TEMPORAL?a.map(function(e){return e.getTime()}):a;for(var s=0;s<l;s+=1){var f;u.push((_m(f={},i+"value",a[s]),_m(f,i+"value0",a[s+1]),_m(f,i+"dim",a[s]),_m(f,i+"dim",a[s]),f))}r[i]=new Ca.a(u,c)}),r}(n,e.fields(),e.data().getFieldsConfig())),[[e._gridlines,r+"-grid-lines"],[e._gridbands,r+"-grid-bands"]].forEach(function(e){var n=bm(e,2),r=n[0],i=n[1],a=lf(t,"g",[1],"."+i);lf(a,"g",r,"."+i+"-group",{update:function(e,t){t.mount(e.node())}})}))},Em={classPrefix:"muze",defClassName:"visual-unit",className:"",trackerClassName:"visual-unit-tracker",gridLines:{defClassName:"axis-grid-lines",className:"",show:!0,color:"#efefef",zeroLineColor:"#b6b6b6"},gridBands:{defClassName:"axis-grid-bands",className:"",show:!1,y:{color:["#fff","#fbfbfb"]},x:{color:["#fff","#f9f9f9"]}},arcLayerClassName:"layer-arc",interaction:{tooltip:{mode:"consolidated"}},sideEffectClassName:"side-effect-container"};function Sm(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Om,Mm=(Sm(xm={},Xv,{value:null,meta:{sanitization:function(e,t){return zc(t||zc({},Em),e)}}}),Sm(xm,Jv,{value:null}),Sm(xm,Qv,{value:null,meta:{sanitization:function(e,t){return Object.assign(t||{},e)}}}),Sm(xm,Zv,{value:null}),Sm(xm,em,{value:null}),Sm(xm,tm,{value:null}),Sm(xm,om,{value:null}),Sm(xm,lm,{value:null}),Sm(xm,Kv,{value:null,meta:{preset:function(e,t){if(t._cache){var n=t.cachedData();t.cachedData([].concat(function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(n),[e]))}else{var r=t.data();r&&r.unsubscribe("propagation"),t.cachedData([e])}}}}),xm),Cm=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,i=!1,a=void 0;try{for(var o,u=e[Symbol.iterator]();!(r=(o=u.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){i=!0,a=e}finally{try{!r&&u.return&&u.return()}finally{if(i)throw a}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},Tm={0:"primary",1:"secondary"},Pm=[nm,im,rm,am],Am=function(e){return[{type:"registerImmediateListener",props:[Qv],listener:function(t){var n=Cm(t,2)[1];["x","y"].forEach(function(t){(n[t]||[]).forEach(function(t,n){t.on("update",function(){e.store().commit(h[Tm[n]+(t.isReverse()?"Y":"X")+"AxisUpdated"],!0)})})})}},{type:"registerImmediateListener",props:[Xv],listener:function(t){var n=Cm(t,2)[1];n&&e.firebolt().config(n.interaction)}},{type:"computed",props:[cm],listener:function(t){return t(Jv,lm,function(t,n){var r=t.value,i=n.value;if(r&&i){var a=function(e,t){var n=e._layersMap,r={},i={layers:{},components:{unit:e}},a=0,o=t.sort(function(e,t){return e.order-t.order}).reduce(function(t,o,u){var c,l=o.mark,s=o.def,f=l+"-"+u,h=Kc(s);h.forEach(function(e){e.order=o.order+a}),a+=h.length;var d=dm(e,s,n[f]);i.layers=Object.assign(i.layers,d);var p=Object.values(d);return t=(c=t).concat.apply(c,hm(p)),n[f]=p,r[f]=f,t},[]);i.unit=e;var u={};o.forEach(function(e){var t=pm(e,i);u[e.alias()]=t});var c=function(e){for(var t=[],n={},r=Object.keys(e),i=function i(a){if(t.length===r.length)return!0;n[a]=!0;for(var o=e[a],u=0;u<o.length;u++){var c=o[u];n[c]||i(c)}return t.push(a),!1},a=0;a<r.length&&!i(r[a]);a++);return t}(u);for(var l in o=c.map(function(e){return i.layers[e]}),n)l in r||(n[l].forEach(function(e){return e.remove()}),delete n[l]);return o}(e,t.value);return e.layers(a),e._layerAxisIndex=gm(e.layers(),i),e._lifeCycleManager.notify({client:a,action:"initialized",formalName:"layer"}),!0}return null})}},{type:"computed",props:[sm],listener:function(t){return t(Kv,lm,Qv,function(t,n,r){var i=t.value,a=n.value,o=r.value;if(i&&a&&o){var u={},c={};return["x","y"].forEach(function(e){var t=a[e][0];t&&t.subtype()===Ma.DimensionSubtype.TEMPORAL&&(u[e]=t.getMinDiff(),c[t]=u[e],o[e].forEach(function(t){return t.minDiff(u[e])}))}),e._timeDiffsByField=c,u}return null})}},{type:"computed",props:[um],listener:function(t){return t(Kv,cm,Qv,om,function(t,n,r,i){var a=t.value,o=e._layerAxisIndex,u=r.value;if(a&&n.value&&u&&o){var c=e.layers(),l=function(e,t){var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){var i=e[r];n[r]=i(t)}return n}(i.value,a);return e._transformedDataModels=l,e._lifeCycleManager.notify({client:c,action:"beforeupdate",formalName:"layer"}),function(e,t,n){e.forEach(function(e){var r=e.config().source,i=r instanceof Function?r(t):n[r]||t;e.data(i)})}(c,a,e._transformedDataModels),e._dimensionMeasureMap=function(e,t){var n={};for(var r in e.forEach(function(e){var r=e.encodingFieldsInf(),i=r.colorField,a=r.sizeField,o=r.shapeField,u=[r.xField,r.yField].filter(function(e){return t[e]&&t[e].def.type===Ma.FieldType.MEASURE});[i,a,o].forEach(function(e){var r;t[e]&&t[e].def.type===Ma.FieldType.DIMENSION&&(!n[e]&&(n[e]=[]),(r=n[e]).push.apply(r,hm(u)))})}),n)({}).hasOwnProperty.call(n,r)&&(n[r]=[].concat(hm(new Set(n[r]))));return n}(c,a.getFieldsConfig(),e.retinalFields()),ym(u,c,o),e._lifeCycleManager.notify({client:c,action:"updated",formalName:"layer"}),function(e,t,n,r){var i={};return(e=e.filter(function(e){return null!==e.getDataDomain()})).forEach(function(e){var a={},o=e.config(),u=o.encoding,c=e.getDataDomain(),l=e.id();null!==c&&!1!==o.calculateDomain&&(a=Object.entries(c),i=c.x||c.y?a.reduce(function(e,i){var a=i[0],o=u[a].field,c=n[l][a],s=""+t[a][c];return e[s]=e[s]||[],e[s]=function(e,t){var n;return e=e.filter(function(e){return e.length}),t===Ma.DimensionSubtype.CATEGORICAL?(n=[]).concat.apply(n,bc(e)):[Math.min.apply(Math,bc(e.map(function(e){return e[0]}))),Math.max.apply(Math,bc(e.map(function(e){return e[1]})))]}([e[s],i[1]],r[o].def.subtype?r[o].def.subtype:r[o].def.type),e},i):a)}),i}(c,e.fields(),o,a.getFieldsConfig())}return null})}},{type:"registerImmediateListener",props:[um],listener:function(t){var n=Cm(t,2)[1];null!==n&&e.updateAxisDomain(n)}},{type:"registerChangeListener",props:[tm,Kv].concat(Pm),listener:function(t,n){var r=t[1];r&&n[1]&&e.render(r)}}]};function Nm(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var jm=(Nm(Om={},"facetByFields",{}),Nm(Om,"retinalFields",{}),Nm(Om,"parentAlias",{}),Nm(Om,"layers",{}),Nm(Om,"store",{}),Nm(Om,"cachedData",{}),Nm(Om,"detailFields",{}),Om),Fm=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,i=!1,a=void 0;try{for(var o,u=e[Symbol.iterator]();!(r=(o=u.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){i=!0,a=e}finally{try{!r&&u.return&&u.return()}finally{if(i)throw a}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},Im=function(e){var t=e.context;t.store().registerImmediateListener([Kv,tm],function(t,n){if(t[1]&&n[1]){var r=e.context.cachedData()[0];e.createSelectionSet(e.context.data().getData().uids),e.attachPropagationListener(r)}},!0),t._layerDeps.throwback.registerChangeListener([Oa.ON_LAYER_DRAW],function(n){Fm(n,2)[1]&&(e.initializeSideEffects(),e.config(t.config().interaction),e.mapActionsAndBehaviour(),function(e){var t=e._queuedSideEffects;Object.entries(t).forEach(function(t){var n=t[1];e.dispatchSideEffect.apply(e,[n.name].concat(function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(n.params)))}),e._queuedSideEffects={}}(e),function(e){var t=e._actionHistory;for(var n in t)t[n].isMutableAction&&delete e._actionHistory[n]}(e))})};function Dm(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}var Rm={brush:function(e,t,n){var r=n.payload,i=function(e,t,n){var r=t[0].getData(),i=n.payload.criteria,a=n.sourceIdentifiers,o=r.schema,u=e.data().getFieldsConfig(),c=r.data;return e.id()===n.sourceId?i:null!==a?o.reduce(function(e,t,n){var r=void 0,i=t.name,a=u[i],o=(a&&(a.def.subtype?a.def.subtype:a.def.type))===Ma.DimensionSubtype.CATEGORICAL;return a?(r=o?c.map(function(e){return e[n]}):[Math.min.apply(Math,Dm(c.map(function(e){return e[n]}))),Math.max.apply(Math,Dm(c.map(function(e){return e[n]})))],e[i]=r,e):e},{}):null}(e,t,n),a=Object.assign({},r);return a.criteria=i,a},__default:function(e,t,n){var r=n.payload,i=n.sourceIdentifiers,a=t[0].getData(),o=a.schema,u=Object.assign({},r);o=a.schema;var c=a.data,l=o.map(function(e){return e.name});return u.criteria=!i&&t[0].isEmpty()?null:[l].concat(Dm(c)),u.sourceFields=i?i.getSchema().map(function(e){return e.name}):[],u}};function Lm(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}var zm=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),Bm=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(r)));return Im(a),a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,eh),zm(t,[{key:"propagate",value:function(e,t,n,r){!function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=void 0,i=n.payload,a=n.selectionSet,o=n.propagationFields[t]||{},u=o.fields||[],c=o.append,l=i.criteria,s=e.context,f=s.cachedData()[0],h=s.id(),d=e.sideEffects(),p=e._behaviourEffectMap,y=a.mergedEnter.model,g=f.getFieldsConfig();i.sourceUnit=h,i.action=t,i.sourceCanvas=s.parentAlias();var v=e._propagationBehaviourMap[t]||t,m=[];null===l?r=null:_c(l)?(m=Object.keys(l||{}),r=y?y.project(m):null):(m=l[0],r=y?y.project(m):null);var b=s.facetByFields();if(null!==r&&u.length){var _=r.getData().schema.map(function(e){return e.name});r=function(e,t){var n=e.getData(),r=n.schema,i=n.data,a=[],o=t[0].map(function(e){return{name:""+e,type:Ma.FieldType.DIMENSION}}),u=t[1];return i.forEach(function(e){var t={};r.forEach(function(n,r){t[n.name]=e[r]}),o.forEach(function(e,n){t[e.name]=u[n]}),a.push(t)}),new Ca.a(a,[].concat(Lm(r),Lm(o)))}(r,b),m=c?[].concat(Lm(_),Lm(u)):u,r=r.project(m)}var x=!1;m.length&&m.every(function(e){return g[e]&&g[e].def.type===Ma.FieldType.MEASURE})&&(x=!0);var w=s.parentAlias();i.action=t;var k=e._actions.behavioural[v],E=!!k&&k.constructor.mutates(),S=function(e,t){var n=p[e.config.action],r=!e.config.groupId||n.some(function(e){return d[e.name||e].constructor.mutates()});return e.config.groupId!==t.groupId&&r},O=e._actions.behavioural[t],M=!!O&&O.constructor.mutates(),C={payload:i,action:t,criteria:r,isMutableAction:M,propagateInterpolatedValues:x,groupId:w,sourceId:M?w:h,filterFn:S,enabled:function(e,n){return t===v||e.payload.sourceCanvas===n.context.parentAlias()}};f.propagate(r,C,!0),t!==v&&(C={payload:i,sourceId:E?w:h,criteria:r,isMutableAction:E,propagateInterpolatedValues:x,action:v,groupId:w,applyOnSource:t===v,enabled:function(e,t){return e.payload.sourceCanvas!==t.context.parentAlias()},filterFn:S},f.propagate(r,C,!0,{filterImmutableAction:function(e,t){return e.groupId!==t.groupId}}))}(this,e,{payload:t,selectionSet:n,sideEffects:r,propagationFields:this._propagationFields})}},{key:"getApplicableSideEffects",value:function(e,t,n){var r=this.context,i=r.id(),a=r.parentAlias(),o=n.propPayload&&n.propPayload.sourceCanvas,u=n.propPayload&&n.propPayload.sourceUnit,c=this._sourceSideEffects,l=this.sideEffects(),s=!u||u===i,f=t.sideEffects?[{effects:t.sideEffects,behaviours:[t.action]}]:e;return f.forEach(function(e){var i=e.effects;i=i.filter(function(e){if(l[e.name||e].constructor.mutates()&&!1===n.isMutableAction)return!1;if(!s&&null!==t.criteria){var i=c[e.name||e];return!i||i(n.propPayload,r)}return o!==a&&!s||!1!==e.applyOnSource}),e.effects=i}),f}},{key:"shouldApplySideEffects",value:function(e){return!1===e}},{key:"onDataModelPropagation",value:function(){var e=this;return function(t,n){var r=!0,i=!1,a=n.payload,o=n.sourceIdentifiers,u=n.enabled,c=n.action,l=Rm[c]||Rm.__default;if(o){var s=o.getFieldsConfig(),f=Object.keys(s),h=Object.keys(t[0].getFieldsConfig());Object.values(s).some(function(e){return e.def.type===Ma.FieldType.MEASURE})||(r=f.some(function(e){return-1!==h.indexOf(e)}))}var d=l(e.context,t,n),p=e._sourceBehaviours,y=p[c]||p["*"],g=!0;if(y&&(g=y(a||{},e.context)),u&&(g=u(n,e)&&!1!==g),g){var v=e._behaviourEffectMap[c],m=e.sideEffects();i=n.groupId?v.some(function(e){return m[e.name||e].constructor.mutates()}):n.isMutableAction;var b={propagate:!1,data:t,propPayload:a,sourceIdentifiers:o,persistent:!1,isSourceFieldPresent:r,sourceId:n.propagationSourceId,isMutableAction:n.isMutableAction};e._actionHistory[c]={payload:d,propagationInf:b,isMutableAction:i},e.dispatchBehaviour(c,d,b)}}}},{key:"initializeSideEffects",value:function(){var e=this;(function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var a=Object.getPrototypeOf(t);return null===a?void 0:e(a,n,r)}if("value"in i)return i.value;var o=i.get;return void 0!==o?o.call(r):void 0})(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"initializeSideEffects",this).call(this);var n=this.sideEffects();for(var r in n)({}).hasOwnProperty.call(n,r)&&n[r]instanceof Ph&&n[r].drawingContext(function(){return e.context.getDrawingContext()})}},{key:"prepareSelectionSets",value:function(e){var t=this.context.data();return t&&this.createSelectionSet(t.getData().uids,e),this}},{key:"remove",value:function(){return this.context.cachedData()[0].unsubscribe("propagation"),this}}]),t}(),Um=(n(35),function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}());function Hm(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function Vm(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Wm=function(){function e(t,n){var r,i=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._id=xc(),this._dependencies=n,this._layerDeps={throwback:new jc({onlayerdraw:!1}),smartLabel:n.smartLabel},this._renderedResolve=null,this._renderedPromise=new Promise(function(e){i._renderedResolve=e}),this._layerDeps.throwback.registerChangeListener([Oa.ON_LAYER_DRAW],function(){i._renderedResolve(),i._lifeCycleManager.notify({client:i.layers(),action:"drawn",formalName:"layer"})}),this._lifeCycleManager=n.lifeCycleManager,this._layersMap={},this._gridlines=[],this._gridbands=[],this._layerAxisIndex={},this._transformedDataModels={},Ng.setLayerRegistry(t.layerRegistry),Dc(this,jm),this.cachedData([]),this.store(new jc((Vm(r={},nm,null),Vm(r,rm,null),Vm(r,im,null),Vm(r,am,null),r))),Ic(this,Mm,this.store().model),this.firebolt(new Bm(this,{physical:Eh,behavioural:c,physicalBehaviouralMap:$v},l,vd)),Yc(this,Am)}return Um(e,[{key:"firebolt",value:function(){return arguments.length?(this._firebolt=arguments.length<=0?void 0:arguments[0],this):this._firebolt}},{key:"getDataDomain",value:function(){return this.store().get(um)}},{key:"id",value:function(){return this._id}},{key:"lockModel",value:function(){return this._store.model.lock(),this}},{key:"unlockModel",value:function(){return this._store.model.unlock(),this}},{key:"timeDiffsByField",value:function(){return arguments.length?this:this._timeDiffsByField}},{key:"render",value:function(e){var t=this.config(),n=t.className,r=t.defClassName,i=t.sideEffectClassName,a=t.classPrefix,o=Tc(r,this.id(),t.classPrefix),u=this.width(),c=this.height(),l=cf(e).style("position","relative");this._rootSvg=lf(l,"svg",[null],n).style("width",u+"px").style("height",c+"px");var s=this._rootSvg.node();return hf(s,{width:u,height:c,class:o.join(" ")}),km(this,s),function(e,t,n,r){e._lifeCycleManager.notify({client:n,action:"beforedraw",formalName:"layer"});var i=e.config().classPrefix,a=e.layers().sort(function(e,t){return e.config().order-t.config().order}),o=lf(t,"g",[1],i+"-layer-group");lf(o,"g",a,null,{update:function(t,n){n.measurement(r),n.dataProps({timeDiffs:e.store().get(sm)}),!1!==n.config().render&&n.mount(t.node())}})}(this,s,this.layers(),{width:u,height:c}),this._sideEffectGroup=function(e,t){return lf(e,"g",[1],t).node()}(s,a+"-"+i),this}},{key:"done",value:function(){return this._renderedPromise}},{key:"enableCaching",value:function(){return this._cache=!0,this}},{key:"clearCaching",value:function(){return this._cache=!1,this.cachedData([this.cachedData()[0]]),this}},{key:"getDrawingContext",value:function(){var e=this._rootSvg&&this._rootSvg.node(),t=this.width(),n=this.height();return{htmlContainer:this.mount(),svgContainer:e,width:t,height:n,sideEffectGroup:this._sideEffectGroup,parentContainer:this.parentContainer(),xOffset:0,yOffset:0}}},{key:"serialize",value:function(){return{layers:this.layers().map(function(e){return e.serialize()}),config:this.config(),axes:this.store().get("axes").map(function(e){return e.serialize()})}}},{key:"addLayer",value:function(e){var t,n=this,r=e.name,i=this.getLayerByName(r),a={width:this.width(),height:this.height()};if(i)return[i];var o=Ng.getSerializedConf(e.mark,e),u=Object.values(dm(this,o));(t=this.layers()).push.apply(t,Hm(u));var c=gm(u,this.fields());this._layerAxisIndex=Object.assign(this._layerAxisIndex,c),ym(this.axes(),u,c);var l={unit:this,layers:{}};return this.layers().forEach(function(e){l.layers[e.alias()]=e}),u.forEach(function(e){pm(e,l),e.measurement(a),e.dataProps({timeDiffs:n.store().get(sm)})}),u}},{key:"remove",value:function(){var e=this._dependencies.lifeCycleManager;return e.notify({client:this,action:"beforeremove",formalName:"unit"}),this.store().unsubscribeAll(),cf(this.mount()).remove(),this.firebolt().remove(),e.notify({client:this.layers(),action:"beforeremove",formalName:"layer"}),this.layers().forEach(function(e){return e.remove()}),e.notify({client:this.layers(),action:"removed",formalName:"layer"}),e.notify({client:this,action:"removed",formalName:"unit"}),this}},{key:"getDataModelFromIdentifiers",value:function(e,t,n){if(null===e)return null;var r=n||this.data();return Gc(r,e,t)}},{key:"resetData",value:function(){return this.data(this.cachedData()[0]),this}},{key:"getSourceInfo",value:function(){return{dimensionMeasureMap:this._dimensionMeasureMap,fields:this.fields(),data:this.data(),axes:this.axes()}}},{key:"getDefaultTargetContainer",value:function(){var e=this.config();return["."+e.classPrefix+"-"+e.defClassName]}},{key:"getLayersByType",value:function(e){return vm(this.layers(),"type",e)}},{key:"getLayerByName",value:function(e){return vm(this.layers(),"name",e)[0]}},{key:"updateAxisDomain",value:function(e){var t=this;return["x","y"].forEach(function(n){var r=t.axes()[n],i=[],a=[],o=void 0;if(r&&r.forEach(function(r,u){var c=t.fields()[n][u];o=e[""+t.fields()[n][u]],c.type()!==Ma.FieldType.DIMENSION&&o&&(i[u]=o[0],a[u]=o[1])}),r)if(r.length>1){var u=r[0].config();if("linear"===r[0].constructor.type()){if(u.alignZeroLine){r.forEach(function(e){return e.config({nice:!1})});var c=function(e,t){var n=e[0]/(e[0]-t[0]),r=e[1]/(e[1]-t[1]),i=!1;return t[0]>0&&t[1]>0&&t[1]>0&&e[1]>0&&(i=!0,t[0]=0,t[1]=0),t[0]<0&&t[1]<0&&t[1]<0&&e[1]<0&&(i=!0,e[0]=0,e[1]=0),i||n===r||(n<r?t[1]=t[0]/e[0]*e[1]:t[0]=t[1]/e[1]*e[0]),{max:e,min:t}}(a,i);i=c.min,a=c.max}r[0].updateDomainCache([i[0],a[0]]),r[1].updateDomainCache([i[1],a[1]])}else r[0].updateDomainCache(o),r[1].updateDomainCache(o)}else r[0].updateDomainCache(o)}),this}},{key:"getNearestPoint",value:function(e,t,n){var r={id:null},i=function(e,t){var n=e.fields();if(!n.x.length||!n.y.length)return null;var r=e.data(),i=e.axes(),a=r.getFieldsConfig(),o=Xc(n,"x",0).getMembers()[0],u=Xc(n,"y",0).getMembers()[0],c=a[o]&&(a[o].def.subtype?a[o].def.subtype:a[o].def.type),l=a[u]&&(a[u].def.subtype?a[u].def.subtype:a[u].def.type),s=[["x",c,o],["y",l,u]].find(function(e){return e[1]===Ma.DimensionSubtype.CATEGORICAL||e[1]===Ma.DimensionSubtype.TEMPORAL});if(!s||c!==Ma.FieldType.MEASURE&&l!==Ma.FieldType.MEASURE)return null;var f=s[2],h=a[f].index,d=i[s[0]][0].invert(t[s[0]]);if(s[1]===Ma.DimensionSubtype.TEMPORAL){var p=[].concat(hm(new Set(r.getData().data.map(function(e){return e[h]}))));d=p[Cc(p,d)]}return void 0!==d?[[f],[d]]:null}(this,{x:e,y:t});if(null!==i&&n.getAllPoints){r.id=i;var a=this.getMarkInfFromLayers(e,t,n);return r.target=a&&a.id?a.id:r.id,r}var o=this.getMarkInfFromLayers(e,t,n)||{id:null};return(r=Object.assign({},o)).target=o.id,r}},{key:"getMarkInfFromLayers",value:function(e,t,n){for(var r=this.layers(),i=r.length,a=null,o=0;o<i;o++){var u=r[o];if(!1!==u.config().interactive&&(a=u.getNearestPoint(e,t,n)),a)return a}return a}},{key:"getPlotPointsFromIdentifiers",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=[],r=e;if(null===e)return[];var i=this.layers(),a=i.length;_c(e)&&(r=[Object.keys(e)],r=[].concat(Hm(r),Hm(function(e){return e[0].map(function(t,n){return e.map(function(e){return e[n]})})}(Object.values(e)))));for(var o=0;o<a;o++){var u=i[o];!1!==u.config().interactive&&(n=[].concat(Hm(n),Hm(u.getPointsFromIdentifiers(r,t))))}return n}},{key:"removeLayerByName",value:function(e){return mm("name",e),this}},{key:"removeLayersByType",value:function(e){return mm("type",e),this}},{key:"parentContainer",value:function(){return arguments.length?(this._parentContainer=arguments.length<=0?void 0:arguments[0],this):this._parentContainer}}],[{key:"formalName",value:function(){return"unit"}},{key:"create",value:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return new(Function.prototype.bind.apply(this,[null].concat(t)))}}]),e}(),qm=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,i=!1,a=void 0;try{for(var o,u=e[Symbol.iterator]();!(r=(o=u.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){i=!0,a=e}finally{try{!r&&u.return&&u.return()}finally{if(i)throw a}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")};function Gm(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}var Ym=function(e){return[e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:[]].map(function(e){return e.reduce(function(e,t){return[].concat(Gm(e),Gm(t.getMembers()))},[])})},$m=function(e,t,n){return e.select(function(e){return t.every(function(t,r){return e[t].value===n[r]})})},Xm=function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=n.facets,o=n.dataModel,u=n.uniqueValues;if(a[r+1]){var c=a[r];u.forEach(function(n){var u=o.select(function(e){return e[c].value===n}),l=Vv(u,a[r+1]);e(t,{facets:a,dataModel:u,uniqueValues:l},r+1,[].concat(Gm(i),[n]))})}else u.forEach(function(e){t.push([].concat(Gm(i),[e]))})},Km=function(e,t){var n=t.allColumnProjections,r=t.rowProjections,i=t.optionalProjections;return r.length>0?r.map(function(t){var r=Ym(t,n),a=qm(r,2),o=a[0],u=a[1];return e.project([].concat(Gm(o),Gm(u),Gm(i)))}):[e]},Qm=function(e,t){var n,r=[],i=e.matrix,a=e.datamodel,o=e.facetInfo,u=e.fieldInfo,c=u.rowProjections,l=u.colProjections,s=u.optionalProjections,f=o.rowIndex,h=o.columnIndex,d=c[f%c.length]||[];r=l.length>0?l.map(function(e,n){var r=Ym(e,d),i=qm(r,2),u=i[0],c=i[1],p=a.project([].concat(Gm(u),Gm(c),Gm(s))),y={rowFields:d,columnFields:e},g={rowIndex:f,columnIndex:h*l.length+n};return t(p,{projections:y,indices:g},o)}):[t(a,{projections:{rowFields:d,columnFields:[]},indices:{rowIndex:f,columnIndex:h}},o)],i[f]=i[f]||[],(n=i[f]).push.apply(n,Gm(r))},Jm=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,i=!1,a=void 0;try{for(var o,u=e[Symbol.iterator]();!(r=(o=u.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){i=!0,a=e}finally{try{!r&&u.return&&u.return()}finally{if(i)throw a}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")};function Zm(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}var eb=function(e,t,n,r){return Gv(e,function(e){return e},t,function(e,t){return t+e.reduce(function(e,t){return e+(t.id+n)},"")}).map(function(e){if(e&&e[n]){var t=e[n],i=t.config(),a=i.orientation,o=i.show;return(new r.AxisCell).source(t).config({isOffset:a===s.LEFT||a===s.TOP,show:o})}return(new r.BlankCell).config({show:!1})})},tb=function(e,t,n,r){var i=e.axis,a=e.keys,o=e.type,u=e.facetConfig,c=i.length/a.length,l=a.length?i.map(function(e,t){return a[Math.floor(t/c)]}):[];return Gv(t[o+"Headers"],function(e){return e},l,function(e,t){return e.join(",")+"-"+t}).map(function(e){return function(e,t,n,r){return Gv(e,function(e){return new n.TextCell({},{labelManager:r}).source(e)},t,function(e,t){return e+t})}(null,e,n,r).map(function(t,n,r){return t.source(e[r]).config(u||{})})})},nb=function(e,t){var n=e.resolver,r=e.datamodel,i=e.componentRegistry,a=e.encoders,o=t.globalConfig,u=t.selection,c=t.transform,l=o.autoGroupBy,s=n.dependencies().smartlabel,f=r.getFieldsConfig(),h=n.layerConfig(),d=n.registry(),p=n.horizontalAxis().fields,y=n.verticalAxis().fields,g=n.optionalProjections(t,h),v=n.getAllFields(),m={normalizedColumns:y,normalizedRows:p,facetsAndProjections:v,layers:h,fieldMap:f,otherEncodings:g,encoders:a,facetConfig:o.facetConfig||{},axisFrom:o.axisFrom||{},selection:u},b={GeomCell:n.getCellDef(d.GeomCell),AxisCell:n.getCellDef(d.AxisCell),BlankCell:n.getCellDef(d.BlankCell),TextCell:n.getCellDef(d.TextCell)},_=Lv(p),x=Lv(y);n.colCells({}),n.rowCells({}),n.datamodelTransform(c||{}),n.resetSimpleAxes();var w={exitCellMap:n.cacheMaps().entryCellMap,entryCellMap:new Map};n.cacheMaps(w);var k={config:o,suppliedLayers:a.simpleEncoder.serializeLayerConfig(n.layerConfig()),resolver:n,cell:b.GeomCell,encoder:a.simpleEncoder,newCacheMap:w,detailFields:t.detail},E=r.getFieldsConfig(),S=r;if(!l.disabled){var O=function(e,t){var n,r=Object.values(e).map(function(e){var t,n,r=(t=[]).concat.apply(t,Fv(e));return(n=[]).concat.apply(n,Fv(r.map(function(e){return e instanceof cv?e.getMembers():e})))});return(n=[]).concat.apply(n,Fv(r).concat(Fv(t)))}(v,function(e,t){var n,r=[],i=e.map(function(e){return e.encoding||{}});return(r=[].concat(Fv(r),[(n=[]).concat.apply(n,Fv(i.map(function(e){return Object.values(e).map(function(e){return e.field})})))])).filter(function(e){return t[e]&&t[e].def.type===Ma.FieldType.DIMENSION})}(k.suppliedLayers,r.getFieldsConfig())),M=O.filter(function(e){return E[e]&&E[e].def.type===Ma.FieldType.DIMENSION}),C=l.measures;S=r.groupBy(M.length?M:[""],C).project(O)}var T=function(e,t,n){var r=[],i=[],a=[],o=[],u=[],c=[],l=t.rowFacets,s=t.colFacets;if(t.colProjections.forEach(function(e){o.push.apply(o,Gm(e))}),t.allColumnProjections=o,l.length>0){var f=l[0].toString(),h=Vv(e,f);Xm(i,{facets:l,dataModel:e,uniqueValues:h}),i.forEach(function(n){var i,a=Ym(l),o=qm(a,1)[0],u=$m(e,o,n);c.push([l,n]),(i=r).push.apply(i,Gm(Km(u,t)))})}else{var d;(d=r).push.apply(d,Gm(Km(e,t)))}if(r=r.length>0?r:[[]],s.length>0){var p=s.map(function(e){return""+e}),y=p[0],g=Vv(e,y);Xm(a,{facets:p,dataModel:e,uniqueValues:g}),r.forEach(function(r,i){c[i]=c[i]||[[],[]],a.forEach(function(a,o){u[i]=u[i]||[];var l=r instanceof Ca.a?r:e,f=$m(l,p,a),h={matrix:u,datamodel:f,facetInfo:{rowFacets:c[i],colFacets:[s,a],rowIndex:i,columnIndex:o},fieldInfo:t};Qm(h,n)})})}else r.forEach(function(r,i){c[i]=c[i]||[[],[]];var a={matrix:u,datamodel:r||e,facetInfo:{rowFacets:c[i],colFacets:[[],[]],rowIndex:i,columnIndex:0},fieldInfo:t};Qm(a,n)});var v=a.length>0?a[0].map(function(e,t){return a.map(function(e){return e[t]})}):a;return{matrix:u,rowKeys:i,columnKeys:v}}(S,v,n.valueCellsCreator(k));n.cacheMaps().exitCellMap.forEach(function(e){e.remove()}),n.cacheMaps().exitCellMap.clear(),n.valueMatrix(T.matrix),n.createUnits(i,t);var P=function(e,t){var n=null,r=null,i=e.xAxesMap,a=e.yAxesMap,o=t.x,u=t.y;return o&&o.forEach(function(e){var t=i.get(e);(n=n||[]).push(t)}),u&&u.forEach(function(e){var t=a.get(e);(r=r||[]).push(t)}),{xAxes:n,yAxes:r}}(n.cacheMaps(),n.axes()),A=P.xAxes,N=P.yAxes;n.axes({x:A,y:N});var j=function(e,t,n,r){var i=e.unitHeight,a=e.unitWidth,o=e.facetsAndProjections,u=function(e,t,n){var r=void 0,i=e.matrices,a=e.fields,o=e.facetsAndProjections,u=e.selection,c=e.facetConfig,l=e.encoders,s=a.rows,f=a.columns,h=i.valuesMatrix,d=o.rowProjections,p=o.colProjections,y=h.rowKeys,g=h.columnKeys,v=l.simpleEncoder._axisFrom,m=l.simpleEncoder._headerFrom;r=u||{},["pie",Rg,Lg].forEach(function(n){var i=n===Rg?v.column:v.row;r=function(e,t,n){var r=e.matrices.axesMatrix;return function(e,i){var a=r[""+e];if(a&&a.length)if(e===Rg||e===Lg){var o=e===Lg?zg:Bg;[tv,nv].forEach(function(e,r){var u=""+o+e,c=r,l=a;i!==Yg&&"bottom"!==i||(c=1-c),Xc(a,0,c)||(l=[]),t[u]=eb(t[u],l,c,n)})}else t.rowsPrimary=eb(t.rowPrime,a.map(function(){return[]}),0,n),t.columnsPrimary=eb(t.colPrime,a[0],0,n);return t}}(e,r,t)(n,i)});var b=r,_=b.rowsPrimary,x=b.rowsSecondary,w=b.columnsPrimary,k=b.columnsSecondary,E=_&&_.getObjects().length?_.getObjects():x&&x.getObjects().length?x.getObjects():[],S=w&&w.getObjects().length?w.getObjects():k&&k.getObjects().length?k.getObjects():[];return[{type:Gg,section:s[0],axis:E,headerFrom:m.row},{type:Yg,section:s[1],axis:E,headerFrom:m.row},{type:"top",section:f[0],axis:S,headerFrom:m.column},{type:"bottom",section:f[1],axis:S,headerFrom:m.column}].forEach(function(e,i){var a=void 0,o=void 0,u=e.type,l=e.section,s=e.axis,f=e.headerFrom;if(i<2?(a=y,o=d.length>0?d.length:1):(a=g,o=p.length>0?p.length:1),l.length&&f===u&&s&&a.length){var h={axis:s,length:o,type:u},v=[];i<2?(h.keys=a,h.facetConfig=c.rows,v=tb(h,r,t,n)):(h.facetConfig=c.columns,h.keys=a[0].map(function(e,t){return a.map(function(e){return e[t]})}),v=tb(h,r,t,n)),r[u+"Headers"]=v}else r[u+"Headers"]=null}),r}({fields:{rows:e.normalizedRows,columns:e.normalizedColumns},matrices:t,facetsAndProjections:o,selection:e.selection,axisFrom:e.axisFrom,facetConfig:e.facetConfig,encoders:e.encoders},n,r),c=u.columnsPrimary,l=u.columnsSecondary,s=u.rowsPrimary,f=u.rowsSecondary,h=u.leftHeaders,d=u.topHeaders,p=u.bottomHeaders,y=u.rightHeaders,g=[s,f,c,l].map(function(e){return e?e.getObjects():[]}),v=Jm(g,4),m=v[0],b=v[1],_=v[2],x=v[3],w=[h,y].map(function(e){return e?e.getObjects().map(function(e){return e.getObjects()}):[]}),k=Jm(w,2),E=k[0],S=k[1],O=E.length?E.map(function(e,t){return m[t]=m[t]?[m[t]]:[],[].concat(Zm(e),Zm(m[t]))}):m?m.map(function(e){return[e]}):[],M=b.length?b.map(function(e,t){return[e].concat(Zm(S[t]||[]))}):S.length?S.map(function(e){return[].concat(Zm(e))}):[],C=[];d&&d.getObjects().forEach(function(e){e.getObjects().forEach(function(e,t){C[t]=C[t]||[],C[t].push(e)})}),_.length&&C.push(_);var T=[];x.length&&T.push(x);var P=T.length;if(p&&p.getObjects().forEach(function(e){e.getObjects().forEach(function(e,t){T[t+P]=T[t+P]||[],T[t+P].push(e)})}),!O.length&&!M.length){var A=new n.BlankCell;A.setAvailableSpace(a,i),O=[[A]]}if(!(C.length||T.length&&T[0].length)){var N=new n.BlankCell;N.setAvailableSpace(a,i),T=[[N]]}return{rows:[O,M],columns:[C,T],selectionObj:u}}(m,{valuesMatrix:T,axesMatrix:n.axes()},b,s),F=j.rows,I=j.columns,D=j.selectionObj;return n.rowMatrix(F),n.columnMatrix(I),{rows:n.rowMatrix(),columns:n.columnMatrix(),values:n.valueMatrix(),isColumnSizeEqual:x,isRowSizeEqual:_,selection:D,dataModels:{groupedModel:S,parentModel:r}}},rb=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,i=!1,a=void 0;try{for(var o,u=e[Symbol.iterator]();!(r=(o=u.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){i=!0,a=e}finally{try{!r&&u.return&&u.return()}finally{if(i)throw a}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},ib=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function ab(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}var ob=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._registry={},this._layerConfig=[],this._matrixLayers=[],this._dependencies=t,this._rowMatrix=[],this._columnMatrix=[],this._valueMatrix=[],this._facets={},this._projections={},this._datamodelTransform={},this._units=[],this._cacheMaps={},this._axes={x:{},y:{},color:[],size:[],shape:[]},this.cacheMaps(zv())}return ib(e,[{key:"registry",value:function(){var e=this;return arguments.length?(Object.entries(arguments.length<=0?void 0:arguments[0]).forEach(function(t){e._registry[t[0]]=t[1]}),this):this._registry}},{key:"dependencies",value:function(){return arguments.length?(this._dependencies=arguments.length<=0?void 0:arguments[0],this):this._dependencies}},{key:"units",value:function(){return arguments.length?(this._units=arguments.length<=0?void 0:arguments[0],this):this._units}},{key:"layerConfig",value:function(){return arguments.length?(this._layerConfig=arguments.length<=0?void 0:arguments[0],this):this._layerConfig}},{key:"matrixLayers",value:function(){return arguments.length?(this._matrixLayers=arguments.length<=0?void 0:arguments[0],this):this._matrixLayers}},{key:"datamodelTransform",value:function(){return arguments.length?(this._datamodelTransform=arguments.length<=0?void 0:arguments[0],this):this._datamodelTransform}},{key:"cacheMaps",value:function(){for(var e=this,t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];return n.length?([$g,Xg,Kg,Qg,Jg].forEach(function(t){e._cacheMaps[t+"Map"]=n[0][t+"Map"]||e._cacheMaps[t+"Map"]}),this):this._cacheMaps}},{key:"rowCells",value:function(){return arguments.length?(this._rowCells=arguments.length<=0?void 0:arguments[0],this):this._rowCells}},{key:"colCells",value:function(){return arguments.length?(this._colCells=arguments.length<=0?void 0:arguments[0],this):this._colCells}},{key:"axes",value:function(){return arguments.length?(this._axes=Object.assign({},this._axes,arguments.length<=0?void 0:arguments[0]),this):this._axes}},{key:"rowMatrix",value:function(){return arguments.length?(this._rowMatrix=arguments.length<=0?void 0:arguments[0],this):this._rowMatrix}},{key:"columnMatrix",value:function(){return arguments.length?(this._columnMatrix=arguments.length<=0?void 0:arguments[0],this):this._columnMatrix}},{key:"valueMatrix",value:function(){return arguments.length?(this._valueMatrix=arguments.length<=0?void 0:arguments[0],this):this._valueMatrix}},{key:"facets",value:function(){var e=this;return arguments.length?(Object.entries(arguments.length<=0?void 0:arguments[0]).forEach(function(t){e._facets[t[0]]=t[1]}),this):this._facets}},{key:"projections",value:function(){var e=this;return arguments.length?(Object.entries(arguments.length<=0?void 0:arguments[0]).forEach(function(t){e._projections[t[0]]=t[1]}),this):this._projections}},{key:"optionalProjections",value:function(e,t){var n={},r=[];return[qg,Vg,Wg].forEach(function(t){if(e[t]&&e[t].field){var i=e[t];n[t]=i.field,r.push(i.field)}}),e.detail&&r.push.apply(r,ab(e.detail)),t.length&&t.forEach(function(e){e.encoding&&Object.values(e.encoding).forEach(function(e){e&&-1===r.indexOf(e.field)&&r.push(e.field?e.field:e)})}),this.projections({optionalProjections:r}),n}},{key:"horizontalAxis",value:function(e,t){return e?(this._horizontalAxis=qv(this,{type:Hg,fields:e},t),this):this._horizontalAxis}},{key:"verticalAxis",value:function(e,t){return e?(this._verticalAxis=qv(this,{type:Ug,fields:e},t),this):this._verticalAxis}},{key:"getCellDef",value:function(e){var t=this.registry();return Object.values(t).forEach(function(t){t.prototype instanceof e&&(e=t)}),e}},{key:"valueCellsCreator",value:function(e){return this.matrixLayers([]),function(t,n,r){return function(e,t,n,r){var i=n.projections,a=n.indices,o=i.rowFields,u=i.columnFields,c=a.rowIndex,l=a.columnIndex,s=e.suppliedLayers,f=e.cell,h=e.resolver,d=e.config,p=e.encoder,y=e.detailFields,g=h.axes(),v=h.cacheMaps(),m=h.matrixLayers(),b=h.dependencies().smartlabel,_=h.horizontalAxis(),x=h.verticalAxis(),w=h.datamodelTransform(),k=v.entryCellMap,E=v.exitCellMap,S=p.getLayerConfig({columnFields:u,rowFields:o},s||[]),O={config:d,labelManager:b,axes:g,cacheMaps:v};n.normalizedColumns=x.fields,n.normalizedRows=_.fields;var M=p.createAxis(O,n);m[c]=m[c]?m[c]:[],m[c][l]=S;var C=function(e,t){return"cell-"+e+"-"+t}(c,l),T={y:o,x:u},P=[[].concat(Zm(r.rowFacets[0]),Zm(r.colFacets[0])),[].concat(Zm(r.rowFacets[1]),Zm(r.colFacets[1]))],A=E.has(C)?E.get(C):new f;return A.data(t).axes(M).fields(T).transform(w).detailFields(y).facetByFields(P),k.set(C,A),E.delete(C),function(e,t,n){[Hg,Ug].forEach(function(r){var i=e[r+"Cells"](),a=t[r+"Facets"][1].join();!i[a]&&(i[a]=[]),i[a].push(n),e[r+"Cells"](i)})}(h,r,A),k.get(C)}(e,t,n,r)}}},{key:"forEach",value:function(e,t){this[e]().forEach(function(e,n){e.forEach(function(e,r){t(n,r,e)})})}},{key:"getAllFields",value:function(){var e=this.projections();return Object.entries(this.facets()).forEach(function(t){e[t[0]]=t[1]}),e}},{key:"resetSimpleAxes",value:function(){return this.axes({x:new Set,y:new Set})}},{key:"createUnits",value:function(e,t){var n=t.globalConfig,r=t.alias,i=e.layerRegistry,a=e.sideEffectRegistry,o=this.dependencies(),u=o.smartlabel,c=o.lifeCycleManager,l=[],s=function(e){var t={};return["interaction","gridLines","gridBands"].forEach(function(n){void 0!==e[n]&&(t[n]=e[n])}),t}(n||{});return this.forEach("valueMatrix",function(e,t,n){var o=n.source();o||(o=Wm.create({layerRegistry:i,sideEffectRegistry:a},{smartLabel:u,lifeCycleManager:c}),n.source(o),l.push(o)),o.parentAlias(r),n.config(s)}),c.notify({client:l,action:"initialized",formalName:"unit"}),this.units(l)}},{key:"setDomains",value:function(e,t,n){var r=e.color,i=e.shape,a=e.size,o=e.globalConfig.autoGroupBy,u=this.getAllFields(),c=u.rowFacets,l=u.colFacets,s={color:r,shape:i,size:a},f=[].concat(ab(c.map(function(e){return e.toString()})),ab(l.map(function(e){return e.toString()}))),h={domains:n.simpleEncoder.getRetinalFieldsDomain(t,s,f,o),axes:this.axes(),encoding:s};return n.retinalEncoder.setCommonDomain(h),this}},{key:"getRetinalAxes",value:function(){var e=this.axes(),t=e.color,n=e.shape,r=e.size;return{color:[].concat(ab(t)),shape:[].concat(ab(n)),size:[].concat(ab(r))}}},{key:"getSimpleAxes",value:function(e){return this.axes()[""+e]}},{key:"createRetinalAxes",value:function(e,t,n){var r=this,i=this.layerConfig();this.optionalProjections(t,i);var a=n.retinalEncoder.createAxis({fieldsConfig:e,config:t,axes:this.axes()}),o=this.dependencies().lifeCycleManager;[Vg,Wg,qg].forEach(function(e){r.axes()[e]=a[e]}),o.notify({client:this.axes(),action:"initialized",formalName:"axis"}),o.notify({client:this.units(),action:"beforeupdate",formalName:"unit"});var u=[],c=this.matrixLayers();return this.forEach("valueMatrix",function(e,r,i){i.axes(a),i.source()&&i.source().retinalFields(t),i.layerDef(n.retinalEncoder.getLayerConfig(t,c[e][r])),i.updateModel(),u.push(i.source())}),o.notify({client:u,action:"updated",formalName:"unit"}),this}},{key:"createHeaders",value:function(e,t,n){var r=[],i=[],a=e.rows,o=e.columns,u=this.dependencies(),c=u.smartlabel,l=u.lifeCycleManager,s=this.getCellDef(this.registry().TextCell),f=this.getCellDef(this.registry().BlankCell),h=rb(a,2),d=h[0],p=h[1],y=rb(o,2),g=y[0],v=y[1],m=t.rows,b=function(e){return(new f).config({show:e.config().show})},_={left:Uv(d,m[0],n.showHeaders?s:f,c),right:Uv(p,m[1],n.showHeaders?s:f,c)},x={left:d.length>0?d[0].map(b):[],right:p.length>0?p[0].map(b):[]},w=[Gg,Yg].map(function(e){return g.map(function(t,n){return n===g.length-1?_[e]:x[e]})}),k=rb(w,2),E=k[0],S=k[1];if(0===g.length){var O=[Gg,Yg].map(function(e){return v.map(function(t,n){return 0===n?_[e]:x[e]})}),M=rb(O,2);r=M[0],i=M[1]}else r=v.map(function(){return d.length>0?d[0].map(b):[]}),i=v.map(function(){return p.length>0?p[0].map(b):[]});return l.notify({client:[E,S,r,i],action:"initialized",formalName:"facet-headers"}),{topLeft:E,topRight:S,bottomLeft:r,bottomRight:i}}},{key:"getMatrices",value:function(e,t,n,r){return nb({datamodel:e,componentRegistry:n,encoders:r,resolver:this},t)}}]),e}(),ub=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),cb=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var n={};this.matrix(t),this.filter(function(){return!0}),this.each(function(e,t,r){var i=e.valueOf();if(i&&i.id){var a=i.id();n[a]={instance:i,rowIndex:t,colIndex:r}}}),this.instancesById(n)}return ub(e,[{key:"instancesById",value:function(){return arguments.length?(this._instancesById=arguments.length<=0?void 0:arguments[0],this):this._instancesById}},{key:"matrix",value:function(){return arguments.length?(this._matrix=arguments.length<=0?void 0:arguments[0],this):this._matrix}},{key:"filter",value:function(){return arguments.length?(this._filterFn=arguments.length<=0?void 0:arguments[0],this):this._filterFn}},{key:"width",value:function(){var e=0;return this.matrix().forEach(function(t){var n=0;t.forEach(function(e){n+=e.getLogicalSpace().width}),e=Math.max(e,n)}),e}},{key:"height",value:function(){var e=0;return this.matrix().forEach(function(t){var n=0;t.forEach(function(e){n=Math.max(n,e.getLogicalSpace().height)}),e+=n}),e}},{key:"each",value:function(e){var t=this.matrix(),n=this.filter();return t.forEach(function(r,i){r.forEach(function(r,a){n(r)&&e(r,i,a,t)})}),this}},{key:"findPlaceHolderById",value:function(e){return this.instancesById()[e]}},{key:"getMatrixArray",value:function(){return this.matrix()}}]),e}(),lb=function(e){return e.store().registerImmediateListener([].concat(function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(Object.keys(iv)),[0]),function(){for(var t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=e.data(),a=n[0],o=n[1],u=n[2],c=n[3],l=n[4],s=n[5],f=n[6],h=n[7],d=n[8];if(i&&o[1]&&u[1]){var p=e.resolver(),y={selection:e.selection(),alias:e.alias(),globalConfig:a[1]||{},rows:o[1],columns:u[1],detail:f[1],layers:h[1],transform:d[1]},g=function(e){var t={};for(var n in e){var r=e[n];t[n]="string"!=typeof r&&r?r:{field:e[n]}}return t}({color:c[1],shape:l[1],size:s[1]});y=Object.assign(y,g);var v={};v.retinalEncoder=new Nv,v.simpleEncoder=function(e){var t=new Mv;return e&&(t=e.every(function(e){return"arc"===e.mark})?new Pv:t),t}(h[1]),e.groupType(v.simpleEncoder.constructor.type());var m=v.simpleEncoder.fieldSanitizer(i,y);v.simpleEncoder.setAxisAndHeaders(a[1]?a[1].axisFrom:{},m),h[1]&&p.layerConfig(h[1]),p.horizontalAxis(m.rows,v).verticalAxis(m.columns,v);var b=p.getMatrices(i,y,e.registry(),v);e._groupedDataModel=b.dataModels.groupedModel,e.selection(b.selection),p.createRetinalAxes(b.dataModels.parentModel.getFieldsConfig(),g,v),p.setDomains(y,b.dataModels,v),function(e,t){e._composition.matrices={value:new cb(t.values),left:new cb(t.rows[0]),right:new cb(t.rows[1]),top:new cb(t.columns[0]),bottom:new cb(t.columns[1])}}(e,b),e.cornerMatrices(p.createHeaders(b,m,a[1])),e.placeholderInfo(b),e._composition.axes=p.axes(),e.metaData({border:function(e,t){var n={top:!1,bottom:!1},r={left:!1,right:!1},i={top:!1,bottom:!1,left:!1,right:!1},a=e.rows,o=e.columns,u=e.values,c=jv(a,2),l=c[0],s=c[1],f=jv(o,2),h=f[0],d=f[1],p=t.fieldInfo(),y=p.rowDimensions,g=p.columnDimensions,v=p.rowTemporalFields,m=p.columnTemporalFields,b=p.columnMeasures,_=p.rowMeasures,x=y.length+g.length,w=_.length+b.length,k=v.length+m.length;if("polar"===t.constructor.type()){if(!x)return{showRowBorders:n,showColBorders:r,showValueBorders:i}}else if(!w&&!k&&x<=2)return{showRowBorders:n,showColBorders:r,showValueBorders:i};return n=function(e,t){var n={top:!1,bottom:!1};return(e.length>1||t.length>1)&&(n.top=!0,n.bottom=!0),n}(l,s),r=function(e,t){var n={left:!1,right:!1};return(e.length||t.length)&&(e[0]&&e[0].length>1||t[0]&&t[0].length>1)&&(n.left=!0,n.right=!0),n}(h,d),i=function(e,t){var n={top:!0,left:!0,bottom:!0,right:!0},r=[Gg,Yg],i=["top","bottom"];return e.forEach(function(e,t){e[0]&&e[0].length?n[r[t]]=!0:n[r[t]]=!1}),t.forEach(function(e,t){e.length?n[i[t]]=!0:n[i[t]]=!1}),n}([l,s],[h,d]),u.length>1&&(i.top=!0,i.bottom=!0),u.length&&u[0].length>1&&(i.left=!0,i.right=!0),{showRowBorders:n,showColBorders:r,showValueBorders:i}}(b,v.simpleEncoder)})}return e}),e},sb={alias:{},data:{sanitization:function(e,t){if(e._data!==t){var n=e.store(),r=n.get(0);n.commit(0,++r)}return t}},cornerMatrices:{},groupType:{},matrixInstance:{},metaData:{},placeholderInfo:{},resolver:{},registry:{sanitization:function(e,t){return e.resolver&&e.resolver().registry(t.cellRegistry),t}},selection:{},store:{}},fb=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function hb(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var db=function(e){function t(e,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this)),i=e.componentSubRegistry;return r._dependencies=n,Dc(r,sb),r.store(Rv()),r._composition={},r._data=[],r._matrixInstance={},r._mount=null,r._selection={},r._placeholderInfo={},r._cornerMatrices={},r.resolver(new ob(r._dependencies)),r.registry({layerRegistry:i.layerRegistry.get(),cellRegistry:i.cellRegistry.get()}),Ic(r,iv,r.store().model),lb(r),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,ov),fb(t,[{key:"matrixInstance",value:function(){return arguments.length?this:this.composition().matrices}},{key:"composition",value:function(){return arguments.length?this:this._composition}},{key:"lockModel",value:function(){return this.store().model.lock(),this}},{key:"unlockModel",value:function(){return this.store().model.unlock(),this}},{key:"where",value:function(e){return function(e,t){var n=null;return[Vg,qg,Wg].forEach(function(t){(void 0).store.get(t)&&e===(void 0).store.get(t)[0]&&(n=t)}),n?{channel:n}:([Hg,Ug].forEach(function(r){t[r+"Facets"].forEach(function(t){t.toString()===e&&(n={channel:"facet",type:r===Ug?"column":Hg})})}),n||([Hg,Ug].forEach(function(r){t[r+"Projections"].forEach(function(t){t.forEach(function(t){t.toString()===e&&(n=r===Ug?Rg:Lg)})})}),n?{channel:n}:null))}(e,this.resolver().getAllFields())}},{key:"getAxes",value:function(e){return"retinal"===e?this.resolver().getRetinalAxes():this.resolver().getSimpleAxes(e)}},{key:"getCells",value:function(e){return this.resolver()[e+"Cells"]()}},{key:"getFieldsFromChannel",value:function(e){var t=this.resolver().getAllFields(),n=t.rowProjections,r=t.colProjections;return e===Lg?n:r}},{key:"getCellsByFacetKey",value:function(e){var t=this.resolver();return t.rowCells()[e]||t.colCells()[e]||[]}},{key:"getAxesByFacetKey",value:function(e,t){var n=this.resolver();return(n.rowCells()[t]||n.colCells()[t])[0].valueOf().axes()[e]||[]}},{key:"serialize",value:function(){var e,t=this.store();return hb(e={},"config",t.get("config")),hb(e,"mount",t.get("mount")),e}},{key:"getGroupByData",value:function(){return this._groupedDataModel}}]),t}(),pb=(n(1),function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}());function yb(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}var gb,vb,mb=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,vh),pb(t,[{key:"setSelectionSet",value:function(e,t){if(null===e)t.reset();else if(e.length){var n=e.filter(function(e){return t._set[e]===o.SELECTION_OLD_EXIT||t._set[e]===o.SELECTION_NEW_EXIT});n.length?(t.updateEntry(),t.add(n)):(t.updateExit(),t.remove(e));var r=t.getSets().exitSet,i=[].concat(yb(new Set(r[1])),yb(new Set(r[0]))),a=t.getCompleteSet().length;r[1].length!==a&&i.length===a&&t.reset()}else t.remove(t.getCompleteSet());return this}}],[{key:"formalName",value:function(){return"select"}}]),t}();function bb(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var _b,xb,wb=(bb(gb={},a.DRAG,{target:".muze-gradient-rect",behaviours:[u.BRUSH]}),bb(gb,a.HOVER,{target:[".muze-legend-columns"],behaviours:[u.HIGHLIGHT]}),bb(gb,a.CLICK,{target:[".muze-legend-columns"],behaviours:[u.SELECT]}),gb),kb=(bb(vb={},u.SELECT,u.FILTER),bb(vb,u.BRUSH,u.HIGHLIGHT),vb);function Eb(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Sb=(Eb(_b={},"brush",["selectionBox",{name:"highlighter",options:{strategy:"fade"}}]),Eb(_b,"highlight",["highlighter"]),Eb(_b,"select",[{name:"highlighter",options:{strategy:"fade"}}]),_b),Ob=(Eb(xb={},"brush",[{name:"highlighter",options:{strategy:"fade"}}]),Eb(xb,"highlight",[{name:"highlighter",options:{strategy:"fade"}}]),Eb(xb,"select",["filter"]),xb),Mb={size:"getSize",shape:"getShape",color:"getColor"},Cb="value",Tb=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),Pb=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(r)));return a.initializeSideEffects(),a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,eh),Tb(t,[{key:"getPropagationSelectionSet",value:function(e){return e[0]}},{key:"propagate",value:function(e,t,n){!function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=void 0,a=e.context.constructor.type(),o=r.payload,u=e.context.data(),c=e.context.metaData(),l=c.getData().schema[0].type,s={},f=e.context._id;s.action=kb[t]||t,s.sideEffects=Ob[t],s.sourceCanvas=e.context.canvasAlias();var h=e._actions.behavioural[s.action].constructor.mutates();if(null===o.criteria)i=null;else{var d=n.mergedEnter,p=u.filter(function(e){return-1!==d.uids.indexOf(e.id)}).map(function(e){return e.value});if("step"===a||"discrete"===a&&"measure"===l){var y=Object.keys(o.criteria||{})[0];i=(p=u.filter(function(e){return-1!==d.uids.indexOf(e.id)}).map(function(e){return e.range})).length?c.select(function(e){for(var t=!1,n=0;n<p.length&&!0!==(t=e[y].value>=p[n][0]&&e[y].value<=p[n][1]);n++);return t},{saveChild:!1}):null}else"gradient"===a?i=qc(c,o.criteria):p.length?i=function(e,t){var n=[],r=void 0,i=e.getFieldsConfig();return t.length?function(){for(var e=t[0],a=e.length,o=0;o<a;o++){var u=e[o],c=i[u]&&Object.assign({},i[u].def);c&&n.push(Object.assign(c))}r=[];for(var l=t[0],s=function(e){var n={};t[e].forEach(function(e,t){n[l[t]]=e}),r.push(n)},f=1;f<t.length;f+=1)s(f)}():(r=[],n=[]),new e.constructor(r,n)}(c,[o.criteria[0]].concat(function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(p.map(function(e){return[e]})))):(s.criteria=null,i=c.select(function(){return!0},{saveChild:!1}))}var g=!1;i&&(g=i.getSchema().every(function(e){return e.type===l.MEASURE}));var v={sourceId:"legend-"+f,payload:s,criteria:null===s.criteria?null:i,isMutableAction:h,propagateInterpolatedValues:g,action:s.action};c.propagate(i,v,!0)}(this,e,n,{payload:t})}},{key:"getAddSetFromCriteria",value:function(e){var t=void 0,n=void 0,r=this.context.constructor.type();return null===e?n=null:"step"===r?(t=Object.values(e),n=this.context.data().filter(function(e){return-1!==t.indexOf(e.range)}).map(function(e){return e.id})):"gradient"===r?n=[]:(t=e[1])?n=this.context.data().filter(function(e){return-1!==t.indexOf(e.value)}).map(function(e){return e.id}):(t=Object.values(e),n=this.context.data().filter(function(e){return-1!==t.indexOf(e.range)}).map(function(e){return e.id})),{uids:n,model:null}}},{key:"getFullData",value:function(){return null}}]),t}();function Ab(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Nb;function jb(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Fb=(jb(Nb={},"drag",function(e){return function(t,n){var r={},i={},a=void 0,o=vf(),u=e.context,c=u.measurement().gradientDimensions,l="horizontal"===u.config().align?"x":"y",s=u.axis().source().scale(),f=s.range()["x"===l?0:1];t.call(o().on("start",function(){var e=gf();r={x:e.x,y:e.y}}).on("drag",function(){var t=gf();(i={x:t.x,y:t.y}).x=Math.max(0,Math.min(i.x,c.width)),i.y=Math.max(0,Math.min(i.y,c.height)),a={criteria:Ab({},u.fieldName(),[s.invert(r[l]+2*f),s.invert(i[l]+2*f)].sort(function(e,t){return e-t}))},n.forEach(function(t){return e.dispatchBehaviour(t,a)})}).on("end",function(){var t=gf();(i={x:t.x,y:t.y}).x=Math.max(0,Math.min(i.x,c.width)),i.y=Math.max(0,Math.min(i.y,c.height)),a=r[l]===i[l]?{criteria:{}}:{criteria:Ab({},u.fieldName(),[s.invert(r[l]+2*f),s.invert(i[l]+2*f)].sort(function(e,t){return e-t}))},n.forEach(function(t){return e.dispatchBehaviour(t,a)})}))}}),jb(Nb,"hover",function(e){return function(t,n){var r=function(t){var r={criteria:e.context.getCriteriaFromData(t)};n.forEach(function(t){return e.dispatchBehaviour(t,r)}),event.stopPropagation()};t.on("mouseover",r).on("mousemove",r).on("mouseout",function(){n.forEach(function(t){return e.dispatchBehaviour(t,{criteria:null})}),event.stopPropagation()})}}),jb(Nb,"click",function(e){return function(t,n){t.on("click",function(t){var r={criteria:e.context.getCriteriaFromData(t)};n.forEach(function(t){return e.dispatchBehaviour(t,r)})})}}),Nb);function Ib(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Db=function(e,t,n){var r=[],i=t.axisScale,a=t.axisType,o=n.startPos,u=n.endPos,c=n.selectionBoxMeasure,l=n.drawingInfMeasure,s=n.offset,f=e[a];return r=o[a]===u[a]?[]:f+c>=l+s?[i.invert(l+s-c),i.invert(l+s)]:f-s<s?[i.invert(2*s),i.invert(c+2*s)]:[i.invert(f),i.invert(f+c)],"x"===a||r.reverse(),r},Rb=(n(38),function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}()),Lb=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,Ph),Rb(t,[{key:"apply",value:function(e,t){var n=void 0,r=void 0,i=void 0,a=void 0,o=this.firebolt,u=o.context,c=this.config(),l=u.axis().source(),s=c.classPrefix+"-"+c.className,f=t.criteria[o.context.fieldName()],h=l.scale(),d=f?[l.getScaleValue(f[0]),l.getScaleValue(f[1])]:[],p="horizontal"===u.config().align?"x":"y",y=o.context.measurement().gradientDimensions["x"===p?"height":"width"],g=h.range()["x"===p?0:1],v=u.getDrawingContext().svgContainer,m=lf(v,"g",[1],c.classPrefix+"-selection-box-group");"horizontal"===o.context.config().align?(n=d[0]-g||0,r=0,i=d[1]-d[0]||0,a=y):(n=0,r=d[1]-g||0,a=d[0]-d[1]||0,i=y),lf(m,"rect",[{domain:f,x:n,y:r,width:i,height:a}],s,{enter:function(e){!function(e){return function(t,n){var r={},i=void 0,a={},o=vf(),u=e.context,c=u.axis().source().scale(),l="horizontal"===u.config().align?"x":"y",s={drawingInfMeasure:u.measurement().gradientDimensions["x"===l?"width":"height"],offset:c.range()["x"===l?0:1]},f={};t.call(o().on("start",function(){var e=gf();r=function(e,t){var n=e.getBoundingClientRect();return{x:t.x-n.x,y:t.y-n.y}}(this,e.sourceEvent),f=e.subject}).on("drag",function(){var t=gf(),o=f["x"===l?"width":"height"];f.x+=t.dx,f.y+=t.dy,s.selectionBoxMeasure=o,s.startPos=r,s.endPos=a;var h=Db(f,{axisScale:c,axisType:l},s);i={criteria:Ib({},u.fieldName(),h),fadeOut:!0},e.dispatchBehaviour(n[0],i)}).on("end",function(){var t=gf(),o=f["x"===l?"width":"height"];s.selectionBoxMeasure=o,s.startPos=r,s.endPos=a;var h=Db(t,{axisScale:c,axisType:l},s);i={criteria:Ib({},u.fieldName(),h),fadeOut:!0,config:{transition:{duration:200}}},e.dispatchBehaviour(n[0],i)}))}}(o)(e,["brush"])}}).attr("y",r).attr("x",n).attr("width",i).attr("height",a)}}],[{key:"formalName",value:function(){return"selectionBox"}},{key:"defaultConfig",value:function(){return{className:"legend-selection-box",classPrefix:"muze"}}}]),t}(),zb=function(e){var t=e.context,n=function(e,n,r){var i=t.config().classPrefix;cf(t.mount()).selectAll("."+i+"-legend-columns").filter(function(t){return-1!==e.uids.indexOf(t.id)}).selectAll("div").classed(n,r)};return{fade:function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=t.config().classPrefix;e.mergedEnter.length||e.mergedExit.length?(n(e.mergedExit,r.className||i+"-legend-brighten",!1),n(e.mergedExit,r.className||i+"-legend-fadeout",!0),n(e.mergedEnter,r.className||i+"-legend-fadeout",!1)):n(e.completeSet,r.className||i+"-legend-fadeout",!1)},brighten:function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=t.config().classPrefix;e.mergedEnter.length||e.mergedExit.length?(n(e.mergedEnter,r.className||i+"-legend-brighten",!0),n(e.mergedExit,r.className||i+"-legend-brighten",!1)):n(e.completeSet,r.className||i+"-legend-brighten",!1)}}},Bb=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),Ub=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(r)));return a._strategies=zb(a.firebolt),a._strategy="brighten",a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,Oh),Bb(t,[{key:"apply",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};(0,this._strategies[n.strategy||this._strategy])(e,this)}}],[{key:"formalName",value:function(){return"highlighter"}}]),t}(),Hb={config:{sanitization:function(e,t){return zc(e._config||{},t)}},data:{},fieldName:{},legendContainer:{},measurement:{sanitization:function(e,t){var n=zc(e._measurement,t);return["padding","border","margin"].forEach(function(e){n[e]=Math.min(n[e]>0?n[e]:0,.1*n.maxWidth,.1*n.maxHeight)}),n}},logicalSpace:{},metaData:{},range:{sanitization:function(e,t){return e.scale().range(t),e.resetLogicalSpace(),e.store().commit("range",t),t}},scale:{},smartTicks:{},store:{},title:{sanitization:function(e,t){return zc(e._title||{},t)}}},Vb={height:30,width:30,maxWidth:1/0,maxHeight:1/0,padding:2,margin:2,border:1},Wb={text:"",orientation:function(e){return"left"===e||"right"===e?"left":"center"}},qb={classPrefix:"muze",borderStyle:"solid",borderColor:"rgba(0,0,0,0)",formatter:{bounds:{lower:"less than",upper:"more than"}},item:{text:{orientation:"right",width:10,formatter:function(e){return e}},icon:{className:"legend-icon",height:20,width:20,color:"rgba(0,0,0,.5)",type:"square"}}};function Gb(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Yb,$b,Xb,Kb,Qb=function(e){var t=e.constructor.type();return{scaleType:t,domain:e.uniqueValues(),steps:e.config().stops||1,scaleFn:Mb[t]}},Jb=function(e,t){for(var n=[],r=Uc()(e[0],e[1]),i=0;i<=t;i++)n[i]=r(i/t);return n},Zb=function(e,t,n){var r,i=t.scaleFn,a=t.scaleType,o=t.scale,u=n.domain,c=n.domainBounds,l=n.domainLeg,s=n.steps,f=u["lower"===e?0:u.length-1],h=s["lower"===e?0:s.length-1];return Gb(r={},a,"size"===a?o[i](f)*o.getScaleFactor():o[i](f)),Gb(r,"value",c[e]),Gb(r,"id","lower"===e?0:l.length+2),Gb(r,"range",[f,h]),r},e_=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),t_=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._data=[],this._metaData=[],this._mount=null,this._fieldName=null,this._title=Object.assign({},Wb),this._metaData=null,this._labelManager=t.labelManager,this._cells=t.cells,this._id=xc(),this._measurement=Object.assign({},this.constructor.defaultMeasurement()),this._config=zc({},this.constructor.defaultConfig()),Dc(this,Hb),this._computedStyle=mf(cf("body"),this.config().classPrefix+"-legend-item-info"),this._firebolt=new Pb(this,{behavioural:Object.assign({},c,d),physical:Fb,physicalBehaviouralMap:wb},p,Sb)}return e_(e,[{key:"id",value:function(){return this._id}},{key:"firebolt",value:function(){return arguments.length?this:this._firebolt}},{key:"elemType",value:function(){return"path"}},{key:"canvasAlias",value:function(){return arguments.length?(this._canvasAlias=arguments.length<=0?void 0:arguments[0],this):this._canvasAlias}},{key:"mount",value:function(){return arguments.length?(this._mount=arguments.length<=0?void 0:arguments[0],this.render(),this):this._mount}},{key:"getLabelSpaces",value:function(){var e=this.config(),t=e.item,n=e.classPrefix;return this._labelManager.setStyle(mf(cf("body"),n+"-legend-item-info")),function(e,t,n,r){var i=[];return e.forEach(function(e,a){var o=t?e[t]:e,u=n.getOriSize(r(o)),c=u.height,l=u.width;i[a]={height:c+1,width:l+1}}),i}(this.data(),Cb,this._labelManager,t.text.formatter)}},{key:"setLegendMeasures",value:function(){var e=this.measurement(),t=e.width,n=e.height,r=e.maxWidth,i=e.maxHeight,a=e.padding,o=e.margin,u=e.border,c=this.config().align,l=2*a,s=2*u,f=2*o;this.data(this.dataFromScale(this.scale()));var h=this.getTitleSpace(),d=h.height>0?h.height+l:0,p=h.width+l,y=this.getLabelSpaces(l,c),g=function(e,t,n){var r=0,i=0,a={width:0,height:0},o=t.effPadding,u=t.titleWidth,c=t.labelSpaces,l=t.titleHeight,s=t.maxWidth,f=e.item,h=e.align,d=f.icon,p=f.text.orientation,y=[],g=[],v=0;return c.forEach(function(e,t){var c={width:0,height:0},l={width:0,height:0},s=n[t]||{};"left"===p||"right"===p?(e.width+=o,l.width=(s.size?2*Math.sqrt(s.size/Math.PI):d.width)+o,v=Math.max(l.width,v),c.width=e.width+v,e.height=Math.max(e.height,d.height)+o,l.height=e.height,c.height=e.height):(e.width=Math.max(e.width,s.size?2*Math.sqrt(s.size/Math.PI):d.width)+o,l.width=e.width,c.width=e.width,v=Math.max(l.width,v),e.height+=o,l.height=d.height+o,c.height=e.height+l.height),"horizontal"===h?r=Math.max(r,c.height):(r+=c.height,i=Math.max(i,c.width,u)+o),a={width:Math.max(c.width,a.width),height:Math.max(c.height,a.height)},y.push(c),g.push(l)}),y.forEach(function(e,t){"horizontal"===h?(e.height=r,g[t].width=v,"left"===p||"right"===p?(c[t].height=r,g[t].height=r,y[t].width=c[t].width+v):(c[t].width=v,y[t].width=v,c[t].width=v),i=Math.max(i+y[t].width)):(e.width=Math.max(i,s),"top"===p||"bottom"===p?(c[t].width=i,g[t].width=i,v=i):(g[t].width=v,y[t].width=c[t].width+v,c[t].width=a.width-v,i=Math.max(i,e.width)+o))}),i=Math.max(i,u),{totalHeight:r+=l+o,totalWidth:i,itemSpaces:y,iconSpaces:g,maxItemSpaces:a,maxIconWidth:v}}(this.config(),{effPadding:l,titleWidth:p,labelSpaces:y,titleHeight:d,maxWidth:r,maxHeight:i},this.data()),v=g.totalHeight,m=g.totalWidth,b=g.itemSpaces,_=g.iconSpaces,x=g.maxItemSpaces,w=g.maxIconWidth;return this.measurement({width:Math.max(m,t)+f+s,height:Math.max(v,n)+f+s,labelSpaces:y,iconSpaces:_,itemSpaces:b,maxItemSpaces:x,maxIconWidth:w,titleSpaces:{width:Math.min(r,this.measurement().width)-f-s,height:d}}),this}},{key:"getTitleSpace",value:function(){return this._labelManager.setStyle(mf(cf("body"),this.config().classPrefix+"-legend-title")),this._labelManager.getOriSize(this.title().text?this.title().text:"")}},{key:"renderTitle",value:function(e){var t=this.measurement(),n=t.titleSpaces,r=t.border,i=t.padding,a=t.width,o=this.config(),u=o.borderStyle,c=o.borderColor;return function(e,t,n,r){var i=lf(e,"table",[1],r.classPrefix+"-legend-title").style("width",n.width+"px").style("height",n.height+"px").style("border-bottom",n.border+"px "+r.borderStyle+" "+r.borderColor).style("text-align",t.orientation instanceof Function?t.orientation(r.position):t.orientation);return lf(i,"td",[1],r.classPrefix+"-legend-title-text").style("width",n.width+"px").style("height","100%").style("padding",n.padding+"px").text(t.text).node()}(e,this.title(),{height:n.height,width:a,border:r,padding:i,borderStyle:u,borderColor:c},this.config())}},{key:"render",value:function(){var e=this.firebolt(),t=this.config(),n=t.classPrefix,r=t.borderStyle,i=t.borderColor,a=this.measurement(),o=a.maxWidth,u=a.maxHeight,c=a.width,l=a.height,s=a.margin,f=a.border,h=lf(cf(this.mount()),"div",[1],n+"-legend-box");return h.classed(n+"-legend-box-"+this._id,!0),h.style("float","left"),h.style("width",Math.min(o,c)-2*s+"px").style("height",Math.min(u,l)-2*s+"px").style("margin",s+"px").style("border",f+"px "+r+" "+i),this.legendContainer(h.node()),this.renderTitle(h),e.createSelectionSet(this.data().map(function(e){return e.id})),h}},{key:"getCriteriaFromData",value:function(e){var t=this.fieldName();return"measure"===this.metaData().getData().schema[0].type?function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}({},t,e.range):[[t],[e.value]]}}],[{key:"create",value:function(t){return new e(t)}},{key:"defaultConfig",value:function(){return qb}},{key:"defaultMeasurement",value:function(){return Vb}}]),e}();function n_(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var r_=(n_(Yb={},"horizontal",{datasets:function(e){return{row:[1],column:e}},itemContainerMeasures:function(e){var t=e.itemSpaces;return{row:{width:e.width+"px",padding:"0px"},column:{width:function(e,n){return t[n].width+"px"},padding:"0px"}}},getStepSpacesInfo:function(e){var t=e.maxItemSpaces;return{iconHeight:e.height,iconWidth:t.width,stepPadding:{horizontal:!0,vertical:!1}}}}),n_(Yb,"vertical",{datasets:function(e){return{row:e,column:function(e){return[e]}}},itemContainerMeasures:function(e,t){var n=e.width;return{row:{width:n+"px",padding:t.padding+"px"},column:{width:n+"px",padding:"0px"}}},getStepSpacesInfo:function(e){var t=e.maxItemSpaces,n=e.width;return{iconHeight:t.height,iconWidth:n,stepPadding:{horizontal:!1,vertical:!0}}}}),Yb),i_=(n_($b={},"left",r_.vertical),n_($b,"right",r_.vertical),n_($b,"top",r_.horizontal),n_($b,"bottom",r_.horizontal),$b),a_=(n_(Xb={},"left","end"),n_(Xb,"right","start"),n_(Xb,"top","center"),n_(Xb,"bottom","center"),Xb),o_=(n_(Kb={},"left",[Cb,"shape"]),n_(Kb,"right",["shape",Cb]),n_(Kb,"top",[Cb,"shape"]),n_(Kb,"bottom",["shape",Cb]),Kb),u_=function(e,t,n,r){var i,a,o,u,c=e.measurement(),l=c.margin,s=c.border,f=c.titleSpaces,h=c.width,d=c.height,p=c.maxWidth,y=c.maxHeight;a=d-(f.height+2*l+2*s),i=h-(2*l+2*s),o=y-(f.height+2*l+2*s),u=p-(2*l+2*s);var g=lf(t,"div",[1],n+"-legend-body");return g.select("."+n+"-legend-overflow").remove(),u&&u<i&&(g=g.style("width",u+"px").style("overflow-x","scroll")),o&&o<a&&g.style("height",o+"px").style("overflow-y","scroll"),(g=lf(g,"div",[1],n+"-legend-overflow")).style("width",i+"px"),g.style("height",a+"px"),{legendItem:function(e,t,n){var r=n.measurement(),i=n.config(),a=r.itemSpaces,o=i.classPrefix,u=i.position,c=i_[u],l=c.datasets(t),s=c.itemContainerMeasures(r,i),f=lf(e,"div",l.row,o+"-legend-row");f.style("height",function(e,t){return a[t].height+"px"}),f.style("width",s.row.width),f.style("padding",s.row.padding);var h=lf(f,"div",l.column,o+"-legend-columns");return h.style("width",s.column.width),h.style("padding",s.column.padding),h}(g,r,e)}},c_=function(e,t){var n=e.config(),r=n.classPrefix,i=n.item.text.orientation,a=o_[i],o=lf(t,"div",function(t,n){return a.map(function(r){return[r,t[r],t.color,t.size,t.value,e.fieldName(),n]})},r+"-legend-item-info"),u=a_[i];return o.classed(u,!0),{itemSkeleton:o}},l_=function(e,t,n,r){var i=r.measurement(),a=i.padding,o=i.labelSpaces,u=i.iconSpaces,c=i.maxIconWidth,l=n?2*-a:0;return e[0]===Cb?o[e[6]][t]+"px":("width"!==t||n?u[e[6]][t]-l:c)+"px"},s_=function(e,t,n,r){var i=r.classPrefix,a=r.iconHeight,o=r.iconWidth,u=r.maxIconWidth,c=r.padding,l=r.color,s=lf(t,"svg",function(e){return[e]},i+"-legend-icon-svg").attr("width",u).attr("height",a).style("width",u+"px").style("height",a+"px");"rect"!==e?function e(t,n,r,i,a){var o=n,u=t[3]||Math.min(i,a)*Math.PI,c=t[1]||r;if(c instanceof Promise)c.then(function(r){return t.shape=r,e(t,n)});else{if(c instanceof Element){var l=c.cloneNode(!0);if("img"===l.nodeName.toLowerCase()){var s=l.src||l.href;(l=document.createElementNS("http://www.w3.org/2000/svg","image")).setAttribute("href",s)}return cf(l).attr("transform","scale("+u/100+")"),cf(o.node().appendChild(l))}if("string"==typeof c){var f;return f=function(e){return!!(/^[mzlhvcsqta]\s*[-+.0-9][^mlhvzcsqta]+/i.test(e)&&/[\dz]$/i.test(e)&&e.length>4)}(c)?c:function(e){return e&&"string"==typeof e?Qc(e):e}(c).size(u)(),lf(o,"path",function(e){return[e]}).attr("d",f)}}return t[1]="circle",e(t,n,"circle")}(n,lf(s,"g",[n[1]],i+"-legend-icon"),n[3]?"circle":"square",o,a).attr("transform","translate("+(u/2-c)+" "+a/2+")").attr("fill",n[2]||l):lf(s,"rect",[n[1]],i+"-legend-icon").attr("x",0).attr("y",0).attr("width",u).attr("height",a).attr("fill",n[2]||l)},f_=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function h_(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var d_=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,t_),f_(t,[{key:"dataFromScale",value:function(e){var t=Qb(e),n=t.scaleType,r=t.domain,i=t.scaleFn,a=[].concat(function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(new Set(r))),o=this.metaData().getData().schema[0].type;return a=a.map(function(t,r){var u,c=0,l=0;return"measure"===o?l=[c=(+a[r]).toFixed(0),(a[r+1]?+a[r+1]:+c).toFixed(0)]:(c=a[r],l=[a[r]]),h_(u={},n,e[i](t)),h_(u,"value",c),h_(u,"id",r),h_(u,"range",l),u}).filter(function(e){return null!==e.value}),a="size"===n?a.sort(function(e,t){return e[n]-t[n]}):a}},{key:"render",value:function(){var e=this.firebolt(),n=this.data(),r=this.config().classPrefix,i=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var a=Object.getPrototypeOf(t);return null===a?void 0:e(a,n,r)}if("value"in i)return i.value;var o=i.get;return void 0!==o?o.call(r):void 0}(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"render",this).call(this,this.mount()),a=u_(this,i,r,n).legendItem;return function(e,t){var n=e._labelManager,r=e.config(),i=r.item,a=r.classPrefix,o=e.measurement(),u=o.maxIconWidth,c=o.padding,l=i.icon,s=l.width,f=l.height,h=l.color,d=l.className,p=i.text.orientation,y=i.text.formatter;n.useEllipsesOnOverflow(!0),sf(t,{width:function(t){return l_(t,"width",!1,e)},height:function(t){return l_(t,"height",!1,e)},"text-align":"center",padding:c+"px"}),n.setStyle(e._computedStyle),t.each(function(e,t){e[0]===Cb?cf(this).text(y(e[1])).style("padding-"+("right"===p?"left":"right"),"0px"):(cf(this).classed(a+"-"+d,!0),cf(this).classed(a+"-"+d+"-"+t,!0),s_("circle",cf(this),e,{classPrefix:a,iconWidth:s,iconHeight:f,maxIconWidth:u,padding:c,color:h}))})}(this,c_(this,a).itemSkeleton),i.selectAll("div").style("float","left"),e.mapActionsAndBehaviour(),e.createSelectionSet(this.data().map(function(e){return e.id})),i}}],[{key:"create",value:function(e){return new t(e)}},{key:"type",value:function(){return"discrete"}}]),t}(),p_=function(e){return"number"==typeof e[0].value?e.reduce(function(e,t){return[Math.min(t.value,e[0]),Math.max(t.value,e[1])]},[Number.MAX_VALUE,Number.MIN_VALUE]):e.map(function(e){return e.value})},y_=function(e,t,n,r){var i=e.axis();i.setAvailableSpace(r,n),i.render(t.node())},g_=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function v_(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function m_(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}var b_=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,t_),g_(t,[{key:"axis",value:function(){return arguments.length?(this._axis=arguments.length<=0?void 0:arguments[0],this):this._axis}},{key:"dataFromScale",value:function(e){var t=[],n=Qb(e),r=n.scaleType,i=n.domain,a=n.steps,o=n.scaleFn;return a instanceof Array?(i[0]<a[0]&&(t[0]=i[0]),t=[].concat(m_(t),m_(a)),i[i.length-1]>a[a.length-1]&&t.push(i[1])):t=Jb(i,a-1),(t=[].concat(m_(new Set(t))).sort(function(e,t){return e-t})).map(function(n,i){var a,u=t[i];return v_(a={},r,"size"===r?e[o](n)*e.getScaleFactor():e[o](Math.floor(n))),v_(a,"value",+u.toFixed(2)),v_(a,"id",i),a}).filter(function(e){return null!==e.value})}},{key:"getLabelSpaces",value:function(e){this.config({item:{text:{orientation:this.config().position}}});var t=function(e){var t=e.data(),n=e.config().align,r=e._cells.AxisCell,i=new Dp({id:"legend-"+e._id,orientation:"vertical"===n?"right":"bottom",style:e._computedStyle,nice:!1,showAxisName:!1,tickValues:t.map(function(e){return e.value}),fixedBaseline:!1},{labelManager:e._labelManager});return i.domain(p_(t)),i.range([1,1]),(new r).source(i).config({margin:{left:0,bottom:0,top:0,right:0}})}(this),n=t.getLogicalSpace(),r={width:n.width-e,height:n.height-e},i=t.source().domain().length,a=new Array(i).fill(r);return this.axis(t),a}},{key:"getDrawingContext",value:function(){return{svgContainer:this._legendGradientSvg}}},{key:"render",value:function(){var e=this.firebolt(),n=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var a=Object.getPrototypeOf(t);return null===a?void 0:e(a,n,r)}if("value"in i)return i.value;var o=i.get;return void 0!==o?o.call(r):void 0}(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"render",this).call(this,this.mount());return function(e,t){var n,r,i=e.config(),a=i.align,o=i.classPrefix,u=i.item,c=function(e,t,n){var r=p_(n),i=lf(e,"div",[1],t+"-legend-body"),a=lf(i,"svg",[1],t+"-gradient"),o=lf(a,"g",[1],t+"-gradient-group");return{legendContainer:i,legendGradCont:o,legendGradSvg:a,linearGradient:function(e,t,n){var r=lf(e,"defs",[1]),i=lf(r,"linearGradient",[1]).attr("id","linear-gradient").attr("x1","0%").attr("y2","0%");return lf(i,"stop",t,"stop-gradient").attr("offset",function(e){return 100*(e.value-n[0])/(n[1]-n[0])+"%"}).attr("stop-color",function(e){return e.color}),i}(a,n,r),legendRect:lf(o,"rect",[1],t+"-gradient-rect")}}(t,o,e.data()),l=c.legendContainer,s=c.legendGradSvg,f=c.legendGradCont,h=c.linearGradient,d=c.legendRect,p=e.axis().source().getAxisDimensions().tickLabelDim,y=e.measurement(),g=y.padding,v=y.margin,m=y.border,b=y.titleSpaces,_=y.maxHeight,x=y.maxWidth,w=y.height,k=y.width,E={};n=Math.floor(w-(b.height+2*v+2*m)),r=Math.floor(k-(2*v+2*m)),"horizontal"===a?(E.height=u.icon.height,E.width=r-2*g-p.width/2,h.attr("x2","100%").attr("y1","0%"),f.attr("transform","translate( "+p.width/2+" 0)"),y_(e,l,n-u.icon.height-g,r-2*g-1),l.classed(o+"-overflow-x",k>x),sf(l,{height:w+"px",width:Math.min(k,x)+"px",padding:g+"px"}),d.attr("height",E.height),d.attr("width",E.width-p.width/2)):(E.height=n-2*g-p.height/2,E.width=u.icon.width,h.attr("x2","0%").attr("y1","100%"),f.attr("transform","translate(0 "+p.height/2+")"),y_(e,l,n-2*g-1,r-u.icon.width-2*g),l.classed(o+"-overflow-y",w>_),sf(l,{height:Math.min(w,_)+"px",width:k+"px",padding:g+"px"}),d.attr("height",E.height-p.height/2),d.attr("width",E.width)),sf(s,{height:E.height+"px",width:E.width+"px"}),sf(d,{fill:"url(#linear-gradient)"}),s.attr("height",E.height),s.attr("width",E.width),e.measurement({gradientDimensions:E}),e._legendGradientSvg=s}(this,n),n.selectAll("div").style("float","left"),e.mapActionsAndBehaviour(),e.createSelectionSet(this.data().map(function(e){return e.id})),n}},{key:"getCriteriaFromData",value:function(e){return[[this.fieldName()],[e.value]]}}],[{key:"create",value:function(e){return new t(e)}},{key:"type",value:function(){return"gradient"}}]),t}(),__=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),x_=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var a=Object.getPrototypeOf(t);return null===a?void 0:e(a,n,r)}if("value"in i)return i.value;var o=i.get;return void 0!==o?o.call(r):void 0};function w_(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function k_(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}var E_,S_=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,t_),__(t,[{key:"dataFromScale",value:function(e){var t=[],n=Qb(e),r=n.scaleType,i=n.domain,a=n.steps,o=n.scaleFn,u=this.config().formatter,c={lower:null,upper:null};if(a instanceof Array?(i[0]<a[0]&&(c.lower=[u.bounds.lower+" "+a[0]]),t=[].concat(k_(t),k_(a)),i[i.length-1]>a[a.length-1]&&(c.upper=[u.bounds.upper+" "+a[a.length-1]])):t=Jb(i,a),t=(t=[].concat(k_(new Set(t))).sort(function(e,t){return e-t})).map(function(n,i){var a,u=null;return i<t.length-1&&(u=n.toFixed(1)+" - "+ +t[i+1].toFixed(1)),w_(a={},r,"size"===r?e[o](n)*e.getScaleFactor():e[o](n)),w_(a,"value",u),w_(a,"id",i+1),w_(a,"range",[n,t[i+1]]),a}).filter(function(e){return null!==e.value}),c.lower){var l=Zb("lower",{scale:e,scaleFn:o,scaleType:r},{domain:i,steps:a,domainBounds:c});t=[l].concat(k_(t))}if(c.upper){var s=Zb("upper",{scale:e,scaleFn:o,scaleType:r},{domain:i,steps:a,domainBounds:c,domainLeg:t});t=[].concat(k_(t),[s])}return t}},{key:"getLabelSpaces",value:function(e,n){return this.config({item:{text:{orientation:this.config().position}}}),x_(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"getLabelSpaces",this).call(this,e,n)}},{key:"elemType",value:function(){return"rect"}},{key:"render",value:function(){var e=this.firebolt(),n=this.config(),r=n.classPrefix,i=n.position,a=function(e){var t;return n_(t={},"left",e.reverse()),n_(t,"right",e.reverse()),n_(t,"top",e),n_(t,"bottom",e),t}(this.data())[i],o=x_(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"render",this).call(this,this.mount()),u=u_(this,o,r,a).legendItem;return function(e,t){var n=e._labelManager,r=e.config(),i=r.item,a=r.position,o=r.classPrefix,u=e.measurement(),c=u.maxItemSpaces,l=u.maxIconWidth,s=u.padding,f=i.icon,h=f.width,d=f.height,p=f.color,y=i.text.formatter;n.useEllipsesOnOverflow(!0);var g=i_[a].getStepSpacesInfo({maxItemSpaces:c,height:d,width:h}),v=g.iconHeight,m=g.iconWidth,b=g.stepPadding;sf(t,{width:function(t){return l_(t,"width",b.horizontal,e)},height:function(t){return l_(t,"height",b.vertical,e)},"text-align":"center",padding:s+"px"}),n.setStyle(e._computedStyle),t.each(function(e){e[0]===Cb?cf(this).text(y(e[1])):s_("rect",cf(this),e,{classPrefix:o,iconWidth:m,iconHeight:v,maxIconWidth:l,color:p})})}(this,c_(this,u).itemSkeleton),o.selectAll("div").style("float","left"),e.mapActionsAndBehaviour(),e.createSelectionSet(this.data().map(function(e){return e.id})),o}},{key:"getCriteriaFromData",value:function(e){return w_({},this.fieldName(),e.range)}}],[{key:"create",value:function(e){return new t(e)}},{key:"type",value:function(){return"step"}}]),t}();function O_(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var M_="padding",C_="border",T_="margin",P_=["script","style"],A_=(O_(E_={},"ordinal-true-color",d_),O_(E_,"ordinal-true-size",d_),O_(E_,"ordinal-true-shape",d_),O_(E_,"ordinal-false-color",d_),O_(E_,"ordinal-false-shape",d_),O_(E_,"ordinal-false-size",d_),O_(E_,"linear-false-size",d_),O_(E_,"linear-true-size",d_),O_(E_,"linear-false-shape",d_),O_(E_,"linear-true-color",S_),O_(E_,"linear-false-color",b_),E_),N_=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return new(Function.prototype.bind.apply(sv,[null].concat(function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(t.map(function(e){return new hv(e)})))))};function j_(e){for(var t="",n=arguments.length<=1?0:arguments.length-1,r=0;r<n;++r)t+=e[r]+(arguments.length<=r+1?void 0:arguments[r+1]);t+=e[r];var i=document.createDocumentFragment(),a=document.createElement("div");i.appendChild(a),a.innerHTML=t,function e(t){if(t.nodeType===Node.ELEMENT_NODE)if(-1!==P_.indexOf(t.tagName.toLowerCase()))t.parentNode.removeChild(t);else{var n=!0,r=!1,i=void 0;try{for(var a,o=t.childNodes[Symbol.iterator]();!(n=(a=o.next()).done);n=!0)e(a.value)}catch(t){r=!0,i=t}finally{try{!n&&o.return&&o.return()}finally{if(r)throw i}}}}(a);var o=a.innerHTML;return function(){return o}}var F_,I_,D_,R_=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),L_=new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._registrableComponents=[]}return R_(e,[{key:"registerPhysicalActions",value:function(e){return this._registrableComponents.forEach(function(t){t.once("canvas.updated").then(function(t){t.client.composition().visualGroup.matrixInstance().value.each(function(t){return t.valueOf().firebolt().registerPhysicalActions(e)})})}),this}},{key:"registerBehaviouralActions",value:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return this._registrableComponents.forEach(function(e){e.once("canvas.updated").then(function(){e.composition().visualGroup.matrixInstance().value.each(function(e){var n;return(n=e.valueOf().firebolt()).registerBehaviouralActions.apply(n,t)})})}),this}},{key:"registerPhysicalBehaviouralMap",value:function(e){return this._registrableComponents.forEach(function(t){t.once("canvas.updated").then(function(t){t.client.composition().visualGroup.matrixInstance().value.each(function(t){return t.valueOf().firebolt().registerPhysicalBehaviouralMap(e)})})}),this}},{key:"registerPropagationBehaviourMap",value:function(e){return this._registrableComponents.forEach(function(t){t.once("canvas.updated").then(function(t){t.client.composition().visualGroup.matrixInstance().value.each(function(t){return t.valueOf().firebolt().registerPropagationBehaviourMap(e)})})}),this}},{key:"mapSideEffects",value:function(e){return this._registrableComponents.forEach(function(t){t.once("canvas.updated").then(function(){t.composition().visualGroup.matrixInstance().value.each(function(t){return t.valueOf().firebolt().mapSideEffects(e)})})}),this}},{key:"for",value:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return this._registrableComponents=t,this}},{key:"registerSideEffects",value:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return this._registrableComponents.forEach(function(e){e.once("canvas.updated").then(function(e){e.client.composition().visualGroup.matrixInstance().value.each(function(e){return e.valueOf().firebolt().registerSideEffects(t)})})}),this}},{key:"dissociateBehaviour",value:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return this._registrableComponents.forEach(function(e){e.once("canvas.updated").then(function(e){e.client.composition().visualGroup.matrixInstance().value.each(function(e){t.forEach(function(t){return e.valueOf().firebolt().dissociateBehaviour(t[0],t[1])})})})}),this}},{key:"dissociateSideEffect",value:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return this._registrableComponents.forEach(function(e){e.once("canvas.updated").then(function(e){e.client.composition().visualGroup.matrixInstance().value.each(function(e){t.forEach(function(t){return e.valueOf().firebolt().dissociateSideEffect(t[0],t[1])})})})}),this}},{key:"enableCrossInteractivity",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this._registrableComponents,n=zc(zc({},function(e){var t=e.map(function(e){return e.alias()});return{behaviours:{"*":function(e){var n=e.sourceCanvas;return!n||-1!==t.indexOf(n)}}}}(t)),e);return t.forEach(function(e){e.firebolt().crossInteractionPolicy(n)}),this}}]),e}()),z_={classPrefix:"muze",interaction:{sideEffect:"individual"},legend:{position:"right",color:{show:!0,padding:1,margin:3,border:1,height:20,width:20},shape:{show:!0,padding:1,margin:3,border:1,height:20,width:20},size:{show:!0,padding:1,margin:3,border:1,height:20,width:20}},showHeaders:!1,minWidth:100,minHeight:100,border:{style:"solid",color:"#d6d6d6",width:2,collapse:!0,spacing:0},autoGroupBy:{disabled:!1}},B_={data:{value:null,meta:{typeCheck:function(e){return e instanceof Ca.a}}},width:{value:0,meta:{sanitization:Fc,typeCheck:Number.isInteger}},height:{value:0,meta:{sanitization:Fc,typeCheck:Number.isInteger}},minUnitWidth:{value:50,meta:{sanitization:Fc,typeCheck:Number.isInteger}},minUnitHeight:{value:50,meta:{sanitization:Fc,typeCheck:Number.isInteger}},config:{value:null,meta:{typeCheck:"constructor",typeExpected:"Object",sanitization:function(e,t){var n=zc({},t),r=zc(n,z_);return zc(r,e)}}}},U_="width",H_="height",V_="top",W_="left",q_="right",G_="bottom",Y_="center",$_="rowLeft",X_="rowRight",K_="colBottom",Q_="colTop",J_="rowSpan",Z_="colSpan",ex="rowRoot",tx="columnRoot",nx=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),rx=function(){function e(t,n,r,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._config={},this._measurement={},this._matrices=[],this._dependencies=i,this.measurement(n),this.mountPoint(t),this.config(r)}return nx(e,[{key:"serialize",value:function(){return{measurement:this.measurement(),config:this.config(),matrices:this.matrices()}}},{key:"config",value:function(e){return e?(this._config=zc(this._config||{},e),this):this._config}},{key:"measurement",value:function(e){return e?(this._measurement=zc(this._measurement||{},e),this):this._measurement}},{key:"matrices",value:function(e){return e?(this._matrices=function(e,t){if("object"!==(void 0===t?"undefined":gc(t)))return Error("Argument type object expected");var n=function(e,t){var n=[];return e.forEach(function(e){e in t||n.push(e)}),n}(e,t);return n.length?Error("Missing keys from parameter "+n.join(", ")):t}([V_,Y_,G_],e),this):this._matrices}},{key:"rowMatrix",value:function(e){return e?(this._rowMatrix=e,this):this._rowMatrix}},{key:"columnMatrix",value:function(e){return e?(this._columnMatrix=e,this):this._columnMatrix}},{key:"centerMatrix",value:function(e){return e?(this._centerMatrix=e,this):this._centerMatrix}},{key:"mountPoint",value:function(e){return e?(this._mountPoint=e,this):this._mountPoint}}]),e}();function ix(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ax=(ix(I_={},"border",(ix(F_={},"style","solid"),ix(F_,"color","#d6d6d6"),ix(F_,U_,2),ix(F_,"collapse",!0),ix(F_,"spacing",0),F_)),ix(I_,"gutterSpace",{rows:[],columns:[]}),ix(I_,"distribution",{rows:[],columns:[]}),ix(I_,"breakPage",{rows:[],columns:[]}),ix(I_,"isRowSizeEqual",!1),ix(I_,"isColumnSizeEqual",!1),ix(I_,"columnPointer",0),ix(I_,"rowPointer",0),I_),ox=(ix(D_={},"width",100),ix(D_,"height",100),ix(D_,"unitWidth",100),ix(D_,"unitHeight",100),D_),ux="rgba(0,0,0,0)";function cx(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}var lx=function(e,t,n,r,i){var a=n[r-1],o=n[r];if(i===$_){if(!a)return e;for(var u=0;u<=t&&o[u].valueOf()===a[u].valueOf();u+=1);return u-1===t?null:e}if(i===X_){if(!a||0===t)return e;for(var c=t;c<o.length&&a[c].valueOf()===o[c].valueOf();c+=1);return c===o.length?null:e}if(i===K_){if(0===r)return e;var l=o[t-1];if(l){if(l.valueOf()===e.valueOf()){var s=n[r+1];return s?s[t].valueOf()===s[t-1].valueOf()?null:e:null}return e}return e}if(i===Q_){if(r===n.length-1&&n.length>1)return e;var f=o[t-1];if(f&&f.valueOf()===e.valueOf()){var h=n[r-1];return h?h[t].valueOf()===h[t-1].valueOf()?null:e:null}return e}return e},sx=function(e,t,n,r){var i=1;if(!e||"string"!=typeof e.valueOf())return 1;for(var a=!1;!a;)n[r+i]&&null===n[r+i][t]?i+=1:a=!0;return i},fx=function(e,t,n,r){var i=1;if(!e||"string"!=typeof e.valueOf())return 1;for(var a=!1;!a;)null===n[r][t+i]?i+=1:a=!0;return i},hx=function(e,t){return e.map(function(n,r){if(t===$_||t===X_){for(var i=n.map(function(n,i){return lx(n,i,e,r,t)}),a=[],o=n.length-i.length,u=0;u<o;u+=1)a.push(null);return t===X_?(a.unshift.apply(a,cx(i)),a):(a.push.apply(a,cx(i)),a)}var c=n.map(function(n,i){return lx(n,i,e,r,t)}),l=[];return l.push.apply(l,cx(c)),l})};function dx(e,t,n,r,i){e.forEach(function(e,a){var o=lf(t,"div",[1],i+"-grid-"+n+"-"+(a+1)).classed(i+"-grid-"+n,!0).classed(i+"-grid",!0),u=function(e,t,n){if(t===V_||t===G_){var r=hx(e,t===V_?Q_:K_),i=r.map(function(e,t){return e.map(function(e,n){return fx(e,n,r,t)}).filter(function(e){return 1!==e})});return{viewMatrix:r,spans:i}}if(0===n||2===n){var a=hx(e,0===n?$_:X_),o=[];return a.forEach(function(e,t){o[t]=o[t]||[],e.forEach(function(e,n){if(a[t][n]){var r=sx(e,n,a,t);r&&o[t].push(r)}})}),{viewMatrix:a,spans:o}}return{viewMatrix:e}}(e,n,a),c=u.viewMatrix,l=u.spans,s=function(e,t,n){var r=lf(e,"table",["layout"],t+"-table"),i=lf(r,"tbody",["layout"],t+"-body"),a=lf(i,"tr",n,t+"-tr");return{table:r,body:i,rows:a,cells:lf(a,"td",function(e,t){return e.filter(function(e){return null!==e&&e.config().show}).map(function(e){return{placeholder:e,rowIndex:t}})},t+"-td",{},function(e){return e.placeholder.id})}}(o,i+"-grid",c).cells;n===Y_&&l?s.attr(J_,function(e,t){var n=e.placeholder;return cf(this).style("height",n.availHeight()+r.border.width+"px"),l[e.rowIndex][t]}):n!==V_&&n!==G_||1!==a||s.attr(Z_,function(e,t){var n=l[e.rowIndex][t],r=e.placeholder;return n>1&&r.setAvailableSpace(0,r.availHeight()),cf(this).style("height",r.availHeight()+"px"),n}),s.each(function(e){e.placeholder&&e.placeholder.render(this)}).exit().each(function(e){e.placeholder&&e.placeholder.remove()}),function(e,t,n,r){var i=t.width,a=t.style,o=t.color,u=t.showRowBorders,c=t.showColBorders,l=t.showValueBorders,s=i+"px "+a;n===Y_&&1===r?[V_,G_,W_,q_].forEach(function(t){e.style("border-"+t,s+" "+(l[t]?o:ux))}):n===Y_?function(e,t,n,r){[V_,G_].forEach(function(i){var a=t+" "+(n[i]?r:ux);e.style("border-"+i,a)})}(e,s,u,o):1===r&&function(e,t,n,r){[W_,q_].forEach(function(i){var a=t+" "+(n[i]?r:ux);e.style("border-"+i,a)})}(e,s,c,o)}(s,r.border,n,a)})}function px(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function yx(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}var gx=tl.nest,vx=function(e,t){var n=0;for(var r in t)if(e<t[r]){n=r;break}return n},mx=function(e,t){var n=t.isTransposed,r=e[0].length>0?e[0]:e[1];return n?(r=e[0].length>0?[].concat(yx(e[0])):[],r=e[1].length>0?[].concat(yx(r),yx(e[1])):r):r=r.map(function(t,n){var r=[];return e[0].length>0&&(r=[].concat(yx(e[0][n]))),e[1].length>0&&(r=[].concat(yx(r),yx(e[1][n]))),r}),r},bx=function(e,t,n){return e.slice(t,-n)},_x={config:{sanitization:function(e,t){return zc(e._config||{},t)}},maxMeasures:{},availableSpace:{},logicalSpace:{}},xx={distribution:[],classPrefix:"muze",isDistributionEqual:!0,unitMeasures:{height:100,width:100,border:1},isTransposed:!1,facet:"primary",extraCellLengths:[]},wx=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),kx=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._lastLevelKey=0,this._primaryMatrix=t[0]||[],this._secondaryMatrix=t[1]||[],this._maxMeasures=[],this._availableSpace={},Dc(this,_x);var r=Object.assign({},this.constructor.defaultConfig());this.config(zc(r,n)),this._breakPointer=this.config().isTransposed?t[0].length:t[0].length>0?t[0][0].length:0,this._layoutMatrix=mx([t[0]||[],t[1]||[]],this.config()),this._tree={key:this.config().isTransposed?tx:ex,values:this.createTree()},this._logicalSpace=this.setLogicalSpace()}return wx(e,[{key:"primaryMatrix",value:function(){return arguments.length?this:this._primaryMatrix}},{key:"secondaryMatrix",value:function(){return arguments.length?this:this._secondaryMatrix}},{key:"tree",value:function(){return arguments.length?this:this._tree}},{key:"createTree",value:function(){var e=function(e){var t={},n=0,r="primary",i=gx(),a=[],o=e._layoutMatrix,u=e.primaryMatrix(),c=e.secondaryMatrix(),l=e.config(),s=l.isTransposed,f=l.breakPage;if(s){if(r=0===u.length?"primary":0===c.length?"secondary":u.length>=c.length?"primary":"secondary",u.length>0){for(var h=0;h<u.length-1;h++)a.push(h);a.push(u.length-1),"secondary"===r&&(n=u.length-1)}if(c.length>0){for(var d=u.length,p=c.length-1;p>0;p--)a.push(p+d);a.push(d),"primary"===r&&(n=d)}var y;a.forEach(function(e){var t=-1;return i.key(function(n){return t++,n[e].valueOf()+"-"+vx(t,f)})}),y=o[0].map(function(e,t){return o.map(function(e){return e[t]})}),t=i.entries(y)}else{if(r=0===u.length?"primary":0===c.length?"secondary":u.length>=c.length?"primary":"secondary",u.length>0){for(var g=0;g<u[0].length-1;g++)a.push(g);a.push(u[0].length-1),"secondary"!==r&&0!==c.length||(n=u[0].length-1)}if(c.length>0){for(var v=u.length>0?u[0].length:0,m=c[0].length-1;m>0;m--)a.push(m+v);a.push(v),"primary"===r&&(n=v)}else n=u.length>0?u[0].length-1:0;a.forEach(function(e){var t=-1;return i.key(function(n){return t++,n[e].valueOf()+"-"+vx(t,f)})}),t=i.entries(o)}return{tree:t,lastLevelKey:n}}(this),t=e.tree,n=e.lastLevelKey;return this._lastLevelKey=n,t}},{key:"setLogicalSpace",value:function(){var e=this.config().isTransposed,t=this.tree();return function e(t,n){if(t.values[0].key){var r=[];return t.values.forEach(function(t){n?e(t,n).forEach(function(e,t){var n;r[t]=r[t]||[],(n=r[t]).push.apply(n,yx(e))}):r.push.apply(r,yx(e(t,n)))}),t.matrix=r,r}return t.matrix=n?t.values[0].map(function(e,n){return t.values.map(function(e){return e[n]})}):t.values,t.matrix}(t,e),function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments[1],r=arguments[2],i=n.isTransposed,a=void 0!==i&&i,o=n.unitMeasures,u=function(e){return e?{firstMeasure:H_,secondMeasure:U_}:{firstMeasure:U_,secondMeasure:H_}}(a),c=u.firstMeasure,l=u.secondMeasure,s=t.values,f=function(e,t){return e?{height:0,width:t.width}:{height:t.height,width:0}}(a,o);if(s[0].key){var h,d=(px(h={},c,0),px(h,l,0),h);return s.forEach(function(t){var i=e(t,n,r);d[c]=Math.max(d[c],i[c],f[c]),d[l]+=+i[l]}),t.space=d,d}return function(e,t,n){var r,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=t.firstMeasure,o=t.secondMeasure,u=0,c=0;return e.values.forEach(function(t){var r,l=0,s=0;t.forEach(function(e,t){e.logicalSpace(null);var r=e.getLogicalSpace();s=Math.max(s,+r[o],n[o]),i[t]=Math.max(i[t]||0,r[a]),l+=+i[t]}),c+=s,u=Math.max(u,l),e.space=(px(r={},o,Math.ceil(c)),px(r,a,Math.ceil(u)),r)}),px(r={},o,c),px(r,a,u),r}(t,{firstMeasure:c,secondMeasure:l},f,r)}(t,this.config(),this.maxMeasures())}},{key:"getLogicalSpace",value:function(){return this.logicalSpace()}},{key:"setAvailableSpace",value:function(e,t){this.availableSpace({width:e,height:t});var n=this.tree(),r=this.populateMaxMeasures(H_,n),i=this.populateMaxMeasures(U_,n),a=this.calculateDepth(i,r);return this.viewableMatrix=this.createViewPortMatrix(a),this.viewableMeasures=this.redistribute(this.viewableMatrix,e,t),this}},{key:"populateMaxMeasures",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];if(i[r]=Math.max(i[r]||0,t.space[e]),t.values){var a=r+1;t.values.forEach(function(t){t.space&&(i=n.populateMaxMeasures(e,t,a,i))})}return i}},{key:"calculateDepth",value:function(e,t){var n=void 0,r=void 0,i=this.availableSpace(),a=i.height,o=i.width;for(n=0;n<t.length&&!(t[n]<=a);n++);for(r=0;r<e.length&&!(e[r]<=o);r++);return Math.min(e.length-1,Math.max(n,r))}},{key:"redistribute",value:function(e,t,n){var r=this,i=[],a=[],o=this.config().isTransposed;return e.forEach(function(e){var u={mWidth:0,mHeight:0,matrix:e.matrix,width:t,height:n,maxHeights:i,maxWidths:a},c=o?r.redistributeColumnWise(u):r.redistributeRowWise(u);a=c.maxWidths,i=c.maxHeights}),e.map(function(e,u){var c=void 0,l=void 0,s={matrixInst:e,maxWidths:a,maxHeights:i,matrixIndex:u},f=r.getCellDimensions(s),h=f.heights,d=f.widths,p=f.rowHeights,y=f.columnWidths;return o?(c=h,l=[t,t]):(c=[n,n],l=d),{rowHeights:{primary:p[0],secondary:p[1]},columnWidths:{primary:y[0],secondary:y[1]},height:{primary:c[0],secondary:c[1]},width:{primary:l[0],secondary:l[1]}}})}},{key:"getViewableSpaces",value:function(){return this.viewableMeasures}},{key:"getViewableData",value:function(){return this.viewableMatrix}},{key:"removeExtraCells",value:function(){var e=this.config(),t=e.isTransposed,n=e.extraCellLengths,r=this._layoutMatrix,i=zc({},this.tree()),a=n[0],o=n[1]||Number.NEGATIVE_INFINITY,u=t?r.slice(0).map(function(e){return bx(e,a,o)}):bx(r,a,o);return i.values=bx(i.values,a,o),i.matrix=t?i.matrix.map(function(e){return bx(e,a,o)}):bx(i.matrix,a,o),{tree:i,layoutMatrix:u}}},{key:"createViewPortMatrix",value:function(e){var t=[];return function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments[1],r=arguments[2],i=arguments[3],a=i._breakPointer,o=i.config().isTransposed,u=r.tree,c=r.layoutMatrix;if(0===n){var l=function(e,t,n){var r=[],i=[];return t?e.forEach(function(e,t){t>=n?i.push(e):r.push(e)}):e.forEach(function(e,t){e.forEach(function(e,a){a>=n?(i[t]=i[t]||[],i[t].push(e)):(r[t]=r[t]||[],r[t].push(e))})}),[r,i]}(u.matrix,o,a);return t.push({matrix:u.matrix,primaryMatrix:l[0],secondaryMatrix:l[1],space:u.space}),t}var s=n-1;return u.values.forEach(function(n){e(t,s,{tree:n,layoutMatrix:c},i)}),t}(t,e,this.removeExtraCells(),this),t}},{key:"redistributeRowWise",value:function(e){var t,n,r,i=this.maxMeasures(),a=this.config(),o=a.isDistributionEqual,u=a.distribution,c=a.isTransposed,l=a.gutter,s=e.matrix,f=e.width,h=e.height,d=e.maxHeights,p=e.maxWidths;n=function(e,t){var n=0,r=0;return e.forEach(function(e){var i=e[t].getLogicalSpace();r=Math.max(r,i.width),n+=i.height}),{width:r,height:n}}(s,this._lastLevelKey).height;var y=i.reduce(function(e,t){return e+t});return r=y>0?i.map(function(e){return e+e/y*(f-y)}):i.map(function(){return 0}),t=function(e){var t,n=0,r=0,i=e.isTransposed,a=e.distribution,o=e.availableHeight,u=e.height,c=e.isDistributionEqual,l=e.gutter,s=e.matrix,f=e.cIdx;a&&void 0!==a[0]&&(n=a.reduce(function(e,t){return e+t})),l&&void 0!==l[0]&&(r=l.reduce(function(e,t){return e+t})),t=o-Math.floor(o*r);var h=s.length;return s.map(function(r,o){var l=r[f].getLogicalSpace().height,s=l+l/u*(t-u);return i||(a.length>0&&h===a.length?s=t*a[o]/n:(c||0===e.height)&&(s=t/h)),Math.floor(s)})}({matrix:s,cIdx:this._lastLevelKey,height:n,availableHeight:h,isDistributionEqual:o,distribution:u,isTransposed:c,gutter:l}),p.push(r),d.push(t),{maxWidths:p,maxHeights:d}}},{key:"redistributeColumnWise",value:function(e){var t=[],n=e.matrix,r=e.width,i=e.maxHeights,a=e.maxWidths,o=this.config().unitMeasures.border,u=function(e){var t=0,n=0;return e.forEach(function(e){var r=e.getLogicalSpace();t=Math.max(t,r.height),n+=r.width}),{width:n,height:t}}(n[this._lastLevelKey]).width,c=function(e,t){var n=e.availableWidth,r=e.width,i=e.row,a=t.isDistributionEqual,o=t.isTransposed,u=t.distribution,c=0;return u&&u[0]&&(c=u.reduce(function(e,t){return e+t})),i.map(function(e,t){var l=e.getLogicalSpace().width,s=l+l/r*(n-r);if(o)if(u.length>0)s=n*u[t]/c;else if(a||0===r){var f=i.length;s=n/f}return Math.floor(s)})}({row:n[this._lastLevelKey],width:u,availableWidth:r},this.config());n.forEach(function(e,n){return e.forEach(function(e,r){var i=e.getLogicalSpace().height;e.setAvailableSpace(c[r]-o,i),t[n]=Math.max(t[n]||0,e.getLogicalSpace().height)})}),i.length>0&&(t=t.map(function(e,t){return Math.max(e,i[0][t])})),i.push(t);for(var l=0;l<i.length;l++)i[l]=t;return a.push(c),{maxHeights:i,maxWidths:a}}},{key:"getCellDimensions",value:function(e){var t=this,n=[],r=[],i=[],a=[],o=this.config(),u=o.isTransposed,c=o.unitMeasures.border,l=e.matrixInst,s=e.maxWidths,f=e.maxHeights,h=e.matrixIndex,d=l.matrix,p=[[0],[0]],y=[[0],[0]],g=[0,0],v=[0,0],m=this._breakPointer;return d.forEach(function(e,o){e.forEach(function(e,l){var d=f[h][o]||0,b=s[h][l];u?(e.setAvailableSpace(b-c,d),n=[l,o],r=[p,y],i=[g,v],a=[d,b]):(e.setAvailableSpace(b,d-c),n=[o,l],r=[y,p],i=[v,g],a=[b,d]),0===n[0]&&n[1]<m?(r[0][0][n[1]]=a[0],i[0][0]=(i[0][0]||0)+a[0]):0===n[0]&&n[1]>=m&&(r[0][1][n[1]-m]=a[0],i[0][1]=(i[0][1]||0)+a[0]),n[1]===t._lastLevelKey&&(r[1][0][n[0]]=a[1],r[1][1][n[0]]=a[1])})}),{heights:g,widths:v,rowHeights:p,columnWidths:y}}}],[{key:"defaultConfig",value:function(){return xx}}]),e}(),Ex=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,i=!1,a=void 0;try{for(var o,u=e[Symbol.iterator]();!(r=(o=u.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){i=!0,a=e}finally{try{!r&&u.return&&u.return()}finally{if(i)throw a}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")};function Sx(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function Ox(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function Mx(e,t,n){if(e){var r=e.getLogicalSpace();n&&r[t]!==n&&(t===H_?e.setAvailableSpace(r.width,n):e.setAvailableSpace(n,r.height))}}var Cx=function(e,t,n){e.forEach(function(e,r){e.forEach(function(e,i){e.setAvailableSpace(t[i],n[r])})})},Tx=function(e,t,n){var r=e.config()[t+"Pointer"];return n.length-1<r&&(r=0,e.config(function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}({},t+"Pointer",r))),r},Px=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),Ax=function(e){function t(e,n,r,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,n,r,i));return a.matrices(e),a.config(a.constructor.defaultConfig()),a._layoutId=xc(),a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,rx),Px(t,[{key:"matrices",value:function(e){return e?(this._matrices=function(e,t){var n,r,i=[],a=[],o=[],u=[],c=e.config(),l=c.isRowSizeEqual,s=c.isColumnSizeEqual,f=c.gutterSpace,h=c.distribution,d=c.border,p=c.breakPage,y=e.measurement(),g=y.minUnitHeight,v=y.minUnitWidth,m=t.top,b=t.center,_=t.bottom,x=Ex(m,3),w=x[0],k=x[1],E=x[2],S=Ex(b,3),O=S[0],M=S[1],C=S[2],T=Ex(_,3),P=T[0],A=T[1],N=T[2];return O.length>0&&(i=[].concat(Sx(w),Sx(O),Sx(P))),C.length>0&&(a=[].concat(Sx(E),Sx(C),Sx(N))),k.length>0&&k[0].length>0&&(o=k.map(function(e,t){return[].concat(Sx(w[t]),Sx(e),Sx(E[t]))})),A.length>0&&A[0].length>0&&(u=A.map(function(e,t){return[].concat(Sx(P[t]),Sx(e),Sx(N[t]))})),e.rowMatrix(new kx([i,a],{isDistributionEqual:l,distribution:h.rows,gutter:f.rows,unitMeasures:{width:v,height:g,border:d.width},breakPage:p.rows.map(function(e){return e+Math.max(w.length,E.length)}),extraCellLengths:[w.length,P.length]})),n=w.length>0?w[0].length:P.length>0?P[0].length:0,r=E.length>0?E[0].length:N.length>0?N[0].length:0,e.columnMatrix(new kx([o,u],{isDistributionEqual:s,distribution:h.columns,gutter:f.columns,isTransposed:!0,unitMeasures:{width:v,height:g,border:d.width},breakPage:p.columns,extraCellLengths:[n,r]})),e.centerMatrix(M),t}(this,e),this):function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var a=Object.getPrototypeOf(t);return null===a?void 0:e(a,n,r)}if("value"in i)return i.value;var o=i.get;return void 0!==o?o.call(r):void 0}(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"matrices",this).call(this,e)}},{key:"triggerReflow",value:function(){return function(e){var t,n,r,i,a,o=e.rowMatrix(),u=e.columnMatrix(),c=e.centerMatrix(),l=e.measurement(),s=l.width,f=l.height,h=e.config().border,d=e.matrices(),p=d.top,y=d.bottom,g=function(e,t){return e?e.getLogicalSpace()[t]:0}(o,U_),v=h.width;Mx(u,U_,s-g-v);var m=u.getViewableSpaces();Tx(e,"column",m);var b=m[e.config().columnPointer],_=b.height.primary+b.height.secondary;Mx(o,H_,f-_);var x=o.getViewableSpaces();Tx(e,"row",x);var w=(t=[]).concat.apply(t,Ox(x.map(function(e){return e.rowHeights.primary}))),k=(n=[]).concat.apply(n,Ox(x.map(function(e){return e.columnWidths.primary}))),E=(r=[]).concat.apply(r,Ox(x.map(function(e){return e.columnWidths.secondary}))),S=u.getViewableSpaces(),O=(i=[]).concat.apply(i,Ox(S.map(function(e){return e.columnWidths.primary}))),M=S[0].rowHeights.primary,C=(a=[]).concat.apply(a,Ox(S.map(function(e){return e.rowHeights.secondary})));c.forEach(function(e,t){e.forEach(function(e,n){e.setAvailableSpace(O[n]-v,w[t]-v)})}),Cx(p[0],k,M),Cx(p[2],E,M),Cx(y[0],k,C),Cx(y[2],E,C)}(this),this.setViewInformation(),this}},{key:"gotoPage",value:function(e,t){var n=e.toLowerCase(),r=this.getViewInformation().viewMatricesInfo[n+"Pages"],i=Math.min(Math.max(1,t),r);return this.config(function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}({},n+"Pointer",i-1)),this.setViewInformation(),this.renderGrid(),this}},{key:"pages",value:function(e){var t=this.getViewInformation().viewMatricesInfo,n=e.toLowerCase();return{totalPages:t[n+"Pages"],currentPage:this.config()[n+"Pointer"]+1}}},{key:"setViewInformation",value:function(){var e=this.config(),t=e.rowPointer,n=e.columnPointer,r=e.border,i=function(e,t,n){for(var r=e.rowMatrix(),i=e.columnMatrix(),a=e.centerMatrix(),o=e.matrices(),u=r.getViewableData(),c=i.getViewableData(),l={row:0,column:0},s=t-1;s>=0;s--){var f=Math.max(u[s].primaryMatrix.length,u[s].secondaryMatrix.length);l.row+=f}for(var h=n-1;h>=0;h--){var d=c[h],p=d.primaryMatrix,y=d.secondaryMatrix,g=Math.max(p[0]?p[0].length:0,y[0]?y[0].length:0);l.column+=g}o.top[1]=c[n].primaryMatrix,o.bottom[1]=c[n].secondaryMatrix,o.center[0]=u[t].primaryMatrix,o.center[2]=u[t].secondaryMatrix;var v=Math.max(o.center[0].length,o.center[2].length),m=Math.max(o.top[1][0]?o.top[1][0].length:0,o.bottom[1][0]?o.bottom[1][0].length:0);return o.center[1]=a.slice(l.row,l.row+v).map(function(e){return e.slice(l.column,l.column+m)}),{matrices:o,rowPages:u.length,columnPages:c.length}}(this,t,n),a=function(e){var t=e.rowMatrix(),n=e.columnMatrix(),r=e.measurement(),i=r.width,a=r.height,o=e.config(),u=o.columnPointer,c=o.rowPointer,l=t.getViewableSpaces()[c].width,s=l.primary,f=l.secondary,h=n.getViewableSpaces()[u].height,d=h.primary,p=h.secondary;return{viewWidth:[s,i-(s+f),f],viewHeight:[d,a-(d+p),p]}}(this);return a.border=r,this.viewInfo={viewMatricesInfo:i,layoutDimensions:a},this}},{key:"getViewInformation",value:function(){return this.viewInfo}},{key:"renderGrid",value:function(e){if(this.mountPoint(e),!this.mountPoint())return this;var t=this.getViewInformation(),n=t.viewMatricesInfo,r=t.layoutDimensions;return function(e,t,n){var r=t.top,i=t.center,a=t.bottom,o=e.config().classPrefix,u=e.measurement().width,c=e.mountPoint();lf(c,"div",[{type:V_,matrix:r},{type:Y_,matrix:i},{type:G_,matrix:a}],o+"-grid-layout-row").each(function(e,t){var r=cf(this);r.classed(o+"-grid-layout-row-"+t,!0),dx(e.matrix,r,e.type,n,o)}).style(U_,Math.ceil(u)+"px")}(this,n.matrices,r),this}}],[{key:"defaultMeasurement",value:function(){return ox}},{key:"defaultConfig",value:function(){return ax}},{key:"create",value:function(){return new t(null,null,this.defaultMeasurement(),this.defaultConfig())}}]),t}(),Nx=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),jx=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return Nx(e,[{key:"data",value:function(){throw new Error(Lc.INTERFACE_IMPl)}},{key:"width",value:function(){throw new Error(Lc.INTERFACE_IMPl)}},{key:"height",value:function(){throw new Error(Lc.INTERFACE_IMPl)}},{key:"config",value:function(){throw new Error(Lc.INTERFACE_IMPl)}}]),e}();function Fx(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Ix,Dx,Rx="left",Lx="right",zx="bottom",Bx="top",Ux="muze",Hx="header",Vx="data",Wx="axes",qx="facetByFields",Gx="fields",Yx="transform",$x="layerDef",Xx="config",Kx="detailFields",Qx="text",Jx="axis",Zx="geom",ew="blank",tw=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),nw=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._id=xc();var n=zc({},this.constructor.defaultConfig());this._config=zc(n,t||{}),this._mount=null}return tw(e,[{key:"valueOf",value:function(){throw new Error(Lc.INTERFACE_IMPL)}},{key:"id",value:function(){throw new Error(Lc.INTERFACE_IMPL)}},{key:"serialize",value:function(){throw new Error(Lc.INTERFACE_IMPL)}},{key:"getLogicalSpace",value:function(){throw new Error(Lc.INTERFACE_IMPL)}},{key:"setAvailableSpace",value:function(){throw new Error(Lc.INTERFACE_IMPL)}},{key:"render",value:function(){throw new Error(Lc.INTERFACE_IMPL)}},{key:"remove",value:function(){throw new Error(Lc.INTERFACE_IMPL)}},{key:"type",get:function(){return"simple"}}],[{key:"defaultConfig",value:function(){return{}}}]),e}();function rw(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var iw,aw=(rw(Dx={},"margin",(rw(Ix={},Rx,0),rw(Ix,Lx,0),rw(Ix,Bx,0),rw(Ix,zx,0),Ix)),rw(Dx,"spaceFixer",2),rw(Dx,"isOffset",!1),rw(Dx,"verticalAlign",Bx),rw(Dx,"textAlign","center"),rw(Dx,"show",!0),Dx);function ow(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var uw,cw={mount:{},availHeight:{},availWidth:{},config:{sanitization:function(e,t){return zc(e._config,t)}},logicalSpace:{},source:{}},lw={data:{},caption:{},config:{},axes:{sanitization:function(e,t){return Object.assign(e._axes,t)}},facetByFields:{},fields:{},transform:{},layerDef:{},detailFields:{}},sw=(ow(iw={},Qx,cw),ow(iw,Zx,zc(lw,cw)),ow(iw,Jx,cw),ow(iw,ew,cw),iw),fw=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),hw=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n._axis=null,n._availHeight=null,n._availWidth=null,n._logicalSpace=null,Dc(n,sw[Jx]),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,nw),fw(t,[{key:"valueOf",value:function(){return this.source().id}},{key:"serialize",value:function(){return{type:Jx,axis:this.source().serialize()}}},{key:"getLogicalSpace",value:function(){return this.logicalSpace()||this.logicalSpace(function(e){var t=void 0,n=void 0,r=e.source(),i=e.config(),a=i.spaceFixer,o=i.margin,u=r.getLogicalSpace(),c=u.width,l=u.height;return!0===r.config().show?(n=Math.floor(l+o.top+o.bottom+a),t=Math.floor(c+o.left+o.right+a)):(t=c,n=l),{width:t,height:n}}(this)),this.logicalSpace()}},{key:"setAvailableSpace",value:function(e,t){this.availWidth(e),this.availHeight(t);var n=this.config(),r=n.margin,i=n.isOffset;return this.source().setAvailableSpace(e,t,r,i),this.logicalSpace(null),this.source().logicalSpace(null),this}},{key:"render",value:function(e){if(!e)return this;var t=this.source(),n=this.availHeight(),r=this.availWidth(),i=this.config().margin,a=i.top,o=i.bottom,u=i.left,c=i.right,l=t.config().show,s=lf(cf(e),"div",[this],Ux+"-axis-cell"),f=lf(s,"svg",[1],Ux+"-axis-container");return this.mount(e),0!==r&&r||f.attr("width","0px"),0!==n&&n||f.attr("height","0px"),s.style("width",(l?r:0)+"px").style("height",(l?n:0)+"px").style("margin-top",a).style("margin-bottom",o).style("margin-left",u).style("margin-right",c),t.mount(f.node()),f}},{key:"remove",value:function(){return this.source()&&this.source().remove(),this.mount()&&this.mount().remove(),this}},{key:"type",get:function(){return Jx}},{key:"id",get:function(){return this._id}}],[{key:"defaultConfig",value:function(){return aw}}]),t}(),dw=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),pw=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return Dc(n,sw[ew]),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,nw),dw(t,[{key:"valueOf",value:function(){return this.id}},{key:"serialize",value:function(){return{type:ew}}},{key:"getLogicalSpace",value:function(){return this.logicalSpace()?this.logicalSpace():{width:this.width||0,height:this.height||0}}},{key:"setAvailableSpace",value:function(e,t){return this.availWidth(e),this.availHeight(t),this.logicalSpace(null),this}},{key:"render",value:function(e){if(e){var t=this.config().style;this.mount(e);var n=cf(e),r=lf(n,"div",[this.id]);r.classed(Ux+"-blank-cell",!0),r.style("width",this.availWidth()+"px"),r.style("height",this.availHeight()+"px"),r.html(""),t&&sf(r,t)}return this}},{key:"remove",value:function(){return this.mount()&&this.mount().remove(),this}},{key:"type",get:function(){return ew}},{key:"id",get:function(){return this._id}}],[{key:"defaultConfig",value:function(){return aw}}]),t}(),yw=(n(40),function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}()),gw=function(e){function t(e,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r._dependencies=n,r._className=r._config.className||(r._config.type===Hx?Ux+"-"+Hx+"-cell":Ux+"-"+Qx+"-cell"),r._computedStyle=mf(cf("body"),r._className),r._dependencies.labelManager.setStyle(r._computedStyle),r._minTickDiff=r._dependencies.labelManager.getOriSize("WW"),Dc(r,sw[Qx]),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,nw),yw(t,[{key:"valueOf",value:function(){return this.source()}},{key:"dependencies",value:function(){return this._dependencies}},{key:"serialize",value:function(){return{text:this.source(),type:Qx}}},{key:"getLogicalSpace",value:function(){return this.logicalSpace()||this.logicalSpace(function(e){var t=e.dependencies().labelManager,n=t.getOriSize(e.source()),r=e.config(),i=r.margin,a=r.show;return t.setStyle(e._computedStyle),a?{width:n.width+i.left+i.right+e._minTickDiff.width,height:n.height+i.top+i.bottom+e._minTickDiff.height}:{width:0,height:0}}(this)),this.logicalSpace()}},{key:"setAvailableSpace",value:function(e,t){return this.availWidth(e),this.availHeight(t),this.logicalSpace(null),this}},{key:"render",value:function(e){var t=this.availWidth(),n=this.config(),r=n.margin,i=n.show,a=n.verticalAlign,o=n.textAlign;if(this.mount(e),i){var u=cf(e),c=lf(u,"div",[this.id],Ux+"-text-cell");u.style("vertical-align",a),c.classed(this._className,!0),c.style("width",t?t+"px":"100%"),[Bx,zx,Rx,Lx].forEach(function(e){c.style("padding-"+e,r[e]+"px")}),c.style("text-align",o),c.style("display","inline"),c.html(this.source())}return this}},{key:"remove",value:function(){return this.mount()&&this.mount().remove(),this}},{key:"type",get:function(){return Qx}},{key:"id",get:function(){return this._id}}],[{key:"defaultConfig",value:function(){return aw}}]),t}(),vw=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),mw=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n._unit=null,n._layers=null,n._axes={},n._datamodel={},n._facetByFields={},n._fields=null,n._transform=null,n._caption=null,Dc(n,sw[Zx]),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,nw),vw(t,[{key:"valueOf",value:function(){return this.source()}},{key:"serialize",value:function(){return{type:Zx,unit:this.source().serialize(),caption:this.caption()}}},{key:"updateModel",value:function(){var e=this,t=this.source();return t.lockModel(),[Vx,Wx,qx,Gx,Yx,$x,Xx,Kx].forEach(function(n){e[n]()&&t[n](e[n]())}),t.unlockModel(),this}},{key:"getCaptionSpace",value:function(){var e=this.caption(),t={width:0,height:0};return e&&(t=e.getLogicalSpace()),t}},{key:"getLogicalSpace",value:function(){return this.logicalSpace()||this.logicalSpace(function(e){var t=e.source().config(),n=t.width,r=t.height;return{width:Math.ceil(n),height:Math.ceil(r+e.getCaptionSpace().height)}}(this)),this.logicalSpace()}},{key:"setAvailableSpace",value:function(e,t){var n=this.source();return this.availWidth(e),this.availHeight(t),n.lockModel(),n.width(e).height(t-this.getCaptionSpace().height),n.unlockModel(),this.logicalSpace(null),this}},{key:"render",value:function(e){if(e){this.mount(e);var t=this.availHeight(),n=this.availWidth(),r=this.caption(),i=lf(cf(e),"div",[1],Ux+"-geom-cell");if(r){var a=lf(i,"div",[r],Ux+"-unit-caption").node();r.render(a)}var o=lf(i,"div",[1],Ux+"-unit");i.style("width",n+"px").style("height",t+"px"),o.style("width",n+"px").style("height",t-this.getCaptionSpace().height+"px"),this.source().mount(o.node())}return this}},{key:"remove",value:function(){return this.mount()&&this.mount().remove(),this.source().remove(),this}},{key:"type",get:function(){return Zx}},{key:"id",get:function(){return this.source().id()}}],[{key:"defaultConfig",value:function(){return aw}}]),t}();function bw(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var _w,xw,ww=(bw(uw={},"SimpleCell",nw),bw(uw,"TextCell",gw),bw(uw,"AxisCell",hw),bw(uw,"GeomCell",mw),bw(uw,"BlankCell",pw),uw),kw=function(e,t){var n=zc({},e.config()),r=t.getBoundingClientRect(),i=r.height,a=r.width,o=e.height(),u=e.width(),c=e.composition().visualGroup,l=c.placeholderInfo(),s=l.isColumnSizeEqual,f=l.isRowSizeEqual,h=l.rows,d=l.columns,p=l.values,y=e.config(),g=y.minWidth,v=y.minHeight,m=y.classPrefix,b=y.showHeaders,_=y.legend,x=e.title()[1],w=e.subtitle()[1],k=_.position,E=function(e){var t,n=e.config().legend,r=e.title()[1],i=e.subtitle()[1],a=[["legend","layout"],["layout","legend"]];return{headers:(Fx(t={},"top-top",["title","subtitle","group"]),Fx(t,"bottom-bottom",["group","subtitle","title"]),Fx(t,"top-bottom",["title","group","subtitle"]),Fx(t,"bottom-top",["subtitle","group","title"]),t)[(r.position||"top")+"-"+(i.position||"top")],legends:"left"===n.position||"top"===n.position?a[0]:a[1]}}(e);i=Math.floor(i),a=Math.floor(a);var S=Math.max(o>0?o:i,v),O=Math.max(u>0?u:a,g),M=function(e,t,n){var r=0,i={};return t>=200&&n>=200&&["title","subtitle"].forEach(function(t){var n=e[t](),a=function(e){return"function"!=typeof e||e._sanitize?function(e){var t={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","/":"&#x2F;"};return(""+e).replace(/[&<>"'\/]/g,function(e){return t[e]})}(e()):e()}(n[0]);if(a.length){var o=n[1];o.width=e.width(),o.content=a;var u=function(e,t,n,r){return e?function(e,t,n,r){var i=e.content,a=r||new gw({type:t},{labelManager:n});return a.source(i),{height:a.getLogicalSpace().height,cell:a}}(e,"title"===t?"header":"text",n,r):""}(o,t,e.dependencies().smartlabel,e[t+"Cell"]),c=u.height,l=u.cell;i[t+"Cell"]=l,e._composition[t]=l,r+=c+o.padding}}),{headerHeight:r,headers:i}}(e,S,O),C=M.headers,T=M.headerHeight,P=function(e,t,n,r){var i={height:n,width:r,headerHeight:t},a=e.config().legend,o=a.show,u=a.position;a.classPrefix=e.config().classPrefix;var c="left"===u||"right"===u?"vertical":"horizontal";return a.show=o?"vertical"===c&&r>200||"horizontal"===c&&n>200:o,a.align=c,function(e,t,n,r){var i=[],a=n.height,o=n.width,u=n.headerHeight,c=e.position,l=e.align;return function(e){var t=void 0,n=[],r=e.getRetinalAxes();return Object.entries(r).forEach(function(r){var i=r[1][0],a=r[0],o=e[a]();if(o.field){var u=i.config(),c=u.type,l=u.step;t=A_[c+"-"+("boolean"==typeof l&&l)+"-"+a],n.push({scale:i,canvas:e,fieldName:o.field,LegendCls:t,scaleType:a})}}),n}(t).forEach(function(n,s){var f={},h={},d=n.LegendCls,p=n.scale,y=n.fieldName,g=n.scaleType,v=e[g]||{},m=v.title||{};m.text=m.text||y,v.show&&(v.position=c,v.align=l,f=r[s]?r[s].legend:d.create({labelManager:t._dependencies.smartlabel,cells:{AxisCell:hw,TextCell:gw}}),h.maxHeight="vertical"===l?a-u:.2*a,h.maxWidth="horizontal"===l?o:.2*o,h.width=Math.min(h.maxWidth,v.width),h.height=Math.min(h.maxHeight,v.height),[M_,C_,T_].forEach(function(e){h[e]=v[e]}),f.scale(p).title(m).fieldName(y).config(v).metaData(t.composition().visualGroup.getGroupByData().project([y])).measurement(h).canvasAlias(t.alias()).setLegendMeasures(),i.push({canvas:t,legend:f,scaleType:g}))}),i}(a,e,i,e.legends||[])}(e,T,S,O);e._composition.legend={},P.forEach(function(t){e._composition.legend[t.scaleType]=t.legend});var A=function(e,t,n,r){var i={width:0,height:0};return e.map(function(e){return e.legend.measurement()}).forEach(function(e){var a,o;o=Math.min(e.width,e.maxWidth),a=Math.min(e.height,e.maxHeight),"horizontal"===t.align?i.width+o>r?(i.width=r,i.height+=a):(i.width+=o,i.height=Math.max(i.height,a)):i.height+a>n?(i.height=a,i.width+=o):(i.height+=a,i.width=Math.max(i.width,o))}),"horizontal"===t.align&&(i.width=r),i}(P,_,S,O),N="left"===k||"right"===k?A.width:0,j="top"===k||"bottom"===k?A.height:0,F={headers:C,legends:P,canvases:[e],rows:h,columns:d,values:p,cornerMatrices:c.cornerMatrices()},I={mountSpace:{height:i,width:a},headerHeight:T,legendSpace:A,canvasWidth:O,canvasHeight:S,width:O-N,height:S-T-j,minUnitHeight:e.minUnitHeight(),minUnitWidth:e.minUnitWidth()};return{layoutConfig:n=zc(n,{classPrefix:m,showHeaders:b,border:zc(c.metaData().border,e.config().border),layoutArrangement:E,legend:_,title:x,subtitle:w,isColumnSizeEqual:s,isRowSizeEqual:f}),components:F,measurement:I}},Ew={position:"top",align:"left",padding:8},Sw={position:"top",align:"left",padding:16};function Ow(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Mw=(Ow(_w={},"rows",{value:null,meta:{typeCheck:"constructor",typeExpected:"Array"}}),Ow(_w,"columns",{value:null,meta:{typeCheck:"constructor",typeExpected:"Array"}}),Ow(_w,"color",{value:null,meta:{typeCheck:"constructor",typeExpected:"Object",sanitization:function(e){return"string"==typeof e?{field:e}:e}}}),Ow(_w,"shape",{value:null,meta:{typeCheck:"constructor",typeExpected:"Object",sanitization:function(e){return"string"==typeof e?{field:e}:e}}}),Ow(_w,"size",{value:null,meta:{typeCheck:"constructor",typeExpected:"Object",sanitization:function(e){return"string"==typeof e?{field:e}:e}}}),Ow(_w,"detail",{value:[],meta:{typeCheck:"constructor",typeExpected:"Array"}}),Ow(_w,"layers",{value:null,meta:{typeCheck:"constructor",typeExpected:"Array"}}),Ow(_w,"transform",{value:null,meta:{typeCheck:"constructor",typeExpected:"Object"}}),Ow(_w,"mount",{value:null,meta:{sanitization:function(e){return"string"==typeof e?cf(e).node():e}}}),_w),Cw=(Ow(xw={},"title",{value:[null,null],meta:{typeCheck:["constructor","constructor"],typeExpected:["Function","Object"],spreadParams:!0,sanitization:[function(e){if("string"==typeof e){var t=function(){return e};return t._sanitized=!0,t}return e},function(e){var t=zc({},Ew);return zc(t,e)}]}}),Ow(xw,"subtitle",{value:[null,null],meta:{typeCheck:["constructor","constructor"],typeExpected:["Function","Object"],spreadParams:!0,sanitization:[function(e){if("string"==typeof e){var t=function(){return e};return t._sanitized=!0,t}return e},function(e){var t=zc({},Sw);return zc(t,e)}]}}),xw),Tw=function(e,t,n,r){var i=r[n+"Cell"],a=e[""+n],o=a.position,u=a.align,c=a.padding,l=t.selectAll("."+e.classPrefix+"-inner-container").data([n]);l.exit().remove();var s=l.enter().append("div").merge(l);s.classed(e.classPrefix+"-inner-container",!0),i&&i.render(s.node()),s.selectAll("div").classed(e.classPrefix+"-inner-content",!0),s.style("width","100%"),a&&i&&s.style("float","left").style("text-align",u).style("padding-"+("top"===o?"bottom":"top"),c+"px")};function Pw(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}var Aw=function(e){var t=e._store;t.registerImmediateListener("mount",function(){var n=Object.keys(e._allOptions),r=[].concat(Pw(n),Pw(Object.keys(Cw))),i=function(){return!1};t.registerChangeListener(r,function(){for(var t=arguments.length,n=Array(t),a=0;a<t;a++)n[a]=arguments[a];!r.every(function(e,t){switch(e){case"rows":case"columns":case"detail":i=Rc("Array");break;case"shape":case"size":case"color":case"data":case"config":i=Rc("Object");break;default:i=function(){return!0}}var r=n[t][0],a=n[t][1];return i(r,a)})&&function(e){var t=e.dependencies().lifeCycleManager;t.notify({client:e,action:"beforeupdate"});var n=e.composition().visualGroup;n.lockModel();var r=e._allOptions;for(var i in r){var a=e[i]();null!==a&&n[i]&&n[i](a)}n.unlockModel(),e._cachedProps={},t.notify({client:e,action:"initialized"}),t.notify({client:e,action:"updated"})}(e),e.render()},!0)})},Nw=function(e,t){var n=t.context.composition().visualGroup.composition().matrices.value;e.forEach(function(e){return e(n,t)})},jw=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function Fw(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}var Iw=function(e,t){var n,r,i=function(e){return e.type()===Ma.FieldType.MEASURE},a=t.context.composition().visualGroup,o=(n=[]).concat.apply(n,Fw(a.getFieldsFromChannel("x"))),u=(r=[]).concat.apply(r,Fw(a.getFieldsFromChannel("y"))),c=o.every(function(e){return e.type()===Ma.FieldType.DIMENSION}),l=a.resolver().getAllFields(),s=l.rowFacets,f=l.colFacets;e.each(function(e){var t=e.valueOf().firebolt();if(!o.every(i)||!u.every(i)){var n,r=e.valueOf().facetByFields()[0],a=r.filter(function(e){return-1!==f.findIndex(function(t){return t.equals(e)})}),l=r.filter(function(e){return-1!==s.findIndex(function(t){return t.equals(e)})});n=c?a.map(function(e){return""+e}):l.map(function(e){return""+e}),t.propagateWith("*",n,!0)}})},Dw={behaviours:{"*":function(e,t){var n=e.sourceCanvas,r=t.parentAlias();return!n||r===n}},sideEffects:{tooltip:function(e,t){var n=e.sourceUnit,r=e.sourceCanvas,i=t.id(),a=t.parentAlias();return!r||r!==a||i===n}}},Rw=function(){function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.context=t,this._interactionPolicy=this.constructor.defaultInteractionPolicy(),this._crossInteractionPolicy=this.constructor.defaultCrossInteractionPolicy(),this.context.once("canvas.updated").then(function(){Nw([n._interactionPolicy],n);var e=n._crossInteractionPolicy,r=e.behaviours,i=e.sideEffects;t.composition().visualGroup.composition().matrices.value.each(function(e){var t=e.valueOf().firebolt();for(var n in r)t.changeBehaviourStateOnPropagation(n,r[n]);for(var a in i)t.changeSideEffectStateOnPropagation(a,i[a])})})}return jw(e,[{key:"interactionPolicy",value:function(){return arguments.length?(this._interactionPolicy=(arguments.length<=0?void 0:arguments[0])||this.constructor.defaultInteractionPolicy(),this):this._interactionPolicy}},{key:"crossInteractionPolicy",value:function(){return arguments.length?(this._crossInteractionPolicy=zc(zc({},this.constructor.defaultCrossInteractionPolicy()),(arguments.length<=0?void 0:arguments[0])||{}),this):this._crossInteractionPolicy}},{key:"dispatchBehaviour",value:function(e,t){var n=Object.assign(t),r=n.criteria,i=this.context.data();n.action=e;var a=Gc(i,r);return i.propagate(a,n,{sourceId:this.context.alias()}),this}}],[{key:"defaultInteractionPolicy",value:function(){return Iw}},{key:"defaultCrossInteractionPolicy",value:function(){return Dw}}]),e}(),Lw=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,i=!1,a=void 0;try{for(var o,u=e[Symbol.iterator]();!(r=(o=u.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){i=!0,a=e}finally{try{!r&&u.return&&u.return()}finally{if(i)throw a}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},zw=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),Bw=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));n._allOptions=Object.assign({},B_,Mw),n._registry={},n._composition={},n._cachedProps={},n._alias=null,n._renderedResolve=null,n._renderedPromise=new Promise(function(e){n._renderedResolve=e}),n._composition.layout=new Ax,n._store=new jc({});var r=Ic(n,B_,n._store.model),i=Lw(r,2)[1];return Ic(n,Mw,i),Ic(n,Cw,i),n.dependencies(Object.assign({},e,n._dependencies)),n.firebolt(new Rw(n)),n.alias("canvas-"+xc()),n.title("",{}),n.subtitle("",{}),n.legend({}),n.color({}),n.shape({}),n.size({}),Aw(n),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,jx),zw(t,[{key:"layout",value:function(){return arguments.length?this:this.composition().layout}},{key:"composition",value:function(){return arguments.length?this:this._composition}},{key:"done",value:function(){return this._renderedPromise}},{key:"alias",value:function(){if(arguments.length){var e=this.composition().visualGroup;return this._alias=arguments.length<=0?void 0:arguments[0],e&&e.alias(this.alias()),this}return this._alias}},{key:"firebolt",value:function(){return arguments.length?(this._firebolt=arguments.length<=0?void 0:arguments[0],this):this._firebolt}},{key:"registry",value:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];if(t.length){var r=Object.assign({},t[0].components),i=Object.assign({},t[0].componentSubRegistry);this._registry={components:r,componentSubRegistry:i};var a=function(e){return[new e._registry.components.VisualGroup(e._registry,e.dependencies())]}(this);return this._composition.visualGroup=a[0],this.composition().visualGroup.alias(this.alias()),this}return this._registry}},{key:"dependencies",value:function(){return arguments.length?(this._dependencies=arguments.length<=0?void 0:arguments[0],this):this._dependencies}},{key:"lifeCycle",value:function(e){var t=this.dependencies().lifeCycleManager;return e?(t.register(e),this):t}},{key:"legend",value:function(){return arguments.length?this:this.composition().legend}},{key:"once",value:function(e){return this.dependencies().lifeCycleManager.retrieve(e)}},{key:"render",value:function(){var e=this,t=this.mount(),n=this.composition().visualGroup,r=this.dependencies().lifeCycleManager,i=kw(this,t),a=i.components,o=i.layoutConfig,u=i.measurement;r.notify({client:this,action:"beforedraw"}),function(e,t,n,r){var i=t.rows,a=t.columns,o=t.values,u=t.cornerMatrices,c=u.topLeft,l=u.topRight,s=u.bottomLeft,f=u.bottomRight;e.measurement(r).config(n).matrices({top:[c,a[0],l],center:[i[0],o,i[1]],bottom:[s,a[1],f]}).triggerReflow()}(this.layout(),a,o,u),function(e,t,n,r){var i=e.mount(),a=t.headers,o=t.legends,u=n.classPrefix,c=function(e,t,n){var r=t.layoutArrangement,i=t.classPrefix,a=r.headers,o=r.legends,u=n.canvasWidth,c=n.canvasHeight,l=cf(e),s={},f=lf(l,"div",[1],i+"-viz").style("width",u+"px").style("height",c+"px").selectAll("."+i+"-container").data(a);f.exit().remove();var h=f.enter().append("div").merge(f).attr("class",i+"-container").style("width",u+"px").style("padding","nullpx").style("margin",null).each(function(e){s[e]=cf(this).classed(i+"-"+e+"-container",!0)}).selectAll("."+i+"-inner-container").data(function(e){return"group"===e?o:[]});return h.exit().remove(),h.enter().append("div").merge(h).attr("class",i+"-inner-container").style("width","auto").style("height","auto").each(function(e){s[e]=cf(this).classed(i+"-"+e+"-container",!0)}),s}(i,n,r),l=c.title,s=c.legend,f=c.subtitle,h=c.layout,d=function(e,t,n,r){if(e){var i=t.height,a=t.width,o=cf(e).selectAll("."+n+"-inner-content").data(["layout"],function(e){return e});o.exit().remove();var u=o.enter().append("div").merge(o).attr("class",n+"-inner-content").classed(n+"-grid-layout",!0).attr("id",n+"-grid-layout-"+r).style("height",i+"px").style("padding",null).style("width",Math.ceil(a)+"px"),c=u.selectAll("."+n+"-layout-grid-container").data(["layout2"]);c.exit().remove();var l=c.enter().append("div").merge(c);return l.classed(n+"-layout-grid-container",!0).attr("id",n+"-layout-grid-container-"+r).style("height",i+"px").style("width",Math.ceil(a)+"px"),{mount:l,container:u}}}(h.node(),r,u,e.alias()).mount,p=e.layout().getViewInformation().layoutDimensions.viewWidth[0];r.padding=p,function(e){var t=0,n=e.xAxes()||[];!function(){for(var e=0;e<n.length;e++)for(var r=0;r<n[e].length;r++)if(0!==n[e][r].config().labels.rotation)return void(t=n[e][r].config().labels.rotation)}(),t&&n.forEach(function(e){e.forEach(function(e){e.config({labels:{rotation:t,smartTicks:!1}})})})}(e),e.layout().renderGrid(d),e.once("layer.drawn").then(function(){Tw(n,l,"title",a),Tw(n,f,"subtitle",a),function(e,t,n,r){var i=[],a=r.legendSpace,o=r.headerHeight,u=r.height,c=r.width,l=e.legend,s=e.classPrefix,f=l.position,h=lf(t,"div",[n],s+"-inner-content",{},function(e){return e});h.classed(s+"-legend",!0);var d="left"===f||"right"===f?"vertical":"horizontal",p="vertical"===d?a.width:c,y="vertical"===d?u-o:a.height;if([t,h].forEach(function(e){e.style("width",Math.floor(p)+"px").style("height",y+"px").style("float","left")}),"vertical"===d){var g=-1,v=y,m=0;n.forEach(function(e){var t=e.legend;t.measurement().height>v?(g++,m=0,v=y):g<0&&g++,i[g]=i[g]||[],v-=Math.min(t.measurement().height,v),m=Math.max(Math.min(t.measurement().width,t.measurement().maxWidth),m),i[g].push({legend:t,legendHeight:y,legendWidth:m})});var b=lf(h,["div"],i,s+"-legend-section").each(function(e,t){return cf(void 0).classed(s+"-legend-section-"+t,!0)}).classed(s+"-legend-vertical-section",!0).style("width",function(e){return e[0].legendWidth+"px"});lf(b,["div"],function(e){return e},s+"-legend-components",{},function(e){return e.legend.id()}).each(function(e){e.legend.mount(this)}).style("width",function(e){return e.legendWidth+"px"})}else{var _=lf(h,"div",[1],s+"-legend-section").classed(s+"-legend-horizontal-section",!0).classed(s+"-legend-section-0",!0).style("width",p+"px");lf(_,"div",n,s+"-legend-components",{},function(e){return e.legend.id()}).each(function(e){e.legend.mount(this)}).style("width",function(e){return e.legend.measurement().width+"px"})}}(n,s,o,r),function(e,t,n,r){var i=e.classPrefix,a=e.title,o=e.subtitle,u=e.legend,c=n.legendSpace;t+="left"===u.position?c.width:0,a&&cf(r).select("."+i+"-title-container").style("width","left"===a.align?"calc(100% - "+t+"px":"100%").style("margin-left","left"===a.align?t+"px":0),o&&cf(r).select("."+i+"-subtitle-container").style("width","left"===o.align?"calc(100% - "+t+"px":"100%").style("margin-left","left"===o.align?t+"px":0),cf(r).select("."+i+"-legend-horizontal-section").style("margin-left",t+"px").style("width",c.width-t+"px").selectAll("."+i+"-legend-body, ."+i+"-legend-title").style("max-width",c.width-t+"px"),cf(r).select("."+i+"-legend-vertical-section").style("margin-left",null).selectAll("."+i+"-legend-body, ."+i+"-legend-title").style("max-width",null)}(n,p,r,i)}),e.composition().visualGroup.matrixInstance().value.each(function(e){e.valueOf().parentContainer(h.node())})}(this,a,o,u),r.notify({client:this,action:"drawn"});var c=[];n.matrixInstance().value.each(function(e){c.push(e.valueOf().done())}),Promise.all(c).then(function(){e._renderedResolve()})}},{key:"xAxes",value:function(){return this.composition().visualGroup.getAxes("x")}},{key:"yAxes",value:function(){return this.composition().visualGroup.getAxes("y")}},{key:"getRetinalAxes",value:function(){return this.composition().visualGroup.getAxes("retinal")}}],[{key:"withSettings",value:function(e,n,r){var i=new t(r);for(var a in e)i[a](e[a]);return i.registry(n),i}},{key:"formalName",value:function(){return"canvas"}}]),t}(),Uw={VisualGroup:db,VisualUnit:Wm},Hw={cellRegistry:function e(){var t=ww;return{set:function(n,r){return n in t&&(t[n]=r),e},get:function(){return t}}},layerRegistry:function(){var e=Ig,t={set:function(n,r){return e[n]=r,t},get:function(){return e}};return t}},Vw=(n(42),function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,i=!1,a=void 0;try{for(var o,u=e[Symbol.iterator]();!(r=(o=u.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){i=!0,a=e}finally{try{!r&&u.return&&u.return()}finally{if(i)throw a}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}),Ww={},qw=Uw,Gw=function(e,t){for(var n in e)t.set(n,e[n])},Yw=function(){var e=Ic({},B_),t=Vw(e,2),n=t[0],r=t[1],i=Object.assign({},Uw),a=Object.assign(Hw),o={};for(var u in a)o[u]=a[u]();return n.canvas=function(){var e=r.serialize(),t=Bw.withSettings(e,{components:i,componentSubRegistry:o},n.globalDependencies());return function(e,t,n){n.forEach(function(n){return e.on(n,function(e){var r=pc(e,2)[1];return t[n](r)})})}(r,t,Object.keys(e)),t},n.globalDependencies=function(){return Ww.smartlabel||(Ww.smartlabel=new _f.a(1,"body")),{smartlabel:Ww.smartlabel,lifeCycleManager:new Pf}},n.settings=function(){return r.serialize()},n.registry=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];if(t.length){for(var a in t)a in qw&&(i[a]=t[a]);return n}return i},n.cellRegistry=function(){var e=o.cellRegistry;return arguments.length?(Gw(arguments.length<=0?void 0:arguments[0],e),n):e.get()},n.layerRegistry=function(){var e=o.layerRegistry;return arguments.length?(Gw(arguments.length<=0?void 0:arguments[0],e),n):e.get()},n},$w={sideEffects:l,standards:{SurrogateSideEffect:Ch,SpawnableSideEffect:Ph,GenericSideEffect:Oh}},Xw={behaviouralActions:c,standards:{GenericBehaviour:nh,PersistentBehaviour:vh,VolatileBehaviour:ih}};Yw.DataModel=Ca.a,Yw.version=Dg.version,Yw.SideEffects=$w,Yw.ActionModel=L_,Yw.layerFactory=Ng,Yw.Operators=y,Yw.Behaviours=Xw,Yw.utils={getClientPoint:yf,getEvent:gf,makeElement:lf,selectElement:cf,DateTimeFormatter:Ma.DateTimeFormatter,require:function(e,t){return{resolvable:function(n){var r=n[e],i=t.slice(0,t.length-1),a=t[t.length-1],o=i.map(function(e){return r[e]});return{fn:a.apply(void 0,bc(o)),depArr:i}}}}},t.default=Yw}])},e.exports=r()},function(e,t,n){"use strict";function r(e){return(r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e){return(i="function"===typeof Symbol&&"symbol"===r(Symbol.iterator)?function(e){return r(e)}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":r(e)})(e)}function a(e,t){return!t||"object"!==i(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}n.d(t,"a",function(){return a})},function(e,t,n){"use strict";function r(e,t){return(r=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&r(e,t)}n.d(t,"a",function(){return i})},function(e,t,n){"use strict";var r=Object.getOwnPropertySymbols,i=Object.prototype.hasOwnProperty,a=Object.prototype.propertyIsEnumerable;e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map(function(e){return t[e]}).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach(function(e){r[e]=e}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(i){return!1}}()?Object.assign:function(e,t){for(var n,o,u=function(e){if(null===e||void 0===e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}(e),c=1;c<arguments.length;c++){for(var l in n=Object(arguments[c]))i.call(n,l)&&(u[l]=n[l]);if(r){o=r(n);for(var s=0;s<o.length;s++)a.call(n,o[s])&&(u[o[s]]=n[o[s]])}}return u}},function(e,t,n){"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(11)},,function(e,t,n){"use strict";var r=n(7),i="function"===typeof Symbol&&Symbol.for,a=i?Symbol.for("react.element"):60103,o=i?Symbol.for("react.portal"):60106,u=i?Symbol.for("react.fragment"):60107,c=i?Symbol.for("react.strict_mode"):60108,l=i?Symbol.for("react.profiler"):60114,s=i?Symbol.for("react.provider"):60109,f=i?Symbol.for("react.context"):60110,h=i?Symbol.for("react.async_mode"):60111,d=i?Symbol.for("react.forward_ref"):60112;i&&Symbol.for("react.placeholder");var p="function"===typeof Symbol&&Symbol.iterator;function y(e){for(var t=arguments.length-1,n="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=0;r<t;r++)n+="&args[]="+encodeURIComponent(arguments[r+1]);!function(e,t,n,r,i,a,o,u){if(!e){if(e=void 0,void 0===t)e=Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var c=[n,r,i,a,o,u],l=0;(e=Error(t.replace(/%s/g,function(){return c[l++]}))).name="Invariant Violation"}throw e.framesToPop=1,e}}(!1,"Minified React error #"+e+"; visit %s for the full message or use the non-minified dev environment for full errors and additional helpful warnings. ",n)}var g={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v={};function m(e,t,n){this.props=e,this.context=t,this.refs=v,this.updater=n||g}function b(){}function _(e,t,n){this.props=e,this.context=t,this.refs=v,this.updater=n||g}m.prototype.isReactComponent={},m.prototype.setState=function(e,t){"object"!==typeof e&&"function"!==typeof e&&null!=e&&y("85"),this.updater.enqueueSetState(this,e,t,"setState")},m.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},b.prototype=m.prototype;var x=_.prototype=new b;x.constructor=_,r(x,m.prototype),x.isPureReactComponent=!0;var w={current:null,currentDispatcher:null},k=Object.prototype.hasOwnProperty,E={key:!0,ref:!0,__self:!0,__source:!0};function S(e,t,n){var r=void 0,i={},o=null,u=null;if(null!=t)for(r in void 0!==t.ref&&(u=t.ref),void 0!==t.key&&(o=""+t.key),t)k.call(t,r)&&!E.hasOwnProperty(r)&&(i[r]=t[r]);var c=arguments.length-2;if(1===c)i.children=n;else if(1<c){for(var l=Array(c),s=0;s<c;s++)l[s]=arguments[s+2];i.children=l}if(e&&e.defaultProps)for(r in c=e.defaultProps)void 0===i[r]&&(i[r]=c[r]);return{$$typeof:a,type:e,key:o,ref:u,props:i,_owner:w.current}}function O(e){return"object"===typeof e&&null!==e&&e.$$typeof===a}var M=/\/+/g,C=[];function T(e,t,n,r){if(C.length){var i=C.pop();return i.result=e,i.keyPrefix=t,i.func=n,i.context=r,i.count=0,i}return{result:e,keyPrefix:t,func:n,context:r,count:0}}function P(e){e.result=null,e.keyPrefix=null,e.func=null,e.context=null,e.count=0,10>C.length&&C.push(e)}function A(e,t,n){return null==e?0:function e(t,n,r,i){var u=typeof t;"undefined"!==u&&"boolean"!==u||(t=null);var c=!1;if(null===t)c=!0;else switch(u){case"string":case"number":c=!0;break;case"object":switch(t.$$typeof){case a:case o:c=!0}}if(c)return r(i,t,""===n?"."+N(t,0):n),1;if(c=0,n=""===n?".":n+":",Array.isArray(t))for(var l=0;l<t.length;l++){var s=n+N(u=t[l],l);c+=e(u,s,r,i)}else if(s=null===t||"object"!==typeof t?null:"function"===typeof(s=p&&t[p]||t["@@iterator"])?s:null,"function"===typeof s)for(t=s.call(t),l=0;!(u=t.next()).done;)c+=e(u=u.value,s=n+N(u,l++),r,i);else"object"===u&&y("31","[object Object]"===(r=""+t)?"object with keys {"+Object.keys(t).join(", ")+"}":r,"");return c}(e,"",t,n)}function N(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+(""+e).replace(/[=:]/g,function(e){return t[e]})}(e.key):t.toString(36)}function j(e,t){e.func.call(e.context,t,e.count++)}function F(e,t,n){var r=e.result,i=e.keyPrefix;e=e.func.call(e.context,t,e.count++),Array.isArray(e)?I(e,r,n,function(e){return e}):null!=e&&(O(e)&&(e=function(e,t){return{$$typeof:a,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(e,i+(!e.key||t&&t.key===e.key?"":(""+e.key).replace(M,"$&/")+"/")+n)),r.push(e))}function I(e,t,n,r,i){var a="";null!=n&&(a=(""+n).replace(M,"$&/")+"/"),A(e,F,t=T(t,a,r,i)),P(t)}var D={Children:{map:function(e,t,n){if(null==e)return e;var r=[];return I(e,r,null,t,n),r},forEach:function(e,t,n){if(null==e)return e;A(e,j,t=T(null,null,t,n)),P(t)},count:function(e){return A(e,function(){return null},null)},toArray:function(e){var t=[];return I(e,t,null,function(e){return e}),t},only:function(e){return O(e)||y("143"),e}},createRef:function(){return{current:null}},Component:m,PureComponent:_,createContext:function(e,t){return void 0===t&&(t=null),(e={$$typeof:f,_calculateChangedBits:t,_currentValue:e,_currentValue2:e,Provider:null,Consumer:null,unstable_read:null}).Provider={$$typeof:s,_context:e},e.Consumer=e,e.unstable_read=function(e,t){var n=w.currentDispatcher;return null===n&&y("277"),n.readContext(e,t)}.bind(null,e),e},forwardRef:function(e){return{$$typeof:d,render:e}},Fragment:u,StrictMode:c,unstable_AsyncMode:h,unstable_Profiler:l,createElement:S,cloneElement:function(e,t,n){(null===e||void 0===e)&&y("267",e);var i=void 0,o=r({},e.props),u=e.key,c=e.ref,l=e._owner;if(null!=t){void 0!==t.ref&&(c=t.ref,l=w.current),void 0!==t.key&&(u=""+t.key);var s=void 0;for(i in e.type&&e.type.defaultProps&&(s=e.type.defaultProps),t)k.call(t,i)&&!E.hasOwnProperty(i)&&(o[i]=void 0===t[i]&&void 0!==s?s[i]:t[i])}if(1===(i=arguments.length-2))o.children=n;else if(1<i){s=Array(i);for(var f=0;f<i;f++)s[f]=arguments[f+2];o.children=s}return{$$typeof:a,type:e.type,key:u,ref:c,props:o,_owner:l}},createFactory:function(e){var t=S.bind(null,e);return t.type=e,t},isValidElement:O,version:"16.5.2",__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:{ReactCurrentOwner:w,assign:r}},R={default:D},L=R&&D||R;e.exports=L.default||L},function(e,t,n){"use strict";var r=n(0),i=n(7),a=n(12);function o(e){for(var t=arguments.length-1,n="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=0;r<t;r++)n+="&args[]="+encodeURIComponent(arguments[r+1]);!function(e,t,n,r,i,a,o,u){if(!e){if(e=void 0,void 0===t)e=Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var c=[n,r,i,a,o,u],l=0;(e=Error(t.replace(/%s/g,function(){return c[l++]}))).name="Invariant Violation"}throw e.framesToPop=1,e}}(!1,"Minified React error #"+e+"; visit %s for the full message or use the non-minified dev environment for full errors and additional helpful warnings. ",n)}r||o("227");var u=!1,c=null,l=!1,s=null,f={onError:function(e){u=!0,c=e}};function h(e,t,n,r,i,a,o,l,s){u=!1,c=null,function(e,t,n,r,i,a,o,u,c){var l=Array.prototype.slice.call(arguments,3);try{t.apply(n,l)}catch(s){this.onError(s)}}.apply(f,arguments)}var d=null,p={};function y(){if(d)for(var e in p){var t=p[e],n=d.indexOf(e);if(-1<n||o("96",e),!v[n])for(var r in t.extractEvents||o("97",e),v[n]=t,n=t.eventTypes){var i=void 0,a=n[r],u=t,c=r;m.hasOwnProperty(c)&&o("99",c),m[c]=a;var l=a.phasedRegistrationNames;if(l){for(i in l)l.hasOwnProperty(i)&&g(l[i],u,c);i=!0}else a.registrationName?(g(a.registrationName,u,c),i=!0):i=!1;i||o("98",r,e)}}}function g(e,t,n){b[e]&&o("100",e),b[e]=t,_[e]=t.eventTypes[n].dependencies}var v=[],m={},b={},_={},x=null,w=null,k=null;function E(e,t,n,r){t=e.type||"unknown-event",e.currentTarget=k(r),function(e,t,n,r,i,a,f,d,p){if(h.apply(this,arguments),u){if(u){var y=c;u=!1,c=null}else o("198"),y=void 0;l||(l=!0,s=y)}}(t,n,void 0,e),e.currentTarget=null}function S(e,t){return null==t&&o("30"),null==e?t:Array.isArray(e)?Array.isArray(t)?(e.push.apply(e,t),e):(e.push(t),e):Array.isArray(t)?[e].concat(t):[e,t]}function O(e,t,n){Array.isArray(e)?e.forEach(t,n):e&&t.call(n,e)}var M=null;function C(e,t){if(e){var n=e._dispatchListeners,r=e._dispatchInstances;if(Array.isArray(n))for(var i=0;i<n.length&&!e.isPropagationStopped();i++)E(e,t,n[i],r[i]);else n&&E(e,t,n,r);e._dispatchListeners=null,e._dispatchInstances=null,e.isPersistent()||e.constructor.release(e)}}function T(e){return C(e,!0)}function P(e){return C(e,!1)}var A={injectEventPluginOrder:function(e){d&&o("101"),d=Array.prototype.slice.call(e),y()},injectEventPluginsByName:function(e){var t,n=!1;for(t in e)if(e.hasOwnProperty(t)){var r=e[t];p.hasOwnProperty(t)&&p[t]===r||(p[t]&&o("102",t),p[t]=r,n=!0)}n&&y()}};function N(e,t){var n=e.stateNode;if(!n)return null;var r=x(n);if(!r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}return e?null:(n&&"function"!==typeof n&&o("231",t,typeof n),n)}function j(e,t){if(null!==e&&(M=S(M,e)),e=M,M=null,e&&(O(e,t?T:P),M&&o("95"),l))throw t=s,l=!1,s=null,t}var F=Math.random().toString(36).slice(2),I="__reactInternalInstance$"+F,D="__reactEventHandlers$"+F;function R(e){if(e[I])return e[I];for(;!e[I];){if(!e.parentNode)return null;e=e.parentNode}return 7===(e=e[I]).tag||8===e.tag?e:null}function L(e){return!(e=e[I])||7!==e.tag&&8!==e.tag?null:e}function z(e){if(7===e.tag||8===e.tag)return e.stateNode;o("33")}function B(e){return e[D]||null}function U(e){do{e=e.return}while(e&&7!==e.tag);return e||null}function H(e,t,n){(t=N(e,n.dispatchConfig.phasedRegistrationNames[t]))&&(n._dispatchListeners=S(n._dispatchListeners,t),n._dispatchInstances=S(n._dispatchInstances,e))}function V(e){if(e&&e.dispatchConfig.phasedRegistrationNames){for(var t=e._targetInst,n=[];t;)n.push(t),t=U(t);for(t=n.length;0<t--;)H(n[t],"captured",e);for(t=0;t<n.length;t++)H(n[t],"bubbled",e)}}function W(e,t,n){e&&n&&n.dispatchConfig.registrationName&&(t=N(e,n.dispatchConfig.registrationName))&&(n._dispatchListeners=S(n._dispatchListeners,t),n._dispatchInstances=S(n._dispatchInstances,e))}function q(e){e&&e.dispatchConfig.registrationName&&W(e._targetInst,null,e)}function G(e){O(e,V)}var Y=!("undefined"===typeof window||!window.document||!window.document.createElement);function $(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var X={animationend:$("Animation","AnimationEnd"),animationiteration:$("Animation","AnimationIteration"),animationstart:$("Animation","AnimationStart"),transitionend:$("Transition","TransitionEnd")},K={},Q={};function J(e){if(K[e])return K[e];if(!X[e])return e;var t,n=X[e];for(t in n)if(n.hasOwnProperty(t)&&t in Q)return K[e]=n[t];return e}Y&&(Q=document.createElement("div").style,"AnimationEvent"in window||(delete X.animationend.animation,delete X.animationiteration.animation,delete X.animationstart.animation),"TransitionEvent"in window||delete X.transitionend.transition);var Z=J("animationend"),ee=J("animationiteration"),te=J("animationstart"),ne=J("transitionend"),re="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),ie=null,ae=null,oe=null;function ue(){if(oe)return oe;var e,t,n=ae,r=n.length,i="value"in ie?ie.value:ie.textContent,a=i.length;for(e=0;e<r&&n[e]===i[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===i[a-t];t++);return oe=i.slice(e,1<t?1-t:void 0)}function ce(){return!0}function le(){return!1}function se(e,t,n,r){for(var i in this.dispatchConfig=e,this._targetInst=t,this.nativeEvent=n,e=this.constructor.Interface)e.hasOwnProperty(i)&&((t=e[i])?this[i]=t(n):"target"===i?this.target=r:this[i]=n[i]);return this.isDefaultPrevented=(null!=n.defaultPrevented?n.defaultPrevented:!1===n.returnValue)?ce:le,this.isPropagationStopped=le,this}function fe(e,t,n,r){if(this.eventPool.length){var i=this.eventPool.pop();return this.call(i,e,t,n,r),i}return new this(e,t,n,r)}function he(e){e instanceof this||o("279"),e.destructor(),10>this.eventPool.length&&this.eventPool.push(e)}function de(e){e.eventPool=[],e.getPooled=fe,e.release=he}i(se.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=ce)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=ce)},persist:function(){this.isPersistent=ce},isPersistent:le,destructor:function(){var e,t=this.constructor.Interface;for(e in t)this[e]=null;this.nativeEvent=this._targetInst=this.dispatchConfig=null,this.isPropagationStopped=this.isDefaultPrevented=le,this._dispatchInstances=this._dispatchListeners=null}}),se.Interface={type:null,target:null,currentTarget:function(){return null},eventPhase:null,bubbles:null,cancelable:null,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:null,isTrusted:null},se.extend=function(e){function t(){}function n(){return r.apply(this,arguments)}var r=this;t.prototype=r.prototype;var a=new t;return i(a,n.prototype),n.prototype=a,n.prototype.constructor=n,n.Interface=i({},r.Interface,e),n.extend=r.extend,de(n),n},de(se);var pe=se.extend({data:null}),ye=se.extend({data:null}),ge=[9,13,27,32],ve=Y&&"CompositionEvent"in window,me=null;Y&&"documentMode"in document&&(me=document.documentMode);var be=Y&&"TextEvent"in window&&!me,_e=Y&&(!ve||me&&8<me&&11>=me),xe=String.fromCharCode(32),we={beforeInput:{phasedRegistrationNames:{bubbled:"onBeforeInput",captured:"onBeforeInputCapture"},dependencies:["compositionend","keypress","textInput","paste"]},compositionEnd:{phasedRegistrationNames:{bubbled:"onCompositionEnd",captured:"onCompositionEndCapture"},dependencies:"blur compositionend keydown keypress keyup mousedown".split(" ")},compositionStart:{phasedRegistrationNames:{bubbled:"onCompositionStart",captured:"onCompositionStartCapture"},dependencies:"blur compositionstart keydown keypress keyup mousedown".split(" ")},compositionUpdate:{phasedRegistrationNames:{bubbled:"onCompositionUpdate",captured:"onCompositionUpdateCapture"},dependencies:"blur compositionupdate keydown keypress keyup mousedown".split(" ")}},ke=!1;function Ee(e,t){switch(e){case"keyup":return-1!==ge.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"blur":return!0;default:return!1}}function Se(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Oe=!1;var Me={eventTypes:we,extractEvents:function(e,t,n,r){var i=void 0,a=void 0;if(ve)e:{switch(e){case"compositionstart":i=we.compositionStart;break e;case"compositionend":i=we.compositionEnd;break e;case"compositionupdate":i=we.compositionUpdate;break e}i=void 0}else Oe?Ee(e,n)&&(i=we.compositionEnd):"keydown"===e&&229===n.keyCode&&(i=we.compositionStart);return i?(_e&&"ko"!==n.locale&&(Oe||i!==we.compositionStart?i===we.compositionEnd&&Oe&&(a=ue()):(ae="value"in(ie=r)?ie.value:ie.textContent,Oe=!0)),i=pe.getPooled(i,t,n,r),a?i.data=a:null!==(a=Se(n))&&(i.data=a),G(i),a=i):a=null,(e=be?function(e,t){switch(e){case"compositionend":return Se(t);case"keypress":return 32!==t.which?null:(ke=!0,xe);case"textInput":return(e=t.data)===xe&&ke?null:e;default:return null}}(e,n):function(e,t){if(Oe)return"compositionend"===e||!ve&&Ee(e,t)?(e=ue(),oe=ae=ie=null,Oe=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return _e&&"ko"!==t.locale?null:t.data;default:return null}}(e,n))?((t=ye.getPooled(we.beforeInput,t,n,r)).data=e,G(t)):t=null,null===a?t:null===t?a:[a,t]}},Ce=null,Te=null,Pe=null;function Ae(e){if(e=w(e)){"function"!==typeof Ce&&o("280");var t=x(e.stateNode);Ce(e.stateNode,e.type,t)}}function Ne(e){Te?Pe?Pe.push(e):Pe=[e]:Te=e}function je(){if(Te){var e=Te,t=Pe;if(Pe=Te=null,Ae(e),t)for(e=0;e<t.length;e++)Ae(t[e])}}function Fe(e,t){return e(t)}function Ie(e,t,n){return e(t,n)}function De(){}var Re=!1;function Le(e,t){if(Re)return e(t);Re=!0;try{return Fe(e,t)}finally{Re=!1,(null!==Te||null!==Pe)&&(De(),je())}}var ze={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Be(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!ze[e.type]:"textarea"===t}function Ue(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}function He(e){if(!Y)return!1;var t=(e="on"+e)in document;return t||((t=document.createElement("div")).setAttribute(e,"return;"),t="function"===typeof t[e]),t}function Ve(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function We(e){e._valueTracker||(e._valueTracker=function(e){var t=Ve(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,a=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,a.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function qe(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=Ve(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}var Ge=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Ye=/^(.*)[\\\/]/,$e="function"===typeof Symbol&&Symbol.for,Xe=$e?Symbol.for("react.element"):60103,Ke=$e?Symbol.for("react.portal"):60106,Qe=$e?Symbol.for("react.fragment"):60107,Je=$e?Symbol.for("react.strict_mode"):60108,Ze=$e?Symbol.for("react.profiler"):60114,et=$e?Symbol.for("react.provider"):60109,tt=$e?Symbol.for("react.context"):60110,nt=$e?Symbol.for("react.async_mode"):60111,rt=$e?Symbol.for("react.forward_ref"):60112,it=$e?Symbol.for("react.placeholder"):60113,at="function"===typeof Symbol&&Symbol.iterator;function ot(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=at&&e[at]||e["@@iterator"])?e:null}function ut(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case nt:return"AsyncMode";case Qe:return"Fragment";case Ke:return"Portal";case Ze:return"Profiler";case Je:return"StrictMode";case it:return"Placeholder"}if("object"===typeof e){switch(e.$$typeof){case tt:return"Context.Consumer";case et:return"Context.Provider";case rt:var t=e.render;return t=t.displayName||t.name||"",e.displayName||(""!==t?"ForwardRef("+t+")":"ForwardRef")}if("function"===typeof e.then&&(e=1===e._reactStatus?e._reactResult:null))return ut(e)}return null}function ct(e){var t="";do{e:switch(e.tag){case 4:case 0:case 1:case 2:case 3:case 7:case 10:var n=e._debugOwner,r=e._debugSource,i=ut(e.type),a=null;n&&(a=ut(n.type)),n=i,i="",r?i=" (at "+r.fileName.replace(Ye,"")+":"+r.lineNumber+")":a&&(i=" (created by "+a+")"),a="\n    in "+(n||"Unknown")+i;break e;default:a=""}t+=a,e=e.return}while(e);return t}var lt=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,st=Object.prototype.hasOwnProperty,ft={},ht={};function dt(e,t,n,r,i){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t}var pt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){pt[e]=new dt(e,0,!1,e,null)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];pt[t]=new dt(t,1,!1,e[1],null)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){pt[e]=new dt(e,2,!1,e.toLowerCase(),null)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){pt[e]=new dt(e,2,!1,e,null)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){pt[e]=new dt(e,3,!1,e.toLowerCase(),null)}),["checked","multiple","muted","selected"].forEach(function(e){pt[e]=new dt(e,3,!0,e,null)}),["capture","download"].forEach(function(e){pt[e]=new dt(e,4,!1,e,null)}),["cols","rows","size","span"].forEach(function(e){pt[e]=new dt(e,6,!1,e,null)}),["rowSpan","start"].forEach(function(e){pt[e]=new dt(e,5,!1,e.toLowerCase(),null)});var yt=/[\-:]([a-z])/g;function gt(e){return e[1].toUpperCase()}function vt(e,t,n,r){var i=pt.hasOwnProperty(t)?pt[t]:null;(null!==i?0===i.type:!r&&(2<t.length&&("o"===t[0]||"O"===t[0])&&("n"===t[1]||"N"===t[1])))||(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!st.call(ht,e)||!st.call(ft,e)&&(lt.test(e)?ht[e]=!0:(ft[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}function mt(e){switch(typeof e){case"boolean":case"number":case"object":case"string":case"undefined":return e;default:return""}}function bt(e,t){var n=t.checked;return i({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function _t(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=mt(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function xt(e,t){null!=(t=t.checked)&&vt(e,"checked",t,!1)}function wt(e,t){xt(e,t);var n=mt(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?Et(e,t.type,n):t.hasOwnProperty("defaultValue")&&Et(e,t.type,mt(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function kt(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!e.defaultChecked,e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function Et(e,t,n){"number"===t&&e.ownerDocument.activeElement===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(yt,gt);pt[t]=new dt(t,1,!1,e,null)}),"xlink:actuate xlink:arcrole xlink:href xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(yt,gt);pt[t]=new dt(t,1,!1,e,"http://www.w3.org/1999/xlink")}),["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(yt,gt);pt[t]=new dt(t,1,!1,e,"http://www.w3.org/XML/1998/namespace")}),pt.tabIndex=new dt("tabIndex",1,!1,"tabindex",null);var St={change:{phasedRegistrationNames:{bubbled:"onChange",captured:"onChangeCapture"},dependencies:"blur change click focus input keydown keyup selectionchange".split(" ")}};function Ot(e,t,n){return(e=se.getPooled(St.change,e,t,n)).type="change",Ne(n),G(e),e}var Mt=null,Ct=null;function Tt(e){j(e,!1)}function Pt(e){if(qe(z(e)))return e}function At(e,t){if("change"===e)return t}var Nt=!1;function jt(){Mt&&(Mt.detachEvent("onpropertychange",Ft),Ct=Mt=null)}function Ft(e){"value"===e.propertyName&&Pt(Ct)&&Le(Tt,e=Ot(Ct,e,Ue(e)))}function It(e,t,n){"focus"===e?(jt(),Ct=n,(Mt=t).attachEvent("onpropertychange",Ft)):"blur"===e&&jt()}function Dt(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Pt(Ct)}function Rt(e,t){if("click"===e)return Pt(t)}function Lt(e,t){if("input"===e||"change"===e)return Pt(t)}Y&&(Nt=He("input")&&(!document.documentMode||9<document.documentMode));var zt={eventTypes:St,_isInputEventSupported:Nt,extractEvents:function(e,t,n,r){var i=t?z(t):window,a=void 0,o=void 0,u=i.nodeName&&i.nodeName.toLowerCase();if("select"===u||"input"===u&&"file"===i.type?a=At:Be(i)?Nt?a=Lt:(a=Dt,o=It):(u=i.nodeName)&&"input"===u.toLowerCase()&&("checkbox"===i.type||"radio"===i.type)&&(a=Rt),a&&(a=a(e,t)))return Ot(a,n,r);o&&o(e,i,t),"blur"===e&&(e=i._wrapperState)&&e.controlled&&"number"===i.type&&Et(i,"number",i.value)}},Bt=se.extend({view:null,detail:null}),Ut={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Ht(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=Ut[e])&&!!t[e]}function Vt(){return Ht}var Wt=0,qt=0,Gt=!1,Yt=!1,$t=Bt.extend({screenX:null,screenY:null,clientX:null,clientY:null,pageX:null,pageY:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,getModifierState:Vt,button:null,buttons:null,relatedTarget:function(e){return e.relatedTarget||(e.fromElement===e.srcElement?e.toElement:e.fromElement)},movementX:function(e){if("movementX"in e)return e.movementX;var t=Wt;return Wt=e.screenX,Gt?"mousemove"===e.type?e.screenX-t:0:(Gt=!0,0)},movementY:function(e){if("movementY"in e)return e.movementY;var t=qt;return qt=e.screenY,Yt?"mousemove"===e.type?e.screenY-t:0:(Yt=!0,0)}}),Xt=$t.extend({pointerId:null,width:null,height:null,pressure:null,tangentialPressure:null,tiltX:null,tiltY:null,twist:null,pointerType:null,isPrimary:null}),Kt={mouseEnter:{registrationName:"onMouseEnter",dependencies:["mouseout","mouseover"]},mouseLeave:{registrationName:"onMouseLeave",dependencies:["mouseout","mouseover"]},pointerEnter:{registrationName:"onPointerEnter",dependencies:["pointerout","pointerover"]},pointerLeave:{registrationName:"onPointerLeave",dependencies:["pointerout","pointerover"]}},Qt={eventTypes:Kt,extractEvents:function(e,t,n,r){var i="mouseover"===e||"pointerover"===e,a="mouseout"===e||"pointerout"===e;if(i&&(n.relatedTarget||n.fromElement)||!a&&!i)return null;if(i=r.window===r?r:(i=r.ownerDocument)?i.defaultView||i.parentWindow:window,a?(a=t,t=(t=n.relatedTarget||n.toElement)?R(t):null):a=null,a===t)return null;var o=void 0,u=void 0,c=void 0,l=void 0;"mouseout"===e||"mouseover"===e?(o=$t,u=Kt.mouseLeave,c=Kt.mouseEnter,l="mouse"):"pointerout"!==e&&"pointerover"!==e||(o=Xt,u=Kt.pointerLeave,c=Kt.pointerEnter,l="pointer");var s=null==a?i:z(a);if(i=null==t?i:z(t),(e=o.getPooled(u,a,n,r)).type=l+"leave",e.target=s,e.relatedTarget=i,(n=o.getPooled(c,t,n,r)).type=l+"enter",n.target=i,n.relatedTarget=s,r=t,a&&r)e:{for(i=r,l=0,o=t=a;o;o=U(o))l++;for(o=0,c=i;c;c=U(c))o++;for(;0<l-o;)t=U(t),l--;for(;0<o-l;)i=U(i),o--;for(;l--;){if(t===i||t===i.alternate)break e;t=U(t),i=U(i)}t=null}else t=null;for(i=t,t=[];a&&a!==i&&(null===(l=a.alternate)||l!==i);)t.push(a),a=U(a);for(a=[];r&&r!==i&&(null===(l=r.alternate)||l!==i);)a.push(r),r=U(r);for(r=0;r<t.length;r++)W(t[r],"bubbled",e);for(r=a.length;0<r--;)W(a[r],"captured",n);return[e,n]}},Jt=Object.prototype.hasOwnProperty;function Zt(e,t){return e===t?0!==e||0!==t||1/e===1/t:e!==e&&t!==t}function en(e,t){if(Zt(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++)if(!Jt.call(t,n[r])||!Zt(e[n[r]],t[n[r]]))return!1;return!0}function tn(e){var t=e;if(e.alternate)for(;t.return;)t=t.return;else{if(0!==(2&t.effectTag))return 1;for(;t.return;)if(0!==(2&(t=t.return).effectTag))return 1}return 5===t.tag?2:3}function nn(e){2!==tn(e)&&o("188")}function rn(e){if(!(e=function(e){var t=e.alternate;if(!t)return 3===(t=tn(e))&&o("188"),1===t?null:e;for(var n=e,r=t;;){var i=n.return,a=i?i.alternate:null;if(!i||!a)break;if(i.child===a.child){for(var u=i.child;u;){if(u===n)return nn(i),e;if(u===r)return nn(i),t;u=u.sibling}o("188")}if(n.return!==r.return)n=i,r=a;else{u=!1;for(var c=i.child;c;){if(c===n){u=!0,n=i,r=a;break}if(c===r){u=!0,r=i,n=a;break}c=c.sibling}if(!u){for(c=a.child;c;){if(c===n){u=!0,n=a,r=i;break}if(c===r){u=!0,r=a,n=i;break}c=c.sibling}u||o("189")}}n.alternate!==r&&o("190")}return 5!==n.tag&&o("188"),n.stateNode.current===n?e:t}(e)))return null;for(var t=e;;){if(7===t.tag||8===t.tag)return t;if(t.child)t.child.return=t,t=t.child;else{if(t===e)break;for(;!t.sibling;){if(!t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}}return null}var an=se.extend({animationName:null,elapsedTime:null,pseudoElement:null}),on=se.extend({clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),un=Bt.extend({relatedTarget:null});function cn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}var ln={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},sn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},fn=Bt.extend({key:function(e){if(e.key){var t=ln[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=cn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?sn[e.keyCode]||"Unidentified":""},location:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,repeat:null,locale:null,getModifierState:Vt,charCode:function(e){return"keypress"===e.type?cn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?cn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),hn=$t.extend({dataTransfer:null}),dn=Bt.extend({touches:null,targetTouches:null,changedTouches:null,altKey:null,metaKey:null,ctrlKey:null,shiftKey:null,getModifierState:Vt}),pn=se.extend({propertyName:null,elapsedTime:null,pseudoElement:null}),yn=$t.extend({deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:null,deltaMode:null}),gn=[["abort","abort"],[Z,"animationEnd"],[ee,"animationIteration"],[te,"animationStart"],["canplay","canPlay"],["canplaythrough","canPlayThrough"],["drag","drag"],["dragenter","dragEnter"],["dragexit","dragExit"],["dragleave","dragLeave"],["dragover","dragOver"],["durationchange","durationChange"],["emptied","emptied"],["encrypted","encrypted"],["ended","ended"],["error","error"],["gotpointercapture","gotPointerCapture"],["load","load"],["loadeddata","loadedData"],["loadedmetadata","loadedMetadata"],["loadstart","loadStart"],["lostpointercapture","lostPointerCapture"],["mousemove","mouseMove"],["mouseout","mouseOut"],["mouseover","mouseOver"],["playing","playing"],["pointermove","pointerMove"],["pointerout","pointerOut"],["pointerover","pointerOver"],["progress","progress"],["scroll","scroll"],["seeking","seeking"],["stalled","stalled"],["suspend","suspend"],["timeupdate","timeUpdate"],["toggle","toggle"],["touchmove","touchMove"],[ne,"transitionEnd"],["waiting","waiting"],["wheel","wheel"]],vn={},mn={};function bn(e,t){var n=e[0],r="on"+((e=e[1])[0].toUpperCase()+e.slice(1));t={phasedRegistrationNames:{bubbled:r,captured:r+"Capture"},dependencies:[n],isInteractive:t},vn[e]=t,mn[n]=t}[["blur","blur"],["cancel","cancel"],["click","click"],["close","close"],["contextmenu","contextMenu"],["copy","copy"],["cut","cut"],["auxclick","auxClick"],["dblclick","doubleClick"],["dragend","dragEnd"],["dragstart","dragStart"],["drop","drop"],["focus","focus"],["input","input"],["invalid","invalid"],["keydown","keyDown"],["keypress","keyPress"],["keyup","keyUp"],["mousedown","mouseDown"],["mouseup","mouseUp"],["paste","paste"],["pause","pause"],["play","play"],["pointercancel","pointerCancel"],["pointerdown","pointerDown"],["pointerup","pointerUp"],["ratechange","rateChange"],["reset","reset"],["seeked","seeked"],["submit","submit"],["touchcancel","touchCancel"],["touchend","touchEnd"],["touchstart","touchStart"],["volumechange","volumeChange"]].forEach(function(e){bn(e,!0)}),gn.forEach(function(e){bn(e,!1)});var _n={eventTypes:vn,isInteractiveTopLevelEventType:function(e){return void 0!==(e=mn[e])&&!0===e.isInteractive},extractEvents:function(e,t,n,r){var i=mn[e];if(!i)return null;switch(e){case"keypress":if(0===cn(n))return null;case"keydown":case"keyup":e=fn;break;case"blur":case"focus":e=un;break;case"click":if(2===n.button)return null;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":e=$t;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":e=hn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":e=dn;break;case Z:case ee:case te:e=an;break;case ne:e=pn;break;case"scroll":e=Bt;break;case"wheel":e=yn;break;case"copy":case"cut":case"paste":e=on;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":e=Xt;break;default:e=se}return G(t=e.getPooled(i,t,n,r)),t}},xn=_n.isInteractiveTopLevelEventType,wn=[];function kn(e){var t=e.targetInst,n=t;do{if(!n){e.ancestors.push(n);break}var r;for(r=n;r.return;)r=r.return;if(!(r=5!==r.tag?null:r.stateNode.containerInfo))break;e.ancestors.push(n),n=R(r)}while(n);for(n=0;n<e.ancestors.length;n++){t=e.ancestors[n];var i=Ue(e.nativeEvent);r=e.topLevelType;for(var a=e.nativeEvent,o=null,u=0;u<v.length;u++){var c=v[u];c&&(c=c.extractEvents(r,t,a,i))&&(o=S(o,c))}j(o,!1)}}var En=!0;function Sn(e,t){if(!t)return null;var n=(xn(e)?Mn:Cn).bind(null,e);t.addEventListener(e,n,!1)}function On(e,t){if(!t)return null;var n=(xn(e)?Mn:Cn).bind(null,e);t.addEventListener(e,n,!0)}function Mn(e,t){Ie(Cn,e,t)}function Cn(e,t){if(En){var n=Ue(t);if(null===(n=R(n))||"number"!==typeof n.tag||2===tn(n)||(n=null),wn.length){var r=wn.pop();r.topLevelType=e,r.nativeEvent=t,r.targetInst=n,e=r}else e={topLevelType:e,nativeEvent:t,targetInst:n,ancestors:[]};try{Le(kn,e)}finally{e.topLevelType=null,e.nativeEvent=null,e.targetInst=null,e.ancestors.length=0,10>wn.length&&wn.push(e)}}}var Tn={},Pn=0,An="_reactListenersID"+(""+Math.random()).slice(2);function Nn(e){return Object.prototype.hasOwnProperty.call(e,An)||(e[An]=Pn++,Tn[e[An]]={}),Tn[e[An]]}function jn(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Fn(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function In(e,t){var n,r=Fn(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=Fn(r)}}function Dn(){for(var e=window,t=jn();t instanceof e.HTMLIFrameElement;){try{e=t.contentDocument.defaultView}catch(n){break}t=jn(e.document)}return t}function Rn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}var Ln=Y&&"documentMode"in document&&11>=document.documentMode,zn={select:{phasedRegistrationNames:{bubbled:"onSelect",captured:"onSelectCapture"},dependencies:"blur contextmenu dragend focus keydown keyup mousedown mouseup selectionchange".split(" ")}},Bn=null,Un=null,Hn=null,Vn=!1;function Wn(e,t){var n=t.window===t?t.document:9===t.nodeType?t:t.ownerDocument;return Vn||null==Bn||Bn!==jn(n)?null:("selectionStart"in(n=Bn)&&Rn(n)?n={start:n.selectionStart,end:n.selectionEnd}:n={anchorNode:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset},Hn&&en(Hn,n)?null:(Hn=n,(e=se.getPooled(zn.select,Un,e,t)).type="select",e.target=Bn,G(e),e))}var qn={eventTypes:zn,extractEvents:function(e,t,n,r){var i,a=r.window===r?r.document:9===r.nodeType?r:r.ownerDocument;if(!(i=!a)){e:{a=Nn(a),i=_.onSelect;for(var o=0;o<i.length;o++){var u=i[o];if(!a.hasOwnProperty(u)||!a[u]){a=!1;break e}}a=!0}i=!a}if(i)return null;switch(a=t?z(t):window,e){case"focus":(Be(a)||"true"===a.contentEditable)&&(Bn=a,Un=t,Hn=null);break;case"blur":Hn=Un=Bn=null;break;case"mousedown":Vn=!0;break;case"contextmenu":case"mouseup":case"dragend":return Vn=!1,Wn(n,r);case"selectionchange":if(Ln)break;case"keydown":case"keyup":return Wn(n,r)}return null}};function Gn(e,t){return e=i({children:void 0},t),(t=function(e){var t="";return r.Children.forEach(e,function(e){null!=e&&(t+=e)}),t}(t.children))&&(e.children=t),e}function Yn(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+mt(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function $n(e,t){return null!=t.dangerouslySetInnerHTML&&o("91"),i({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Xn(e,t){var n=t.value;null==n&&(n=t.defaultValue,null!=(t=t.children)&&(null!=n&&o("92"),Array.isArray(t)&&(1>=t.length||o("93"),t=t[0]),n=t),null==n&&(n="")),e._wrapperState={initialValue:mt(n)}}function Kn(e,t){var n=mt(t.value),r=mt(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function Qn(e){var t=e.textContent;t===e._wrapperState.initialValue&&(e.value=t)}A.injectEventPluginOrder("ResponderEventPlugin SimpleEventPlugin EnterLeaveEventPlugin ChangeEventPlugin SelectEventPlugin BeforeInputEventPlugin".split(" ")),x=B,w=L,k=z,A.injectEventPluginsByName({SimpleEventPlugin:_n,EnterLeaveEventPlugin:Qt,ChangeEventPlugin:zt,SelectEventPlugin:qn,BeforeInputEventPlugin:Me});var Jn={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg"};function Zn(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function er(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?Zn(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var tr,nr=void 0,rr=(tr=function(e,t){if(e.namespaceURI!==Jn.svg||"innerHTML"in e)e.innerHTML=t;else{for((nr=nr||document.createElement("div")).innerHTML="<svg>"+t+"</svg>",t=nr.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction(function(){return tr(e,t)})}:tr);function ir(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var ar={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},or=["Webkit","ms","Moz","O"];function ur(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=n,a=t[n];i=null==a||"boolean"===typeof a||""===a?"":r||"number"!==typeof a||0===a||ar.hasOwnProperty(i)&&ar[i]?(""+a).trim():a+"px","float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(ar).forEach(function(e){or.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),ar[t]=ar[e]})});var cr=i({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function lr(e,t){t&&(cr[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML)&&o("137",e,""),null!=t.dangerouslySetInnerHTML&&(null!=t.children&&o("60"),"object"===typeof t.dangerouslySetInnerHTML&&"__html"in t.dangerouslySetInnerHTML||o("61")),null!=t.style&&"object"!==typeof t.style&&o("62",""))}function sr(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}function fr(e,t){var n=Nn(e=9===e.nodeType||11===e.nodeType?e:e.ownerDocument);t=_[t];for(var r=0;r<t.length;r++){var i=t[r];if(!n.hasOwnProperty(i)||!n[i]){switch(i){case"scroll":On("scroll",e);break;case"focus":case"blur":On("focus",e),On("blur",e),n.blur=!0,n.focus=!0;break;case"cancel":case"close":He(i)&&On(i,e);break;case"invalid":case"submit":case"reset":break;default:-1===re.indexOf(i)&&Sn(i,e)}n[i]=!0}}}function hr(){}var dr=null,pr=null;function yr(e,t){switch(e){case"button":case"input":case"select":case"textarea":return!!t.autoFocus}return!1}function gr(e,t){return"textarea"===e||"option"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}function vr(e){for(e=e.nextSibling;e&&1!==e.nodeType&&3!==e.nodeType;)e=e.nextSibling;return e}function mr(e){for(e=e.firstChild;e&&1!==e.nodeType&&3!==e.nodeType;)e=e.nextSibling;return e}new Set;var br=[],_r=-1;function xr(e){0>_r||(e.current=br[_r],br[_r]=null,_r--)}function wr(e,t){br[++_r]=e.current,e.current=t}var kr={},Er={current:kr},Sr={current:!1},Or=kr;function Mr(e,t){var n=e.type.contextTypes;if(!n)return kr;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,a={};for(i in n)a[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function Cr(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Tr(e){xr(Sr),xr(Er)}function Pr(e){xr(Sr),xr(Er)}function Ar(e,t,n){Er.current!==kr&&o("168"),wr(Er,t),wr(Sr,n)}function Nr(e,t,n){var r=e.stateNode;if(e=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var a in r=r.getChildContext())a in e||o("108",ut(t)||"Unknown",a);return i({},n,r)}function jr(e){var t=e.stateNode;return t=t&&t.__reactInternalMemoizedMergedChildContext||kr,Or=Er.current,wr(Er,t),wr(Sr,Sr.current),!0}function Fr(e,t,n){var r=e.stateNode;r||o("169"),n?(t=Nr(e,t,Or),r.__reactInternalMemoizedMergedChildContext=t,xr(Sr),xr(Er),wr(Er,t)):xr(Sr),wr(Sr,n)}var Ir=null,Dr=null;function Rr(e){return function(t){try{return e(t)}catch(n){}}}function Lr(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=null,this.index=0,this.ref=null,this.pendingProps=t,this.firstContextDependency=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.effectTag=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childExpirationTime=this.expirationTime=0,this.alternate=null}function zr(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Br(e,t,n){var r=e.alternate;return null===r?((r=new Lr(e.tag,t,e.key,e.mode)).type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.effectTag=0,r.nextEffect=null,r.firstEffect=null,r.lastEffect=null),r.childExpirationTime=e.childExpirationTime,r.expirationTime=t!==e.pendingProps?n:e.expirationTime,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,r.firstContextDependency=e.firstContextDependency,r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function Ur(e,t,n){var r=e.type,i=e.key;e=e.props;var a=void 0;if("function"===typeof r)a=zr(r)?2:4;else if("string"===typeof r)a=7;else e:switch(r){case Qe:return Hr(e.children,t,n,i);case nt:a=10,t|=3;break;case Je:a=10,t|=2;break;case Ze:return(r=new Lr(15,e,i,4|t)).type=Ze,r.expirationTime=n,r;case it:a=16;break;default:if("object"===typeof r&&null!==r)switch(r.$$typeof){case et:a=12;break e;case tt:a=11;break e;case rt:a=13;break e;default:if("function"===typeof r.then){a=4;break e}}o("130",null==r?r:typeof r,"")}return(t=new Lr(a,e,i,t)).type=r,t.expirationTime=n,t}function Hr(e,t,n,r){return(e=new Lr(9,e,r,t)).expirationTime=n,e}function Vr(e,t,n){return(e=new Lr(8,e,null,t)).expirationTime=n,e}function Wr(e,t,n){return(t=new Lr(6,null!==e.children?e.children:[],e.key,t)).expirationTime=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function qr(e,t){e.didError=!1;var n=e.earliestPendingTime;0===n?e.earliestPendingTime=e.latestPendingTime=t:n>t?e.earliestPendingTime=t:e.latestPendingTime<t&&(e.latestPendingTime=t),Gr(t,e)}function Gr(e,t){var n=t.earliestSuspendedTime,r=t.latestSuspendedTime,i=t.earliestPendingTime,a=t.latestPingedTime;0===(i=0!==i?i:a)&&(0===e||r>e)&&(i=r),0!==(e=i)&&0!==n&&n<e&&(e=n),t.nextExpirationTimeToWorkOn=i,t.expirationTime=e}var Yr=!1;function $r(e){return{baseState:e,firstUpdate:null,lastUpdate:null,firstCapturedUpdate:null,lastCapturedUpdate:null,firstEffect:null,lastEffect:null,firstCapturedEffect:null,lastCapturedEffect:null}}function Xr(e){return{baseState:e.baseState,firstUpdate:e.firstUpdate,lastUpdate:e.lastUpdate,firstCapturedUpdate:null,lastCapturedUpdate:null,firstEffect:null,lastEffect:null,firstCapturedEffect:null,lastCapturedEffect:null}}function Kr(e){return{expirationTime:e,tag:0,payload:null,callback:null,next:null,nextEffect:null}}function Qr(e,t){null===e.lastUpdate?e.firstUpdate=e.lastUpdate=t:(e.lastUpdate.next=t,e.lastUpdate=t)}function Jr(e,t){var n=e.alternate;if(null===n){var r=e.updateQueue,i=null;null===r&&(r=e.updateQueue=$r(e.memoizedState))}else r=e.updateQueue,i=n.updateQueue,null===r?null===i?(r=e.updateQueue=$r(e.memoizedState),i=n.updateQueue=$r(n.memoizedState)):r=e.updateQueue=Xr(i):null===i&&(i=n.updateQueue=Xr(r));null===i||r===i?Qr(r,t):null===r.lastUpdate||null===i.lastUpdate?(Qr(r,t),Qr(i,t)):(Qr(r,t),i.lastUpdate=t)}function Zr(e,t){var n=e.updateQueue;null===(n=null===n?e.updateQueue=$r(e.memoizedState):ei(e,n)).lastCapturedUpdate?n.firstCapturedUpdate=n.lastCapturedUpdate=t:(n.lastCapturedUpdate.next=t,n.lastCapturedUpdate=t)}function ei(e,t){var n=e.alternate;return null!==n&&t===n.updateQueue&&(t=e.updateQueue=Xr(t)),t}function ti(e,t,n,r,a,o){switch(n.tag){case 1:return"function"===typeof(e=n.payload)?e.call(o,r,a):e;case 3:e.effectTag=-1025&e.effectTag|64;case 0:if(null===(a="function"===typeof(e=n.payload)?e.call(o,r,a):e)||void 0===a)break;return i({},r,a);case 2:Yr=!0}return r}function ni(e,t,n,r,i){Yr=!1;for(var a=(t=ei(e,t)).baseState,o=null,u=0,c=t.firstUpdate,l=a;null!==c;){var s=c.expirationTime;s>i?(null===o&&(o=c,a=l),(0===u||u>s)&&(u=s)):(l=ti(e,0,c,l,n,r),null!==c.callback&&(e.effectTag|=32,c.nextEffect=null,null===t.lastEffect?t.firstEffect=t.lastEffect=c:(t.lastEffect.nextEffect=c,t.lastEffect=c))),c=c.next}for(s=null,c=t.firstCapturedUpdate;null!==c;){var f=c.expirationTime;f>i?(null===s&&(s=c,null===o&&(a=l)),(0===u||u>f)&&(u=f)):(l=ti(e,0,c,l,n,r),null!==c.callback&&(e.effectTag|=32,c.nextEffect=null,null===t.lastCapturedEffect?t.firstCapturedEffect=t.lastCapturedEffect=c:(t.lastCapturedEffect.nextEffect=c,t.lastCapturedEffect=c))),c=c.next}null===o&&(t.lastUpdate=null),null===s?t.lastCapturedUpdate=null:e.effectTag|=32,null===o&&null===s&&(a=l),t.baseState=a,t.firstUpdate=o,t.firstCapturedUpdate=s,e.expirationTime=u,e.memoizedState=l}function ri(e,t,n){null!==t.firstCapturedUpdate&&(null!==t.lastUpdate&&(t.lastUpdate.next=t.firstCapturedUpdate,t.lastUpdate=t.lastCapturedUpdate),t.firstCapturedUpdate=t.lastCapturedUpdate=null),ii(t.firstEffect,n),t.firstEffect=t.lastEffect=null,ii(t.firstCapturedEffect,n),t.firstCapturedEffect=t.lastCapturedEffect=null}function ii(e,t){for(;null!==e;){var n=e.callback;if(null!==n){e.callback=null;var r=t;"function"!==typeof n&&o("191",n),n.call(r)}e=e.nextEffect}}function ai(e,t){return{value:e,source:t,stack:ct(t)}}var oi={current:null},ui=null,ci=null,li=null;function si(e,t){var n=e.type._context;wr(oi,n._currentValue),n._currentValue=t}function fi(e){var t=oi.current;xr(oi),e.type._context._currentValue=t}function hi(e){ui=e,li=ci=null,e.firstContextDependency=null}function di(e,t){return li!==e&&!1!==t&&0!==t&&("number"===typeof t&&1073741823!==t||(li=e,t=1073741823),t={context:e,observedBits:t,next:null},null===ci?(null===ui&&o("277"),ui.firstContextDependency=ci=t):ci=ci.next=t),e._currentValue}var pi={},yi={current:pi},gi={current:pi},vi={current:pi};function mi(e){return e===pi&&o("174"),e}function bi(e,t){wr(vi,t),wr(gi,e),wr(yi,pi);var n=t.nodeType;switch(n){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:er(null,"");break;default:t=er(t=(n=8===n?t.parentNode:t).namespaceURI||null,n=n.tagName)}xr(yi),wr(yi,t)}function _i(e){xr(yi),xr(gi),xr(vi)}function xi(e){mi(vi.current);var t=mi(yi.current),n=er(t,e.type);t!==n&&(wr(gi,e),wr(yi,n))}function wi(e){gi.current===e&&(xr(yi),xr(gi))}var ki=(new r.Component).refs;function Ei(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:i({},t,n),e.memoizedState=n,null!==(r=e.updateQueue)&&0===e.expirationTime&&(r.baseState=n)}var Si={isMounted:function(e){return!!(e=e._reactInternalFiber)&&2===tn(e)},enqueueSetState:function(e,t,n){e=e._reactInternalFiber;var r=oo(),i=Kr(r=Na(r,e));i.payload=t,void 0!==n&&null!==n&&(i.callback=n),Jr(e,i),ja(e,r)},enqueueReplaceState:function(e,t,n){e=e._reactInternalFiber;var r=oo(),i=Kr(r=Na(r,e));i.tag=1,i.payload=t,void 0!==n&&null!==n&&(i.callback=n),Jr(e,i),ja(e,r)},enqueueForceUpdate:function(e,t){e=e._reactInternalFiber;var n=oo(),r=Kr(n=Na(n,e));r.tag=2,void 0!==t&&null!==t&&(r.callback=t),Jr(e,r),ja(e,n)}};function Oi(e,t,n,r,i,a,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,a,o):!t.prototype||!t.prototype.isPureReactComponent||(!en(n,r)||!en(i,a))}function Mi(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&Si.enqueueReplaceState(t,t.state,null)}function Ci(e,t,n,r){var i=e.stateNode,a=Cr(t)?Or:Er.current;i.props=n,i.state=e.memoizedState,i.refs=ki,i.context=Mr(e,a),null!==(a=e.updateQueue)&&(ni(e,a,n,i,r),i.state=e.memoizedState),"function"===typeof(a=t.getDerivedStateFromProps)&&(Ei(e,t,a,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&Si.enqueueReplaceState(i,i.state,null),null!==(a=e.updateQueue)&&(ni(e,a,n,i,r),i.state=e.memoizedState)),"function"===typeof i.componentDidMount&&(e.effectTag|=4)}var Ti=Array.isArray;function Pi(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){n=n._owner;var r=void 0;n&&(2!==n.tag&&3!==n.tag&&o("110"),r=n.stateNode),r||o("147",e);var i=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===i?t.ref:((t=function(e){var t=r.refs;t===ki&&(t=r.refs={}),null===e?delete t[i]:t[i]=e})._stringRef=i,t)}"string"!==typeof e&&o("284"),n._owner||o("254",e)}return e}function Ai(e,t){"textarea"!==e.type&&o("31","[object Object]"===Object.prototype.toString.call(t)?"object with keys {"+Object.keys(t).join(", ")+"}":t,"")}function Ni(e){function t(t,n){if(e){var r=t.lastEffect;null!==r?(r.nextEffect=n,t.lastEffect=n):t.firstEffect=t.lastEffect=n,n.nextEffect=null,n.effectTag=8}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t,n){return(e=Br(e,t,n)).index=0,e.sibling=null,e}function a(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.effectTag=2,n):r:(t.effectTag=2,n):n}function u(t){return e&&null===t.alternate&&(t.effectTag=2),t}function c(e,t,n,r){return null===t||8!==t.tag?((t=Vr(n,e.mode,r)).return=e,t):((t=i(t,n,r)).return=e,t)}function l(e,t,n,r){return null!==t&&t.type===n.type?((r=i(t,n.props,r)).ref=Pi(e,t,n),r.return=e,r):((r=Ur(n,e.mode,r)).ref=Pi(e,t,n),r.return=e,r)}function s(e,t,n,r){return null===t||6!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Wr(n,e.mode,r)).return=e,t):((t=i(t,n.children||[],r)).return=e,t)}function f(e,t,n,r,a){return null===t||9!==t.tag?((t=Hr(n,e.mode,r,a)).return=e,t):((t=i(t,n,r)).return=e,t)}function h(e,t,n){if("string"===typeof t||"number"===typeof t)return(t=Vr(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case Xe:return(n=Ur(t,e.mode,n)).ref=Pi(e,null,t),n.return=e,n;case Ke:return(t=Wr(t,e.mode,n)).return=e,t}if(Ti(t)||ot(t))return(t=Hr(t,e.mode,n,null)).return=e,t;Ai(e,t)}return null}function d(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n||"number"===typeof n)return null!==i?null:c(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case Xe:return n.key===i?n.type===Qe?f(e,t,n.props.children,r,i):l(e,t,n,r):null;case Ke:return n.key===i?s(e,t,n,r):null}if(Ti(n)||ot(n))return null!==i?null:f(e,t,n,r,null);Ai(e,n)}return null}function p(e,t,n,r,i){if("string"===typeof r||"number"===typeof r)return c(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case Xe:return e=e.get(null===r.key?n:r.key)||null,r.type===Qe?f(t,e,r.props.children,i,r.key):l(t,e,r,i);case Ke:return s(t,e=e.get(null===r.key?n:r.key)||null,r,i)}if(Ti(r)||ot(r))return f(t,e=e.get(n)||null,r,i,null);Ai(t,r)}return null}function y(i,o,u,c){for(var l=null,s=null,f=o,y=o=0,g=null;null!==f&&y<u.length;y++){f.index>y?(g=f,f=null):g=f.sibling;var v=d(i,f,u[y],c);if(null===v){null===f&&(f=g);break}e&&f&&null===v.alternate&&t(i,f),o=a(v,o,y),null===s?l=v:s.sibling=v,s=v,f=g}if(y===u.length)return n(i,f),l;if(null===f){for(;y<u.length;y++)(f=h(i,u[y],c))&&(o=a(f,o,y),null===s?l=f:s.sibling=f,s=f);return l}for(f=r(i,f);y<u.length;y++)(g=p(f,i,y,u[y],c))&&(e&&null!==g.alternate&&f.delete(null===g.key?y:g.key),o=a(g,o,y),null===s?l=g:s.sibling=g,s=g);return e&&f.forEach(function(e){return t(i,e)}),l}function g(i,u,c,l){var s=ot(c);"function"!==typeof s&&o("150"),null==(c=s.call(c))&&o("151");for(var f=s=null,y=u,g=u=0,v=null,m=c.next();null!==y&&!m.done;g++,m=c.next()){y.index>g?(v=y,y=null):v=y.sibling;var b=d(i,y,m.value,l);if(null===b){y||(y=v);break}e&&y&&null===b.alternate&&t(i,y),u=a(b,u,g),null===f?s=b:f.sibling=b,f=b,y=v}if(m.done)return n(i,y),s;if(null===y){for(;!m.done;g++,m=c.next())null!==(m=h(i,m.value,l))&&(u=a(m,u,g),null===f?s=m:f.sibling=m,f=m);return s}for(y=r(i,y);!m.done;g++,m=c.next())null!==(m=p(y,i,g,m.value,l))&&(e&&null!==m.alternate&&y.delete(null===m.key?g:m.key),u=a(m,u,g),null===f?s=m:f.sibling=m,f=m);return e&&y.forEach(function(e){return t(i,e)}),s}return function(e,r,a,c){var l="object"===typeof a&&null!==a&&a.type===Qe&&null===a.key;l&&(a=a.props.children);var s="object"===typeof a&&null!==a;if(s)switch(a.$$typeof){case Xe:e:{for(s=a.key,l=r;null!==l;){if(l.key===s){if(9===l.tag?a.type===Qe:l.type===a.type){n(e,l.sibling),(r=i(l,a.type===Qe?a.props.children:a.props,c)).ref=Pi(e,l,a),r.return=e,e=r;break e}n(e,l);break}t(e,l),l=l.sibling}a.type===Qe?((r=Hr(a.props.children,e.mode,c,a.key)).return=e,e=r):((c=Ur(a,e.mode,c)).ref=Pi(e,r,a),c.return=e,e=c)}return u(e);case Ke:e:{for(l=a.key;null!==r;){if(r.key===l){if(6===r.tag&&r.stateNode.containerInfo===a.containerInfo&&r.stateNode.implementation===a.implementation){n(e,r.sibling),(r=i(r,a.children||[],c)).return=e,e=r;break e}n(e,r);break}t(e,r),r=r.sibling}(r=Wr(a,e.mode,c)).return=e,e=r}return u(e)}if("string"===typeof a||"number"===typeof a)return a=""+a,null!==r&&8===r.tag?(n(e,r.sibling),(r=i(r,a,c)).return=e,e=r):(n(e,r),(r=Vr(a,e.mode,c)).return=e,e=r),u(e);if(Ti(a))return y(e,r,a,c);if(ot(a))return g(e,r,a,c);if(s&&Ai(e,a),"undefined"===typeof a&&!l)switch(e.tag){case 2:case 3:case 0:o("152",(c=e.type).displayName||c.name||"Component")}return n(e,r)}}var ji=Ni(!0),Fi=Ni(!1),Ii=null,Di=null,Ri=!1;function Li(e,t){var n=new Lr(7,null,null,0);n.type="DELETED",n.stateNode=t,n.return=e,n.effectTag=8,null!==e.lastEffect?(e.lastEffect.nextEffect=n,e.lastEffect=n):e.firstEffect=e.lastEffect=n}function zi(e,t){switch(e.tag){case 7:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,!0);case 8:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,!0);default:return!1}}function Bi(e){if(Ri){var t=Di;if(t){var n=t;if(!zi(e,t)){if(!(t=vr(n))||!zi(e,t))return e.effectTag|=2,Ri=!1,void(Ii=e);Li(Ii,n)}Ii=e,Di=mr(t)}else e.effectTag|=2,Ri=!1,Ii=e}}function Ui(e){for(e=e.return;null!==e&&7!==e.tag&&5!==e.tag;)e=e.return;Ii=e}function Hi(e){if(e!==Ii)return!1;if(!Ri)return Ui(e),Ri=!0,!1;var t=e.type;if(7!==e.tag||"head"!==t&&"body"!==t&&!gr(t,e.memoizedProps))for(t=Di;t;)Li(e,t),t=vr(t);return Ui(e),Di=Ii?vr(e.stateNode):null,!0}function Vi(){Di=Ii=null,Ri=!1}var Wi=Ge.ReactCurrentOwner;function qi(e,t,n,r){t.child=null===e?Fi(t,null,n,r):ji(t,e.child,n,r)}function Gi(e,t,n,r,i){n=n.render;var a=t.ref;return Sr.current||t.memoizedProps!==r||a!==(null!==e?e.ref:null)?(qi(e,t,n=n(r,a),i),t.memoizedProps=r,t.child):Zi(e,t,i)}function Yi(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.effectTag|=128)}function $i(e,t,n,r,i){var a=Cr(n)?Or:Er.current;return a=Mr(t,a),hi(t),n=n(r,a),t.effectTag|=1,qi(e,t,n,i),t.memoizedProps=r,t.child}function Xi(e,t,n,r,i){if(Cr(n)){var a=!0;jr(t)}else a=!1;if(hi(t),null===e)if(null===t.stateNode){var o=Cr(n)?Or:Er.current,u=n.contextTypes,c=null!==u&&void 0!==u,l=new n(r,u=c?Mr(t,o):kr);t.memoizedState=null!==l.state&&void 0!==l.state?l.state:null,l.updater=Si,t.stateNode=l,l._reactInternalFiber=t,c&&((c=t.stateNode).__reactInternalMemoizedUnmaskedChildContext=o,c.__reactInternalMemoizedMaskedChildContext=u),Ci(t,n,r,i),r=!0}else{o=t.stateNode,u=t.memoizedProps,o.props=u;var s=o.context;c=Mr(t,c=Cr(n)?Or:Er.current);var f=n.getDerivedStateFromProps;(l="function"===typeof f||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(u!==r||s!==c)&&Mi(t,o,r,c),Yr=!1;var h=t.memoizedState;s=o.state=h;var d=t.updateQueue;null!==d&&(ni(t,d,r,o,i),s=t.memoizedState),u!==r||h!==s||Sr.current||Yr?("function"===typeof f&&(Ei(t,n,f,r),s=t.memoizedState),(u=Yr||Oi(t,n,u,r,h,s,c))?(l||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(t.effectTag|=4)):("function"===typeof o.componentDidMount&&(t.effectTag|=4),t.memoizedProps=r,t.memoizedState=s),o.props=r,o.state=s,o.context=c,r=u):("function"===typeof o.componentDidMount&&(t.effectTag|=4),r=!1)}else o=t.stateNode,u=t.memoizedProps,o.props=u,s=o.context,c=Mr(t,c=Cr(n)?Or:Er.current),(l="function"===typeof(f=n.getDerivedStateFromProps)||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(u!==r||s!==c)&&Mi(t,o,r,c),Yr=!1,s=t.memoizedState,h=o.state=s,null!==(d=t.updateQueue)&&(ni(t,d,r,o,i),h=t.memoizedState),u!==r||s!==h||Sr.current||Yr?("function"===typeof f&&(Ei(t,n,f,r),h=t.memoizedState),(f=Yr||Oi(t,n,u,r,s,h,c))?(l||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(r,h,c),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,h,c)),"function"===typeof o.componentDidUpdate&&(t.effectTag|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(t.effectTag|=256)):("function"!==typeof o.componentDidUpdate||u===e.memoizedProps&&s===e.memoizedState||(t.effectTag|=4),"function"!==typeof o.getSnapshotBeforeUpdate||u===e.memoizedProps&&s===e.memoizedState||(t.effectTag|=256),t.memoizedProps=r,t.memoizedState=h),o.props=r,o.state=h,o.context=c,r=f):("function"!==typeof o.componentDidUpdate||u===e.memoizedProps&&s===e.memoizedState||(t.effectTag|=4),"function"!==typeof o.getSnapshotBeforeUpdate||u===e.memoizedProps&&s===e.memoizedState||(t.effectTag|=256),r=!1);return Ki(e,t,n,r,a,i)}function Ki(e,t,n,r,i,a){Yi(e,t);var o=0!==(64&t.effectTag);if(!r&&!o)return i&&Fr(t,n,!1),Zi(e,t,a);r=t.stateNode,Wi.current=t;var u=o?null:r.render();return t.effectTag|=1,null!==e&&o&&(qi(e,t,null,a),t.child=null),qi(e,t,u,a),t.memoizedState=r.state,t.memoizedProps=r.props,i&&Fr(t,n,!0),t.child}function Qi(e){var t=e.stateNode;t.pendingContext?Ar(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Ar(0,t.context,!1),bi(e,t.containerInfo)}function Ji(e,t){if(e&&e.defaultProps)for(var n in t=i({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}function Zi(e,t,n){null!==e&&(t.firstContextDependency=e.firstContextDependency);var r=t.childExpirationTime;if(0===r||r>n)return null;if(null!==e&&t.child!==e.child&&o("153"),null!==t.child){for(n=Br(e=t.child,e.pendingProps,e.expirationTime),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Br(e,e.pendingProps,e.expirationTime)).return=t;n.sibling=null}return t.child}function ea(e,t,n){var r=t.expirationTime;if(!Sr.current&&(0===r||r>n)){switch(t.tag){case 5:Qi(t),Vi();break;case 7:xi(t);break;case 2:Cr(t.type)&&jr(t);break;case 3:Cr(t.type._reactResult)&&jr(t);break;case 6:bi(t,t.stateNode.containerInfo);break;case 12:si(t,t.memoizedProps.value)}return Zi(e,t,n)}switch(t.expirationTime=0,t.tag){case 4:return function(e,t,n,r){null!==e&&o("155");var i=t.pendingProps;if("object"===typeof n&&null!==n&&"function"===typeof n.then){var a=n=function(e){switch(e._reactStatus){case 1:return e._reactResult;case 2:throw e._reactResult;case 0:throw e;default:throw e._reactStatus=0,e.then(function(t){if(0===e._reactStatus){if(e._reactStatus=1,"object"===typeof t&&null!==t){var n=t.default;t=void 0!==n&&null!==n?n:t}e._reactResult=t}},function(t){0===e._reactStatus&&(e._reactStatus=2,e._reactResult=t)}),e}}(n);a="function"===typeof a?zr(a)?3:1:void 0!==a&&null!==a&&a.$$typeof?14:4,a=t.tag=a;var u=Ji(n,i);switch(a){case 1:return $i(e,t,n,u,r);case 3:return Xi(e,t,n,u,r);case 14:return Gi(e,t,n,u,r);default:o("283",n)}}if(a=Mr(t,Er.current),hi(t),a=n(i,a),t.effectTag|=1,"object"===typeof a&&null!==a&&"function"===typeof a.render&&void 0===a.$$typeof){t.tag=2,Cr(n)?(u=!0,jr(t)):u=!1,t.memoizedState=null!==a.state&&void 0!==a.state?a.state:null;var c=n.getDerivedStateFromProps;return"function"===typeof c&&Ei(t,n,c,i),a.updater=Si,t.stateNode=a,a._reactInternalFiber=t,Ci(t,n,i,r),Ki(e,t,n,!0,u,r)}return t.tag=0,qi(e,t,a,r),t.memoizedProps=i,t.child}(e,t,t.type,n);case 0:return $i(e,t,t.type,t.pendingProps,n);case 1:var i=t.type._reactResult;return e=$i(e,t,i,Ji(i,r=t.pendingProps),n),t.memoizedProps=r,e;case 2:return Xi(e,t,t.type,t.pendingProps,n);case 3:return e=Xi(e,t,i=t.type._reactResult,Ji(i,r=t.pendingProps),n),t.memoizedProps=r,e;case 5:return Qi(t),null===(r=t.updateQueue)&&o("282"),i=null!==(i=t.memoizedState)?i.element:null,ni(t,r,t.pendingProps,null,n),(r=t.memoizedState.element)===i?(Vi(),t=Zi(e,t,n)):(i=t.stateNode,(i=(null===e||null===e.child)&&i.hydrate)&&(Di=mr(t.stateNode.containerInfo),Ii=t,i=Ri=!0),i?(t.effectTag|=2,t.child=Fi(t,null,r,n)):(qi(e,t,r,n),Vi()),t=t.child),t;case 7:xi(t),null===e&&Bi(t),r=t.type,i=t.pendingProps;var a=null!==e?e.memoizedProps:null,u=i.children;return gr(r,i)?u=null:null!==a&&gr(r,a)&&(t.effectTag|=16),Yi(e,t),1073741823!==n&&1&t.mode&&i.hidden?(t.expirationTime=1073741823,t.memoizedProps=i,t=null):(qi(e,t,u,n),t.memoizedProps=i,t=t.child),t;case 8:return null===e&&Bi(t),t.memoizedProps=t.pendingProps,null;case 16:return null;case 6:return bi(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=ji(t,null,r,n):qi(e,t,r,n),t.memoizedProps=r,t.child;case 13:return Gi(e,t,t.type,t.pendingProps,n);case 14:return e=Gi(e,t,i=t.type._reactResult,Ji(i,r=t.pendingProps),n),t.memoizedProps=r,e;case 9:return qi(e,t,r=t.pendingProps,n),t.memoizedProps=r,t.child;case 10:return qi(e,t,r=t.pendingProps.children,n),t.memoizedProps=r,t.child;case 15:return qi(e,t,(r=t.pendingProps).children,n),t.memoizedProps=r,t.child;case 12:e:{if(r=t.type._context,i=t.pendingProps,u=t.memoizedProps,a=i.value,t.memoizedProps=i,si(t,a),null!==u){var c=u.value;if(0===(a=c===a&&(0!==c||1/c===1/a)||c!==c&&a!==a?0:0|("function"===typeof r._calculateChangedBits?r._calculateChangedBits(c,a):1073741823))){if(u.children===i.children&&!Sr.current){t=Zi(e,t,n);break e}}else for(null!==(u=t.child)&&(u.return=t);null!==u;){if(null!==(c=u.firstContextDependency))do{if(c.context===r&&0!==(c.observedBits&a)){if(2===u.tag||3===u.tag){var l=Kr(n);l.tag=2,Jr(u,l)}(0===u.expirationTime||u.expirationTime>n)&&(u.expirationTime=n),null!==(l=u.alternate)&&(0===l.expirationTime||l.expirationTime>n)&&(l.expirationTime=n);for(var s=u.return;null!==s;){if(l=s.alternate,0===s.childExpirationTime||s.childExpirationTime>n)s.childExpirationTime=n,null!==l&&(0===l.childExpirationTime||l.childExpirationTime>n)&&(l.childExpirationTime=n);else{if(null===l||!(0===l.childExpirationTime||l.childExpirationTime>n))break;l.childExpirationTime=n}s=s.return}}l=u.child,c=c.next}while(null!==c);else l=12===u.tag&&u.type===t.type?null:u.child;if(null!==l)l.return=u;else for(l=u;null!==l;){if(l===t){l=null;break}if(null!==(u=l.sibling)){u.return=l.return,l=u;break}l=l.return}u=l}}qi(e,t,i.children,n),t=t.child}return t;case 11:return a=t.type,i=(r=t.pendingProps).children,hi(t),i=i(a=di(a,r.unstable_observedBits)),t.effectTag|=1,qi(e,t,i,n),t.memoizedProps=r,t.child;default:o("156")}}function ta(e){e.effectTag|=4}var na=void 0,ra=void 0,ia=void 0;function aa(e,t){var n=t.source,r=t.stack;null===r&&null!==n&&(r=ct(n)),null!==n&&ut(n.type),t=t.value,null!==e&&2===e.tag&&ut(e.type);try{console.error(t)}catch(i){setTimeout(function(){throw i})}}function oa(e){var t=e.ref;if(null!==t)if("function"===typeof t)try{t(null)}catch(n){Aa(e,n)}else t.current=null}function ua(e){switch("function"===typeof Dr&&Dr(e),e.tag){case 2:case 3:oa(e);var t=e.stateNode;if("function"===typeof t.componentWillUnmount)try{t.props=e.memoizedProps,t.state=e.memoizedState,t.componentWillUnmount()}catch(n){Aa(e,n)}break;case 7:oa(e);break;case 6:sa(e)}}function ca(e){return 7===e.tag||5===e.tag||6===e.tag}function la(e){e:{for(var t=e.return;null!==t;){if(ca(t)){var n=t;break e}t=t.return}o("160"),n=void 0}var r=t=void 0;switch(n.tag){case 7:t=n.stateNode,r=!1;break;case 5:case 6:t=n.stateNode.containerInfo,r=!0;break;default:o("161")}16&n.effectTag&&(ir(t,""),n.effectTag&=-17);e:t:for(n=e;;){for(;null===n.sibling;){if(null===n.return||ca(n.return)){n=null;break e}n=n.return}for(n.sibling.return=n.return,n=n.sibling;7!==n.tag&&8!==n.tag;){if(2&n.effectTag)continue t;if(null===n.child||6===n.tag)continue t;n.child.return=n,n=n.child}if(!(2&n.effectTag)){n=n.stateNode;break e}}for(var i=e;;){if(7===i.tag||8===i.tag)if(n)if(r){var a=t,u=i.stateNode,c=n;8===a.nodeType?a.parentNode.insertBefore(u,c):a.insertBefore(u,c)}else t.insertBefore(i.stateNode,n);else r?(a=t,u=i.stateNode,8===a.nodeType?(c=a.parentNode).insertBefore(u,a):(c=a).appendChild(u),null===c.onclick&&(c.onclick=hr)):t.appendChild(i.stateNode);else if(6!==i.tag&&null!==i.child){i.child.return=i,i=i.child;continue}if(i===e)break;for(;null===i.sibling;){if(null===i.return||i.return===e)return;i=i.return}i.sibling.return=i.return,i=i.sibling}}function sa(e){for(var t=e,n=!1,r=void 0,i=void 0;;){if(!n){n=t.return;e:for(;;){switch(null===n&&o("160"),n.tag){case 7:r=n.stateNode,i=!1;break e;case 5:case 6:r=n.stateNode.containerInfo,i=!0;break e}n=n.return}n=!0}if(7===t.tag||8===t.tag){e:for(var a=t,u=a;;)if(ua(u),null!==u.child&&6!==u.tag)u.child.return=u,u=u.child;else{if(u===a)break;for(;null===u.sibling;){if(null===u.return||u.return===a)break e;u=u.return}u.sibling.return=u.return,u=u.sibling}i?(a=r,u=t.stateNode,8===a.nodeType?a.parentNode.removeChild(u):a.removeChild(u)):r.removeChild(t.stateNode)}else if(6===t.tag?(r=t.stateNode.containerInfo,i=!0):ua(t),null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return;6===(t=t.return).tag&&(n=!1)}t.sibling.return=t.return,t=t.sibling}}function fa(e,t){switch(t.tag){case 2:case 3:break;case 7:var n=t.stateNode;if(null!=n){var r=t.memoizedProps,i=null!==e?e.memoizedProps:r;e=t.type;var a=t.updateQueue;if(t.updateQueue=null,null!==a){for(n[D]=r,"input"===e&&"radio"===r.type&&null!=r.name&&xt(n,r),sr(e,i),t=sr(e,r),i=0;i<a.length;i+=2){var u=a[i],c=a[i+1];"style"===u?ur(n,c):"dangerouslySetInnerHTML"===u?rr(n,c):"children"===u?ir(n,c):vt(n,u,c,t)}switch(e){case"input":wt(n,r);break;case"textarea":Kn(n,r);break;case"select":e=n._wrapperState.wasMultiple,n._wrapperState.wasMultiple=!!r.multiple,null!=(a=r.value)?Yn(n,!!r.multiple,a,!1):e!==!!r.multiple&&(null!=r.defaultValue?Yn(n,!!r.multiple,r.defaultValue,!0):Yn(n,!!r.multiple,r.multiple?[]:"",!1))}}}break;case 8:null===t.stateNode&&o("162"),t.stateNode.nodeValue=t.memoizedProps;break;case 5:case 15:case 16:break;default:o("163")}}function ha(e,t,n){(n=Kr(n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){po(r),aa(e,t)},n}function da(e,t,n){(n=Kr(n)).tag=3;var r=e.stateNode;return null!==r&&"function"===typeof r.componentDidCatch&&(n.callback=function(){null===Oa?Oa=new Set([this]):Oa.add(this);var n=t.value,r=t.stack;aa(e,t),this.componentDidCatch(n,{componentStack:null!==r?r:""})}),n}function pa(e){switch(e.tag){case 2:Cr(e.type)&&Tr();var t=e.effectTag;return 1024&t?(e.effectTag=-1025&t|64,e):null;case 3:return Cr(e.type._reactResult)&&Tr(),1024&(t=e.effectTag)?(e.effectTag=-1025&t|64,e):null;case 5:return _i(),Pr(),0!==(64&(t=e.effectTag))&&o("285"),e.effectTag=-1025&t|64,e;case 7:return wi(e),null;case 16:return 1024&(t=e.effectTag)?(e.effectTag=-1025&t|64,e):null;case 6:return _i(),null;case 12:return fi(e),null;default:return null}}na=function(){},ra=function(e,t,n,r,a){var o=e.memoizedProps;if(o!==r){var u=t.stateNode;switch(mi(yi.current),e=null,n){case"input":o=bt(u,o),r=bt(u,r),e=[];break;case"option":o=Gn(u,o),r=Gn(u,r),e=[];break;case"select":o=i({},o,{value:void 0}),r=i({},r,{value:void 0}),e=[];break;case"textarea":o=$n(u,o),r=$n(u,r),e=[];break;default:"function"!==typeof o.onClick&&"function"===typeof r.onClick&&(u.onclick=hr)}lr(n,r),u=n=void 0;var c=null;for(n in o)if(!r.hasOwnProperty(n)&&o.hasOwnProperty(n)&&null!=o[n])if("style"===n){var l=o[n];for(u in l)l.hasOwnProperty(u)&&(c||(c={}),c[u]="")}else"dangerouslySetInnerHTML"!==n&&"children"!==n&&"suppressContentEditableWarning"!==n&&"suppressHydrationWarning"!==n&&"autoFocus"!==n&&(b.hasOwnProperty(n)?e||(e=[]):(e=e||[]).push(n,null));for(n in r){var s=r[n];if(l=null!=o?o[n]:void 0,r.hasOwnProperty(n)&&s!==l&&(null!=s||null!=l))if("style"===n)if(l){for(u in l)!l.hasOwnProperty(u)||s&&s.hasOwnProperty(u)||(c||(c={}),c[u]="");for(u in s)s.hasOwnProperty(u)&&l[u]!==s[u]&&(c||(c={}),c[u]=s[u])}else c||(e||(e=[]),e.push(n,c)),c=s;else"dangerouslySetInnerHTML"===n?(s=s?s.__html:void 0,l=l?l.__html:void 0,null!=s&&l!==s&&(e=e||[]).push(n,""+s)):"children"===n?l===s||"string"!==typeof s&&"number"!==typeof s||(e=e||[]).push(n,""+s):"suppressContentEditableWarning"!==n&&"suppressHydrationWarning"!==n&&(b.hasOwnProperty(n)?(null!=s&&fr(a,n),e||l===s||(e=[])):(e=e||[]).push(n,s))}c&&(e=e||[]).push("style",c),a=e,(t.updateQueue=a)&&ta(t)}},ia=function(e,t,n,r){n!==r&&ta(t)};var ya={readContext:di},ga=Ge.ReactCurrentOwner,va=0,ma=0,ba=!1,_a=null,xa=null,wa=0,ka=!1,Ea=null,Sa=!1,Oa=null;function Ma(){if(null!==_a)for(var e=_a.return;null!==e;){var t=e;switch(t.tag){case 2:var n=t.type.childContextTypes;null!==n&&void 0!==n&&Tr();break;case 3:null!==(n=t.type._reactResult.childContextTypes)&&void 0!==n&&Tr();break;case 5:_i(),Pr();break;case 7:wi(t);break;case 6:_i();break;case 12:fi(t)}e=e.return}xa=null,wa=0,ka=!1,_a=null}function Ca(e){for(;;){var t=e.alternate,n=e.return,r=e.sibling;if(0===(512&e.effectTag)){var a=t,u=(t=e).pendingProps;switch(t.tag){case 0:case 1:break;case 2:Cr(t.type)&&Tr();break;case 3:Cr(t.type._reactResult)&&Tr();break;case 5:_i(),Pr(),(u=t.stateNode).pendingContext&&(u.context=u.pendingContext,u.pendingContext=null),null!==a&&null!==a.child||(Hi(t),t.effectTag&=-3),na(t);break;case 7:wi(t);var c=mi(vi.current),l=t.type;if(null!==a&&null!=t.stateNode)ra(a,t,l,u,c),a.ref!==t.ref&&(t.effectTag|=128);else if(u){var s=mi(yi.current);if(Hi(t)){a=(u=t).stateNode;var f=u.type,h=u.memoizedProps,d=c;switch(a[I]=u,a[D]=h,l=void 0,c=f){case"iframe":case"object":Sn("load",a);break;case"video":case"audio":for(f=0;f<re.length;f++)Sn(re[f],a);break;case"source":Sn("error",a);break;case"img":case"image":case"link":Sn("error",a),Sn("load",a);break;case"form":Sn("reset",a),Sn("submit",a);break;case"details":Sn("toggle",a);break;case"input":_t(a,h),Sn("invalid",a),fr(d,"onChange");break;case"select":a._wrapperState={wasMultiple:!!h.multiple},Sn("invalid",a),fr(d,"onChange");break;case"textarea":Xn(a,h),Sn("invalid",a),fr(d,"onChange")}for(l in lr(c,h),f=null,h)h.hasOwnProperty(l)&&(s=h[l],"children"===l?"string"===typeof s?a.textContent!==s&&(f=["children",s]):"number"===typeof s&&a.textContent!==""+s&&(f=["children",""+s]):b.hasOwnProperty(l)&&null!=s&&fr(d,l));switch(c){case"input":We(a),kt(a,h,!0);break;case"textarea":We(a),Qn(a);break;case"select":case"option":break;default:"function"===typeof h.onClick&&(a.onclick=hr)}l=f,u.updateQueue=l,(u=null!==l)&&ta(t)}else{h=t,a=l,d=u,f=9===c.nodeType?c:c.ownerDocument,s===Jn.html&&(s=Zn(a)),s===Jn.html?"script"===a?((a=f.createElement("div")).innerHTML="<script><\/script>",f=a.removeChild(a.firstChild)):"string"===typeof d.is?f=f.createElement(a,{is:d.is}):(f=f.createElement(a),"select"===a&&d.multiple&&(f.multiple=!0)):f=f.createElementNS(s,a),(a=f)[I]=h,a[D]=u;e:for(h=a,d=t,f=d.child;null!==f;){if(7===f.tag||8===f.tag)h.appendChild(f.stateNode);else if(6!==f.tag&&null!==f.child){f.child.return=f,f=f.child;continue}if(f===d)break;for(;null===f.sibling;){if(null===f.return||f.return===d)break e;f=f.return}f.sibling.return=f.return,f=f.sibling}d=a;var p=c,y=sr(f=l,h=u);switch(f){case"iframe":case"object":Sn("load",d),c=h;break;case"video":case"audio":for(c=0;c<re.length;c++)Sn(re[c],d);c=h;break;case"source":Sn("error",d),c=h;break;case"img":case"image":case"link":Sn("error",d),Sn("load",d),c=h;break;case"form":Sn("reset",d),Sn("submit",d),c=h;break;case"details":Sn("toggle",d),c=h;break;case"input":_t(d,h),c=bt(d,h),Sn("invalid",d),fr(p,"onChange");break;case"option":c=Gn(d,h);break;case"select":d._wrapperState={wasMultiple:!!h.multiple},c=i({},h,{value:void 0}),Sn("invalid",d),fr(p,"onChange");break;case"textarea":Xn(d,h),c=$n(d,h),Sn("invalid",d),fr(p,"onChange");break;default:c=h}lr(f,c),s=void 0;var g=f,v=d,m=c;for(s in m)if(m.hasOwnProperty(s)){var _=m[s];"style"===s?ur(v,_):"dangerouslySetInnerHTML"===s?null!=(_=_?_.__html:void 0)&&rr(v,_):"children"===s?"string"===typeof _?("textarea"!==g||""!==_)&&ir(v,_):"number"===typeof _&&ir(v,""+_):"suppressContentEditableWarning"!==s&&"suppressHydrationWarning"!==s&&"autoFocus"!==s&&(b.hasOwnProperty(s)?null!=_&&fr(p,s):null!=_&&vt(v,s,_,y))}switch(f){case"input":We(d),kt(d,h,!1);break;case"textarea":We(d),Qn(d);break;case"option":null!=h.value&&d.setAttribute("value",""+mt(h.value));break;case"select":(c=d).multiple=!!h.multiple,null!=(d=h.value)?Yn(c,!!h.multiple,d,!1):null!=h.defaultValue&&Yn(c,!!h.multiple,h.defaultValue,!0);break;default:"function"===typeof c.onClick&&(d.onclick=hr)}(u=yr(l,u))&&ta(t),t.stateNode=a}null!==t.ref&&(t.effectTag|=128)}else null===t.stateNode&&o("166");break;case 8:a&&null!=t.stateNode?ia(a,t,a.memoizedProps,u):("string"!==typeof u&&(null===t.stateNode&&o("166")),a=mi(vi.current),mi(yi.current),Hi(t)?(l=(u=t).stateNode,a=u.memoizedProps,l[I]=u,(u=l.nodeValue!==a)&&ta(t)):(l=t,(u=(9===a.nodeType?a:a.ownerDocument).createTextNode(u))[I]=l,t.stateNode=u));break;case 13:case 14:case 16:case 9:case 10:case 15:break;case 6:_i(),na(t);break;case 12:fi(t);break;case 11:break;case 4:o("167");default:o("156")}if(t=_a=null,u=e,1073741823===wa||1073741823!==u.childExpirationTime){for(l=0,a=u.child;null!==a;)c=a.expirationTime,h=a.childExpirationTime,(0===l||0!==c&&c<l)&&(l=c),(0===l||0!==h&&h<l)&&(l=h),a=a.sibling;u.childExpirationTime=l}if(null!==t)return t;null!==n&&0===(512&n.effectTag)&&(null===n.firstEffect&&(n.firstEffect=e.firstEffect),null!==e.lastEffect&&(null!==n.lastEffect&&(n.lastEffect.nextEffect=e.firstEffect),n.lastEffect=e.lastEffect),1<e.effectTag&&(null!==n.lastEffect?n.lastEffect.nextEffect=e:n.firstEffect=e,n.lastEffect=e))}else{if(null!==(e=pa(e)))return e.effectTag&=511,e;null!==n&&(n.firstEffect=n.lastEffect=null,n.effectTag|=512)}if(null!==r)return r;if(null===n)break;e=n}return null}function Ta(e){var t=ea(e.alternate,e,wa);return null===t&&(t=Ca(e)),ga.current=null,t}function Pa(e,t,n){ba&&o("243"),ba=!0,ga.currentDispatcher=ya;var r=e.nextExpirationTimeToWorkOn;r===wa&&e===xa&&null!==_a||(Ma(),wa=r,_a=Br((xa=e).current,null,wa),e.pendingCommitExpirationTime=0);for(var i=!1;;){try{if(t)for(;null!==_a&&!ho();)_a=Ta(_a);else for(;null!==_a;)_a=Ta(_a)}catch(h){if(null===_a)i=!0,po(h);else{null===_a&&o("271");var a=_a,u=a.return;if(null!==u){e:{var c=u,l=a,s=h;u=wa,l.effectTag|=512,l.firstEffect=l.lastEffect=null,ka=!0,s=ai(s,l);do{switch(c.tag){case 5:c.effectTag|=1024,c.expirationTime=u,Zr(c,u=ha(c,s,u));break e;case 2:case 3:l=s;var f=c.stateNode;if(0===(64&c.effectTag)&&null!==f&&"function"===typeof f.componentDidCatch&&(null===Oa||!Oa.has(f))){c.effectTag|=1024,c.expirationTime=u,Zr(c,u=da(c,l,u));break e}}c=c.return}while(null!==c)}_a=Ca(a);continue}i=!0,po(h)}}break}if(ba=!1,li=ci=ui=ga.currentDispatcher=null,i)xa=null,e.finishedWork=null;else if(null!==_a)e.finishedWork=null;else{if(null===(t=e.current.alternate)&&o("281"),xa=null,ka){if(i=e.latestPendingTime,a=e.latestSuspendedTime,u=e.latestPingedTime,0!==i&&i>r||0!==a&&a>r||0!==u&&u>r)return e.didError=!1,0!==(n=e.latestPingedTime)&&n<=r&&(e.latestPingedTime=0),n=e.earliestPendingTime,t=e.latestPendingTime,n===r?e.earliestPendingTime=t===r?e.latestPendingTime=0:t:t===r&&(e.latestPendingTime=n),n=e.earliestSuspendedTime,t=e.latestSuspendedTime,0===n?e.earliestSuspendedTime=e.latestSuspendedTime=r:n>r?e.earliestSuspendedTime=r:t<r&&(e.latestSuspendedTime=r),Gr(r,e),void(e.expirationTime=e.expirationTime);if(!e.didError&&!n)return e.didError=!0,e.nextExpirationTimeToWorkOn=r,r=e.expirationTime=1,void(e.expirationTime=r)}e.pendingCommitExpirationTime=r,e.finishedWork=t}}function Aa(e,t){var n;e:{for(ba&&!Sa&&o("263"),n=e.return;null!==n;){switch(n.tag){case 2:case 3:var r=n.stateNode;if("function"===typeof n.type.getDerivedStateFromCatch||"function"===typeof r.componentDidCatch&&(null===Oa||!Oa.has(r))){Jr(n,e=da(n,e=ai(t,e),1)),ja(n,1),n=void 0;break e}break;case 5:Jr(n,e=ha(n,e=ai(t,e),1)),ja(n,1),n=void 0;break e}n=n.return}5===e.tag&&(Jr(e,n=ha(e,n=ai(t,e),1)),ja(e,1)),n=void 0}return n}function Na(e,t){return 0!==ma?e=ma:ba?e=Sa?1:wa:1&t.mode?(e=Xa?2+10*(1+((e-2+15)/10|0)):2+25*(1+((e-2+500)/25|0)),null!==xa&&e===wa&&(e+=1)):e=1,Xa&&(0===Ha||e>Ha)&&(Ha=e),e}function ja(e,t){e:{(0===e.expirationTime||e.expirationTime>t)&&(e.expirationTime=t);var n=e.alternate;null!==n&&(0===n.expirationTime||n.expirationTime>t)&&(n.expirationTime=t);var r=e.return;if(null===r&&5===e.tag)e=e.stateNode;else{for(;null!==r;){if(n=r.alternate,(0===r.childExpirationTime||r.childExpirationTime>t)&&(r.childExpirationTime=t),null!==n&&(0===n.childExpirationTime||n.childExpirationTime>t)&&(n.childExpirationTime=t),null===r.return&&5===r.tag){e=r.stateNode;break e}r=r.return}e=null}}null!==e&&(!ba&&0!==wa&&t<wa&&Ma(),qr(e,t),ba&&!Sa&&xa===e||(t=e,e=e.expirationTime,null===t.nextScheduledRoot?(t.expirationTime=e,null===Da?(Ia=Da=t,t.nextScheduledRoot=t):(Da=Da.nextScheduledRoot=t).nextScheduledRoot=Ia):(0===(n=t.expirationTime)||e<n)&&(t.expirationTime=e),za||(Ya?$a&&(Ba=t,Ua=1,so(t,1,!0)):1===e?lo(1,null):ao(t,e))),to>eo&&(to=0,o("185")))}function Fa(e,t,n,r,i){var a=ma;ma=1;try{return e(t,n,r,i)}finally{ma=a}}var Ia=null,Da=null,Ra=0,La=void 0,za=!1,Ba=null,Ua=0,Ha=0,Va=!1,Wa=!1,qa=null,Ga=null,Ya=!1,$a=!1,Xa=!1,Ka=null,Qa=a.unstable_now(),Ja=2+(Qa/10|0),Za=Ja,eo=50,to=0,no=null,ro=1;function io(){Ja=2+((a.unstable_now()-Qa)/10|0)}function ao(e,t){if(0!==Ra){if(t>Ra)return;null!==La&&a.unstable_cancelScheduledWork(La)}Ra=t,e=a.unstable_now()-Qa,La=a.unstable_scheduleWork(co,{timeout:10*(t-2)-e})}function oo(){return za?Za:(uo(),0!==Ua&&1073741823!==Ua||(io(),Za=Ja),Za)}function uo(){var e=0,t=null;if(null!==Da)for(var n=Da,r=Ia;null!==r;){var i=r.expirationTime;if(0===i){if((null===n||null===Da)&&o("244"),r===r.nextScheduledRoot){Ia=Da=r.nextScheduledRoot=null;break}if(r===Ia)Ia=i=r.nextScheduledRoot,Da.nextScheduledRoot=i,r.nextScheduledRoot=null;else{if(r===Da){(Da=n).nextScheduledRoot=Ia,r.nextScheduledRoot=null;break}n.nextScheduledRoot=r.nextScheduledRoot,r.nextScheduledRoot=null}r=n.nextScheduledRoot}else{if((0===e||i<e)&&(e=i,t=r),r===Da)break;if(1===e)break;n=r,r=r.nextScheduledRoot}}Ba=t,Ua=e}function co(e){if(e.didTimeout&&null!==Ia){io();var t=Ia;do{var n=t.expirationTime;0!==n&&Ja>=n&&(t.nextExpirationTimeToWorkOn=Ja),t=t.nextScheduledRoot}while(t!==Ia)}lo(0,e)}function lo(e,t){if(Ga=t,uo(),null!==Ga)for(io(),Za=Ja;null!==Ba&&0!==Ua&&(0===e||e>=Ua)&&(!Va||Ja>=Ua);)so(Ba,Ua,Ja>=Ua),uo(),io(),Za=Ja;else for(;null!==Ba&&0!==Ua&&(0===e||e>=Ua);)so(Ba,Ua,!0),uo();if(null!==Ga&&(Ra=0,La=null),0!==Ua&&ao(Ba,Ua),Ga=null,Va=!1,to=0,no=null,null!==Ka)for(e=Ka,Ka=null,t=0;t<e.length;t++){var n=e[t];try{n._onComplete()}catch(r){Wa||(Wa=!0,qa=r)}}if(Wa)throw e=qa,qa=null,Wa=!1,e}function so(e,t,n){if(za&&o("245"),za=!0,null===Ga||n){var r=e.finishedWork;null!==r?fo(e,r,t):(e.finishedWork=null,Pa(e,!1,n),null!==(r=e.finishedWork)&&fo(e,r,t))}else null!==(r=e.finishedWork)?fo(e,r,t):(e.finishedWork=null,Pa(e,!0,n),null!==(r=e.finishedWork)&&(ho()?e.finishedWork=r:fo(e,r,t)));za=!1}function fo(e,t,n){var r=e.firstBatch;if(null!==r&&r._expirationTime<=n&&(null===Ka?Ka=[r]:Ka.push(r),r._defer))return e.finishedWork=t,void(e.expirationTime=0);e.finishedWork=null,e===no?to++:(no=e,to=0),Sa=ba=!0,e.current===t&&o("177"),0===(n=e.pendingCommitExpirationTime)&&o("261"),e.pendingCommitExpirationTime=0,r=t.expirationTime;var i=t.childExpirationTime;if(r=0===r||0!==i&&i<r?i:r,e.didError=!1,0===r?(e.earliestPendingTime=0,e.latestPendingTime=0,e.earliestSuspendedTime=0,e.latestSuspendedTime=0,e.latestPingedTime=0):(0!==(i=e.latestPendingTime)&&(i<r?e.earliestPendingTime=e.latestPendingTime=0:e.earliestPendingTime<r&&(e.earliestPendingTime=e.latestPendingTime)),0===(i=e.earliestSuspendedTime)?qr(e,r):r>e.latestSuspendedTime?(e.earliestSuspendedTime=0,e.latestSuspendedTime=0,e.latestPingedTime=0,qr(e,r)):r<i&&qr(e,r)),Gr(0,e),ga.current=null,1<t.effectTag?null!==t.lastEffect?(t.lastEffect.nextEffect=t,r=t.firstEffect):r=t:r=t.firstEffect,dr=En,Rn(i=Dn())){if("selectionStart"in i)var a={start:i.selectionStart,end:i.selectionEnd};else e:{var u=(a=(a=i.ownerDocument)&&a.defaultView||window).getSelection&&a.getSelection();if(u&&0!==u.rangeCount){a=u.anchorNode;var c=u.anchorOffset,l=u.focusNode;u=u.focusOffset;try{a.nodeType,l.nodeType}catch(L){a=null;break e}var s=0,f=-1,h=-1,d=0,p=0,y=i,g=null;t:for(;;){for(var v;y!==a||0!==c&&3!==y.nodeType||(f=s+c),y!==l||0!==u&&3!==y.nodeType||(h=s+u),3===y.nodeType&&(s+=y.nodeValue.length),null!==(v=y.firstChild);)g=y,y=v;for(;;){if(y===i)break t;if(g===a&&++d===c&&(f=s),g===l&&++p===u&&(h=s),null!==(v=y.nextSibling))break;g=(y=g).parentNode}y=v}a=-1===f||-1===h?null:{start:f,end:h}}else a=null}a=a||{start:0,end:0}}else a=null;for(pr={focusedElem:i,selectionRange:a},En=!1,Ea=r;null!==Ea;){i=!1,a=void 0;try{for(;null!==Ea;){if(256&Ea.effectTag){var m=Ea.alternate;e:switch(c=Ea,c.tag){case 2:case 3:if(256&c.effectTag&&null!==m){var b=m.memoizedProps,_=m.memoizedState,x=c.stateNode;x.props=c.memoizedProps,x.state=c.memoizedState;var w=x.getSnapshotBeforeUpdate(b,_);x.__reactInternalSnapshotBeforeUpdate=w}break e;case 5:case 7:case 8:case 6:break e;default:o("163")}}Ea=Ea.nextEffect}}catch(L){i=!0,a=L}i&&(null===Ea&&o("178"),Aa(Ea,a),null!==Ea&&(Ea=Ea.nextEffect))}for(Ea=r;null!==Ea;){m=!1,b=void 0;try{for(;null!==Ea;){var k=Ea.effectTag;if(16&k&&ir(Ea.stateNode,""),128&k){var E=Ea.alternate;if(null!==E){var S=E.ref;null!==S&&("function"===typeof S?S(null):S.current=null)}}switch(14&k){case 2:la(Ea),Ea.effectTag&=-3;break;case 6:la(Ea),Ea.effectTag&=-3,fa(Ea.alternate,Ea);break;case 4:fa(Ea.alternate,Ea);break;case 8:sa(_=Ea),_.return=null,_.child=null,_.alternate&&(_.alternate.child=null,_.alternate.return=null)}Ea=Ea.nextEffect}}catch(L){m=!0,b=L}m&&(null===Ea&&o("178"),Aa(Ea,b),null!==Ea&&(Ea=Ea.nextEffect))}if(S=pr,E=Dn(),k=S.focusedElem,b=S.selectionRange,E!==k&&k&&k.ownerDocument&&function e(t,n){return!(!t||!n)&&(t===n||(!t||3!==t.nodeType)&&(n&&3===n.nodeType?e(t,n.parentNode):"contains"in t?t.contains(n):!!t.compareDocumentPosition&&!!(16&t.compareDocumentPosition(n))))}(k.ownerDocument.documentElement,k)){null!==b&&Rn(k)&&(E=b.start,void 0===(S=b.end)&&(S=E),"selectionStart"in k?(k.selectionStart=E,k.selectionEnd=Math.min(S,k.value.length)):(E=((m=k.ownerDocument||document)&&m.defaultView||window).getSelection(),_=k.textContent.length,S=Math.min(b.start,_),b=void 0===b.end?S:Math.min(b.end,_),!E.extend&&S>b&&(_=b,b=S,S=_),_=In(k,S),x=In(k,b),_&&x&&(1!==E.rangeCount||E.anchorNode!==_.node||E.anchorOffset!==_.offset||E.focusNode!==x.node||E.focusOffset!==x.offset)&&((m=m.createRange()).setStart(_.node,_.offset),E.removeAllRanges(),S>b?(E.addRange(m),E.extend(x.node,x.offset)):(m.setEnd(x.node,x.offset),E.addRange(m))))),E=[];for(S=k;S=S.parentNode;)1===S.nodeType&&E.push({element:S,left:S.scrollLeft,top:S.scrollTop});for("function"===typeof k.focus&&k.focus(),k=0;k<E.length;k++)(S=E[k]).element.scrollLeft=S.left,S.element.scrollTop=S.top}for(pr=null,En=!!dr,dr=null,e.current=t,Ea=r;null!==Ea;){r=!1,k=void 0;try{for(E=n;null!==Ea;){var O=Ea.effectTag;if(36&O){var M=Ea.alternate;switch(m=E,(S=Ea).tag){case 2:case 3:var C=S.stateNode;if(4&S.effectTag)if(null===M)C.props=S.memoizedProps,C.state=S.memoizedState,C.componentDidMount();else{var T=M.memoizedProps,P=M.memoizedState;C.props=S.memoizedProps,C.state=S.memoizedState,C.componentDidUpdate(T,P,C.__reactInternalSnapshotBeforeUpdate)}var A=S.updateQueue;null!==A&&(C.props=S.memoizedProps,C.state=S.memoizedState,ri(0,A,C));break;case 5:var N=S.updateQueue;if(null!==N){if(b=null,null!==S.child)switch(S.child.tag){case 7:b=S.child.stateNode;break;case 2:case 3:b=S.child.stateNode}ri(0,N,b)}break;case 7:var j=S.stateNode;null===M&&4&S.effectTag&&yr(S.type,S.memoizedProps)&&j.focus();break;case 8:case 6:case 15:case 16:break;default:o("163")}}if(128&O){var F=Ea.ref;if(null!==F){var I=Ea.stateNode;switch(Ea.tag){case 7:var D=I;break;default:D=I}"function"===typeof F?F(D):F.current=D}}var R=Ea.nextEffect;Ea.nextEffect=null,Ea=R}}catch(L){r=!0,k=L}r&&(null===Ea&&o("178"),Aa(Ea,k),null!==Ea&&(Ea=Ea.nextEffect))}ba=Sa=!1,"function"===typeof Ir&&Ir(t.stateNode),O=t.expirationTime,t=t.childExpirationTime,0===(t=0===O||0!==t&&t<O?t:O)&&(Oa=null),e.expirationTime=t,e.finishedWork=null}function ho(){return!!Va||!(null===Ga||Ga.timeRemaining()>ro)&&(Va=!0)}function po(e){null===Ba&&o("246"),Ba.expirationTime=0,Wa||(Wa=!0,qa=e)}function yo(e,t){var n=Ya;Ya=!0;try{return e(t)}finally{(Ya=n)||za||lo(1,null)}}function go(e,t){if(Ya&&!$a){$a=!0;try{return e(t)}finally{$a=!1}}return e(t)}function vo(e,t,n){if(Xa)return e(t,n);Ya||za||0===Ha||(lo(Ha,null),Ha=0);var r=Xa,i=Ya;Ya=Xa=!0;try{return e(t,n)}finally{Xa=r,(Ya=i)||za||lo(1,null)}}function mo(e,t,n,r,i){var a=t.current;return n=function(e){if(!e)return kr;e:{(2!==tn(e=e._reactInternalFiber)||2!==e.tag&&3!==e.tag)&&o("170");var t=e;do{switch(t.tag){case 5:t=t.stateNode.context;break e;case 2:if(Cr(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}break;case 3:if(Cr(t.type._reactResult)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);o("171"),t=void 0}if(2===e.tag){var n=e.type;if(Cr(n))return Nr(e,n,t)}else if(3===e.tag&&Cr(n=e.type._reactResult))return Nr(e,n,t);return t}(n),null===t.context?t.context=n:t.pendingContext=n,t=i,(i=Kr(r)).payload={element:e},null!==(t=void 0===t?null:t)&&(i.callback=t),Jr(a,i),ja(a,r),r}function bo(e,t,n,r){var i=t.current;return mo(e,t,n,i=Na(oo(),i),r)}function _o(e){if(!(e=e.current).child)return null;switch(e.child.tag){case 7:default:return e.child.stateNode}}function xo(e){var t=2+25*(1+((oo()-2+500)/25|0));t<=va&&(t=va+1),this._expirationTime=va=t,this._root=e,this._callbacks=this._next=null,this._hasChildren=this._didComplete=!1,this._children=null,this._defer=!0}function wo(){this._callbacks=null,this._didCommit=!1,this._onCommit=this._onCommit.bind(this)}function ko(e,t,n){e={current:t=new Lr(5,null,null,t?3:0),containerInfo:e,pendingChildren:null,earliestPendingTime:0,latestPendingTime:0,earliestSuspendedTime:0,latestSuspendedTime:0,latestPingedTime:0,didError:!1,pendingCommitExpirationTime:0,finishedWork:null,timeoutHandle:-1,context:null,pendingContext:null,hydrate:n,nextExpirationTimeToWorkOn:0,expirationTime:0,firstBatch:null,nextScheduledRoot:null},this._internalRoot=t.stateNode=e}function Eo(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function So(e,t,n,r,i){Eo(n)||o("200");var a=n._reactRootContainer;if(a){if("function"===typeof i){var u=i;i=function(){var e=_o(a._internalRoot);u.call(e)}}null!=e?a.legacy_renderSubtreeIntoContainer(e,t,i):a.render(t,i)}else{if(a=n._reactRootContainer=function(e,t){if(t||(t=!(!(t=e?9===e.nodeType?e.documentElement:e.firstChild:null)||1!==t.nodeType||!t.hasAttribute("data-reactroot"))),!t)for(var n;n=e.lastChild;)e.removeChild(n);return new ko(e,!1,t)}(n,r),"function"===typeof i){var c=i;i=function(){var e=_o(a._internalRoot);c.call(e)}}go(function(){null!=e?a.legacy_renderSubtreeIntoContainer(e,t,i):a.render(t,i)})}return _o(a._internalRoot)}function Oo(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;return Eo(t)||o("200"),function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:Ke,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)}Ce=function(e,t,n){switch(t){case"input":if(wt(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=B(r);i||o("90"),qe(r),wt(r,i)}}}break;case"textarea":Kn(e,n);break;case"select":null!=(t=n.value)&&Yn(e,!!n.multiple,t,!1)}},xo.prototype.render=function(e){this._defer||o("250"),this._hasChildren=!0,this._children=e;var t=this._root._internalRoot,n=this._expirationTime,r=new wo;return mo(e,t,null,n,r._onCommit),r},xo.prototype.then=function(e){if(this._didComplete)e();else{var t=this._callbacks;null===t&&(t=this._callbacks=[]),t.push(e)}},xo.prototype.commit=function(){var e=this._root._internalRoot,t=e.firstBatch;if(this._defer&&null!==t||o("251"),this._hasChildren){var n=this._expirationTime;if(t!==this){this._hasChildren&&(n=this._expirationTime=t._expirationTime,this.render(this._children));for(var r=null,i=t;i!==this;)r=i,i=i._next;null===r&&o("251"),r._next=i._next,this._next=t,e.firstBatch=this}this._defer=!1,t=n,za&&o("253"),Ba=e,Ua=t,so(e,t,!0),lo(1,null),t=this._next,this._next=null,null!==(t=e.firstBatch=t)&&t._hasChildren&&t.render(t._children)}else this._next=null,this._defer=!1},xo.prototype._onComplete=function(){if(!this._didComplete){this._didComplete=!0;var e=this._callbacks;if(null!==e)for(var t=0;t<e.length;t++)(0,e[t])()}},wo.prototype.then=function(e){if(this._didCommit)e();else{var t=this._callbacks;null===t&&(t=this._callbacks=[]),t.push(e)}},wo.prototype._onCommit=function(){if(!this._didCommit){this._didCommit=!0;var e=this._callbacks;if(null!==e)for(var t=0;t<e.length;t++){var n=e[t];"function"!==typeof n&&o("191",n),n()}}},ko.prototype.render=function(e,t){var n=this._internalRoot,r=new wo;return null!==(t=void 0===t?null:t)&&r.then(t),bo(e,n,null,r._onCommit),r},ko.prototype.unmount=function(e){var t=this._internalRoot,n=new wo;return null!==(e=void 0===e?null:e)&&n.then(e),bo(null,t,null,n._onCommit),n},ko.prototype.legacy_renderSubtreeIntoContainer=function(e,t,n){var r=this._internalRoot,i=new wo;return null!==(n=void 0===n?null:n)&&i.then(n),bo(t,r,e,i._onCommit),i},ko.prototype.createBatch=function(){var e=new xo(this),t=e._expirationTime,n=this._internalRoot,r=n.firstBatch;if(null===r)n.firstBatch=e,e._next=null;else{for(n=null;null!==r&&r._expirationTime<=t;)n=r,r=r._next;e._next=r,null!==n&&(n._next=e)}return e},Fe=yo,Ie=vo,De=function(){za||0===Ha||(lo(Ha,null),Ha=0)};var Mo={createPortal:Oo,findDOMNode:function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternalFiber;return void 0===t&&("function"===typeof e.render?o("188"):o("268",Object.keys(e))),e=null===(e=rn(t))?null:e.stateNode},hydrate:function(e,t,n){return So(null,e,t,!0,n)},render:function(e,t,n){return So(null,e,t,!1,n)},unstable_renderSubtreeIntoContainer:function(e,t,n,r){return(null==e||void 0===e._reactInternalFiber)&&o("38"),So(e,t,n,!1,r)},unmountComponentAtNode:function(e){return Eo(e)||o("40"),!!e._reactRootContainer&&(go(function(){So(null,null,e,!1,function(){e._reactRootContainer=null})}),!0)},unstable_createPortal:function(){return Oo.apply(void 0,arguments)},unstable_batchedUpdates:yo,unstable_interactiveUpdates:vo,flushSync:function(e,t){za&&o("187");var n=Ya;Ya=!0;try{return Fa(e,t)}finally{Ya=n,lo(1,null)}},unstable_flushControlled:function(e){var t=Ya;Ya=!0;try{Fa(e)}finally{(Ya=t)||za||lo(1,null)}},__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:{Events:[L,z,B,A.injectEventPluginsByName,m,G,function(e){O(e,q)},Ne,je,Cn,j]},unstable_createRoot:function(e,t){return Eo(e)||o("278"),new ko(e,!0,null!=t&&!0===t.hydrate)}};!function(e){var t=e.findFiberByHostInstance;(function(e){if("undefined"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__)return!1;var t=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(t.isDisabled||!t.supportsFiber)return!0;try{var n=t.inject(e);Ir=Rr(function(e){return t.onCommitFiberRoot(n,e)}),Dr=Rr(function(e){return t.onCommitFiberUnmount(n,e)})}catch(r){}})(i({},e,{findHostInstanceByFiber:function(e){return null===(e=rn(e))?null:e.stateNode},findFiberByHostInstance:function(e){return t?t(e):null}}))}({findFiberByHostInstance:R,bundleType:0,version:"16.5.2",rendererPackageName:"react-dom"});var Co={default:Mo},To=Co&&Mo||Co;e.exports=To.default||To},function(e,t,n){"use strict";e.exports=n(13)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=null,i=!1,a=!1,o="object"===typeof performance&&"function"===typeof performance.now,u={timeRemaining:o?function(){var e=y()-performance.now();return 0<e?e:0}:function(){var e=y()-Date.now();return 0<e?e:0},didTimeout:!1};function c(){if(!i){var e=r.timesOutAt;a?p():a=!0,d(s,e)}}function l(){var e=r,t=r.next;if(r===t)r=null;else{var n=r.previous;r=n.next=t,t.previous=n}e.next=e.previous=null,(e=e.callback)(u)}function s(e){i=!0,u.didTimeout=e;try{if(e)for(;null!==r;){var n=t.unstable_now();if(!(r.timesOutAt<=n))break;do{l()}while(null!==r&&r.timesOutAt<=n)}else if(null!==r)do{l()}while(null!==r&&0<y()-t.unstable_now())}finally{i=!1,null!==r?c():a=!1}}var f,h,d,p,y,g=Date,v="function"===typeof setTimeout?setTimeout:void 0,m="function"===typeof clearTimeout?clearTimeout:void 0,b="function"===typeof requestAnimationFrame?requestAnimationFrame:void 0,_="function"===typeof cancelAnimationFrame?cancelAnimationFrame:void 0;function x(e){f=b(function(t){m(h),e(t)}),h=v(function(){_(f),e(t.unstable_now())},100)}if(o){var w=performance;t.unstable_now=function(){return w.now()}}else t.unstable_now=function(){return g.now()};if("undefined"===typeof window){var k=-1;d=function(e){k=setTimeout(e,0,!0)},p=function(){clearTimeout(k)},y=function(){return 0}}else if(window._schedMock){var E=window._schedMock;d=E[0],p=E[1],y=E[2]}else{"undefined"!==typeof console&&("function"!==typeof b&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills"),"function"!==typeof _&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills"));var S=null,O=!1,M=-1,C=!1,T=!1,P=0,A=33,N=33;y=function(){return P};var j="__reactIdleCallback$"+Math.random().toString(36).slice(2);window.addEventListener("message",function(e){if(e.source===window&&e.data===j){O=!1;var n=t.unstable_now();if(e=!1,0>=P-n){if(!(-1!==M&&M<=n))return void(C||(C=!0,x(F)));e=!0}if(M=-1,n=S,S=null,null!==n){T=!0;try{n(e)}finally{T=!1}}}},!1);var F=function(e){C=!1;var t=e-P+N;t<N&&A<N?(8>t&&(t=8),N=t<A?A:t):A=t,P=e+N,O||(O=!0,window.postMessage(j,"*"))};d=function(e,t){S=e,M=t,T?window.postMessage(j,"*"):C||(C=!0,x(F))},p=function(){S=null,O=!1,M=-1}}t.unstable_scheduleWork=function(e,n){var i=t.unstable_now();if(e={callback:e,timesOutAt:n=void 0!==n&&null!==n&&null!==n.timeout&&void 0!==n.timeout?i+n.timeout:i+5e3,next:null,previous:null},null===r)r=e.next=e.previous=e,c();else{i=null;var a=r;do{if(a.timesOutAt>n){i=a;break}a=a.next}while(a!==r);null===i?i=r:i===r&&(r=e,c()),(n=i.previous).next=i.previous=e,e.next=i,e.previous=n}return e},t.unstable_cancelScheduledWork=function(e){var t=e.next;if(null!==t){if(t===e)r=null;else{e===r&&(r=t);var n=e.previous;n.next=t,t.previous=n}e.next=e.previous=null}}},,,function(e,t,n){}]]);
//# sourceMappingURL=1.0b903c68.chunk.js.map